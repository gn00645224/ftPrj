"use strict";angular.module("App").controller("mallCartCtl",["$cartChoosedData","NimUtils","enterViewLoad","appUtils","$localStorage","$ionicListDelegate","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$rootScope","$scope","$ionicHistory",function(a,t,n,o,e,c,r,s,i,d,l,u,f,p,g){p.back=function(){o.back()},p.$on("$ionicView.beforeEnter",function(){p.fromStateName=f.fromStateName}),p.$on("$ionicView.enter",function(){"goodsDetail"!=f.fromStateName&&g.clearHistory();var r=function(t){for(var o=0;o<t.length;o++)p.totalUnread=p.totalUnread+t[o].unread};p.totalUnread=0,r(t.sessionList),f.$on("updateSessions",function(t,o){i(function(){p.totalUnread=0,r(o)})}),p.activeTabName="mall-cart",p.loadData(),p.isEditStatus=!1}),p.loadData=function(){p.shoppingCartList=o.shoppingCartList,p.shoppingCartCount=o.shoppingCartCount,p.allSelected=!1,d.post(l.ProductOrder.carts.url,p.shoppingCartList).then(function(t){for(var o=0;o<t.data.length;o++)t.data[o].CartProductInfos.filter(function(t){return t.sum=t.Quantity*t.UnitPrice,t});p.cartGoods=t.data}).catch(function(){n.customload("获取购物车失败")})},p.goConfirmOrder=function(){for(var t=JSON.parse(JSON.stringify(p.cartGoods))||[],o=0;o<t.length;o++)t[o].CartProductInfos=t[o].CartProductInfos.filter(function(t){return t.Selected});for(var r=0;r<t.length;r++)t[r].CartProductInfos.length<=0&&t.splice(r,1);t.length<1?n.customload("请选择购买的商品"):(a.products=t,a.totalMoney=p.moneyTotal,u.go("confirmOrder"))},p.deleteProducts=function(){for(var t=JSON.parse(JSON.stringify(p.cartGoods))||[],o=0;o<t.length;o++)t[o].CartProductInfos=t[o].CartProductInfos.filter(function(t){return t.Selected});for(var r=0;r<t.length;r++)t[r].CartProductInfos.length<=0&&t.splice(r,1);if(t.length<1)n.customload("请选择需要删除的商品");else{for(o=0;o<t.length;o++)for(r=0;r<t[o].CartProductInfos.length;r++)for(var a=0;a<e.shoppingCartList.length;a++)e.shoppingCartList[a].ShopId==t[o].CartProductInfos[r].ShopId&&e.shoppingCartList[a].ProductId==t[o].CartProductInfos[r].ProductId&&e.shoppingCartList[a].ProductSKUId==t[o].CartProductInfos[r].ProductSKUId&&e.shoppingCartList.splice(a,1);n.customload("删除成功"),p.loadData(),p.isEditStatus=!1}},p.deleteProduct=function(t,o,r){for(var a=0;a<e.shoppingCartList.length;a++)e.shoppingCartList[a].ShopId==r.ShopId&&e.shoppingCartList[a].ProductId==r.ProductId&&e.shoppingCartList[a].ProductSKUId==r.ProductSKUId&&e.shoppingCartList.splice(a,1);p.cartGoods[t].CartProductInfos.splice(o,1),p.echoChanegToAll(),c.closeOptionButtons()},p.reduceCount=function(t,o){t.stopPropagation(),o.Quantity=1<o.Quantity?--o.Quantity:1},p.addCount=function(t,o){t.stopPropagation(),o.Quantity=++o.Quantity},p.allSelected=!1,p.echoChanegToAll=function(){for(var t=0,o=0,r=0;r<p.cartGoods.length;r++){o+=p.cartGoods[r].CartProductInfos.length;for(var a=0;a<p.cartGoods[r].CartProductInfos.length;a++)p.cartGoods[r].CartProductInfos[a].Selected&&t++}p.allSelected=t==o&&0<t},p.echoChange=function(t,o){t.Selected=!t.Selected,p.echoChanegToAll()},p.selectAllClick=function(t){p.allSelected=t;for(var o=0;o<p.cartGoods.length;o++)for(var r=0;r<p.cartGoods[o].CartProductInfos.length;r++)p.cartGoods[o].CartProductInfos[r].Selected=t},p.$watch("cartGoods",function(t,o,r){for(var a in p.moneyTotal=0,p.selectedGoods=0,p.goodsTotal=0,t)for(var n=0;n<t[a].CartProductInfos.length;n++){var e=t[a].CartProductInfos[n].Quantity*t[a].CartProductInfos[n].UnitPrice;p.cartGoods[a].CartProductInfos[n].sum=e.toFixed(2),p.goodsTotal=p.goodsTotal+t[a].CartProductInfos[n].Quantity,t[a].CartProductInfos[n].Selected&&(p.moneyTotal+=e,p.selectedGoods=p.selectedGoods+t[a].CartProductInfos[n].Quantity)}},!0)}]).factory("$cartChoosedData",[function(){var t=function(){};return t.prototype={products:null,totalMoney:null},new t}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("mallCart",{nativeTransitions:null,url:"/mall/cart",templateUrl:"views/mall/mall-cart/mall-cart.html",controller:"mallCartCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("mallClassifyCtl",["enterViewLoad","NimUtils","appUtils","$location","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(t,n,o,e,i,a,c,r,l,s,d,u,$,f,p,g){u.$on("$ionicView.enter",function(){var o=function(t){for(var n=0;n<t.length;n++)u.totalUnread=u.totalUnread+t[n].unread};u.totalUnread=0,o(n.sessionList),$.$on("updateSessions",function(t,n){r(function(){u.totalUnread=0,o(n)})}),g.clearHistory(),u.activeTabName="mall-classify"}),u.back=function(){o.back()},u.loadData=function(){l.get(s.Category.query.url+"?pid=").then(function(t){u.classifyList=t.data}).catch(function(){t.customload("获取分类列表失败")})},u.loadData(),u.groupActiveIndex=0,u.switchGroupIndex=function(t){u.groupActiveIndex=t},u.renderdone=!0,u.$on("ngRepeatFinished",function(t){u.renderdone=!1})}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("mallClassify",{nativeTransitions:null,url:"/mall/classify",templateUrl:"views/mall/mall-classify/mall-classify.html",controller:"mallClassifyCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("mallHomeCtl",["enterViewLoad","NimUtils","appUtils","$ionicSlideBoxDelegate","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,a,t,l,o,i,n,r,s,m,c,d,p,u,g){function h(a){r.post(s.Product.query.url,c.queryData).then(function(e){(!e.data||e.data.length<=0)&&(c.haveMore=!1,c.$broadcast("scroll.refreshComplete"),c.$broadcast("scroll.infiniteScrollComplete"),a)||(c.haveMore=!0,a?(c.queryData.pagenum+=1,c.productList=c.productList.concat(e.data),c.$broadcast("scroll.infiniteScrollComplete")):(c.queryData.pagenum=1,c.productList=e.data,c.$broadcast("scroll.refreshComplete")))}).catch(function(){c.haveMore=!1,p.show({template:"获取数据失败",duration:1500}),c.$broadcast("scroll.infiniteScrollComplete"),c.$broadcast("scroll.refreshComplete")})}c.back=function(){m.go("tabs.realHome")},c.statusData=t.statusData,c.$on("$ionicView.enter",function(){var t=function(e){for(var a=0;a<e.length;a++)c.totalUnread=c.totalUnread+e[a].unread};c.totalUnread=0,t(a.sessionList),d.$on("updateSessions",function(e,a){n(function(){c.totalUnread=0,t(a)})}),g.clearHistory(),c.activeTabName="mall-home",c.loadData(),r.get(s.Shoper.get.url).then(function(e){c.myShopInfo=e.data}).catch(function(e){c.myShopInfo=""})}),c.vipFourImgs=["imgs/mall/home/vip4-1.jpg","imgs/mall/home/vip4-2.jpg","imgs/mall/home/vip4-3.jpg","imgs/mall/home/vip4-4.jpg"],c.saleTwoImgs=["imgs/mall/home/sale1.jpg","imgs/mall/home/sale2.jpg","imgs/mall/home/sale3.jpg","imgs/mall/home/sale4.jpg"],c.saleFourImgs=["imgs/mall/home/sale4-1.jpg","imgs/mall/home/sale4-2.jpg","imgs/mall/home/sale4-3.jpg","imgs/mall/home/sale4-4.jpg"],c.initSwiper=function(){var t=new Swiper("#mall_home_nav",{freeMode:!0,freeModeMomentumRatio:.5,slidesPerView:"auto"});swiperWidth=t.container[0].clientWidth,maxTranslate=t.maxTranslate(),maxWidth=-maxTranslate+swiperWidth/2,$(".swiper-container").on("touchstart",function(e){e.preventDefault()}),t.on("tap",function(e,a){slide=e.slides[e.clickedIndex],slideLeft=slide.offsetLeft,slideWidth=slide.clientWidth,slideCenter=slideLeft+slideWidth/2,t.setWrapperTransition(300),slideCenter<swiperWidth/2?t.setWrapperTranslate(0):slideCenter>maxWidth?t.setWrapperTranslate(maxTranslate):(nowTlanslate=slideCenter-swiperWidth/2,t.setWrapperTranslate(-nowTlanslate))})},c.adImgList=["imgs/mall/home/banner1.jpg","imgs/mall/home/banner2.jpg","imgs/mall/home/banner3.jpg","imgs/mall/home/banner4.jpg","imgs/mall/home/banner5.jpg"],c.currentAdSlideIndex=0,c.changeAdSlide=function(e){c.currentAdSlideIndex=e},c.loadData=function(){},c.queryData={pagenum:0,pagesize:10,sort:12,query:"",SaleType:"59"},c.haveMore=!0,c.productList=[],c.loadMore=function(e){h(!0)},c.loadRefresh=function(e){c.queryData.pagenum=0,h(!1)}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("mallHome",{nativeTransitions:null,url:"/mall/home",templateUrl:"views/mall/mall-home/mall-home.html",controller:"mallHomeCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("mallMessageCtl",["NimUtils","appUtils","$interval","$localStorage","$ionicLoading","$ionicModal","$ionicListDelegate","$ionicHistory","$scope","$rootScope","$state","$ionicPopover","$timeout",function(o,t,n,a,e,s,i,c,r,l,u,m,f){r.activeTabName="mall-message",r.goDialogBox=function(t){"team"==t.scene?u.go("groupDialogBox",{id:t.to}):"p2p"==t.scene&&u.go("dialogBox",{id:t.to})},r.$on("$ionicView.leave",function(){i.closeOptionButtons()}),l.$on("SYSMSGUPDATE",function(t,n){f(function(){r.sysMsgCount=o.sysMsg.allSysMsgUnread})}),r.$on("$ionicView.enter",function(){c.clearHistory();var a=function(t){for(var n=0;n<t.length;n++)r.totalUnread=r.totalUnread+t[n].unread};r.sysMsgCount=o.sysMsg.allSysMsgUnread,r.totalUnread=0,a(o.sessionList),l.$on("updateSessions",function(t,n){f(function(){r.totalUnread=0,a(n),r.conList=n.filter(function(n){if(n.name="",n.avatar="","p2p"==n.scene){var t;t=o.sessionUsersInfo[n.to],n.avatar=t.avatar||"",n.name=t.nick||"",n.custom=t.custom||""}else if("team"==n.scene){var a=o.myTeams.find(function(t){return t.teamId===n.to});a?(n.name=a.name||"",n.avatar=a.avatar||""):(n.name="群"+n.to,n.avatar=n.avatar||"")}return"custom"==n.lastMsg.type&&"string"==typeof n.lastMsg.content&&(n.lastMsg.content=JSON.parse(n.lastMsg.content)),n})})}),r.conList=o.sessionList.filter(function(n){if(n.name="",n.avatar="","p2p"==n.scene){var t;t=o.sessionUsersInfo[n.to],n.avatar=t.avatar||"",n.name=t.alias||t.nick||"",n.custom=t.custom||""}else if("team"==n.scene){var a=o.myTeams.find(function(t){return t.teamId===n.to});a?(n.name=a.name||"",n.avatar=a.avatar||""):(n.name="群"+n.to,n.avatar=n.avatar||"")}return"custom"==n.lastMsg.type&&"string"==typeof n.lastMsg.content&&(n.lastMsg.content=JSON.parse(n.lastMsg.content)),n})}),r.extendPtPInfo=function(){},r.deleteSession=function(t,a,e){i.closeOptionButtons(),nim.deleteSession({scene:t.scene,to:t.to,done:function(t,n){t?enterViewLoad.customload("删除失败"):(r.conList.splice(a,1),o.sessionList.splice(a,1),f(function(){r.totalUnread=r.totalUnread-e,o.sessionUnread=r.totalUnread,r.conList=r.conList}))}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("mallMessage",{nativeTransitions:null,url:"/mall/message",templateUrl:"views/mall/mall-message/mall-message.html",controller:"mallMessageCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("mallMineCtl",["$myBusinessData","NimUtils","appUtils","enterViewLoad","$localStorage","$ionicScrollDelegate","$ionicModal","$ionicLoading","$timeout","$interval","$ionicHistory","$Factory","$scope","$state","$http","$rootScope",function(e,t,n,o,a,i,s,l,r,d,g,c,m,p,u,h){m.activeTabName="mall-mine",m.statusData=n.statusData,m.goMyBusiness=function(t){e.tag=t,p.go("myBusiness")},s.fromTemplateUrl("mallmine_real_name_modal",{scope:m,animation:"slide-in-left"}).then(function(t){m.realnameModal=t}),m.showRealNameModal=function(){m.realnameModal.show()},m.closeRealNameModal=function(){m.realnameModal.hide()},m.childPageName=null,m.showChildPage=function(t){m.Logined?m.childPageName=t:p.go("login"),i.resize()},m.hideChildPage=function(){m.childPageName=null,i.resize()},m.showMapType=!1,m.toggleMapType=function(){m.showMapType=!m.showMapType},m.$on("$ionicView.leave",function(){}),m.Logined=!1,m.myShopInfo="",m.$on("$ionicView.enter",function(){g.clearHistory();var a=function(t){for(var e=0;e<t.length;e++)m.totalUnread=m.totalUnread+t[e].unread};m.totalUnread=0,a(t.sessionList),h.$on("updateSessions",function(t,e){r(function(){m.totalUnread=0,a(e)})}),u.get(c.Account.getuserinfo.url).then(function(t){m.myInfo=t.data,m.Logined=!0}).catch(function(t){m.childPageName=null,m.Logined=!1,(t.status=401)||o.customload(t.Message)}),u.get(c.Shoper.get.url).then(function(t){m.myShopInfo=t.data}).catch(function(t){m.myShopInfo=""}),u.post(c.Zone.home.url+"?uid=0",{type:0,pagesize:0}).then(function(t){for(var e=0;e<t.data.length;e++)if(10==t.data[e].Type)m.dynamicData=t.data[e].List.filter(function(t){return n.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},t}),m.newsList=[],m.newsList=t.data[e].List.map(function(t){return t.Content.text}),new Swiper(".personal-tl-swiper",{direction:"vertical",autoplay:!0,loop:1<m.newsList.length});else if(20==t.data[e].Type)m.imagesData=t.data[e].List;else if(30==t.data[e].Type)m.videosData=t.data[e].List.filter(function(t){return n.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},t});else if(60==t.data[e].Type)0<t.data[e].List.length?(n.isJsonString(t.data[e].List[0].Content)&&(m.honorImageUrl=JSON.parse(t.data[e].List[0].Content).Options[0].ImgUrl),m.honorImageId=t.data[e].List[0].Id):m.honorImageUrl="";else if(50==t.data[e].Type)if(0<t.data[e].List.length){(new Date).getTime();n.isJsonString(t.data[e].List[0].Content)&&(m.posterImageUrl=JSON.parse(t.data[e].List[0].Content).Options[0].ImgUrl),m.posterImageId=t.data[e].List[0].Id}else m.posterImageUrl="";else 80==t.data[e].Type?0<t.data[e].List.length?m.photoBgImg=t.data[e].List[0].Content:m.photoBgImg="":90==t.data[e].Type&&(0<t.data[e].List.length?m.videoBgImg=t.data[e].List[0].Content:m.videoBgImg="")}).catch(function(){o.customload("加载数据失败"),m.photoBgImg="",m.videoBgImg="",m.posterImageUrl="",m.honorImageUrl=""})})}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("mallMine",{nativeTransitions:null,url:"/mall/mine",templateUrl:"views/mall/mall-mine/mall-mine.html",controller:"mallMineCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("chatListCtl",["NimUtils","appUtils","$interval","$localStorage","$ionicLoading","$ionicModal","$ionicListDelegate","$ionicHistory","$scope","$rootScope","$state","$ionicPopover","$timeout",function(o,t,n,a,e,s,i,r,c,l,m,d,u){c.tabActiveName="forthTab",c.createModal=function(){s.fromTemplateUrl("chatList_nav_modal",{scope:c,animation:"slide-in-up"}).then(function(t){c.modal=t}),c.showModal=function(){c.modal.show()},c.closeModal=function(){c.modal.hide()}},c.$on("modal.shown",function(){t.fbModalShow()}),c.$on("modal.hidden",function(){t.fbModalHidden()}),c.goDialogBox=function(t){"team"==t.scene?m.go("groupDialogBox",{id:t.to}):"p2p"==t.scene&&m.go("dialogBox",{id:t.to})},c.$on("$ionicView.leave",function(){c.modal.remove(),i.closeOptionButtons()}),l.$on("SYSMSGUPDATE",function(t,n){u(function(){c.sysMsgCount=o.sysMsg.allSysMsgUnread})}),c.$on("$ionicView.beforeEnter",function(){"tabs.realHome"==l.fromStateName||"tabs.linkMan"==l.fromStateName?l.tabsType="FT":"tabs.Home"!=l.fromStateName&&"homeClassify"!=l.fromStateName||(l.tabsType="HOUSE"),c.tabsType=l.tabsType,r.clearHistory();var a=function(t){for(var n=0;n<t.length;n++)c.totalUnread=c.totalUnread+t[n].unread};c.sysMsgCount=o.sysMsg.allSysMsgUnread,c.totalUnread=0,a(o.sessionList),l.$on("updateSessions",function(t,n){u(function(){c.totalUnread=0,a(n),c.conList=n.filter(function(n){if(n.name="",n.avatar="","p2p"==n.scene){var t;t=o.sessionUsersInfo[n.to],n.avatar=t.avatar||"",n.name=t.nick||"",n.custom=t.custom||""}else if("team"==n.scene){var a=o.myTeams.find(function(t){return t.teamId===n.to});a?(n.name=a.name||"",n.avatar=a.avatar||""):(n.name="群"+n.to,n.avatar=n.avatar||"")}return"custom"==n.lastMsg.type&&"string"==typeof n.lastMsg.content&&(n.lastMsg.content=JSON.parse(n.lastMsg.content)),n})})}),c.createModal(),c.conList=o.sessionList.filter(function(n){if(n.name="",n.avatar="","p2p"==n.scene){var t;t=o.sessionUsersInfo[n.to],n.avatar=t.avatar||"",n.name=t.alias||t.nick||"",n.custom=t.custom||""}else if("team"==n.scene){var a=o.myTeams.find(function(t){return t.teamId===n.to});a?(n.name=a.name||"",n.avatar=a.avatar||""):(n.name="群"+n.to,n.avatar=n.avatar||"")}return"custom"==n.lastMsg.type&&"string"==typeof n.lastMsg.content&&(n.lastMsg.content=JSON.parse(n.lastMsg.content)),n})}),c.extendPtPInfo=function(){},c.deleteSession=function(t,a,e){i.closeOptionButtons(),nim.deleteSession({scene:t.scene,to:t.to,done:function(t,n){t?enterViewLoad.customload("删除失败"):(c.conList.splice(a,1),o.sessionList.splice(a,1),u(function(){c.totalUnread=c.totalUnread-e,o.sessionUnread=c.totalUnread,c.conList=c.conList}))}})}}]).directive("headRedPoint",["$compile","$timeout",function(i,r){return{restrict:"A",replace:!1,link:function(t,n,a,e){var o=a.headRedPoint||!1,s=i("<span ng-class={true:'tabs-red-point',false:''}["+o+"]></span>")(t);r(function(){angular.element(n).parent().append(s)},100)}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("tabs.chatList",{url:"/chatlist",nativeTransitions:null,views:{classify:{templateUrl:"views/tabs/chatList/chatList.html",controller:"chatListCtl"}},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("HomeCtl",["NimUtils","appUtils","enterViewLoad","$ionicSlideBoxDelegate","$localStorage","$interval","$ionicPopover","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(t,e,a,o,n,i,r,c,u,l,d,s,h,m,p,f,g,y,$){p.tabActiveName="firstTab",p.isLoged=!0,p.back=function(){e.back()},c.fromTemplateUrl("home_nav_modal",{scope:p,animation:"slide-in-up"}).then(function(t){p.modal=t}),p.showModal=function(){p.modal.show()},p.closeModal=function(){p.modal.hide()},p.$on("modal.shown",function(){e.fbModalShow()}),p.$on("modal.hidden",function(){e.fbModalHidden()}),p.$on("$ionicView.enter",function(){$.clearHistory();var a=function(t){for(var e=0;e<t.length;e++)p.totalUnread=p.totalUnread+t[e].unread};p.totalUnread=0,a(t.sessionList),f.$on("updateSessions",function(t,e){l(function(){p.totalUnread=0,a(e)})}),p.isLoged=n.access_token,p.initData(),p.initBanner(),p.initEchart(),p.listenScrollStatus&&(p.autoScroll(),p.Switch(p.listenScrollStatus))}),p.$on("$ionicView.leave",function(){p.listenScrollStatus=0}),p.currentAdSlideIndex=0,p.changeAdSlide=function(t){p.currentAdSlideIndex=t},a.load(),p.currentCity=e.city,p.currentRotate=0,p.currentRotateStr="rotate("+p.currentRotate+"deg)",p.getAddress=function(){p.currentRotate=p.currentRotate+360,p.currentRotateStr="rotate("+p.currentRotate+"deg)",e.bMapLocation(function(e){myGeo.getPoint(e.addr,function(t){t&&(p.mapimg="http://api.map.baidu.com/staticimage?center="+e.longitude+","+e.latitude+"&markers="+e.addr+"&width=300&height=200&zoom=15",map.centerAndZoom(t,16))},e.city)},function(t){a.customload("获取定位失败")})},p.initBanner=function(){d.post(s.News.banner.url,{type:20}).then(function(t){g.hide(),p.$broadcast("scroll.refreshComplete"),p.adImgList=t.data,0<t.data.length&&(o.update(),o.$getByHandle("home-banner-slide").loop(!0))}).catch(function(){p.$broadcast("scroll.refreshComplete"),a.customload("获取失败")})},p.initEchart=function(){echarts.init(document.getElementById("home_house_trend_echarts"),"light").setOption({title:{text:""},grid:{x:35,y:10,x2:40,y2:30},tooltip:{},legend:{},xAxis:[{boundaryGap:!1,data:["12月","1月","2月","3月","4月","5月","6月","7月"],splitLine:{show:!1}}],yAxis:[{type:"value",axisLabel:{formatter:function(t){return t/1e4+"万"}},min:0,max:5e4,interval:1e4,splitArea:{show:!1},splitLine:{show:!1}}],series:[{name:"",type:"line",data:[27689,28e3,48030,37849,47177,36661,27101,33536]}],color:["rgba(105,151,255,0.6)"]})},p.initData=function(){p.newQueryData={cityId:e.city.id,pagesize:10,pagenum:0},d.get(s.NewHouse.publicquery.url,{params:p.newQueryData}).then(function(t){p.newhousearr=t.data}).catch(function(){a.customload("获取数据失败")}),p.oldQueryData={cityId:e.city.id,pagesize:10,pagenum:0,type:1},d.get(s.NewHouseSource.publicquery.url,{params:p.oldQueryData}).then(function(t){for(var e=0;e<t.data.length;e++){var a=t.data[e].Thumb;t.data[e].Thumb=a.replace(/230x150/,"120x90")}p.oldhousearr=t.data}).catch(function(){}),p.rentQueryData={cityId:e.city.id,pagesize:10,pagenum:0,type:2},d.get(s.NewHouseSource.publicquery.url,{params:p.rentQueryData}).then(function(t){for(var e=0;e<t.data.length;e++){var a=t.data[e].Thumb;t.data[e].Thumb=a.replace(/230x150/,"120x90")}p.renthousearr=t.data}).catch(function(){})},p.houseType="old",p.switchHouseType=function(t){p.houseType=t}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("tabs.Home",{url:"/home",nativeTransitions:null,views:{home:{templateUrl:"views/tabs/home/home.html",controller:"HomeCtl"}},resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/home.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("realHomeCtl",["NimUtils","appUtils","enterViewLoad","actionImgShow","$ionicPopup","$ionicSlideBoxDelegate","$localStorage","$interval","$ionicPopover","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(n,i,l,r,e,o,s,t,a,c,d,u,f,m,h,p,w,g,y,S,L){function I(t){f.post(m.Zone.indexlist.url,w.timeLineQuery).success(function(e){if(y.hide(),!(e[0].List<=0&&(w.tlFollowHaveMore=!1,w.$broadcast("scroll.infiniteScrollComplete"),t))){w.tlFollowHaveMore=!0;var o=e[0].List.filter(function(e){return i.isJsonString(e.Content)&&(e.Content=JSON.parse(e.Content)),s.myselfInfo?e.agreed=0<=e.AgressUsers.indexOf(s.myselfInfo.Id):e.agreed=!1,e.showCom=!1,e.agreeNum=e.AgressUsers.length,e.showAll=!1,e.showAllBtn=!1,e});t?(w.tlFollowQuery.pagenum+=1,w.tlFollowArr=w.tlFollowArr.concat(o),w.$broadcast("scroll.infiniteScrollComplete")):(w.tlFollowQuery.pagenum=1,w.tlFollowArr=o,w.$broadcast("scroll.refreshComplete")),u(function(){$.each($(".follow-cont-wrapper p"),function(e,o){60<$(".follow-cont-wrapper p").eq(e).height()&&(w.tlFollowArr[e].showAllBtn=!0)})})}}).error(function(){y.hide(),w.tlFollowHaveMore=!1,l.customload("获取数据失败"),w.$broadcast("scroll.infiniteScrollComplete"),w.$broadcast("scroll.refreshComplete")})}function v(t){f.post(m.Zone.indexlist.url,w.timeLineQuery).success(function(e){if(y.hide(),!(e[0].List<=0&&(w.timeLineHaveMore=!1,w.$broadcast("scroll.infiniteScrollComplete"),t))){w.timeLineHaveMore=!0;var o=e[0].List.filter(function(e){return i.isJsonString(e.Content)&&(e.Content=JSON.parse(e.Content)),s.myselfInfo?e.agreed=0<=e.AgressUsers.indexOf(s.myselfInfo.Id):e.agreed=!1,e.showCom=!1,e.agreeNum=e.AgressUsers.length,e.showAll=!1,e.showAllBtn=!1,e});t?(w.timeLineQuery.pagenum+=1,w.timeLineArr=w.timeLineArr.concat(o),w.$broadcast("scroll.infiniteScrollComplete")):(w.timeLineQuery.pagenum=1,w.timeLineArr=o,w.$broadcast("scroll.refreshComplete")),u(function(){$.each($(".tl-cont-wrapper p"),function(e,o){60<$(".tl-cont-wrapper p").eq(e).height()&&(w.timeLineArr[e].showAllBtn=!0)})})}}).error(function(){y.hide(),w.timeLineHaveMore=!1,l.customload("获取数据失败"),w.$broadcast("scroll.infiniteScrollComplete"),w.$broadcast("scroll.refreshComplete")})}w.tabActiveName="firstTab",w.isLoged=!1,w.refreshTxt="房在心田才是家",w.statusData=i.statusData,w.$on("$ionicView.beforeEnter",function(){if(!s.firstTimeOpen)return y.hide(),void h.go("welcomePage")}),w.scanQrcode=function(){w.isLoged?i.scanCode(function(e){if(!e.cancelled)if(0<=e.text.indexOf("fangtian_")){var o=e.text.substr(e.text.indexOf("_")+1);h.go("linkManDetail",{account:o})}else h.go("scanResult",{result:e.text})},function(){l.customload("扫描失败")}):h.go("login")},g.$on("SYSMSGUPDATE",function(e,o){u(function(){w.sysMsgCount=n.sysMsg.allSysMsgUnread})}),u(function(){for(var e=w.totalUnread=0;e<n.sessionList.length;e++)w.totalUnread=w.totalUnread+n.sessionList[e].unread},1e3),w.$on("$ionicView.beforeEnter",function(){L.clearHistory();var t=function(e){for(var o=0;o<e.length;o++)w.totalUnread=w.totalUnread+e[o].unread};w.totalUnread=0,t(n.sessionList),g.$on("updateSessions",function(e,o){u(function(){w.totalUnread=0,t(o)})}),w.sysMsgCount=n.sysMsg.allSysMsgUnread,w.isLoged=s.access_token,w.currentCity=i.city,w.initData(),w.loadVideos(),w.tlFollowHaveMore=!0,w.timeLineHaveMore=!0,w.showBotReply=!1}),w.currentAdSlideIndex=0,w.changeAdSlide=function(e){w.currentAdSlideIndex=e},w.showVideoLive="video",w.switchVideoLive=function(e){w.showVideoLive=e},w.realhomeScrollListen=function(){try{u(function(){w.contentScrollTop=d.$getByHandle("realhome-main-Scroll").getScrollPosition().top,800<w.contentScrollTop?w.showScrollTopBtn=!0:w.showScrollTopBtn=!1})}catch(e){}},w.scrollToTop=function(){var e=document.getElementById("realhome_scrolltop_here").offsetTop-d.$getByHandle("realhome-main-Scroll").getScrollPosition().top;d.scrollBy(0,e,!0)},w.newsTypeList=["关注","热搜","要闻","厦门","时代","军事","法制","体育","电影"],w.initSwiper=function(){try{var t=new Swiper("#home_news_type_swpier",{freeMode:!0,freeModeMomentumRatio:.5,slidesPerView:"auto"});swiperWidth=t.container[0].clientWidth,maxTranslate=t.maxTranslate(),maxWidth=-maxTranslate+swiperWidth/2,$(".swiper-container").on("touchstart",function(e){e.preventDefault()}),t.on("tap",function(e,o){slide=e.slides[e.clickedIndex],slideLeft=slide.offsetLeft,slideWidth=slide.clientWidth,slideCenter=slideLeft+slideWidth/2,t.setWrapperTransition(300),slideCenter<swiperWidth/2?t.setWrapperTranslate(0):slideCenter>maxWidth?t.setWrapperTranslate(maxTranslate):(nowTlanslate=slideCenter-swiperWidth/2,t.setWrapperTranslate(-nowTlanslate))})}catch(e){}},c.fromTemplateUrl("real_home_nav_modal",{scope:w,animation:"slide-in-up"}).then(function(e){w.modal=e}),w.showModal=function(){w.modal.show()},w.closeModal=function(){w.modal.hide()},w.$on("modal.shown",function(){i.fbModalShow()}),w.$on("modal.hidden",function(){i.fbModalHidden()}),l.load(),w.initData=function(){f.post(m.News.banner.url,{type:1}).then(function(e){y.hide(),w.adImgList=e.data,0<e.data.length&&(o.update(),o.$getByHandle("realhome-banner-slide").loop(!0))}).catch(function(){l.customload("获取失败")})},w.bannerClick=function(e){"hongbao"==e.Uerl?h.go("redEnvelope"):"choujiang"==e.Uerl?h.go("lotteryPage"):"introVideo"==e.Uerl?h.go("vcrVideo",{video:"http://imgs.wujiuyun.com/other/media/intro.mp4",image:e.ShowImage}):"recommend"==e.Uerl?h.go("myRecommend"):"publishDynamic"==e.Uerl?h.go("publishDynamic"):e.Uerl&&h.go(e.Uerl)},w.loadVideos=function(){f.post(m.Zone.indexlist.url,{isOnlyFollow:!1,type:30,pagenum:0,pagesize:6}).then(function(e){w.$broadcast("scroll.refreshComplete"),e.data.length&&(w.videoList=e.data[0].List.filter(function(e){return i.isJsonString(e.Content)&&(e.Content=JSON.parse(e.Content)),e}),new Swiper(".home-video-swiper-container",{freeMode:!0,freeModeMomentumRatio:.5,slidesPerView:"auto",observer:!0}))}).catch(function(){w.$broadcast("scroll.refreshComplete"),l.customload("获取失败")}),f.post(m.Zone.indexlist.url,{isOnlyFollow:!0,type:30,pagenum:0,pagesize:6}).then(function(e){e.data.length&&(w.followVideos=e.data[0].List.filter(function(e){return i.isJsonString(e.Content)&&(e.Content=JSON.parse(e.Content)),e}),new Swiper(".home-followvideo-swiper-container",{freeMode:!0,freeModeMomentumRatio:.5,slidesPerView:"auto",observer:!0}))}).catch(function(){l.customload("获取失败")})},w.firstSortIndex=1,w.switchFirstSortIndex=function(e){w.firstSortIndex=e,d.resize(),0==e?0<w.tlFollowArr.length&&w.tlFollowRefresh():1==e?w.timeLineRefresh():(w.loadArticle(),u(function(){w.initSwiper()}))},w.secondSortIndex=1,w.switchSecondSortIndex=function(e){w.secondSortIndex=e,d.resize()},w.tlFollowQuery={isOnlyFollow:!0,type:10,pagenum:0,pagesize:10},w.tlFollowHaveMore=!0,w.tlFollowArr=[],w.tlFollowLoadMore=function(e){I(!0)},w.tlFollowRefresh=function(e){w.tlFollowQuery.pagenum=0,I(!1),d.resize()},w.switchFollowShowAll=function(e){e.showAll=!e.showAll},w.timeLineQuery={isOnlyFollow:!1,type:10,pagenum:0,pagesize:10},w.timeLineHaveMore=!0,w.timeLineArr=[],w.timeLineLoadMore=function(e){v(!0)},w.timeLineRefresh=function(e){w.timeLineQuery.pagenum=0,v(!1),d.resize()},w.switchShowAll=function(e){e.showAll=!e.showAll},w.loadArticle=function(){f.post(m.Zone.indexlist.url,{isOnlyFollow:!1,type:40,pagenum:0,pagesize:100}).then(function(e){e.data.length?w.articleList=e.data[0].List.filter(function(e){return i.isJsonString(e.ShowInList)&&(e.ShowInList=JSON.parse(e.ShowInList)),e}):w.articleList=[]}).catch(function(){l.customload("获取失败")})},w.showBigImg=function(e,o){for(var t=new Array,n=0;n<e.length;n++){var i=new Image;i.src=e[n],i.onload=void(t[n]=i)}r.show({larImgs:t,currentImg:o,imgClose:function(){r.close()}})},w.agreeAction=function(o){s.myselfInfo?o.agreed||f.post(m.Zone.agree.url+"?id="+o.Id).then(function(e){o.agreed=!0,o.agreeNum++,o.agreeUsers||(o.agreeUsers=[]),o.agreeUsers.push({Image:s.myselfInfo.ShowImage})}).catch(function(e){l.customload("操作失败")}):h.go("login")},w.followAction=function(o){o.IsFollow?f.post(m.Zone.unfollow.url+"?uid="+o.UserId).then(function(e){o.IsFollow=!1}).catch(function(e){l.customload("操作失败")}):f.post(m.Zone.follow.url+"?uid="+o.UserId).then(function(e){o.IsFollow=!0}).catch(function(e){l.customload("操作失败")}),w.loadVideos()},a.fromTemplateUrl("del_home_tl_popover.html",{scope:w}).then(function(e){w.popover=e}),w.openDelTLPopover=function(e,o,t,n){w.popover.show(e),w.delTLItem={item:o,index:t,list:n}},w.closeDelTLPopover=function(){w.popover.hide()},w.deleteTL=function(){w.closeDelTLPopover(),f.post(m.Zone.delete.url+"?id="+w.delTLItem.item.Id).then(function(e){l.customload("删除成功"),d.resize(),w.delTLItem.list.splice(w.delTLItem.index,1)}).catch(function(){l.customload("删除失败")})},w.deleteCom=function(o,t,n){s.myselfInfo&&(o.UserId==s.myselfInfo.Id&&e.confirm({title:"删除评论？",cancelText:"取消",okText:"删除"}).then(function(e){e&&f.post(m.Zone.delete.url+"?id="+o.Id).then(function(e){t.splice(n,1),d.resize()}).catch(function(){l.customload("删除失败")})}))},w.switchShowCom=function(o){o.showCom=!o.showCom,o.showCom&&0<o.AgressUsers.length&&f.post(m.Zone.agreeuser.url,o.AgressUsers).then(function(e){o.agreeUsers=e.data}),d.resize()},w.replyData={data:""},w.clickComment=function(e){w.showBotReply=!w.showBotReply,w.replyTo=e},w.replyComment=function(){w.replyData.data&&f.post(m.Zone.save.url,{type:70,ParentId:w.replyTo.Id,Content:w.replyData.data}).then(function(e){w.replyTo.Children.push({UserId:s.myselfInfo.Id,UserName:s.myselfInfo.NickName,UserImage:s.myselfInfo.ShowImage,Content:w.replyData.data}),w.replyTo.ChildrenCount+=1,w.replyData.data=""}).catch(function(){w.replyData.data="",l.customload("评论失败")})},w.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(e){u(function(){w.keyboardHeight&&w.keyboardHeight==e.keyboardHeight||(w.keyboardHeight=e.keyboardHeight),w.keyboardShow=!0})}),window.addEventListener("native.keyboardhide",function(e){u(function(){w.keyboardShow=!1,w.showBotReply=!1})}),w.toLinkMan=function(e){s.myselfInfo?f.post(m.Neteast.user.url+"?id="+e).then(function(e){"SUCCESS"==e.data.return_code?h.go("linkManDetail",{account:e.data.return_msg.accid}):y.show({template:e.data.return_msg,duration:1500})}).catch(function(){y.show({template:"用户未开通微聊",duration:1500})}):h.go("login")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("tabs.realHome",{url:"/realhome",nativeTransitions:null,views:{home:{templateUrl:"views/tabs/home/realHome.html",controller:"realHomeCtl"}},resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/realHome.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("linkManCtr",["NimUtils","appUtils","enterViewLoad","$localStorage","$ionicPopover","$ionicModal","$timeout","$window","$state","$ionicActionSheet","$ionicTabsDelegate","$ionicScrollDelegate","$rootScope","$ionicHistory","$Factory","$scope","$http","$ionicSlideBoxDelegate",function(a,o,r,e,n,t,l,i,c,u,s,d,y,v,f,k,m,h){k.tabActiveName="secondTab",n.fromTemplateUrl("link_man_popover.html",{scope:k}).then(function(e){k.popover=e}),k.openPopover=function(e){k.popover.show(e)},k.closePopover=function(){k.popover.hide()},k.createGroupchat=function(){c.go("tabs.createGroup")},k.createModal=function(){t.fromTemplateUrl("beAgent_nav_modal",{scope:k,animation:"slide-in-up"}).then(function(e){k.modal=e}),k.showModal=function(){k.modal.show()},k.closeModal=function(){k.modal.hide()},t.fromTemplateUrl("add_friend_modal",{scope:k,animation:"slide-in-left"}).then(function(e){k.searchModal=e}),k.showSearchModal=function(){k.searchModal.show()},k.closeSearchModal=function(){k.searchModal.hide()}},k.$on("modal.shown",function(){o.fbModalShow()}),k.$on("modal.hidden",function(){o.fbModalHidden()}),k.search_world={key:""},k.clear_search=function(){k.search_world.key="",k.searchContactRes=null},k.searchContact=function(){m.post(f.Neteast.queryphone.url+"?phone="+k.search_world.key).then(function(e){k.searchContactRes=e.data}).catch(function(e){r.customload("搜索失败")})},document.addEventListener("deviceready",function(){k.scanCode=function(){o.scanCode(function(e){if(!e.cancelled)if(0<=e.text.indexOf("fangtian_")){var o=e.text.substr(e.text.indexOf("_")+1);c.go("linkManDetail",{account:o})}else c.go("scanResult",{result:e.text})},function(){r.customload("扫描失败")})}},!1),k.$on("$ionicView.leave",function(){k.modal.remove(),k.searchModal.remove()}),y.$on("SYSMSGUPDATE",function(e,o){l(function(){k.sysMsgCount=a.sysMsg.allSysMsgUnread})}),k.friendArr=[],k.$on("$ionicView.beforeEnter",function(){var n=function(e){for(var o=0;o<e.length;o++)k.totalUnread=k.totalUnread+e[o].unread};k.sysMsgCount=a.sysMsg.allSysMsgUnread,k.totalUnread=0,n(a.sessionList),y.$on("updateSessions",function(e,o){l(function(){k.totalUnread=0,n(o)})}),v.clearHistory(),k.createModal(),a.myFriendsInfo(function(e){k.friendArr=e.filter(function(e){return o.isJsonString(e.custom)&&(e.custom=JSON.parse(e.custom)),e}),k.friendsNum=e.length,k.formatContacts=[{key:"A",value:[]},{key:"B",value:[]},{key:"C",value:[]},{key:"D",value:[]},{key:"E",value:[]},{key:"F",value:[]},{key:"G",value:[]},{key:"H",value:[]},{key:"I",value:[]},{key:"J",value:[]},{key:"K",value:[]},{key:"L",value:[]},{key:"M",value:[]},{key:"N",value:[]},{key:"O",value:[]},{key:"P",value:[]},{key:"Q",value:[]},{key:"R",value:[]},{key:"S",value:[]},{key:"T",value:[]},{key:"U",value:[]},{key:"V",value:[]},{key:"W",value:[]},{key:"X",value:[]},{key:"Y",value:[]},{key:"Z",value:[]},{key:"#",value:[]}],k.changeToPinyinArr()},function(){})}),k.formatContacts=[{key:"A",value:[]},{key:"B",value:[]},{key:"C",value:[]},{key:"D",value:[]},{key:"E",value:[]},{key:"F",value:[]},{key:"G",value:[]},{key:"H",value:[]},{key:"I",value:[]},{key:"J",value:[]},{key:"K",value:[]},{key:"L",value:[]},{key:"M",value:[]},{key:"N",value:[]},{key:"O",value:[]},{key:"P",value:[]},{key:"Q",value:[]},{key:"R",value:[]},{key:"S",value:[]},{key:"T",value:[]},{key:"U",value:[]},{key:"V",value:[]},{key:"W",value:[]},{key:"X",value:[]},{key:"Y",value:[]},{key:"Z",value:[]},{key:"#",value:[]}],k.changeToPinyinArr=function(){for(var e=0;e<k.friendArr.length;e++)for(var o=pinyinUtil.getFirstLetter(k.friendArr[e].nick).substr(0,1).toUpperCase(),n=0;n<k.formatContacts.length;n++){if(o==k.formatContacts[n].key){k.formatContacts[n].value.push(k.friendArr[e]);break}n==k.formatContacts.length-1&&k.formatContacts[26].value.push(k.friendArr[e])}l(function(){k.formatContacts=k.formatContacts})},k.changeToPinyinArr(),k.backTop=function(){d.$getByHandle("clientScroll").scrollTop(!0)},k.letterarr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","#"],k.mTouch=function(e,o){r.customload(o,500);var n=e.pageX||e.touches[0].pageX,a=e.pageY||e.touches[0].pageY;if(l=document.elementFromPoint(n,a)){var t=l.innerText;if(t&&" "!=t&&1==t.length&&(k.hint=t,document.getElementById("cliindex-"+k.hint))){var l,i=document.getElementById("cliindex-"+k.hint).offsetTop-d.$getByHandle("clientScroll").getScrollPosition().top;d.scrollBy(0,i,!0),(l=document.getElementsByTagName("ion-content"))[0].style.overflow="auto"}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(n){n.state("tabs.linkMan",{url:"/linkman",nativeTransitions:null,views:{find:{templateUrl:"views/tabs/linkMan/linkMan.html",controller:"linkManCtr"}},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("perCenterCtl",["$myBusinessData","NimUtils","appUtils","enterViewLoad","$localStorage","$ionicScrollDelegate","$ionicModal","$ionicLoading","$timeout","$interval","$ionicHistory","$Factory","$scope","$state","$http","$rootScope",function(e,n,o,i,t,a,s,l,r,d,g,m,c,p,u,f){c.tabActiveName="fifthTab",c.statusData=o.statusData,s.fromTemplateUrl("perCenter_nav_modal",{scope:c,animation:"slide-in-up"}).then(function(t){c.modal=t}),c.showModal=function(){c.modal.show()},c.closeModal=function(){c.modal.hide()},c.$on("modal.shown",function(){o.fbModalShow()}),c.$on("modal.hidden",function(){o.fbModalHidden()}),s.fromTemplateUrl("percenter_real_name_modal",{scope:c,animation:"slide-in-left"}).then(function(t){c.realnameModal=t}),c.showRealNameModal=function(){c.realnameModal.show()},c.closeRealNameModal=function(){c.realnameModal.hide()},c.goMyBusiness=function(t){e.tag=t,p.go("myBusiness")},c.childPageName=null,c.showChildPage=function(t){c.Logined?c.childPageName=t:p.go("login"),a.resize()},c.hideChildPage=function(){c.childPageName=null,a.resize()},c.showMapType=!1,c.toggleMapType=function(){c.showMapType=!c.showMapType},c.Logined=!1,c.myShopInfo="",f.$on("SYSMSGUPDATE",function(t,e){r(function(){c.sysMsgCount=n.sysMsg.allSysMsgUnread})}),c.$on("$ionicView.beforeEnter",function(){"tabs.realHome"==f.fromStateName||"tabs.linkMan"==f.fromStateName?f.tabsType="FT":"tabs.Home"!=f.fromStateName&&"homeClassify"!=f.fromStateName||(f.tabsType="HOUSE"),c.tabsType=f.tabsType,g.clearHistory();var a=function(t){for(var e=0;e<t.length;e++)c.totalUnread=c.totalUnread+t[e].unread};c.totalUnread=0,a(n.sessionList),f.$on("updateSessions",function(t,e){r(function(){c.totalUnread=0,a(e)})}),c.sysMsgCount=n.sysMsg.allSysMsgUnread,u.get(m.Account.getuserinfo.url).then(function(t){c.myInfo=t.data,c.Logined=!0}).catch(function(t){c.childPageName=null,c.Logined=!1,i.customload(t.Message)}),u.get(m.Shoper.get.url).then(function(t){c.myShopInfo=t.data}).catch(function(t){c.myShopInfo=""}),u.post(m.Zone.home.url+"?uid=0",{type:0,pagesize:0}).then(function(t){for(var e=0;e<t.data.length;e++)if(10==t.data[e].Type)c.dynamicData=t.data[e].List.filter(function(t){return o.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},t}),c.newsList=[],c.newsList=t.data[e].List.map(function(t){return t.Content.text}),new Swiper(".personal-tl-swiper",{direction:"vertical",autoplay:!0,loop:1<c.newsList.length});else if(20==t.data[e].Type)c.imagesData=t.data[e].List;else if(30==t.data[e].Type)c.videosData=t.data[e].List.filter(function(t){return o.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},t});else if(60==t.data[e].Type)0<t.data[e].List.length?(o.isJsonString(t.data[e].List[0].Content)&&(c.honorImageUrl=JSON.parse(t.data[e].List[0].Content).Options[0].ImgUrl),c.honorImageId=t.data[e].List[0].Id):c.honorImageUrl="";else if(50==t.data[e].Type)if(0<t.data[e].List.length){(new Date).getTime();o.isJsonString(t.data[e].List[0].Content)&&(c.posterImageUrl=JSON.parse(t.data[e].List[0].Content).Options[0].ImgUrl),c.posterImageId=t.data[e].List[0].Id}else c.posterImageUrl="";else 80==t.data[e].Type?0<t.data[e].List.length?c.photoBgImg=t.data[e].List[0].Content:c.photoBgImg="":90==t.data[e].Type&&(0<t.data[e].List.length?c.videoBgImg=t.data[e].List[0].Content:c.videoBgImg="")}).catch(function(){i.customload("加载数据失败"),c.photoBgImg="",c.videoBgImg="",c.posterImageUrl="",c.honorImageUrl=""})})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("tabs.perCenter",{url:"/percenter",nativeTransitions:null,views:{mine:{templateUrl:"views/tabs/perCenter/perCenter.html",controller:"perCenterCtl"}},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("quanziCtl",["NimUtils","appUtils","enterViewLoad","actionImgShow","$ionicPopup","$ionicSlideBoxDelegate","$localStorage","$interval","$ionicPopover","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(n,i,l,r,e,o,s,t,a,c,u,d,f,m,h,p,g,w,y,I,L){function S(t){f.post(m.Zone.indexlist.url,g.timeLineQuery).success(function(e){if(y.hide(),!(e[0].List<=0&&(g.tlFollowHaveMore=!1,g.$broadcast("scroll.infiniteScrollComplete"),t))){g.tlFollowHaveMore=!0;var o=e[0].List.filter(function(e){return i.isJsonString(e.Content)&&(e.Content=JSON.parse(e.Content)),s.myselfInfo?e.agreed=0<=e.AgressUsers.indexOf(s.myselfInfo.Id):e.agreed=!1,e.showCom=!1,e.agreeNum=e.AgressUsers.length,e.showAll=!1,e.showAllBtn=!1,e});t?(g.tlFollowQuery.pagenum+=1,g.tlFollowArr=g.tlFollowArr.concat(o),g.$broadcast("scroll.infiniteScrollComplete")):(g.tlFollowQuery.pagenum=1,g.tlFollowArr=o,g.$broadcast("scroll.refreshComplete")),d(function(){$.each($(".follow-cont-wrapper p"),function(e,o){60<$(".follow-cont-wrapper p").eq(e).height()&&(g.tlFollowArr[e].showAllBtn=!0)})})}}).error(function(){y.hide(),g.tlFollowHaveMore=!1,l.customload("获取数据失败"),g.$broadcast("scroll.infiniteScrollComplete"),g.$broadcast("scroll.refreshComplete")})}function A(t){f.post(m.Zone.indexlist.url,g.timeLineQuery).success(function(e){if(y.hide(),!(e[0].List<=0&&(g.timeLineHaveMore=!1,g.$broadcast("scroll.infiniteScrollComplete"),t))){g.timeLineHaveMore=!0;var o=e[0].List.filter(function(e){return i.isJsonString(e.Content)&&(e.Content=JSON.parse(e.Content)),s.myselfInfo?e.agreed=0<=e.AgressUsers.indexOf(s.myselfInfo.Id):e.agreed=!1,e.showCom=!1,e.agreeNum=e.AgressUsers.length,e.showAll=!1,e.showAllBtn=!1,e});t?(g.timeLineQuery.pagenum+=1,g.timeLineArr=g.timeLineArr.concat(o),g.$broadcast("scroll.infiniteScrollComplete")):(g.timeLineQuery.pagenum=1,g.timeLineArr=o,g.$broadcast("scroll.refreshComplete")),d(function(){$.each($(".tl-cont-wrapper p"),function(e,o){60<$(".tl-cont-wrapper p").eq(e).height()&&(g.timeLineArr[e].showAllBtn=!0)})})}}).error(function(){y.hide(),g.timeLineHaveMore=!1,l.customload("获取数据失败"),g.$broadcast("scroll.infiniteScrollComplete"),g.$broadcast("scroll.refreshComplete")})}g.tabActiveName="thirdTab",g.isLoged=!1,g.refreshTxt="房在心田才是家",g.$on("$ionicView.beforeEnter",function(){if(!s.firstTimeOpen)return y.hide(),void h.go("welcomePage")}),g.scanQrcode=function(){g.isLoged?i.scanCode(function(e){if(!e.cancelled)if(0<=e.text.indexOf("fangtian_")){var o=e.text.substr(e.text.indexOf("_")+1);h.go("linkManDetail",{account:o})}else h.go("scanResult",{result:e.text})},function(){l.customload("扫描失败")}):h.go("login")},w.$on("SYSMSGUPDATE",function(e,o){d(function(){g.sysMsgCount=n.sysMsg.allSysMsgUnread})}),d(function(){for(var e=g.totalUnread=0;e<n.sessionList.length;e++)g.totalUnread=g.totalUnread+n.sessionList[e].unread},1e3),g.$on("$ionicView.enter",function(){L.clearHistory();var t=function(e){for(var o=0;o<e.length;o++)g.totalUnread=g.totalUnread+e[o].unread};g.totalUnread=0,t(n.sessionList),w.$on("updateSessions",function(e,o){d(function(){g.totalUnread=0,t(o)})}),g.sysMsgCount=n.sysMsg.allSysMsgUnread,g.initData(),g.tlFollowHaveMore=!0,g.timeLineHaveMore=!0,g.showBotReply=!1}),l.load(),g.firstSortIndex=1,g.switchFirstSortIndex=function(e){g.firstSortIndex=e,u.resize(),0==e?0<g.tlFollowArr.length&&g.tlFollowRefresh():1==e?g.timeLineRefresh():(g.loadArticle(),d(function(){g.initSwiper()}))},g.secondSortIndex=1,g.switchSecondSortIndex=function(e){g.secondSortIndex=e,u.resize()},g.tlFollowQuery={isOnlyFollow:!0,type:10,pagenum:0,pagesize:10},g.tlFollowHaveMore=!0,g.tlFollowArr=[],g.tlFollowLoadMore=function(e){S(!0)},g.tlFollowRefresh=function(e){g.tlFollowQuery.pagenum=0,S(!1),u.resize()},g.switchFollowShowAll=function(e){e.showAll=!e.showAll},g.timeLineQuery={isOnlyFollow:!1,type:10,pagenum:0,pagesize:10},g.timeLineHaveMore=!0,g.timeLineArr=[],g.timeLineLoadMore=function(e){A(!0)},g.timeLineRefresh=function(e){g.timeLineQuery.pagenum=0,A(!1),u.resize()},g.switchShowAll=function(e){e.showAll=!e.showAll},g.loadArticle=function(){f.post(m.Zone.indexlist.url,{isOnlyFollow:!1,type:40,pagenum:0,pagesize:100}).then(function(e){e.data.length?g.articleList=e.data[0].List.filter(function(e){return i.isJsonString(e.ShowInList)&&(e.ShowInList=JSON.parse(e.ShowInList)),e}):g.articleList=[]}).catch(function(){l.customload("获取失败")})},g.showBigImg=function(e,o){for(var t=new Array,n=0;n<e.length;n++){var i=new Image;i.src=e[n],i.onload=void(t[n]=i)}r.show({larImgs:t,currentImg:o,imgClose:function(){r.close()}})},g.agreeAction=function(o){s.myselfInfo?o.agreed||f.post(m.Zone.agree.url+"?id="+o.Id).then(function(e){o.agreed=!0,o.agreeNum++,o.agreeUsers||(o.agreeUsers=[]),o.agreeUsers.push({Image:s.myselfInfo.ShowImage})}).catch(function(e){l.customload("操作失败")}):h.go("login")},g.followAction=function(o){o.IsFollow?f.post(m.Zone.unfollow.url+"?uid="+o.UserId).then(function(e){o.IsFollow=!1}).catch(function(e){l.customload("操作失败")}):f.post(m.Zone.follow.url+"?uid="+o.UserId).then(function(e){o.IsFollow=!0}).catch(function(e){l.customload("操作失败")}),g.loadVideos()},a.fromTemplateUrl("del_quanzi_tl_popover.html",{scope:g}).then(function(e){g.popover=e}),g.openDelTLPopover=function(e,o,t,n){g.popover.show(e),g.delTLItem={item:o,index:t,list:n}},g.closeDelTLPopover=function(){g.popover.hide()},g.deleteTL=function(){g.closeDelTLPopover(),f.post(m.Zone.delete.url+"?id="+g.delTLItem.item.Id).then(function(e){l.customload("删除成功"),u.resize(),g.delTLItem.list.splice(g.delTLItem.index,1)}).catch(function(){l.customload("删除失败")})},g.deleteCom=function(o,t,n){s.myselfInfo&&(o.UserId==s.myselfInfo.Id&&e.confirm({title:"删除评论？",cancelText:"取消",okText:"删除"}).then(function(e){e&&f.post(m.Zone.delete.url+"?id="+o.Id).then(function(e){t.splice(n,1),u.resize()}).catch(function(){l.customload("删除失败")})}))},g.switchShowCom=function(o){o.showCom=!o.showCom,o.showCom&&0<o.AgressUsers.length&&f.post(m.Zone.agreeuser.url,o.AgressUsers).then(function(e){o.agreeUsers=e.data}),u.resize()},g.replyData={data:""},g.clickComment=function(e){g.showBotReply=!g.showBotReply,g.replyTo=e},g.replyComment=function(){g.replyData.data&&f.post(m.Zone.save.url,{type:70,ParentId:g.replyTo.Id,Content:g.replyData.data}).then(function(e){g.replyTo.Children.push({UserId:s.myselfInfo.Id,UserName:s.myselfInfo.NickName,UserImage:s.myselfInfo.ShowImage,Content:g.replyData.data}),g.replyTo.ChildrenCount+=1,g.replyData.data=""}).catch(function(){g.replyData.data="",l.customload("评论失败")})},g.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(e){d(function(){g.keyboardHeight&&g.keyboardHeight==e.keyboardHeight||(g.keyboardHeight=e.keyboardHeight),g.keyboardShow=!0})}),window.addEventListener("native.keyboardhide",function(e){d(function(){g.keyboardShow=!1,g.showBotReply=!1})}),g.toLinkMan=function(e){s.myselfInfo?f.post(m.Neteast.user.url+"?id="+e).then(function(e){"SUCCESS"==e.data.return_code?h.go("linkManDetail",{account:e.data.return_msg.accid}):y.show({template:e.data.return_msg,duration:1500})}).catch(function(){y.show({template:"用户未开通微聊",duration:1500})}):h.go("login")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("tabs.quanzi",{url:"/tabs/quanzi",nativeTransitions:null,views:{home:{templateUrl:"views/tabs/quanzi/quanzi.html",controller:"quanziCtl"}},resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/quanzi/quanzi.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("agencyAgreementCtl",["NimUtils","appUtils","enterViewLoad","$timeout","$localStorage","$rootScope","$http","$Factory","$state","$stateParams","$scope",function(e,t,a,o,n,s,u,i,c,d,r){r.back=function(){t.back()},r.agencyType=d.agencytype,r.headTitle=1==d.agencytype?"独家代理协议":"多家代理协议",r.$on("$ionicView.enter",function(){u.post(i.NewHouseSource.postdetail.url+"/"+d.houseid).then(function(e){r.agentHouseInfo=e.data.house,r.ownerInfo=e.data.info,u.post(i.Neteast.user.url+"?id="+r.ownerInfo.uid).then(function(e){"SUCCESS"==e.data.return_code?r.targetId=e.data.return_msg.accid:a.customload(e.data.return_msg)}).catch(function(){a.customload("用户未开通微聊")})}).catch(function(){a.customload("获取房源信息失败")})}),s.$on("changeAgreementStatus",function(e,t){r.subData.isAgree=t}),r.subData={agencyPrice:"",agencyCommision:"",beginTime:"",endTime:"",agencyAddition:"",isAgree:0},r.changeAgree=function(){r.subData.isAgree?r.subData.isAgree=0:r.subData.isAgree=1},r.save=function(){e.myselfInfo.account!=r.targetId?1===r.subData.isAgree?r.subData.agencyPrice?r.subData.agencyCommision?r.subData.beginTime&&r.subData.endTime?u.post(i.HouseProxy.applicant.url,{HouseId:d.houseid,UserId:n.myselfInfo.Id,Price:r.subData.agencyPrice,Commision:r.subData.agencyCommision,Remark:r.subData.agencyAddition,BeginTime:r.subData.beginTime,EndTime:r.subData.endTime,Status:1}).then(function(e){a.customload("申请成功");var t={type:105,data:{houseId:d.houseid,userId:n.myselfInfo.Id,houseImage:r.agentHouseInfo.IndoorShowImages[0],houseTitle:r.agentHouseInfo.Title,housePrice:r.agentHouseInfo.Price,houseType:r.agentHouseInfo.Type}};nim.sendCustomMsg({scene:"p2p",to:r.targetId,content:JSON.stringify(t),done:function(e,t){e&&a.customload("消息发送失败")}}),o(function(){r.back()})}).catch(function(){a.customload("申请失败")}):a.customload("请输入代理期限"):a.customload("请输入代理佣金"):a.customload("请输入代理价格"):a.customload("协议未同意"):a.customload("你自己的房源")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("agencyAgreement",{url:"/agencyagreement/params/:houseid/:agencytype",templateUrl:"views/publicPage/agencyAgreement/agencyAgreement.html",controller:"agencyAgreementCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("agencyAgreementCheckCtl",["appUtils","enterViewLoad","$timeout","$localStorage","$http","$Factory","$state","$stateParams","$scope",function(e,o,n,t,u,c,s,a,i){i.back=function(){e.back()},i.targetId=a.account,i.houseId=a.houseid,i.userId=a.userid,i.sendText=function(e){nim.sendTipMsg({scene:"p2p",to:i.targetId,tip:0==e?"通过代理 "+i.agreementInfo.House.Title+" 申请":"拒绝代理 "+i.agreementInfo.House.Title+" 申请",done:function(e,t){e&&o.customload("发送审核消息失败")}})},i.$on("$ionicView.enter",function(){u.get(c.HouseProxy.ownerget.url,{params:{UserId:a.userid,HouseId:a.houseid}}).then(function(e){i.agreementInfo=e.data}).catch(function(){o.customload("获取代理信息失败")}),i.checkAgency=function(t){u.post(c.HouseProxy.verify.url,{HouseId:a.houseid,UserId:a.userid,Status:t}).then(function(e){o.customload("操作成功"),i.sendText(t),n(function(){i.back()},1500)}).catch(function(){o.customload("操作失败")})}})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("agencyAgreementCheck",{url:"/agencyagreementcheck/:account/:houseid/:userid",cache:!1,templateUrl:"views/publicPage/agencyAgreementCheck/agencyAgreementCheck.html",controller:"agencyAgreementCheckCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("articleDetailCtl",["appUtils","enterViewLoad","wechatLinkBase","WechatService","$localStorage","$ionicModal","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$rootScope","$stateParams","$ionicPopover","$ionicPopup","$timeout","$ionicActionSheet",function(e,a,t,o,n,i,d,r,c,s,l,u,h,f,g,y,m,p){u.back=function(){e.back()},u.loadhousetimes=function(){s.get(l.Zone.get.url,{params:{id:f.id}}).then(function(e){n.myselfInfo&&0<=e.data.AgressUsers.indexOf(n.myselfInfo.Id)&&(e.data.agreed=!0),e.data.agreeNum=e.data.AgressUsers.length,u.dataDetail=e.data,m(function(){$("br").parent().css("height","10")}),u.likeNum=e.data.Persons?e.data.Persons.length:0}).catch(function(){a.customload("获取房产时报失败")})},u.$on("$ionicView.enter",function(){u.loadhousetimes()}),u.agreeAction=function(e){n.myselfInfo?u.dataDetail.agreed||s.post(l.Zone.agree.url+"?id="+f.id).then(function(e){u.dataDetail.agreed=!0,u.dataDetail.agreeNum++}).catch(function(e){a.customload("操作失败")}):c.go("login")},u.replyData={data:""},u.replyComment=function(){u.replyData.data&&s.post(l.Zone.save.url,{type:70,ParentId:f.id,Content:u.replyData.data}).then(function(e){u.dataDetail.Children.push({UserId:n.myselfInfo.Id,UserName:n.myselfInfo.NickName,UserImage:n.myselfInfo.ShowImage,Content:u.replyData.data}),u.dataDetail.ChildrenCount+=1,u.replyData.data=""}).catch(function(){u.replyData.data="",a.customload("评论失败")})},u.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(e){m(function(){u.keyboardHeight&&u.keyboardHeight==e.keyboardHeight||(u.keyboardHeight=e.keyboardHeight),u.keyboardShow=!0})}),window.addEventListener("native.keyboardhide",function(e){m(function(){u.keyboardShow=!1,u.showBotReply=!1})})}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("articleDetail",{url:"/articledetail/params/:id",templateUrl:"views/publicPage/articleDetail/articleDetail.html",controller:"articleDetailCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("bindLoginController",["NimUtils","appUtils","enterViewLoad","$localStorage","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicHistory",function(n,t,o,e,r,a,c,i,u,s,d,l){s.back=function(){l.backView()?t.back():i.go("tabs.perCenter")},t.saveKeyboardHeight(),s.logininfo={grant_type:"password",username:null,password:null},s.login=function(){var t={method:"POST",url:c.Account.login.url,dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=password&username="+s.logininfo.username+"&Password="+s.logininfo.password};a(t).then(function(t){e.access_token=t.data.access_token,s.bindAccount(),s.getuserInfo()}).catch(function(t){o.customload("用户名或密码错误")})},s.bindAccount=function(){a.post(c.Account.addexterlogin.url,{LoginProvider:u.type,ProviderKey:u.key}).then(function(t){o.customload("绑定成功"),r(function(){i.go("tabs.perCenter")},1500)}).catch(function(t){o.customload("绑定失败")})},s.getuserInfo=function(){a.get(c.Account.getuserinfo.url).then(function(t){e.myselfInfo=t.data,a.post(c.Neteast.user.url+"?id=").then(function(t){"SUCCESS"==t.data.return_code?(e.myNimAccount=t.data.return_msg,n.init(t.data.return_msg)):o.customload(t.data.return_msg)})}).catch(function(t){})}}]).directive("dateFormat",["$filter",function(t){var r=t("date");return{require:"ngModel",link:function(t,n,o,e){e.$formatters.push(function(t){return r(t,"yyyy-MM-dd")}),e.$parsers.unshift(function(){return e.$modelValue})}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(i){i.state("bindLogin",{url:"/bindlogin/params/:type/:key",cache:!1,templateUrl:"views/publicPage/bindLogin/bindLogin.html",controller:"bindLoginController",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("bindRegisterController",["NimUtils","appUtils","enterViewLoad","$localStorage","$rootScope","$interval","$timeout","$ionicHistory","$http","$Factory","$stateParams","$scope","$state","$ionicLoading",function(o,t,n,e,u,c,a,r,s,i,d,m,l,f){m.back=function(){t.back()},t.saveKeyboardHeight(),m.$on("$ionicView.beforeLeave",function(){m.endCountDownNum()}),m.registerAgree={agree:!0},m.submitData={Phone:"",Password:"",Code:"",Name:"",ParPhone:""},m.showCountDown=!1,m.countDownNum=80,m.startCountDown=function(){m.showCountDown=!0,m.clock=c(function(){m.countDownNum--,m.countDownNum<1&&m.endCountDownNum()},1e3)},m.endCountDownNum=function(){m.showCountDown=!1,m.clock&&(m.countDownNum=80,c.cancel(m.clock))},m.yzcode=function(t,o){if(!/^1[34578]\d{9}$/.test(o))return n.customload("请输入正确的手机号码"),!1;m.startCountDown(),s.post(i.Account.msg.url+"?phone="+o).then(function(t){n.customload("发送成功")}).catch(function(t){m.endCountDownNum(),n.customload("发送失败")})},m.Done=function(){m.registerAgree.agree?s.post(i.Account.register.url,m.submitData).then(function(t){n.customload("注册成功");var o={method:"POST",url:i.Account.login.url,dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=password&username="+m.submitData.Phone+"&Password="+m.submitData.Password};s(o).then(function(t){e.access_token=t.data.access_token,m.getuserInfo(),m.bindAccount()})}).catch(function(t){n.customload(t.data.Message),m.endCountDownNum()}):n.customload("您还未接受房田用户协议")},m.bindAccount=function(){s.post(i.Account.addexterlogin.url,{LoginProvider:d.type,ProviderKey:d.key}).then(function(t){n.customload("操作成功"),a(function(){l.go("tabs.perCenter")},1500)}).catch(function(t){n.customload("操作失败")})},m.getuserInfo=function(){s.get(i.Account.getuserinfo.url).then(function(t){e.myselfInfo=t.data,s.post(i.Neteast.user.url+"?id=").then(function(t){"SUCCESS"==t.data.return_code?(e.myNimAccount=t.data.return_msg,o.init(t.data.return_msg)):n.customload(t.data.return_msg)})}).catch(function(t){})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("bindRegister",{cache:!1,url:"/bindregister/params/:type/:key",templateUrl:"views/publicPage/bindRegister/bindRegister.html",controller:"bindRegisterController",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("dialogVideoPlayerCtl",["appUtils","$timeout","$sce","$scope","$rootScope","$stateParams",function(e,o,a,n,t,i){n.back=function(){e.back()},o(function(){c.fullScreenStatus=!0}),n.$on("$ionicView.leave",function(){n.$broadcast("pauseVideo",!0)});var c=n.renderData={};c.videoSrc=a.trustAsResourceUrl(i.url),c.videoImage=i.image,c.hideBar=!1,c.fullScreenStatus=!1,n.$on("videoBarHide",function(e,o){o&&(c.hideBar=!0,n.$apply())}),n.$on("videoBarShow",function(e,o){o&&(c.hideBar=!1,n.$apply())}),n.$on("videoIsLoading",function(e,o){n.videoIsLoading=o}),n.$on("changeFullscreenStatus",function(e,o){}),n.closeFullscreen=function(){c.fullScreenStatus=!1,n.$broadcast("closeFullscreenStatus",!1)}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("dialogVideoPlayer",{url:"/dialogvideoplayer/params/:url/:image",cache:!1,templateUrl:"views/publicPage/dialogVideoPlayer/dialogVideoPlayer.html",controller:"dialogVideoPlayerCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("downloadPageCtl",["NimUtils","appUtils","enterViewLoad","$location","$rootScope","$timeout","$scope",function(o,t,a,n,i,c,e){e.back=function(){t.back()},window.location="http://a.app.qq.com/o/simple.jsp?pkgname=com.fangtian.ft"}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("downloadPage",{url:"/downloadpage/:nimid",cache:!1,templateUrl:"views/publicPage/downloadPage/downloadPage.html",controller:"downloadPageCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("LoginController",["NimUtils","appUtils","WechatService","enterViewLoad","$window","$localStorage","$ionicModal","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$ionicHistory",function(t,n,o,e,a,i,c,s,u,r,d,l,f,m,g){l.back=function(){g.backView()?n.back():d.go("tabs.realHome")},n.saveKeyboardHeight(),l.wechatInstalled=!1,l.qqInstalled=!1,document.addEventListener("deviceready",function(){Wechat.isInstalled(function(n){l.wechatInstalled=!!n},function(n){}),YCQQ.checkClientInstalled(function(){l.qqInstalled=!0},function(){l.qqInstalled=!1})},!1),l.$on("$ionicView.beforeLeaev",function(){l.closeModal()}),c.fromTemplateUrl("login_choose_bind_modal",{scope:l,animation:"slide-in-up"}).then(function(n){l.modal=n}),l.showModal=function(){l.modal.show()},l.closeModal=function(){l.modal.hide()},l.wxLogin=function(){n.wechatUnionId(function(t){u.post(r.Account.exterlogin.url,{LoginProvider:"Weixin",ProviderKey:t.unionid}).then(function(n){0==n.data.status?(e.customload("登录成功"),i.access_token=n.data.access_token,l.getuserInfo(),s(function(){g.backView()?l.back():d.go("tabs.perCenter")},1500)):1==n.data.status&&(l.bindParams={type:"Weixin",key:t.unionid},l.showModal())}).catch(function(n){e.customload("登录失败")})},function(){e.customload("登录失败")})},l.qqLogin=function(){n.qqLoginAndroid(function(t){u.post(r.Account.exterlogin.url,{LoginProvider:"QQ",ProviderKey:t.userid}).then(function(n){0==n.data.status?(e.customload("登录成功"),i.access_token=n.data.access_token,l.getuserInfo(),s(function(){g.backView()?l.back():d.go("tabs.perCenter")},1500)):1==n.data.status&&(l.bindParams={type:"QQ",key:t.userid},l.showModal())}).catch(function(n){e.customload("登录失败")})},function(n){e.customload("登录失败")})},l.logininfo={grant_type:"password",username:null,password:null},l.login=function(){var n={method:"POST",url:r.Account.login.url,dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=password&username="+l.logininfo.username+"&Password="+l.logininfo.password};u(n).then(function(n){e.customload("登录成功"),i.access_token=n.data.access_token,l.getuserInfo(),s(function(){g.backView()?l.back():d.go("tabs.perCenter")},1500)}).catch(function(n){e.customload("用户名或密码错误")})},l.getuserInfo=function(){u.get(r.Account.getuserinfo.url).then(function(n){i.myselfInfo=n.data,u.post(r.Neteast.user.url+"?id=").then(function(n){"SUCCESS"==n.data.return_code?(i.myNimAccount=n.data.return_msg,t.init(n.data.return_msg)):e.customload(n.data.return_msg)})}).catch(function(n){})}}]).directive("dateFormat",["$filter",function(n){var a=n("date");return{require:"ngModel",link:function(n,t,o,e){e.$formatters.push(function(n){return a(n,"yyyy-MM-dd")}),e.$parsers.unshift(function(){return e.$modelValue})}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("login",{url:"/login",cache:!1,templateUrl:"views/publicPage/login/login.html",controller:"LoginController",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("mySetCtl",["NimUtils","appUtils","enterViewLoad","$localStorage","$ionicModal","$timeout","$ionicHistory","$cordovaAppVersion","$cordovaFileTransfer","$cordovaFile","$cordovaFileOpener2","$rootScope","$http","$Factory","$state","$scope","$stateParams","$ionicPopup","$ionicLoading",function(o,t,i,n,e,c,a,r,u,d,s,l,f,m,h,p,g,v,x){function $(){document.addEventListener("deviceready",function(){f.post(m.AppJson.version.url).then(function(i){var a=i.data.android.version;r.getVersionNumber().then(function(n){var o,e,t;a<=n?x.show({template:"当前已是最新版本",duration:2e3}):(o=i.data.android.versionDescription,e=i.data.android.updateUrl,t=a,v.confirm({title:"检查到新版本"+t,template:o,cancelText:"取消",okText:"升级"}).then(function(n){if(n){var t=function(){var n=e,o=(new Date).getTime(),t=cordova.file.externalRootDirectory+"fangtian"+o+".apk";u.download(n,t,{},!0).then(function(n){s.open(t,"application/vnd.android.package-archive").then(function(){},function(n){}),x.hide()},function(n){x.show({template:"未设置存储权限，下载失败",duration:2e3})},function(o){c(function(){var n=o.loaded/o.total*100;x.show({template:"已经下载："+Math.floor(n)+"%"}),99<n&&x.hide()})})},i=cordova.plugins.permissions;i.hasPermission(i.READ_EXTERNAL_STORAGE,function(n){if(n.hasPermission)t();else{var o=function(){};i.requestPermission(i.READ_EXTERNAL_STORAGE,function(n){n.hasPermission?t():o()},o)}},null)}}))})})},!1)}p.back=function(){t.back()},p.hasNewVersion=t.statusData.hasNewVersion,e.fromTemplateUrl("myset_real_name_modal",{scope:p,animation:"slide-in-left"}).then(function(n){p.realnameModal=n}),p.showRealNameModal=function(){p.realnameModal.show()},p.closeRealNameModal=function(){p.realnameModal.hide()},f.get(m.Account.getuserinfo.url).then(function(n){p.myInfo=n.data}).catch(function(){}),p.realName=function(){p.myInfo&&2==p.myInfo.VStatus?i.customload("您已实名"):p.myInfo&&1==p.myInfo.VStatus?i.customload("审核中"):p.showRealNameModal()},p.getBindInfo=function(){f.post(m.Account.getexterlogins.url).then(function(n){for(var o=0;o<n.data.length;o++)"Weixin"==n.data[o].LoginProvider?(p.weixinBindInfo=n.data[o],p.bindWeixinStatus=!0):"QQ"==n.data[o].LoginProvider&&(p.qqBindInfo=n.data[o],p.bindQQStatus=!0)}).catch(function(n){})},p.$on("$ionicView.enter",function(){p.bindWeixinStatus=!1,p.bindQQStatus=!1,p.getBindInfo()}),p.bindWeixin=function(){t.wechatUnionId(function(n){f.post(m.Account.addexterlogin.url,{LoginProvider:"Weixin",ProviderKey:n.unionid}).then(function(n){i.customload("绑定成功"),p.getBindInfo()}).catch(function(n){i.customload("绑定失败")})},function(){i.customload("绑定失败")})},p.bindQQ=function(){t.qqLoginAndroid(function(n){f.post(m.Account.addexterlogin.url,{LoginProvider:"QQ",ProviderKey:n.userid}).then(function(n){i.customload("绑定成功"),p.getBindInfo()}).catch(function(n){i.customload("绑定失败")})},function(){i.customload("绑定失败")})},p.removeBind=function(o){v.confirm({title:"确定解除绑定？",cancelText:"取消",okText:"确定"}).then(function(n){n&&f.post(m.Account.removelogin.url,o).then(function(n){i.customload("解绑成功"),"Weixin"==o.LoginProvider?p.bindWeixinStatus=!1:"QQ"==o.LoginProvider&&(p.bindQQStatus=!1)}).catch(function(n){i.customload("解绑失败")})})},p.logout=function(){v.confirm({title:"确定退出？",cancelText:"取消",okText:"退出"}).then(function(n){n&&f.post(m.Account.logout.url).then(function(n){t.resetLocalStorage(),p.back(),nim.disconnect(),o.clearData()}).catch(function(n){401==n.status&&(t.resetLocalStorage(),p.back())})})},p.checkVersion=function(){$()},p.notNow=function(){i.customload("暂未开通")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("mySet",{url:"/publicpage/myset",cache:!1,templateUrl:"views/publicPage/mySet/mySet.html",controller:"mySetCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("needDetailCtl",["appUtils","WechatService","wechatLinkBase","$localStorage","$ionicModal","$http","$Factory","$state","$stateParams","$scope","$ionicLoading",function(s,r,t,a,e,n,o,i,l,d,c){d.back=function(){s.back()},d.$on("$ionicView.enter",function(){d.myselfInfo=a.myselfInfo}),d.goChat=function(e){a.myselfInfo.Id!=e?i.go("dialogBox",{id:"fangtian_"+e}):c.show({template:"你的需求",duration:1500})},n.get(o.HouseNeed.detail.url,{params:{id:l.id}}).then(function(e){d.needInfo=e.data,d.needUserInfo=e.data.UserInfo}),e.fromTemplateUrl("need_detail_share_modal",{scope:d,animation:"slide-in-up"}).then(function(e){d.shareModal=e}),d.showBottomShareModal=function(){d.shareModal.show()},d.closeBottomShareModal=function(){d.shareModal.hide()},d.share=function(a){switch(d.needInfo.Type){case 0:d.shareTitle=d.needUserInfo.Name+"求购新房";break;case 1:d.shareTitle=d.needUserInfo.Name+"求购二手房";break;case 2:d.shareTitle=d.needUserInfo.Name+"求租房";break;case 3:d.shareTitle=d.needUserInfo.Name+"求租商铺";break;case 4:d.shareTitle=d.needUserInfo.Name+"求租写字楼";break;case 5:d.shareTitle=d.needUserInfo.Name+"求购商铺";break;case 6:d.shareTitle=d.needUserInfo.Name+"求租工厂";break;case 7:d.shareTitle=d.needUserInfo.Name+"求购工厂";break;case 8:d.shareTitle=d.needUserInfo.Name+"求租仓库";break;case 9:d.shareTitle=d.needUserInfo.Name+"求购仓库";break;case 10:d.shareTitle=d.needUserInfo.Name+"求租车位";break;case 11:d.shareTitle=d.needUserInfo.Name+"求购车位";break;case 12:d.shareTitle=d.needUserInfo.Name+"求购新房";break;case 13:d.shareTitle=d.needUserInfo.Name+"求租合租";break;case 14:d.shareTitle=d.needUserInfo.Name+"求租品牌公寓";break;case 15:d.shareTitle=d.needUserInfo.Name+"个人房源";break;case 16:d.shareTitle=d.needUserInfo.Name+"房东委托";break;case 17:d.shareTitle=d.needUserInfo.Name+"求购写字楼";break;default:d.shareTitle=d.needUserInfo.Name+"的房源需求"}if(d.shareImgUrl=d.needUserInfo.ShowImage||"http://imgs.wujiuyun.com/images/logo.png",0==a||1==a)t.changeBase(d.shareImgUrl,function(e){d.params={scene:a,message:{title:d.shareTitle||"房田用户房源需求",thumb:e,description:d.needInfo.Attach||"需求详情",media:{type:Wechat.Type.LINK,webpageUrl:s.shareHost+"/#/needdetail/params/"+l.id}}},r.share(d.params)});else if(2==a){(e={}).url=s.shareHost+"/#/needdetail/params/"+l.id,e.title=d.shareTitle||"房田用户房源需求",e.description=d.needInfo.Attach||"需求详情",e.imageUrl=d.shareImgUrl,e.appName="房田网",s.qqShareQQAndroid(e,function(){},function(e){})}else{var e;(e={}).url=s.shareHost+"/#/needdetail/params/"+l.id,e.title=d.shareTitle||"房田用户房源需求",e.description=d.needInfo.Attach||"需求详情";var n=[d.shareImgUrl];e.imageUrl=n,YCQQ.shareToQzone(function(){},function(e){},e)}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("needDetail",{url:"/needdetail/params/:id",templateUrl:"views/publicPage/needDetail/needDetail.html",controller:"needDetailCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("newHouseDetailCtl",["appUtils","enterViewLoad","wechatLinkBase","WechatService","$ionicScrollDelegate","$location","$localStorage","$ionicModal","$timeout","$scope","$state","$stateParams","$http","$Factory","$ionicSlideBoxDelegate","$ionicPopup",function(a,n,t,i,e,r,o,l,s,c,u,d,h,p,f,m){c.back=function(){a.back()},c.id=d.id,c.goChat=function(e){a.ftIdToNim(e)},c.scrollListen=function(){try{c.detailScrollTop=e.$getByHandle("new-house-detail-Scroll").getScrollPosition().top}catch(e){}61<c.detailScrollTop?s(function(){c.showHeader=!0}):s(function(){c.showHeader=!1})},h.get(p.NewHouse.getdetail.url,{params:{id:d.id}}).then(function(e){c.newHouseInfo=e.data,c.bannerarr=e.data.ShowBuildingImg,c.totalbanner=e.data.ShowBuildingImg.length,0<c.bannerarr.length&&(f.update(),2<c.bannerarr.length&&f.loop(!0)),(new BMap.Geocoder).getPoint(e.data.Address,function(n){s(function(){var e=new BMap.Map("newhousedetail_map");n?(e.centerAndZoom(n,16),e.addOverlay(new BMap.Marker(n))):(e.centerAndZoom(new BMap.Point(118.181163,24.488326),16),e.addOverlay(new BMap.Point(118.063663,24.606958)))},500)},"厦门市")}),c.$on("ngRepeatFinished",function(e){new Swiper("#new_house_detail_swiper",{freeMode:!0,freeModeMomentumRatio:.5,slidesPerView:"auto"})}),c.currentIndex=0,c.changeindex=function(){c.currentIndex=f.$getByHandle("fydetail-handle").currentIndex()},c.applyAgent=function(){m.confirm({title:"申请代理",template:"确认申请代理这套房子?",cancelText:"取消",okText:"确认"}).then(function(e){e?h.post(p.NewHouseProxy.applicant.url,c.newHouseInfo.Id).then(function(e){n.customload("申请成功"),c.newHouseInfo.IsProxed=!0}):n.customload("取消")})},l.fromTemplateUrl("new_house_detail_share_modal",{scope:c,animation:"slide-in-up"}).then(function(e){c.shareModal=e}),c.showBottomShareModal=function(){c.shareModal.show()},c.closeBottomShareModal=function(){c.shareModal.hide()},c.share=function(n){if(c.saveShare(),c.shareImgUrl=c.bannerarr.slice(0,1)&&0<c.bannerarr.slice(0,1)[0].length?c.bannerarr.slice(0,1)[0]:"http://imgs.wujiuyun.com/images/logo.png",0==n||1==n)t.changeBase(c.shareImgUrl,function(e){c.params={scene:n,message:{title:c.newHouseInfo.NewHouseName||"新房出售",thumb:e,description:c.newHouseInfo.SupportingFacilities||"房田网为您推荐",media:{type:Wechat.Type.LINK,webpageUrl:a.shareHost+"/#"+r.path()}}},i.share(c.params)});else{var e={};if(e.url=a.shareHost+"/#"+r.path(),e.title=c.newHouseInfo.NewHouseName||"新房出售",e.description=c.newHouseInfo.SupportingFacilities||"房田网为您推荐",2==n)e.imageUrl=c.shareImgUrl,e.appName="房田网",a.qqShareQQAndroid(e,function(){},function(e){});else{var o=[c.shareImgUrl];e.imageUrl=o,YCQQ.shareToQzone(function(){},function(e){},e)}}},c.saveShare=function(){h.post(p.Share.save.url,{ShareType:1,ObjectId:d.id,Phone:o.myselfInfo?o.myselfInfo.UserName:""}).then(function(e){}).catch(function(e){})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("newHouseDetail",{url:"/newhousedetail/params/:id",cache:!1,templateUrl:"views/publicPage/newHouseDetail/newHouseDetail.html",controller:"newHouseDetailCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("orderVisitCtl",["appUtils","enterViewLoad","$localStorage","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading",function(o,e,t,a,s,n,u,r,i,d,c){i.back=function(){o.back()},i.houseId=r.houseid,i.subData={NewHouseId:"",ProxerId:null,LookTime:""},d.$on("chooseOrderHouseSuc",function(o,e){i.houseId=e.Id,s.get(n.NewHouse.getdetail.url,{params:{id:e.Id}}).then(function(o){i.houseInfo=o.data,i.houseInfo.Space=e.Space})}),i.userinfo=t.myselfInfo,i.subData.ProxerId=i.userinfo.Id;for(var l=[],f=0;f<60;f++){var h=new Date;h.setDate(h.getDate()+f);var I=h.getFullYear(),g=h.getMonth()+1,m=h.getDate();l.push(I+"/"+g+"/"+m)}$.scrEvent({data:l,evEle:".sub-order-visit-time",title:"看房时间",defValue:l[1],afterAction:function(o){$(".sub-order-visit-time").val(o),i.subData.LookTime=o}}),i.radioChoose=0,i.changeRadioType=function(o){i.radioChoose=o,0==i.radioChoose?i.subData.ProxerId=i.userinfo.Id:u.go("orderAgentList",{houseid:r.houseid})},d.$on("chooseVisitAgentChange",function(o,e){i.reload=!0,i.agentInfo=e}),i.$on("$ionicView.enter",function(){i.reload&&(i.reload=!1,i.subData.ProxerId=i.agentInfo.ProxerId)}),i.save=function(){i.houseInfo&&i.houseInfo.IsReserve?e.customload("您已预约过该套房源",2e3):i.houseId?i.subData.LookTime?(i.subData.NewHouseId=i.houseId,s.post(n.NewHouseTrade.wantlook.url,i.subData).then(function(o){e.customload("提交成功"),a(function(){i.back()},1500)}).catch(function(){e.customload("提交失败")})):e.customload("请选择时间"):e.customload("请选择预约房源")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(i){i.state("orderVisit",{url:"/ordervisit/params/:houseid",templateUrl:"views/publicPage/orderVisit/orderVisit.html",controller:"orderVisitCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("otherHouseDetailCtl",["appUtils","enterViewLoad","WechatService","wechatLinkBase","$location","$localStorage","$ionicScrollDelegate","$ionicModal","$timeout","$ionicHistory","$scope","$state","$stateParams","$http","$Factory","$ionicSlideBoxDelegate","$ionicPopup","$ionicPopover",function(n,o,t,i,r,e,a,l,s,c,h,d,u,p,m,f,g,S){h.back=function(){n.back()},h.id=u.id,h.isshop=u.isshop,h.goChat=function(e){n.ftIdToNim(e)},h.myselfInfo=e.myselfInfo,h.scrollListen=function(){try{h.detailScrollTop=a.$getByHandle("other-house-detail-Scroll").getScrollPosition().top}catch(e){}61<h.detailScrollTop?s(function(){h.showHeader=!0}):s(function(){h.showHeader=!1})},p.get(m.SimpleHouse.getdetail.url,{params:{id:u.id,isShop:u.isshop}}).then(function(e){e.data.ConfigurJson&&(e.data.ConfigurJson=JSON.parse(e.data.ConfigurJson)),h.houseinfo=e.data,h.bannerarr=e.data.IndoorShowImages,h.totalbanner=e.data.IndoorShowImages.length,0<h.bannerarr.length&&(f.update(),2<h.bannerarr.length&&f.loop(!0)),(new BMap.Geocoder).getPoint(e.data.CommunityName,function(o){s(function(){var e=new BMap.Map("other_house_detail_map");o?(e.centerAndZoom(o,16),e.addOverlay(new BMap.Marker(o))):(e.centerAndZoom(new BMap.Point(118.181163,24.488326),16),e.addOverlay(new BMap.Point(118.063663,24.606958)))},500)},"厦门市")}),h.currentIndex=0,h.changeindex=function(){h.currentIndex=f.$getByHandle("other-house-detail-handle").currentIndex()},h.applyAgent=function(){g.confirm({title:"申请代理",template:"确认申请代理这套房子?",cancelText:"取消",okText:"确认"}).then(function(e){e?o.customload("申请成功"):o.customload("申请失败")})},l.fromTemplateUrl("other_house_detail_share_modal",{scope:h,animation:"slide-in-up"}).then(function(e){h.shareModal=e}),h.showBottomShareModal=function(){h.shareModal.show()},h.closeBottomShareModal=function(){h.shareModal.hide()},h.share=function(o){if(h.shareImgUrl=h.bannerarr.slice(0,1)&&0<h.bannerarr.slice(0,1)[0].length?h.bannerarr.slice(0,1)[0]:"http://imgs.wujiuyun.com/images/logo.png",0==o||1==o)i.changeBase(h.shareImgUrl,function(e){h.params={scene:o,message:{title:h.houseinfo.Title||"二类房出售",thumb:e,description:h.Discription||"房田网为您推荐",media:{type:Wechat.Type.LINK,webpageUrl:n.shareHost+"/#"+r.path()}}},t.share(h.params)});else{var e={};if(e.url=n.shareHost+"/#"+r.path(),e.title=h.houseinfo.Title||"二类房出售",e.description=h.Discription||"房田网为您推荐",2==o)e.imageUrl=h.shareImgUrl,e.appName="房田网",n.qqShareQQAndroid(e,function(){},function(e){});else{var a=[h.shareImgUrl];e.imageUrl=a,YCQQ.shareToQzone(function(){},function(e){},e)}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("otherHouseDetail",{url:"/otherhousedetail/:id/:isshop",cache:!1,templateUrl:"views/publicPage/otherHouseDetail/otherHouseDetail.html",controller:"otherHouseDetailCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("personalHomePageCtl",["appUtils","$rootScope","$ionicHistory","$ionicPopover","$ionicActionSheet","$http","$Factory","$scope","$state","$stateParams","$timeout","WechatService","$ionicLoading",function(o,t,e,i,n,a,s,c,h,r,u,w,$){c.back=function(){o.back()},c.userId=r.id,c.$on("$ionicView.enter",function(){var t={showMySex:!0,showMyJob:!0,showMyChoosePrefer:!0,showMyHouse:!0,showMyNeed:!0,showMyEvaluation:!0,showMyRecruitment:!0,showMyShop:!0,showMyTask:!0};a.post(s.Account.showinfo.url+"?id="+r.id).then(function(o){o.data.ShowConfig=JSON.parse(o.data.ShowConfig)||t,c.hisInfo=o.data}).catch(function(o){})})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("personalHomePage",{url:"/personalhomepage/:id",templateUrl:"views/publicPage/personalHomePage/personalHomePage.html",controller:"personalHomePageCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("personalHouseCtl",["appUtils","enterViewLoad","$localStorage","$rootScope","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$stateParams","$ionicPopup","$timeout","$ionicActionSheet",function(e,t,i,a,o,n,u,c,p,s,d,r,l,y){s.back=function(){e.back()},s.$on("$ionicView.enter",function(){s.loadData()}),s.activeIndex=d.type?d.type-1:0,s.switchSlide=function(e){s.activeIndex=e},s.loadData=function(){c.get(p.NewHouseSource.publicquery.url,{params:{pagesize:100,pagenum:0,cityId:1,Type:1,userid:d.id,date:6}}).then(function(e){s.myOldList=e.data}),c.get(p.NewHouseSource.publicquery.url,{params:{pagesize:100,pagenum:0,cityId:1,Type:2,userid:d.id,date:6}}).then(function(e){s.myRentList=e.data}),c.post(p.SimpleHouse.publicquery.url,{pagesize:100,pagenum:0,cityId:1,Type:1,userid:d.id,date:6}).then(function(e){s.myShopList=e.data}),c.post(p.SimpleHouse.publicquery.url,{pagesize:100,pagenum:0,cityId:1,Type:2,userid:d.id,date:6}).then(function(e){s.myOfficList=e.data})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("personalHouse",{url:"/personalhouse/:id",templateUrl:"views/publicPage/personalHouse/personalHouse.html",controller:"personalHouseCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("personalNeedCtl",["appUtils","$ionicHistory","$ionicLoading","$Factory","$http","$scope","$rootScope","$state","$stateParams","$timeout",function(e,t,o,i,u,s,n,a,c,d){s.back=function(){e.back()},s.$on("$ionicView.enter",function(){"buy"==c.needtype?(s.isBuy=!0,s.headTitle="求购"):(s.isBuy=!1,s.headTitle="求租"),s.switchBuySell=function(){s.isBuy?(s.isBuy=!1,s.headTitle="求租",s.houseType=2):(s.isBuy=!0,s.headTitle="求购",s.houseType=0),s.loadNeeds(s.houseType)},s.houseType=0,s.switchHouseType=function(e){s.houseType=e,s.loadNeeds(s.houseType)},s.loadNeeds(s.houseType)}),s.loadNeeds=function(e){var t={method:"Get",url:i.HouseNeed.query.url+"?Type="+e,data:1901};u(t).then(function(e){s.needList=e.data}).catch(function(){o.show({template:"获取数据失败",duration:1500})})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("personalNeed",{url:"/personalneed/:id",templateUrl:"views/publicPage/personalNeed/personalNeed.html",controller:"personalNeedCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("realHouseCtl",["appUtils","upImgBase","enterViewLoad","$http","$Factory","$state","$stateParams","$scope","$timeout","$ionicLoading",function(a,t,e,o,r,s,d,u,n,c){u.back=function(){a.back()},u.paramsData={id:d.id,address:d.address,housetype:d.housetype},u.subData={HouseId:d.id,HolderName:"",HouseIdImage:"",HouseNumber:"",Address:"",Status:0,ExInfo:""},u.showHouseCard={showFrontVCard:"",frontVCard:"",showReverseVCard:"",reverseVCard:""},$("#real_house .id-img").on("click",".img",function(){$(this).next().click()}),$("#real_house .id-img").on("change","input",function(){var a=$(this)[0].files[0];t.changeBase(URL.createObjectURL(a),function(a){o.post(r.Account.upload.url,{path:"18/realhouse",file:a}).then(function(a){0==a.data.error&&(u.showHouseCard.showFrontVCard=a.data.view,u.showHouseCard.frontVCard=a.data.url)})})}),$("#real_house .id-img-reverse").on("click",".img",function(){$(this).next().click()}),$("#real_house .id-img-reverse").on("change","input",function(){var a=$(this)[0].files[0];t.changeBase(URL.createObjectURL(a),function(a){o.post(r.Account.upload.url,{path:"18/realhouse",file:a}).then(function(a){0==a.data.error&&(u.showHouseCard.showReverseVCard=a.data.view,u.showHouseCard.reverseVCard=a.data.url)})})}),u.baidu=function(){e.load(),o.post(r.BaiduAPI.housecard.url,{frontUrl:u.showHouseCard.frontVCard,backUrl:u.showHouseCard.reverseVCard}).then(function(a){if(c.hide(),a.data.font.data.isStructured&&0<a.data.font.data.ret.length)for(var t=0;t<a.data.font.data.ret.length;t++)"产权号01"==a.data.font.data.ret[t].word_name&&(u.subData.HouseNumber=a.data.font.data.ret[t].word);if(a.data.back.data.isStructured&&0<a.data.back.data.ret.length)for(t=0;t<a.data.back.data.ret.length;t++)"权利人"==a.data.back.data.ret[t].word_name&&(u.subData.HolderName=a.data.back.data.ret[t].word),"房地坐落"==a.data.back.data.ret[t].word_name&&(u.subData.Address=a.data.back.data.ret[t].word),"共有权情况"==a.data.back.data.ret[t].word_name&&(u.subData.ExInfo=a.data.back.data.ret[t].word);n(function(){u.subData=u.subData})}).catch(function(a){c.hide(),e.customload("身份证识别错误")})},u.$watch("showHouseCard.frontVCard",function(a){u.showHouseCard.frontVCard&&u.showHouseCard.reverseVCard&&u.baidu()}),u.$watch("showHouseCard.reverseVCard",function(a){u.showHouseCard.frontVCard&&u.showHouseCard.reverseVCard&&u.baidu()}),u.save=function(){if(!u.showHouseCard.showFrontVCard||!u.showHouseCard.showReverseVCard)return e.customload("请上传房产证图片…",2e3),!1;if(!u.subData.HolderName)return e.customload("权利人识别失败<br>请重新上传第二页",2e3),!1;if(!u.subData.HouseNumber)return e.customload("房产证号识别失败<br>请重新上传第一页",2e3),!1;if(u.subData.Address!=u.paramsData.address)return e.customload("房地坐落与房产证上不一致",2e3),!1;var a=JSON.parse(JSON.stringify(u.subData));a.Status=2,a.HouseIdImage=u.showHouseCard.showFrontVCard+"|"+u.showHouseCard.showReverseVCard,1==u.paramsData.housetype?o.post(r.NewHouseSource.auth.url,a).then(function(a){e.customload("提交成功"),n(function(){u.back()},1500)}).catch(function(){e.customload("提交失败")}):o.post(r.SimpleHouse.auth.url,a).then(function(a){e.customload("提交成功"),n(function(){u.back()},1500)}).catch(function(){e.customload("提交失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("realHouse",{url:"/realhouse/params/:id/:address/:housetype",cache:!1,templateUrl:"views/publicPage/realHouse/realHouse.html",controller:"realHouseCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("realNameCtl",["NimUtils","appUtils","enterViewLoad","$localStorage","$ionicActionSheet","$timeout","upImgBase","$http","$Factory","$scope","$rootScope","$ionicLoading",function(o,r,a,e,t,d,n,s,u,i,c,f){i.back=function(){r.back()},s.get(u.Account.getuserinfo.url).then(function(t){i.userinfo=t.data}).catch(function(){}),i.showIdCard={showFrontVCard:"",frontVCard:"",showReverseVCard:"",reverseVCard:""},i.froentAction=function(){t.show({buttons:[{text:"相册选取"},{text:"拍照"}],cancelText:"取消",cancel:function(){},buttonClicked:function(t){if(0==t){r.photoLiberary({selectMode:100,maxSelectCount:1,maxSelectSize:188743680},function(t,r){s.post(u.Account.upload.url,{path:"18/userVcards",file:t,orientation:r}).then(function(t){0==t.data.error&&(i.showIdCard.showFrontVCard=t.data.view,i.showIdCard.frontVCard=t.data.url)})},function(t){a.customload("获取图片失败")})}else if(1==t){r.cameraBase({width:1e3,height:1e3},function(t){s.post(u.Account.upload.url,{path:"18/userVcards",file:t}).then(function(t){0==t.data.error&&(i.showIdCard.showFrontVCard=t.data.view,i.showIdCard.frontVCard=t.data.url)})},function(t){a.customload("调用相机失败")})}return!0}})},i.backAction=function(){t.show({buttons:[{text:"相册选取"},{text:"拍照"}],cancelText:"取消",cancel:function(){},buttonClicked:function(t){if(0==t){r.photoLiberary({selectMode:100,maxSelectCount:1,maxSelectSize:188743680},function(t,r){s.post(u.Account.upload.url,{path:"18/userVcards",file:t,orientation:r}).then(function(t){0==t.data.error&&(i.showIdCard.showReverseVCard=t.data.view,i.showIdCard.reverseVCard=t.data.url)})},function(t){a.customload("获取图片失败")})}else if(1==t){r.cameraBase({width:1e3,height:1e3},function(t){s.post(u.Account.upload.url,{path:"18/userVcards",file:t}).then(function(t){0==t.data.error&&(i.showIdCard.showReverseVCard=t.data.view,i.showIdCard.reverseVCard=t.data.url)})},function(t){a.customload("调用相机失败")})}return!0}})},i.baiduData={signOrgan:""},i.baidu=function(){a.load(),s.post(u.BaiduAPI.idcard.url,{frontUrl:i.showIdCard.frontVCard,backUrl:i.showIdCard.reverseVCard}).then(function(t){f.hide(),i.userinfo.Name=t.data.font.words_result.姓名?t.data.font.words_result.姓名.words:"",i.userinfo.VNumber=t.data.font.words_result.公民身份号码?t.data.font.words_result.公民身份号码.words:"",i.userinfo.Address=t.data.font.words_result.住址?t.data.font.words_result.住址.words:"",i.baiduData={signOrgan:t.data.back.words_result.签发机关?t.data.back.words_result.签发机关.words:""}}).catch(function(t){f.hide(),a.customload("身份证识别错误")})},i.$watch("showIdCard.frontVCard",function(t){i.showIdCard.frontVCard&&i.showIdCard.reverseVCard&&i.baidu()}),i.$watch("showIdCard.reverseVCard",function(t){i.showIdCard.frontVCard&&i.showIdCard.reverseVCard&&i.baidu()}),i.save=function(){if(!i.showIdCard.frontVCard||!i.showIdCard.reverseVCard)return a.customload("请上传身份证"),!1;if(!i.baiduData.signOrgan)return a.customload("身份证反面识别错误<br/>请重新上传",2e3),!1;if(!i.userinfo.Name)return a.customload("身份证姓名识别错误<br/>请重新上传",2e3),!1;if(!/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(i.userinfo.VNumber))return a.customload("身份证号识别错误<br/>请重新上传"),!1;var r=JSON.parse(JSON.stringify(i.userinfo));r.AICheck=!0,r.VStatus=4,r.VCard=i.showIdCard.frontVCard+"|"+i.showIdCard.reverseVCard,s.post(u.Account.setuserinfo.url,r).then(function(t){a.customload("保存成功"),d(function(){i.back()},1500),e.myselfInfo=r,nim.updateMyInfo({email:i.userinfo.Email,done:function(t,r){t||o.updateMyInfo()}})},function(t){var r=t.data.Message||"保存失败";a.customload(r)})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("realName",{url:"/realname",cache:!1,templateUrl:"views/publicPage/realName/realName.html",controller:"realNameCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("RegisterorbackController",["NimUtils","appUtils","enterViewLoad","$localStorage","$ionicModal","wechatLinkBase","$rootScope","$interval","$timeout","$ionicHistory","$http","$Factory","$stateParams","$scope","$state","$ionicLoading",function(t,o,e,n,a,c,u,s,i,r,d,l,m,f,w,p){f.back=function(){o.back()},o.saveKeyboardHeight(),f.name=m.name,f.$on("$ionicView.beforeLeave",function(){f.endCountDownNum()}),f.registerAgree={agree:!0},f.submitData={Phone:"",Password:"",ConfirmPassword:"",Code:"",Name:"",ParPhone:""},f.submitForgotData={Phone:"",Code:"",NewPassWord:""},f.showCountDown=!1,f.countDownNum=90,f.startCountDown=function(){f.showCountDown=!0,f.clock=s(function(){f.countDownNum--,f.countDownNum<1&&f.endCountDownNum()},1e3)},f.endCountDownNum=function(){f.showCountDown=!1,f.clock&&(f.countDownNum=90,s.cancel(f.clock))},f.yzcode=function(o,t){if(!/^1[34578]\d{9}$/.test(t))return e.customload("请输入正确的手机号码"),!1;f.startCountDown();var n={method:"POST",url:l.Account.msg.url+"?phone="+t,headers:{"Content-Type":"application/x-www-form-urlencoded"}};d(n).then(function(o){e.customload("发送成功")}).catch(function(o){f.endCountDownNum(),e.customload("发送失败")})},a.fromTemplateUrl("register_modal",{scope:f,animation:"slide-in-up"}).then(function(o){f.modal=o}),f.closeModal=function(){f.modal.hide()},f.$on("modal.hidden",function(){f.clicknextStep||u.$ionicGoBack()}),f.getuserInfo=function(){d.get(l.Account.getuserinfo.url).then(function(o){n.myselfInfo=o.data,d.post(l.Neteast.user.url+"?id=").then(function(o){"SUCCESS"==o.data.return_code?(n.myNimAccount=o.data.return_msg,t.init(o.data.return_msg)):e.customload(o.data.return_msg)})}).catch(function(o){})},f.Done=function(){if("注册"==f.name){if(f.submitData.Password!=f.submitData.ConfirmPassword)return void e.customload("两次密码输入不一致");if(!f.registerAgree.agree)return void e.customload("您还未接受房田用户协议");d.post(l.Account.register.url,f.submitData).then(function(o){e.customload("注册成功");var t={method:"POST",url:l.Account.login.url,dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=password&username="+f.submitData.Phone+"&Password="+f.submitData.Password};d(t).then(function(o){n.access_token=o.data.access_token,f.getuserInfo()}),i(function(){f.modal.show()},1500),f.nextStep=function(){f.clicknextStep=!0;var o={method:"POST",url:l.Account.login.url,dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=password&username="+f.submitData.Phone+"&Password="+f.submitData.Password};d(o).then(function(o){n.access_token=o.data.access_token,w.go("CompleteInfo")}),f.closeModal()},f.cancelNext=function(){f.closeModal(),u.$ionicGoBack()}}).catch(function(o){e.customload(o.data.Message),f.endCountDownNum()})}else d.post(l.Account.forgotpwd.url,f.submitForgotData).then(function(o){e.customload("修改成功"),i(function(){u.$ionicGoBack()},1500)}).catch(function(o){e.customload(o.data.Message),f.endCountDownNum()})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(r){r.state("registerorback",{cache:!1,url:"/registerorback/:name",templateUrl:"views/publicPage/registerorback/registerorback.html",controller:"RegisterorbackController",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("registerShareCtl",["enterViewLoad","$window","$localStorage","$ionicModal","wechatLinkBase","$rootScope","$interval","$timeout","$ionicHistory","$http","$Factory","$stateParams","$scope","$state","$ionicLoading",function(e,o,n,t,a,c,u,i,r,s,d,m,w,l,p){w.back=function(){l.go("tabs.perCenter")},w.downLoad=function(){navigator.userAgent.match(/(iPhone|iPod|iPad);?/i)&&o.open("itms-apps://itunes.apple.com/cn/app/linkmore/id1288448623?mt=8"),navigator.userAgent.match(/android/i)&&(o.location="http://a.app.qq.com/o/simple.jsp?pkgname=com.fangtian.ft")};try{w.parPhone=window.atob(m.parphone)}catch(o){w.parPhone=""}w.submitData={Phone:"",Password:"",ConfirmPassword:"",Code:"",Name:"",ParPhone:w.parPhone},w.registerAgree={agree:!0},w.$on("$ionicView.beforeLeave",function(){w.endCountDownNum()}),w.showCountDown=!1,w.countDownNum=80,w.startCountDown=function(){w.showCountDown=!0,w.clock=u(function(){w.countDownNum--,w.countDownNum<1&&w.endCountDownNum()},1e3)},w.endCountDownNum=function(){w.showCountDown=!1,w.clock&&(w.countDownNum=80,u.cancel(w.clock))},w.yzcode=function(o,n){if(!/^1[34578]\d{9}$/.test(n))return p.show({template:"请输入正确的手机号码",duration:1e3}),!1;if(w.registerAgree.agree){w.startCountDown();var t={method:"POST",url:d.Account.msg.url+"?phone="+n,headers:{"Content-Type":"application/x-www-form-urlencoded"}};s(t).then(function(o){e.customload("发送成功")}).catch(function(o){w.endCountDownNum(),e.customload("发送失败")})}else p.show({template:"还未同意房田用户协议",duration:1500})},w.Done=function(){if(w.submitData.Password==w.submitData.ConfirmPassword){var o={method:"POST",url:d.Account.register.url,headers:{"Content-Type":"application/json"},data:w.submitData};s(o).then(function(o){p.show({template:"注册成功",duration:1500}),w.getuserInfo(),i(function(){w.downLoad()},1500)}).catch(function(o){e.customload(o.data.Message),w.endCountDownNum()})}else e.customload("两次密码输入不一致")},w.getuserInfo=function(){var o={method:"POST",url:d.Account.login.url,dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"grant_type=password&username="+w.submitData.Phone+"&Password="+w.submitData.Password};s(o).then(function(o){n.access_token=o.data.access_token,s.get(d.Account.getuserinfo.url).then(function(o){n.myselfInfo=o.data}).catch(function(o){})}).catch(function(){})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("registershare",{cache:!1,url:"/shareregister/:parphone",templateUrl:"views/publicPage/registerShare/registerShare.html",controller:"registerShareCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("registerSharePosterCtl",["enterViewLoad","$localStorage","$ionicModal","wechatLinkBase","$rootScope","$interval","$timeout","$ionicHistory","$http","$Factory","$stateParams","$scope","$state","$ionicLoading",function(e,o,t,r,a,n,i,c,s,p,$,g,l,h){g.back=function(){l.go("tabs.perCenter")},g.parPhone=$.parphone,g.goReg=function(){l.go("registershare",{parphone:g.parPhone})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("registerSharePoster",{url:"/registershareposter/:parphone",templateUrl:"views/publicPage/registerSharePoster/registerSharePoster.html",controller:"registerSharePosterCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("rentHouseDetailCtl",["appUtils","enterViewLoad","WechatService","wechatLinkBase","$location","$localStorage","$ionicScrollDelegate","$ionicModal","$timeout","$ionicHistory","$scope","$state","$stateParams","$http","$Factory","$ionicSlideBoxDelegate","$ionicPopover",function(t,o,a,r,i,n,e,s,c,l,m,u,d,h,p,f,g){m.back=function(){t.back()},m.id=d.id,m.goChat=function(e){t.ftIdToNim(e)},m.myselfInfo=n.myselfInfo,m.scrollListen=function(){try{m.detailScrollTop=e.$getByHandle("rent-house-detail-Scroll").getScrollPosition().top}catch(e){}61<m.detailScrollTop?c(function(){m.showHeader=!0}):c(function(){m.showHeader=!1})},m.commentArr=[],m.loadComment=function(){h.get(p.NewHouseSource.getcomment.url,{params:{id:d.id}}).then(function(e){m.commentArr=JSON.parse(e.data.ContentJson)||[]}).catch(function(){})},m.loadComment(),m.reqComment=function(){h.post(p.NewHouseSource.savecomment.url,{HouseId:d.id,ContentJson:JSON.stringify(m.commentArr)}).then(function(e){m.loadComment(),o.customload("操作成功")}).catch(function(e){401==e.status?u.go("login"):o.customload("操作失败")})},m.commentInput={comment:""},m.clickLike=function(e){m.commentArr[e].comment.likeNum++,m.reqComment()},m.subComment=function(){var e={comment:{userinfo:n.myselfInfo,content:m.commentInput.comment,likeNum:0,createTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate()}};m.commentArr.push(e),m.reqComment(),m.closeCommentModal()},h.post(p.NewHouseSource.postdetail.url+"/"+d.id).then(function(e){e.data.house.ExProp&&(e.data.house.ExProp=JSON.parse(e.data.house.ExProp)),m.houseinfo=e.data.house,m.bannerarr=e.data.house.IndoorShowImages,m.totalbanner=e.data.house.IndoorShowImages.length,m.userinfo=e.data.info,0<m.bannerarr.length&&(f.update(),2<m.bannerarr.length&&f.loop(!0)),1==m.bannerarr.length&&$("#rent_house_detail .slider-pager").css("display","none"),e.data.house.Discription&&(m.Discription=e.data.house.Discription,m.isObj="{"==e.data.house.Discription.substring(0,1),m.isObj&&(m.Discription=JSON.parse(e.data.house.Discription))),5<e.data.others.length?m.otherArr=e.data.others.slice(0,5):m.otherArr=e.data.others,(new BMap.Geocoder).getPoint(e.data.house.CommunityAddress,function(o){c(function(){var e=new BMap.Map("renthousedetail_map");o?(e.centerAndZoom(o,16),e.addOverlay(new BMap.Marker(o))):(e.centerAndZoom(new BMap.Point(118.181163,24.488326),16),e.addOverlay(new BMap.Point(118.063663,24.606958)))},500)},"厦门市")}),m.currentIndex=0,m.changeindex=function(){m.currentIndex=f.$getByHandle("fydetail-handle").currentIndex()},s.fromTemplateUrl("rent_house_detail_share_modal",{scope:m,animation:"slide-in-up"}).then(function(e){m.shareModal=e}),m.showBottomShareModal=function(){m.shareModal.show()},m.closeBottomShareModal=function(){m.shareModal.hide()},s.fromTemplateUrl("rent_house_detail_comment_modal",{scope:m,animation:"slide-in-up"}).then(function(e){m.commentModal=e}),m.showCommentModal=function(){m.commentModal.show()},m.closeCommentModal=function(){m.commentModal.hide()},g.fromTemplateUrl("rent_house_detail_popover",{scope:m}).then(function(e){m.agencyPopover=e}),m.openPopover=function(e){m.agencyPopover.show(e)},m.closePopover=function(){m.agencyPopover.hide()},m.chooseAgencyType=function(e){m.closePopover(),u.go("agencyAgreement",{houseid:m.houseinfo.Id,agencytype:e})},m.share=function(o){if(m.shareImgUrl=m.bannerarr.slice(0,1)&&0<m.bannerarr.slice(0,1)[0].length?m.bannerarr.slice(0,1)[0]:"http://imgs.wujiuyun.com/images/logo.png",0==o||1==o)r.changeBase(m.shareImgUrl,function(e){m.params={scene:o,message:{title:m.houseinfo.Title||"房屋出租",thumb:e,description:m.houseinfo.Discription||m.onedesc||"房田网为您推荐",media:{type:Wechat.Type.LINK,webpageUrl:t.shareHost+"/#"+i.path()}}},a.share(m.params)});else{var e={};if(e.url=t.shareHost+"/#"+i.path(),e.title=m.houseinfo.Title||"房屋出租",e.description=m.houseinfo.Discription||"房田网为您推荐",2==o)e.imageUrl=m.shareImgUrl,e.appName="房田网",t.qqShareQQAndroid(e,function(){},function(e){});else{var n=[m.shareImgUrl];e.imageUrl=n,YCQQ.shareToQzone(function(){},function(e){},e)}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("rentHouseDetail",{url:"/renthousedetail/:id",cache:!1,templateUrl:"views/publicPage/rentHouseDetail/rentHouseDetail.html",controller:"rentHouseDetailCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("sellHouseDetailCtl",["appUtils","enterViewLoad","$ionicScrollDelegate","$location","$localStorage","actionImgShow","$ionicModal","$timeout","$scope","$state","$stateParams","$http","$Factory","$ionicSlideBoxDelegate","$ionicPopover","wechatLinkBase","WechatService",function(t,o,e,a,n,i,r,s,c,l,u,m,d,h,p,f,g){c.back=function(){t.back()},c.id=u.id,c.goChat=function(e){t.ftIdToNim(e)},c.myselfInfo=n.myselfInfo,c.scrollListen=function(){try{c.detailScrollTop=e.$getByHandle("sell-house-detail-Scroll").getScrollPosition().top}catch(e){}61<c.detailScrollTop?s(function(){c.showHeader=!0}):s(function(){c.showHeader=!1})},c.commentArr=[],c.loadComment=function(){m.get(d.NewHouseSource.getcomment.url,{params:{id:u.id}}).then(function(e){c.commentArr=JSON.parse(e.data.ContentJson)||[]}).catch(function(){})},c.loadComment(),c.reqComment=function(){m.post(d.NewHouseSource.savecomment.url,{HouseId:u.id,ContentJson:JSON.stringify(c.commentArr)}).then(function(e){c.loadComment(),o.customload("操作成功")}).catch(function(e){401==e.status?l.go("login"):o.customload("操作失败")})},c.clickLike=function(e){c.commentArr[e].comment.likeNum++,c.reqComment()},c.subComment=function(){var e={comment:{userinfo:n.myselfInfo,content:c.commentInput.comment,likeNum:0,createTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate()}};c.commentArr.push(e),c.reqComment(),c.closeCommentModal()};var S={method:"POST",url:d.NewHouseSource.postdetail.url+"/"+u.id,headers:{"Content-Type":"application/json"}};m(S).then(function(e){e.data.house.ExProp&&(e.data.house.ExProp=JSON.parse(e.data.house.ExProp)),c.houseinfo=e.data.house,c.bannerarr=e.data.house.IndoorShowImages,c.totalbanner=e.data.house.IndoorShowImages.length,c.userinfo=e.data.info,0<c.bannerarr.length&&(h.update(),2<c.bannerarr.length&&h.loop(!0)),1==c.bannerarr.length&&$("sell_house_detail .slider-pager").css("display","none"),c.FirstPayment=parseInt(e.data.house.Price/4);var o=.0305/12;c.Monthly=parseInt(1e4*e.data.house.Price*.75*o*Math.pow(1+o,360)/(Math.pow(1+o,360)-1)),c.UnitPrice=parseInt(1e4*e.data.house.Price/e.data.house.Space),e.data.house.Discription&&(c.Discription=e.data.house.Discription,c.sliceDiscription="{"==e.data.house.Discription.substring(0,1),c.sliceDiscription&&(c.cutDiscription=JSON.parse(e.data.house.Discription).SellingPoint,c.cutMind=JSON.parse(e.data.house.Discription).Mind,c.cutSupport=JSON.parse(e.data.house.Discription).Support,c.cutService=JSON.parse(e.data.house.Discription).Service)),5<e.data.others.length?c.otherArr=e.data.others.slice(0,5):c.otherArr=e.data.others,(new BMap.Geocoder).getPoint(e.data.house.CommunityAddress,function(o){s(function(){var e=new BMap.Map("sellhousedetail_map");o?(e.centerAndZoom(o,16),e.addOverlay(new BMap.Marker(o))):(e.centerAndZoom(new BMap.Point(118.181163,24.488326),16),e.addOverlay(new BMap.Point(118.063663,24.606958)))},500)},"厦门市");for(var n=new Array,t=0;t<c.bannerarr.length;t++){var a=new Image;a.src=c.bannerarr[t],a.onload=void(n[t]=a)}c.onDoubleTap=function(e){i.show({larImgs:n,currentImg:e,imgClose:function(){i.close()}})}}),c.currentIndex=0,c.changeindex=function(){c.currentIndex=h.$getByHandle("sell-house-detail-handle").currentIndex()},r.fromTemplateUrl("sell_house_detail_share_modal",{scope:c,animation:"slide-in-up"}).then(function(e){c.shareModal=e}),c.showBottomShareModal=function(){c.shareModal.show()},c.closeBottomShareModal=function(){c.shareModal.hide()},c.commentInput={comment:""},r.fromTemplateUrl("sell_house_detail_comment_modal",{scope:c,animation:"slide-in-up"}).then(function(e){c.commentModal=e}),c.showCommentModal=function(){c.commentModal.show()},c.closeCommentModal=function(){c.commentModal.hide()},p.fromTemplateUrl("sell_house_detail_popover",{scope:c}).then(function(e){c.agencyPopover=e}),c.openPopover=function(e){c.agencyPopover.show(e)},c.closePopover=function(){c.agencyPopover.hide()},c.chooseAgencyType=function(e){c.closePopover(),l.go("agencyAgreement",{houseid:c.houseinfo.Id,agencytype:e})},c.share=function(o){if(c.shareImgUrl=c.bannerarr.slice(0,1)&&0<c.bannerarr.slice(0,1)[0].length?c.bannerarr.slice(0,1)[0]:"http://imgs.wujiuyun.com/images/logo.png",0==o||1==o)f.changeBase(c.shareImgUrl,function(e){c.params={scene:o,message:{title:c.houseinfo.Title||"二手房出售",thumb:e,description:(c.sliceDiscription?c.cutDiscription:c.Discription)||"房田网为您推荐",media:{type:Wechat.Type.LINK,webpageUrl:t.shareHost+"/#"+a.path()}}},g.share(c.params)});else{var e={};if(e.url=t.shareHost+"/#"+a.path(),e.title=c.houseinfo.Title||"二手房出售",e.description=(c.sliceDiscription?c.cutDiscription:c.Discription)||"房田网为您推荐",2==o)e.imageUrl=c.shareImgUrl,e.appName="房田网",t.qqShareQQAndroid(e,function(){},function(e){});else{var n=[c.shareImgUrl];e.imageUrl=n,YCQQ.shareToQzone(function(){},function(e){},e)}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("sellHouseDetail",{url:"/sellhousedetail/:id",cache:!1,templateUrl:"views/publicPage/sellHouseDetail/sellHouseDetail.html",controller:"sellHouseDetailCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").directive("videoContainer",["appUtils","$timeout",function(a,i){return{restrict:"EA",templateUrl:"views/publicPage/videoPlayer/directiveVideo.html",scope:{source:"=",image:"="},link:function(i,n){var e=n.find("video")[0],o=0,t=i.videoData={};t.playing=!1,t.currentOrigin=0,t.fullscreenStatus=!1,i.play=function(){t.playing?(e.autoplay=t.playing=!1,e.pause()):(e.autoplay=t.playing=!0,e.play())},i.$on("pauseVideo",function(i,n){t.playing&&(e.autoplay=t.playing=!1,e.pause())}),i.seeking=function(){e.currentTime=t.currentOrigin,o=0},i.openFullscreen=function(){t.fullscreenStatus=!0,i.$emit("changeFullscreenStatus",!0)},i.closeFullscreen=function(){t.fullscreenStatus=!1,i.$emit("changeFullscreenStatus",!1)},i.$on("closeFullscreenStatus",function(i,n){t.fullscreenStatus=!1}),ionic.EventController.on("loadstart",function(){t.playing=this.autoplay=!1,t.isLoading=!0,i.$emit("videoIsLoading",!0),i.$apply()},e),ionic.EventController.on("loadedmetadata",function(){a.checkToGetMediaDuration(i,e,t),o=0,this.autoplay=t.isLoading=!1,i.$emit("videoIsLoading",!1),e.play(),e.pause(),i.$apply()},e),ionic.EventController.on("durationchange",function(){a.checkToGetMediaDuration(i,e,t),this.autoplay=!0,i.$apply()},e),ionic.EventController.on("progress",function(){a.checkToGetMediaDuration(i,e,t),i.$apply()},e),ionic.EventController.on("waiting",function(){t.isLoading=this.autoplay=!0,i.$emit("videoIsLoading",!0),t.playing=!0,i.$apply()},e),ionic.EventController.on("seeking",function(){t.isLoading=t.playing=this.autoplay=!0,i.$emit("videoIsLoading",!0),this.play(),i.$apply()},e),ionic.EventController.on("playing",function(){a.checkToGetMediaDuration(i,e,t),this.autoplay=t.isLoading=!0,i.$emit("videoIsLoading",!0),i.$apply()},e),ionic.EventController.on("pause",function(){t.playing=t.isLoading=!1,i.$emit("videoIsLoading",!1),i.$apply()},e),ionic.EventController.on("timeupdate",function(){a.checkToGetMediaDuration(i,e,t),t.currentOrigin=e.currentTime,t.current=a.handlePlayingTime(e.currentTime),1<=o&&(t.isLoading=!1,i.$emit("videoIsLoading",!1),t.playing=!0),15===o&&(i.$emit("videoBarHide",1),t.hide=!0),o++,i.$apply()},e),ionic.EventController.on("touchstart",function(){t.hide?i.$emit("videoBarShow",1):i.$emit("videoBarHide",1),t.hide=!t.hide,o=0},e),ionic.EventController.on("canplaythrough",function(){},e),ionic.EventController.on("canplay",function(){},e),ionic.EventController.on("ended",function(){this.pause(),i.hide=!1,i.$apply(),i.$emit("videoBarShow",1),t.hide=!1},e)}}}]);
"use strict";angular.module("App").controller("videoPlayerCtl",["appUtils","$sce","$ionicHistory","$Factory","$scope","$rootScope","$http","$ionicLoading",function(e,o,n,r,t,i,c,a){t.back=function(){e.back()},t.$on("$ionicView.leave",function(){t.portraitScreen(),t.$broadcast("pauseVideo",!0)});var l=t.renderData={};l.videoSrc=o.trustAsResourceUrl("http://static.videogular.com/assets/videos/videogular.mp4"),l.hideBar=!1,l.fullScreenStatus=!1,t.fullScreen=function(){if(!window.cordova)return!1;window.screen.orientation.lock("landscape")},t.portraitScreen=function(){if(!window.cordova)return!1;window.screen.orientation.lock("portrait")},t.$on("videoBarHide",function(e,o){o&&(l.hideBar=!0,t.$apply())}),t.$on("videoBarShow",function(e,o){o&&(l.hideBar=!1,t.$apply())}),t.$on("videoIsLoading",function(e,o){t.videoIsLoading=o}),t.$on("changeFullscreenStatus",function(e,o){o?t.fullScreen():t.portraitScreen(),l.fullScreenStatus=o}),t.closeFullscreen=function(){t.portraitScreen(),l.fullScreenStatus=!1,t.$broadcast("closeFullscreenStatus",!1)}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("videoPlayer",{url:"/videoplayer/params/:id",cache:!1,templateUrl:"views/publicPage/videoPlayer/videoPlayer.html",controller:"videoPlayerCtl",data:{isPublic:!0}}).state("tabs.videoPlayer",{url:"/videoplayer/params/:id",cache:!1,views:{home:{templateUrl:"views/publicPage/videoPlayer/videoPlayer.html",controller:"videoPlayerCtl"}},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("videoUploadCtl",["Upload","appUtils","upImgBase","$cordovaToast","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(n,e,t,o,a,i,r,c,d,l,u,p,s,h){l.back=function(){e.back()},l.onFileChange=function(e){l.videoFileName=e[0].name;var t=new Blob([e[0]]),o=URL.createObjectURL(t);document.getElementById("previewVideo").src=o,document.getElementById("previewVideo").onload=function(e){URL.revokeObjectURL(this.src)},l.$apply(),n.upload({url:r.Account.uploadmedia.url,data:{file:e[0]}}).progress(function(e){var t=parseInt(100*e.loaded/e.total);a(function(){p.show({template:"正在上传："+Math.floor(t)+"%"}),99<t&&p.hide()})}).success(function(e,t,o,n){p.hide(),p.show({template:"上传成功",showBackdrop:!1,duration:1500})}).error(function(e,t,o,n){p.hide(),p.show({template:"上传失败",showBackdrop:!1,duration:1500})})},l.convertBase64UrlToBlob=function(e){for(var t=e.split(","),o=(t[0].match(/:(.*?);/)[1],atob(t[1])),n=o.length,a=new Uint8Array(n);n--;)a[n]=o.charCodeAt(n);return new Blob([a],{type:"image/png"})},l.onLoadedData=function(){var e=document.getElementById("previewVideo");u.videoPreviewPlay=e;var t=document.createElement("canvas");t.width=.8*e.videoWidth,t.height=.8*e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height);var o=t.toDataURL("image/png");i.post(r.Account.upload.url,{path:"18/screenshot",file:o}).then(function(e){})}}]).directive("jqSetValue",["$timeout",function(e){return{restrict:"AC",require:"?ngModel",link:function(t,o,e,n){o.on("jquery.set.value",function(e){n&&t.$apply(function(){n.$setViewValue($(o).val())})})}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("videoUpload",{url:"/videoupload",templateUrl:"views/publicPage/videoUpload/videoUpload.html",controller:"videoUploadCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("visitReportCtl",["appUtils","enterViewLoad","$timeout","upImgBase","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(t,e,o,a,i,n,s,u,r,c,l,d,m){r.back=function(){t.back()},r.subData={NewHouseId:1*u.houseid,Name:"",Phone:null,LookTime:""};for(var p=[],v=0;v<60;v++){var f=new Date;f.setDate(f.getDate()+v);var h=f.getFullYear(),D=f.getMonth()+1,b=f.getDate();p.push(h+"/"+D+"/"+b)}$.scrEvent({data:p,evEle:".order-visit-time",title:"时间",defValue:p[1],afterAction:function(t){$(".order-visit-time").val(t),r.subData.LookTime=t}}),r.save=function(){if(r.subData.Name)return/^1[34578]\d{9}$/.test(r.subData.Phone)?void(r.subData.LookTime?i.post(n.NewHouseTrade.visitreport.url,r.subData).then(function(t){l.show({template:"提交成功",duration:1500}),o(function(){c.$ionicGoBack()},1500)}).catch(function(){l.show({template:"提交失败",duration:1500})}):e.customload("请选择时间")):(e.customload("请输入正确的手机号码"),!1);e.customload("请输入姓名")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("visitReport",{url:"/visitreport/params/:houseid",cache:!1,templateUrl:"views/publicPage/visitReport/visitReport.html",controller:"visitReportCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("confirmOrderCtl",["$cartChoosedData","enterViewLoad","appUtils","$cookies","$localStorage","$state","$ionicLoading","$ionicHistory","$timeout","$rootScope","$scope","$stateParams","$http","$Factory",function(o,a,t,e,c,s,r,i,n,u,d,l,h,U){d.back=function(){t.back()},d.$on("$ionicView.enter",function(){t.getReceiptAddress(function(o){d.receiptAddress=o}),d.productList=o.products,d.totalMoney=o.totalMoney,d.originTotalMoney=o.totalMoney,d.initData()}),d.initData=function(){a.load(),d.productList=d.productList.filter(function(o){o.MaxScore=0;for(var t=o.MaxVocher=0;t<o.CartProductInfos.length;t++)o.MaxScore=o.MaxScore+o.CartProductInfos[t].UnitScoreO*o.CartProductInfos[t].Quantity,o.MaxVocher=o.MaxVocher+o.CartProductInfos[t].UnitVoucher*o.CartProductInfos[t].Quantity;return o}),h.post(U.Money.money.url).then(function(o){d.pageData=o.data,r.hide()}).catch(function(o){r.hide()}),d.usingData={UseScore:0,UseVoucher:0},d.calcUsingData()},d.calcUsingData=function(o){d.usingData={UseScore:0,UseVoucher:0},d.totalMoney=d.originTotalMoney;for(var t=0;t<d.productList.length;t++)d.usingData.UseScore=d.usingData.UseScore+d.productList[t].UseScore,d.usingData.UseVoucher=d.usingData.UseVoucher+d.productList[t].UseVoucher;d.totalMoney=d.totalMoney-d.usingData.UseScore-d.usingData.UseVoucher},d.isOverflow=function(o){d.usingData={UseScore:0,UseVoucher:0};for(var t=0;t<d.productList.length;t++)d.usingData.UseScore=d.usingData.UseScore+d.productList[t].UseScore,d.usingData.UseVoucher=d.usingData.UseVoucher+d.productList[t].UseVoucher;return!("score"==o&&d.usingData.UseScore>d.pageData.Scores)&&!("vocher"==o&&d.usingData.UseVoucher>d.pageData.Vochers)},d.addScore=function(o){o.UseScore>=o.MaxScore?a.customload("最高可使用积分"+o.MaxScore):d.usingData.UseScore>=d.pageData.Scores?a.customload("积分不足"):(o.UseScore++,d.calcUsingData())},d.reduceScore=function(o){0!==o.UseScore&&(--o.UseScore,d.calcUsingData())},d.scoreChange=function(o){o.UseScore>o.MaxScore&&(a.customload("最高可使用积分"+o.MaxScore),o.UseScore=0),(o.UseScore<=0||!o.UseScore)&&(o.UseScore=null),d.isOverflow("score")||(a.customload("积分不足"),o.UseScore=0),d.calcUsingData()},d.addVocher=function(o){o.UseVoucher>=o.MaxVocher?a.customload("最高可使用抵用金"+o.MaxVocher):d.usingData.UseVoucher>=d.pageData.Vochers?a.customload("抵用券不足"):(o.UseVoucher++,d.calcUsingData())},d.reduceVocher=function(o){o.UseVoucher<=0||(--o.UseVoucher,d.calcUsingData())},d.vocherChange=function(o){o.UseVoucher>o.MaxVocher&&(a.customload("最高可使用积分"+o.MaxVocher),o.UseVoucher=0),(o.UseVoucher<=0||!o.UseVoucher)&&(o.UseVoucher=null),d.isOverflow("vocher")||(a.customload("积分不足"),o.UseVoucher=0),d.calcUsingData()},d.addQuantity=function(o){o.Quantity+=1,o.sum+=o.UnitPrice,d.totalMoney=d.originTotalMoney+o.UnitPrice,d.originTotalMoney=d.originTotalMoney+o.UnitPrice,d.initData()},d.reduceQuantity=function(o){o.Quantity<=1||(o.Quantity-=1,o.sum-=o.UnitPrice,d.totalMoney=d.originTotalMoney-o.UnitPrice,d.originTotalMoney=d.originTotalMoney-o.UnitPrice,d.initData())},d.createOrder=function(){e.get("goodsFromWho");h.post(U.ProductOrder.create.url,{Shopers:d.productList,Total:d.totalMoney,Address:d.receiptAddress.Province+d.receiptAddress.City+d.receiptAddress.District+d.receiptAddress.Street+d.receiptAddress.Address}).then(function(o){if(0==o.data.status){d.orderResult=o.data,s.go("productPayOrder",{tradeno:o.data.TradeNo,total:o.data.Total,ismuilt:o.data.IsMuilt,usedscore:o.data.UsedScore,usedvoucher:o.data.UsedVoucher});try{for(var t=0;t<d.productList.length;t++)for(var e=0;e<d.productList[t].CartProductInfos.length;e++)for(var r=0;r<c.shoppingCartList.length;r++)c.shoppingCartList[r].ShopId==d.productList[t].CartProductInfos[e].ShopId&&c.shoppingCartList[r].ProductId==d.productList[t].CartProductInfos[e].ProductId&&c.shoppingCartList[r].ProductSKUId==d.productList[t].CartProductInfos[e].ProductSKUId&&c.shoppingCartList.splice(r,1)}catch(o){}}else a.customload(o.data.msg)}).catch(function(o){var t=o.data&&o.data.Message||"生成订单失败";a.customload(t)})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(r){r.state("confirmOrder",{url:"/mall/mallcart/goodslist/confirmorder/params/:id",templateUrl:"views/mall/mall-cart/confirmOrder/confirmOrder.html",controller:"confirmOrderCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("productPayOrderCtl",["$cartChoosedData","enterViewLoad","appUtils","$ionicModal","$state","$location","$localStorage","$ionicLoading","$ionicHistory","$timeout","$rootScope","$scope","$stateParams","$http","$Factory",function(a,o,t,e,r,n,d,c,s,u,i,l,m,f,p){l.back=function(){t.back()},l.goCart=function(){r.go("mallCart")},l.$on("$ionicView.enter",function(){l.choosedBankCard=d.choosedPayBankCard,l.typeChoosed=1,l.paramsData={TradeNo:m.tradeno,Total:m.total,UsedScore:m.usedscore,UsedVoucher:m.usedvoucher,IsMuilt:"true"==m.ismuilt,Password:""}}),l.changeTypeChoose=function(a){l.typeChoosed=a},e.fromTemplateUrl("mall_cardpay_code_modal",{scope:l,animation:"slide-in-up"}).then(function(a){l.codeModal=a}),l.showAuthCodeModal=function(){l.codeModal.show()},l.closeAuthCodeModal=function(){l.codeModal.hide()},l.confirmPay=function(){1==l.typeChoosed?f.post(p.OderPay.wxpay.url,l.paramsData).then(function(a){l.resData=JSON.parse(a.data),l.wechatPayParams={partnerid:l.resData.partnerid,prepayid:l.resData.prepayid,noncestr:l.resData.noncestr,timestamp:l.resData.timestamp,sign:l.resData.sign},t.WxPay(l.wechatPayParams,function(a){o.customload("支付成功"),u(function(){l.goCart()},1500),f.post(p.WxPay.query.url,l.resData.trade_no).then(function(a){"SUCCESS"===a.data.return_code||a.data.return_code})},function(a){if("用户点击取消并返回"==a)return o.customload("您取消了订单"),void f.post(p.WxPay.close.url,l.resData.trade_no).then(function(a){a.data.return_code});o.customload(a)})}).catch(function(a){var t=a.data&&a.data.Message||"生成微信订单失败";o.customload(t)}):2==l.typeChoosed?f.post(p.OderPay.alipay.url,l.paramsData).then(function(a){l.aliPayInfo=a.data.Request,l.aliTrade=a.data.TradeNO,t.AliPay(l.aliPayInfo,function(a){o.customload("支付成功"),u(function(){l.goCart()},1500),f.post(p.OderPay.query.url,l.aliTrade).then(function(a){"SUCCESS"===a.data.return_code||a.data.return_code})},function(a){4e3==a.resultStatus?o.customload("支付失败"):6001==a.resultStatus?o.customload("您取消了订单"):6002==a.resultStatus&&o.customload("网络连接失败")})}).catch(function(a){var t=a.data&&a.data.Message||"生成支付宝订单失败";o.customload(t)}):3==l.typeChoosed?f.post(p.OderPay.allapplyconsume.url,{TradeNo:m.tradeno,Total:m.total,IsMuilt:"true"==m.ismuilt,CardNo:l.choosedBankCard.bankCardNo,ReturnUrl:n.url()}).then(function(a){if("SUCCESS"==a.data.return_code)l.showAuthCodeModal(),l.allinData=JSON.parse(a.data.return_msg),l.confirmCardData.BizOrderNo=l.allinData.bizOrderNo,l.confirmCardData.TradeNo=l.allinData.tradeNo;else{var t=a.data.return_msg||"生成银联订单失败";o.customload(t)}}).catch(function(a){o.customload("生成银联订单失败")}):4==l.typeChoosed&&l.showAuthCodeModal()},l.confirmCardData={BizOrderNo:"",TradeNo:"",Code:null},l.confirmCardPay=function(){l.closeAuthCodeModal();var a=JSON.parse(JSON.stringify(l.confirmCardData));l.confirmCardData.BizOrderNo="",l.confirmCardData.TradeNo="",l.confirmCardData.Code=null,f.post(p.OderPay.allpay.url,a).then(function(a){"SUCCESS"==a.data.return_code?(o.customload("支付成功"),u(function(){l.back()},1500)):o.customload(a.data.return_msg)}).catch(function(){o.customload("支付失败")})},l.balancePay=function(){l.closeAuthCodeModal(),f.post(p.OderPay.consumeproduct.url,l.paramsData).then(function(a){if("SUCCESS"==a.data.return_code)o.customload("支付成功"),u(function(){l.back()},1500);else{var t=a.data&&a.data.return_msg?a.data.return_msg:"付款失败";o.customload(t)}}).catch(function(a){var t=a.data.Message?a.data.Message:"付款失败";o.customload(t)})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(r){r.state("productPayOrder",{url:"/mall/mallcart/goodslist/productpayorder/params/:tradeno/:total/:ismuilt/:usedscore/:usedvoucher",cache:!1,templateUrl:"views/mall/mall-cart/productPayOrder/productPayOrder.html",controller:"productPayOrderCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("confirmPrizeOrderCtl",["enterViewLoad","appUtils","$cookies","$localStorage","$state","$ionicLoading","$ionicHistory","$timeout","$rootScope","$scope","$stateParams","$http","$Factory",function(o,t,e,r,c,a,d,n,s,i,u,p,l){i.back=function(){t.back()},i.$on("$ionicView.enter",function(){t.getReceiptAddress(function(t){i.receiptAddress=t}),i.totalMoney=0,p.post(l.ProductOrder.carts.url,[u]).then(function(t){for(var e=0;e<t.data[0].CartProductInfos.length;e++)i.totalMoney+=t.data[0].CartProductInfos[e].UnitPrice*t.data[0].CartProductInfos[e].Quantity;i.productList=t.data}).catch(function(t){o.customload(t.data&&t.data.Message||"获取购物车失败")}),p.post(l.Money.money.url).then(function(t){i.pageData=t.data,a.hide()}).catch(function(t){})}),i.createOrder=function(){i.receiptAddress?p.post(l.ProductOrder.newerpacket.url,{ProductId:u.ProductId,ProductSKUId:u.ProductSKUId,Quantity:1,Total:0,UseVoucher:i.totalMoney,Address:i.receiptAddress.Province+i.receiptAddress.City+i.receiptAddress.District+i.receiptAddress.Street+i.receiptAddress.Address}).then(function(t){o.customload("兑换成功"),n(function(){i.back()},1500)}).catch(function(t){var e=t.data&&t.data.Message||"兑换失败";o.customload(e)}):o.customload("请选择地址")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(r){r.state("confirmPrizeOrder",{url:"/mall/mallcart/goodslist/confirmprizeorder/params/:ProductId/:ProductSKUId/:Quantity/:ShopId",templateUrl:"views/mall/mall-cart/confirmPrizeOrder/confirmPrizeOrder.html",controller:"confirmPrizeOrderCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("mallPayDoneCtl",["$rootScope","$ionicHistory","$scope","$state",function(o,t,l,a){l.back=function(){a.go("mallCart")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("mallPayDone",{url:"/mall/mallcart/mallpaydone",templateUrl:"views/mall/mall-cart/mallPayDone/mallPayDone.html",controller:"mallPayDoneCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("goodsDetailPrizeCtl",["appUtils","enterViewLoad","$cookies","$localStorage","actionImgShow","$ionicScrollDelegate","$window","wechatLinkBase","WechatService","$location","$rootScope","$ionicModal","$timeout","$ionicHistory","$scope","$state","$stateParams","$http","$Factory","$ionicSlideBoxDelegate",function(a,o,e,n,t,i,d,r,c,s,l,u,p,h,m,f,g,S,I,w){m.back=function(){a.back()},m.headerBack=function(){0==m.pageIndex?m.back():m.pageIndex=0},m.pageIndex=0,m.switchPageIndex=function(e){m.pageIndex=e},m.detailIndex=0,m.switchDetailIndex=function(e){m.detailIndex=e,i.$getByHandle("goods-detail-prize-detail-Scroll").resize(),i.$getByHandle("goods-detail-prize-detail-Scroll").scrollTop()},m.goodsDetailListen=function(){try{m.detailScrollTop=i.$getByHandle("goods-detail-prize-Scroll").getScrollPosition().top}catch(e){}61<m.detailScrollTop?p(function(){m.showHeader=!0}):p(function(){m.showHeader=!1})},m.$on("$ionicView.enter",function(){a.getReceiptAddress(function(e){m.receiptAddress=e}),m.loadData(),m.keyboardShow=!1}),m.loadData=function(){S.post(I.ProductOrder.isnewer.url).then(function(e){m.isNewer=e.data}).catch(function(e){m.isNewer=!1}),S.get(I.Product.get.url+"?id="+g.id).then(function(e){a.isJsonString(e.data.Specifications)?e.data.Specifications=JSON.parse(e.data.Specifications):e.data.Specifications=[],e.data.SKUItems.filter(function(e){return a.isJsonString(e.TemplateValues)?e.TemplateValues=JSON.parse(e.TemplateValues):e.TemplateValues="",e}),a.isJsonString(e.data.Specifics)?e.data.Specifics=JSON.parse(e.data.Specifics):e.data.Specifics=[],m.skuChoosedIndexs=[];for(var t=0;t<e.data.Specifications.length;t++)m.skuChoosedIndexs.push(0);m.productDetail=e.data,m.showSkuPrice(),0<e.data.ShowHeadImages.length&&(w.update(),2<e.data.ShowHeadImages.length&&w.loop(!0))}).catch(function(){o.customload("获取商品失败")})},m.currentIndex=0,m.changeindex=function(){m.currentIndex=w.$getByHandle("goods-detail-prize-slider-handle").currentIndex()},m.changeSkuChoosedIndexs=function(e,t){m.skuChoosedIndexs[e]=t,m.showSkuPrice()},m.showSkuPrice=function(){var e=m.productDetail.SKUItems.filter(function(e){return e.TemplateValues.Id==m.skuChoosedIndexs.join("_")});m.currentSku=e[0]},m.addToShoppingCart=function(e){if(m.closeTagsModal(),m.currentSku.Inventory<=0)o.customload("库存不足");else{m.productDetail.SKUItems.filter(function(e){return e.TemplateValues.Id==m.skuChoosedIndexs.join("_")});f.go("confirmPrizeOrder",{ProductId:m.productDetail.Id,ProductSKUId:m.currentSku.Id,Quantity:1,ShopId:m.productDetail.ShopId})}},u.fromTemplateUrl("prize_product_parameter_modalview",{scope:m,animation:"slide-in-up"}).then(function(e){m.parameterModal=e}),m.showParameterModal=function(){m.parameterModal.show()},m.closeParameterModal=function(){m.parameterModal.hide()},u.fromTemplateUrl("prize_product_tags_modalview",{scope:m,animation:"slide-in-up"}).then(function(e){m.tagsModal=e}),m.showTagsModal=function(){m.tagsModal.show()},m.closeTagsModal=function(){m.tagsModal.hide()},m.agreeComment=function(t){S.post(I.Product.agree.url+"?id="+t.Id).then(function(e){t.AgressUsers.push(0)}).catch(function(e){var t=e.data.Message||"点赞失败";o.customload(t)})},u.fromTemplateUrl("prize_product_comments_modalview",{scope:m,animation:"slide-in-up"}).then(function(e){m.commentsModal=e}),m.showCommentsModal=function(e){m.commentsModal.show(),m.parentComment=e,m.getChildComments()},m.closeCommentsModal=function(){m.commentsModal.hide()},m.getChildComments=function(){S.post(I.Product.comments.url+"?pid="+m.parentComment.Id).then(function(e){m.childComments=e.data}).catch(function(e){})},m.replayData={data:""},m.replyComment=function(){m.replayData.data?S.post(I.Product.replycomment.url,{Content:m.replayData.data,ParentId:m.parentComment.Id}).then(function(e){m.replayData.data="",m.getChildComments(),m.parentComment.ChildrenCount++}).catch(function(e){o.customload("回复失败！")}):o.customload("请输入回复内容！")},m.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(e){p(function(){m.keyboardHeight&&m.keyboardHeight==e.keyboardHeight||(m.keyboardHeight=e.keyboardHeight),m.keyboardShow=!0})}),window.addEventListener("native.keyboardhide",function(e){p(function(){m.keyboardShow=!1})}),u.fromTemplateUrl("prize_goods_detail_share_modal",{scope:m,animation:"slide-in-up"}).then(function(e){m.shareModal=e}),m.showBottomShareModal=function(){m.shareModal.show()},m.closeBottomShareModal=function(){m.shareModal.hide()},m.share=function(t){m.saveShare(),m.shareImgUrl=m.productDetail.ShowHeadImages.slice(0,1)&&0<m.productDetail.ShowHeadImages.slice(0,1)[0].length?m.productDetail.ShowHeadImages.slice(0,1)[0]:"http://imgs.wujiuyun.com/images/logo.png";n.mysefInfo&&n.myselfInfo.Id;if(0==t||1==t)r.changeBase(m.shareImgUrl,function(e){m.params={scene:t,message:{title:m.productDetail.Name||"房田商城促销单品",thumb:e,description:m.productDetail.Details||"劲爆折扣商品",media:{type:Wechat.Type.LINK,webpageUrl:a.shareHost+"/#"+s.path()}}},c.share(m.params)});else{var e={};if(e.url=a.shareHost+"/#"+s.path(),e.title=m.productDetail.Name||"房田商城促销单品",e.description=m.productDetail.Details||"劲爆折扣商品",2==t)e.imageUrl=m.shareImgUrl,e.appName="房田网",a.qqShareQQAndroid(e,function(){},function(e){});else{var o=[m.shareImgUrl];e.imageUrl=o,YCQQ.shareToQzone(function(){},function(e){},e)}}},m.saveShare=function(){S.post(I.Share.save.url,{ShareType:20,ObjectId:g.id,Phone:n.myselfInfo?n.myselfInfo.UserName:""}).then(function(e){}).catch(function(e){})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("goodsDetailPrize",{url:"/mall/classify/goodslist/goodsdetailprize/params/:id",cache:!1,templateUrl:"views/mall/mall-classify/goods-detail-prize/goods-detail-prize.html",controller:"goodsDetailPrizeCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("goodsDetailCtl",["$cartChoosedData","appUtils","enterViewLoad","$cookies","$localStorage","actionImgShow","$ionicScrollDelegate","$window","wechatLinkBase","WechatService","$location","$rootScope","$ionicModal","$timeout","$ionicHistory","$scope","$state","$stateParams","$http","$Factory","$ionicSlideBoxDelegate",function(n,i,s,t,r,e,o,a,d,c,l,u,p,h,m,f,g,I,S,C,y){f.back=function(){i.back()},f.goChat=function(t){i.ftIdToNim(t)},f.headerBack=function(){0==f.pageIndex?f.back():f.pageIndex=0},f.pageIndex=0,f.switchPageIndex=function(t){f.pageIndex=t},f.detailIndex=0,f.switchDetailIndex=function(t){f.detailIndex=t,o.$getByHandle("goods-detail-detail-Scroll").resize(),o.$getByHandle("goods-detail-detail-Scroll").scrollTop()},f.goodsDetailListen=function(){try{f.detailScrollTop=o.$getByHandle("goods-detail-Scroll").getScrollPosition().top}catch(t){}61<f.detailScrollTop?h(function(){f.showHeader=!0}):h(function(){f.showHeader=!1})},f.$on("$ionicView.enter",function(){i.getReceiptAddress(function(t){f.receiptAddress=t}),f.shoppingCartList=i.shoppingCartList,f.shoppingCartCount=i.shoppingCartList.length,f.loadData(),f.keyboardShow=!1}),f.$on("$ionicView.leave",function(){$(".u-flyer").remove()}),f.loadData=function(){S.get(C.Product.get.url+"?id="+I.id).then(function(t){i.isJsonString(t.data.Specifications)?t.data.Specifications=JSON.parse(t.data.Specifications):t.data.Specifications=[],t.data.SKUItems.filter(function(t){return i.isJsonString(t.TemplateValues)?t.TemplateValues=JSON.parse(t.TemplateValues):t.TemplateValues="",t}),i.isJsonString(t.data.Specifics)?t.data.Specifics=JSON.parse(t.data.Specifics):t.data.Specifics=[],f.skuChoosedIndexs=[];for(var e=0;e<t.data.Specifications.length;e++)f.skuChoosedIndexs.push(0);f.productDetail=t.data,f.showSkuPrice(),0<t.data.ShowHeadImages.length&&(y.update(),2<t.data.ShowHeadImages.length&&y.loop(!0))}).catch(function(){s.customload("获取商品失败")})},f.currentIndex=0,f.changeindex=function(){f.currentIndex=y.$getByHandle("goods-detail-slider-handle").currentIndex()},f.changeSkuChoosedIndexs=function(t,e){f.skuChoosedIndexs[t]=e,f.showSkuPrice()},f.showSkuPrice=function(){var t=f.productDetail.SKUItems.filter(function(t){return t.TemplateValues.Id==f.skuChoosedIndexs.join("_")});f.currentSku=t[0]},f.addToShoppingCart=function(t){if(f.closeTagsModal(),f.currentSku.Inventory<=0)s.customload("库存不足");else{var e=f.productDetail.SKUItems.filter(function(t){return t.TemplateValues.Id==f.skuChoosedIndexs.join("_")});if(t)S.post(C.ProductOrder.carts.url,[{ProductId:f.productDetail.Id,ProductSKUId:f.currentSku.Id,Quantity:1,ShopId:f.productDetail.ShopId}]).then(function(t){for(var e=0;e<t.data.length;e++)t.data[e].CartProductInfos.filter(function(t){return t.sum=t.Quantity*t.UnitPrice,t});n.products=t.data,n.totalMoney=t.data[0].CartProductInfos[0].UnitPrice,g.go("confirmOrder")}).catch(function(t){s.customload(t.data&&t.data.Message||"获取购物车失败")});else{for(var o={ShopId:f.productDetail.ShopId,ProductId:f.productDetail.Id,ProductSKUId:0<e.length?e[0].Id:null,Quantity:1},a=0;a<f.shoppingCartList.length;a++)if(f.shoppingCartList[a].ShopId==o.ShopId&&f.shoppingCartList[a].ProductId==o.ProductId&&f.shoppingCartList[a].ProductSKUId==o.ProductSKUId)return f.shoppingCartList[a].Quantity++,r.shoppingCartList=f.shoppingCartList,i.shoppingCartList=f.shoppingCartList,void f.flyAnimation();f.shoppingCartList.push(o),r.shoppingCartList=f.shoppingCartList,i.shoppingCartList=f.shoppingCartList,f.shoppingCartCount++,i.shoppingCartCount=f.shoppingCartCount,f.flyAnimation()}}},f.flyAnimation=function(){var t=$("#goods_detail .bot-actions .shopping-cart").offset();$('<img class="u-flyer" src="'+f.productDetail.ShowHeadImages[0]+'"/>').fly({start:{left:100,top:150},end:{left:t.left+40,top:t.top,width:0,height:0}})},p.fromTemplateUrl("product_parameter_modalview",{scope:f,animation:"slide-in-up"}).then(function(t){f.parameterModal=t}),f.showParameterModal=function(){f.parameterModal.show()},f.closeParameterModal=function(){f.parameterModal.hide()},p.fromTemplateUrl("product_tags_modalview",{scope:f,animation:"slide-in-up"}).then(function(t){f.tagsModal=t}),f.showTagsModal=function(){f.tagsModal.show()},f.closeTagsModal=function(){f.tagsModal.hide()},f.agreeComment=function(e){S.post(C.Product.agree.url+"?id="+e.Id).then(function(t){e.AgressUsers.push(0)}).catch(function(t){var e=t.data.Message||"点赞失败";s.customload(e)})},p.fromTemplateUrl("product_comments_modalview",{scope:f,animation:"slide-in-up"}).then(function(t){f.commentsModal=t}),f.showCommentsModal=function(t){f.commentsModal.show(),f.parentComment=t,f.getChildComments()},f.closeCommentsModal=function(){f.commentsModal.hide()},f.getChildComments=function(){S.post(C.Product.comments.url+"?pid="+f.parentComment.Id).then(function(t){f.childComments=t.data}).catch(function(t){})},f.replayData={data:""},f.replyComment=function(){f.replayData.data?S.post(C.Product.replycomment.url,{Content:f.replayData.data,ParentId:f.parentComment.Id}).then(function(t){f.replayData.data="",f.getChildComments(),f.parentComment.ChildrenCount++}).catch(function(t){s.customload("回复失败！")}):s.customload("请输入回复内容！")},f.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(t){h(function(){f.keyboardHeight&&f.keyboardHeight==t.keyboardHeight||(f.keyboardHeight=t.keyboardHeight),f.keyboardShow=!0})}),window.addEventListener("native.keyboardhide",function(t){h(function(){f.keyboardShow=!1})}),p.fromTemplateUrl("goods_detail_share_modal",{scope:f,animation:"slide-in-up"}).then(function(t){f.shareModal=t}),f.showBottomShareModal=function(){f.shareModal.show()},f.closeBottomShareModal=function(){f.shareModal.hide()},f.share=function(e){f.saveShare(),f.shareImgUrl=f.productDetail.ShowHeadImages.slice(0,1)&&0<f.productDetail.ShowHeadImages.slice(0,1)[0].length?f.productDetail.ShowHeadImages.slice(0,1)[0]:"http://imgs.wujiuyun.com/images/logo.png";r.mysefInfo&&r.myselfInfo.Id;if(0==e||1==e)d.changeBase(f.shareImgUrl,function(t){f.params={scene:e,message:{title:f.productDetail.Name||"房田商城促销单品",thumb:t,description:f.productDetail.Details||"劲爆折扣商品",media:{type:Wechat.Type.LINK,webpageUrl:i.shareHost+"/#"+l.path()}}},c.share(f.params)});else{var t={};if(t.url=i.shareHost+"/#"+l.path(),t.title=f.productDetail.Name||"房田商城促销单品",t.description=f.productDetail.Details||"劲爆折扣商品",2==e)t.imageUrl=f.shareImgUrl,t.appName="房田网",i.qqShareQQAndroid(t,function(){},function(t){});else{var o=[f.shareImgUrl];t.imageUrl=o,YCQQ.shareToQzone(function(){},function(t){},t)}}},f.saveShare=function(){S.post(C.Share.save.url,{ShareType:20,ObjectId:I.id,Phone:r.myselfInfo?r.myselfInfo.UserName:""}).then(function(t){}).catch(function(t){})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("goodsDetail",{url:"/mall/classify/goodslist/params/:id",cache:!1,templateUrl:"views/mall/mall-classify/goods-detail/goods-detail.html",controller:"goodsDetailCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("goodsListCtl",["enterViewLoad","appUtils","$stateParams","$ionicSlideBoxDelegate","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,t,o,a,i,l,c,s,n,r,d,u,p,f,y){d.back=function(){t.back()},d.goDetail=function(e){59==e.ProductSaleType?r.go("goodsDetailPrize",{id:e.Id}):r.go("goodsDetail",{id:e.Id})},d.moreFilterData=[{title:"全部服务",field:"Service",list:[{text:"新品",value:"小户型",isChecked:!1},{text:"有货",value:"现房",isChecked:!1},{text:"促销",value:"新房优惠",isChecked:!1},{text:"折扣",value:"品牌地产",isChecked:!1},{text:"会员专享",value:"投资地产",isChecked:!1},{text:"顺丰快递",value:"花园洋房",isChecked:!1}]},{title:"品牌",field:"HousePeriod",list:[{text:"劳力士",value:2,isChecked:!1},{text:"卡西欧",value:3,isChecked:!1},{text:"宾爵",value:3,isChecked:!1},{text:"宝曼",value:4,isChecked:!1}]},{title:"风格",field:"BuildType",list:[{text:"休闲",value:"普通住宅",isChecked:!1},{text:"时尚",value:"高端住宅",isChecked:!1},{text:"商务",value:"综合体",isChecked:!1},{text:"运动",value:"SOHO",isChecked:!1},{text:"智能",value:"商铺",isChecked:!1},{text:"极简",value:"写字楼",isChecked:!1}]}],d.$on("$ionicView.enter",function(){d.getTypeList(),d.haveMore=!0}),d.$on("$ionicView.leave",function(){$(".u-flyer").remove()}),i.fromTemplateUrl("goods_list_modal",{scope:d,animation:"slide-in-left"}).then(function(e){d.modal=e}),d.showModal=function(){d.modal.show()},d.closeModal=function(){d.modal.hide()},d.paramsData={type:o.type,typename:o.typename,ptype:o.ptype,query:o.query,saletype:o.saletype},d.defaultType={id:o.type,text:o.typename},d.getTypeList=function(){s.get(n.Category.query.url+"?pid="+o.ptype).then(function(e){d.typeList=e.data}).catch(function(){e.customload("获取分类列表失败")})},d.typeSlideToggle=function(){$("#goods_list .filter-item").find(".other-list").slideToggle("fast")},d.changeType=function(e){d.defaultType=e,d.queryData.type=e.id,d.refreshLoad()},d.sale="",d.discount="",d.changeSale=function(){d.sale=1==d.sale?2:1,d.judgeSort()},d.changeDiscount=function(){d.discount=2==d.discount?1:2,d.judgeSort()},d.judgeSort=function(){1==d.discount?d.queryData.sort=21:2==d.discount?d.queryData.sort=22:d.queryData.sort=12,d.refreshLoad()},d.queryData={pagenum:0,pagesize:10,sort:12,query:o.query,SaleType:o.saletype,type:o.type},d.productList=[],d.haveMore=!0,d.loadData=function(t){s.post(n.Product.query.url,d.queryData).then(function(e){e.data.length<=0&&(d.haveMore=!1,d.$broadcast("scroll.infiniteScrollComplete"),t)||(d.haveMore=!0,t?(d.queryData.pagenum+=1,d.productList=d.productList.concat(e.data),d.$broadcast("scroll.infiniteScrollComplete")):(d.queryData.pagenum=1,d.productList=e.data,d.$broadcast("scroll.refreshComplete")))}).catch(function(){d.haveMore=!1,e.customload("获取商品失败"),d.$broadcast("scroll.infiniteScrollComplete"),d.$broadcast("scroll.refreshComplete")})},d.loadMore=function(e){d.loadData(!0)},d.refreshLoad=function(e){d.queryData.pagenum=0,d.loadData(!1)},d.addToCart=function(e,t){e.stopPropagation();var o=$("#goods_list .fix-right-cart").offset();$('<img class="u-flyer" src="'+t.Image+'"/>').fly({start:{left:100,top:e.pageY-50},end:{left:o.left,top:o.top,width:0,height:0}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("goodsList",{url:"/mall/classify/goodslist/params/:type/:typename/:ptype/:query/:saletype",templateUrl:"views/mall/mall-classify/goods-list/goods-list.html",controller:"goodsListCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("hisShopCtl",["enterViewLoad","appUtils","$stateParams","$ionicSlideBoxDelegate","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(t,e,o,a,n,i,r,c,s,d,l,u,p,h,f){l.back=function(){e.back()},l.paramsData={id:o.id,ismyself:o.ismyself},l.$on("$ionicView.enter",function(){l.shopId=o.id,l.loadShopIndex()}),l.$on("$ionicView.leave",function(){$(".u-flyer").remove()}),l.loadShopIndex=function(){c.post(s.Shoper.home.url+"?id="+l.shopId).then(function(t){l.shopIndex=t.data,0<t.data.bannerList.length&&a.update()}).catch(function(){t.customload("获取数据失败")})},l.pageIndex=0,l.switchPageIndex=function(t){l.pageIndex=t},l.currentIndex=0,l.changeSliderIndex=function(){l.currentIndex=a.$getByHandle("his-shop-index-slide").currentIndex()},l.sale="",l.discount="",l.changeSale=function(){l.sale=1==l.sale?2:1,l.judgeSort()},l.changeDiscount=function(){l.discount=2==l.discount?1:2,l.judgeSort()},l.judgeSort=function(){1==l.sale&&1==l.discount?l.queryData.sort=11:2==l.sale&&1==l.discount?l.queryData.sort=21:2==l.sale&&2==l.discount?l.queryData.sort=22:l.queryData.sort=12,l.refreshLoad()},l.queryData={pagenum:0,pagesize:10,sort:12,date:o.id},l.productList=[],l.haveMore=!0,l.loadData=function(e){c.post(s.Product.query.url,l.queryData).then(function(t){t.data.length<=0&&(l.haveMore=!1,l.$broadcast("scroll.infiniteScrollComplete"),e)||(l.haveMore=!0,e?(l.queryData.pagenum+=1,l.productList=l.productList.concat(t.data),l.$broadcast("scroll.infiniteScrollComplete")):(l.queryData.pagenum=1,l.productList=t.data,l.$broadcast("scroll.refreshComplete")))}).catch(function(){l.haveMore=!1,t.customload("获取商品失败"),l.$broadcast("scroll.infiniteScrollComplete"),l.$broadcast("scroll.refreshComplete")})},l.loadMore=function(t){l.loadData(!0)},l.refreshLoad=function(t){l.queryData.pagenum=0,l.loadData(!1),i.$getByHandle("his-shop-productlist").scrollTop()},l.addToCart=function(t,e){t.stopPropagation();var o=$("#his_shop .fix-right-cart").offset();$('<img class="u-flyer" src="'+e.Image+'"/>').fly({start:{left:100,top:t.pageY-50},end:{left:o.left,top:o.top,width:0,height:0}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(s){s.state("hisShop",{url:"/mall/classify/hisshop/params/:id/:ismyself",templateUrl:"views/mall/mall-classify/his-shop/his-shop.html",controller:"hisShopCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("previewHisShopCtl",["enterViewLoad","appUtils","$stateParams","$ionicSlideBoxDelegate","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(t,e,o,a,n,r,i,c,s,d,l,u,p,h,f){l.back=function(){e.back()},l.$on("$ionicView.enter",function(){l.shopId=o.id,l.loadShopIndex()}),l.$on("$ionicView.leave",function(){$(".u-flyer").remove()}),l.loadShopIndex=function(){c.post(s.Shoper.home.url+"?id="+l.shopId).then(function(t){l.shopIndex=t.data,0<t.data.bannerList.length&&a.update()}).catch(function(){t.customload("获取数据失败")})},l.pageIndex=0,l.switchPageIndex=function(t){l.pageIndex=t},l.currentIndex=0,l.changeSliderIndex=function(){l.currentIndex=a.$getByHandle("his-shop-index-slide").currentIndex()},l.sale="",l.discount="",l.changeSale=function(){l.sale=1==l.sale?2:1,l.judgeSort()},l.changeDiscount=function(){l.discount=2==l.discount?1:2,l.judgeSort()},l.judgeSort=function(){1==l.sale&&1==l.discount?l.queryData.sort=11:2==l.sale&&1==l.discount?l.queryData.sort=21:2==l.sale&&2==l.discount?l.queryData.sort=22:l.queryData.sort=12,l.refreshLoad()},l.queryData={pagenum:0,pagesize:10,sort:12,date:o.id},l.productList=[],l.haveMore=!0,l.loadData=function(e){c.post(s.Product.query.url,l.queryData).then(function(t){t.data.length<=0&&(l.haveMore=!1,l.$broadcast("scroll.infiniteScrollComplete"),e)||(l.haveMore=!0,e?(l.queryData.pagenum+=1,l.productList=l.productList.concat(t.data),l.$broadcast("scroll.infiniteScrollComplete")):(l.queryData.pagenum=1,l.productList=t.data,l.$broadcast("scroll.refreshComplete")))}).catch(function(){l.haveMore=!1,t.customload("获取商品失败"),l.$broadcast("scroll.infiniteScrollComplete"),l.$broadcast("scroll.refreshComplete")})},l.loadMore=function(t){l.loadData(!0)},l.refreshLoad=function(t){l.queryData.pagenum=0,l.loadData(!1),r.$getByHandle("his-shop-productlist").scrollTop()},l.addToCart=function(t,e){t.stopPropagation();var o=$("#his_shop .fix-right-cart").offset();$('<img class="u-flyer" src="'+e.Image+'"/>').fly({start:{left:100,top:t.pageY-50},end:{left:o.left,top:o.top,width:0,height:0}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(i){i.state("previewHisShop",{url:"/mall/classify/previewhisshop/params/:id",templateUrl:"views/mall/mall-classify/preview-his-shop/preview-his-shop.html",controller:"previewHisShopCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("mallSearchCtl",["enterViewLoad","appUtils","$localStorage","$ionicPopup","$ionicSlideBoxDelegate","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(o,t,c,a,e,i,r,n,s,l,u,h,$,d,p,y){h.back=function(){t.back()},h.$on("$ionicView.enter",function(){h.searchHistory=c.productSearchHistory||[]}),h.searchData={data:""},h.search=function(){h.searchHistory.push(h.searchData.data),c.productSearchHistory=h.searchHistory,u.go("goodsList",{query:h.searchData.data})},h.clearHistory=function(){a.confirm({title:"确定清空历史？",cancelText:"取消",okText:"确认"}).then(function(o){o&&(h.searchHistory=[],c.productSearchHistory=h.searchHistory)})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("mallSearch",{url:"/mall/home/mallsearch",cache:!1,templateUrl:"views/mall/mall-home/mall-search/mall-search.html",controller:"mallSearchCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addressListCtl",["appUtils","enterViewLoad","$ionicPopup","$ionicLoading","$ionicHistory","$timeout","$rootScope","$scope","$state","$stateParams","$http","$Factory",function(e,i,n,t,o,a,c,s,d,r,p,u){s.back=function(){e.back()},s.$on("$ionicView.enter",function(){s.loadData()}),s.loadData=function(){p.post(u.UserAddress.query.url).then(function(t){s.addressList=t.data}).catch(function(){i.customload("获取地址列表失败")})},s.chooseAddress=function(t){e.receiptAddress=t,s.back(),c.fromStateName},s.goShipping=function(t,o){o.stopPropagation(),d.go("shippingAddress",{id:t.Id,province:t.Province,city:t.City,district:t.District})},s.deleteAdr=function(o,t){t.stopPropagation(),n.confirm({title:"确定删除该地址？",cancelText:"取消",okText:"确认"}).then(function(t){t&&p.post(u.UserAddress.delete.url+"?id="+o.Id).then(function(t){s.loadData(),o.Id===e.receiptAddress.Id&&(e.receiptAddress=null)}).catch(function(t){var o=t.data&&t.data.Message||"删除失败";i.customload(o)})})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(s){s.state("addressList",{url:"/mall/mallmine/addresslist",templateUrl:"views/mall/mall-mine/addressList/addressList.html",controller:"addressListCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("applyForStoreCtl",["upImgBase","appUtils","enterViewLoad","$ionicPopup","$ionicModal","$ionicListDelegate","$timeout","$http","$Factory","$state","$scope",function(n,t,e,o,a,i,s,c,u,l,d){d.back=function(){t.back()},d.$on("$ionicView.enter",function(){d.subData={CategoryId:null,Details:"",BusinessLicenseImg:""},d.loadData()}),d.$on("$ionicView.leave",function(){}),c.get(u.Account.getuserinfo.url).then(function(t){t.data.Role||o.confirm({title:"您还不是会员，暂无开店资格",cancelText:"取消",okText:"去开通"}).then(function(t){t&&l.go("openVip")})}).catch(function(){}),d.loadData=function(){c.get(u.Category.query.url+"?pid=").then(function(t){d.classifyList=t.data,d.subData.CategoryId=d.classifyList[0].id}).catch(function(){e.customload("获取分类列表失败")})},d.chooseCategory=function(t){d.subData.CategoryId=t},a.fromTemplateUrl("apply_for_store_suc_modal",{scope:d,animation:"slide-in-left"}).then(function(t){d.modal=t}),d.showModal=function(){d.modal.show()},d.closeModal=function(){d.modal.hide(),s(function(){d.back()},1e3)},d.businessImgs=[],$("#apply_for_store .add-imgs-btn-business").on("click",".in-add-btn-business",function(){$(this).next().click()}),$("#apply_for_store .add-imgs-btn-business").on("change","input",function(){var t=$(this)[0].files[0];n.changeBase(URL.createObjectURL(t),function(t){c.post(u.Account.upload.url,{path:"18/mall/applyforstore",file:t}).then(function(t){0==t.data.error&&d.businessImgs.push(t.data.view)})})}),d.deleteBusImg=function(t){d.businessImgs.splice(t,1),i.closeOptionButtons()},d.idcardImgs=[],$("#apply_for_store .add-imgs-btn-idcard").on("click",".in-add-btn-idcard",function(){$(this).next().click()}),$("#apply_for_store .add-imgs-btn-idcard").on("change","input",function(){var t=$(this)[0].files[0];n.changeBase(URL.createObjectURL(t),function(t){c.post(u.Account.upload.url,{path:"18/mall/applyforstore",file:t}).then(function(t){0==t.data.error&&d.idcardImgs.push(t.data.view)})})}),d.deleteIdcardImg=function(t){d.idcardImgs.splice(t,1),i.closeOptionButtons()},d.save=function(){if(d.subData.Details)if(d.businessImgs.length)if(d.idcardImgs.length){var t=d.businessImgs.concat(d.idcardImgs);d.subData.BusinessLicenseImg=t.join("|"),c.post(u.Shoper.create.url,d.subData).then(function(t){d.showModal()}).catch(function(t){400==t.status&&"权限不足"==t.data.Message?o.confirm({title:"个人会员以上才可开店！",cancelText:"取消",okText:"去开通"}).then(function(t){t&&l.go("openVip")}):e.customload("操作失败！")})}else e.customload("请上传身份证照片！");else e.customload("请上传营业执照！");else e.customload("请输入经营范围！")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("applyForStore",{url:"/mall/mallmine/applyforstore",cache:!1,templateUrl:"views/mall/mall-mine/applyForStore/applyForStore.html",controller:"applyForStoreCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myMallAttentionsCtl",["enterViewLoad","appUtils","$ionicPopup","$interval","$ionicModal","$timeout","$http","$Factory","$state","$stateParams","$scope",function(t,e,i,n,o,c,a,s,u,l,r){r.back=function(){e.back()},r.$on("$ionicView.enter",function(){r.loadhousetimes()}),r.loadhousetimes=function(){a.post(s.News.query.url,{type:1,pagenum:0,pagesize:4}).then(function(t){r.housetimesList=t.data}).catch(function(){t.customload("获取房产时报失败")})},r.switchActive=l.type||0,r.switchTo=function(t){r.switchActive=t},r.deleteOrder=function(){i.confirm({title:"确定删除订单？",cancelText:"取消",okText:"确认"}).then(function(t){})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("myMallAttentions",{url:"/mall/mallmine/mymallattentions",templateUrl:"views/mall/mall-mine/my-mallAttentions/my-mallAttentions.html",controller:"myMallAttentionsCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myMallOrdersCtl",["enterViewLoad","appUtils","$localStorage","$ionicScrollDelegate","$ionicPopup","$interval","$ionicModal","$timeout","$http","$Factory","$state","$stateParams","$scope",function(r,t,o,a,e,u,n,c,s,i,l,d,f){f.back=function(){t.back()},f.$on("$ionicView.enter",function(){f.orderStatus=d.type||0,f.switchTo=function(t){f.orderStatus=t,f.statusFilter(),a.scrollTop()},f.loadData()}),f.resData=[],f.orderList=[],f.loadData=function(){s.post(i.ProductOrder.orderquery.url).then(function(t){f.resData=t.data,f.statusFilter()}).catch(function(){r.customload("获取订单列表失败")})},f.statusFilter=function(){f.orderList=f.resData.filter(function(t){var o,r;t.groupTotalNum=0;for(var a=r=o=t.groupTotalMoney=0;a<t.Items.length;a++)o+=t.Items[a].Quantity,r+=t.Items[a].SubTotal;return t.groupTotalNum=o,t.groupTotalMoney=r,100==f.orderStatus?100==t.OrderStatus:101==f.orderStatus?101==t.OrderStatus||102==t.OrderStatus||103==t.OrderStatus:104==f.orderStatus?104==t.OrderStatus||105==t.OrderStatus:400==f.orderStatus?400==t.OrderStatus:t})},f.confirmReceipt=function(o){e.confirm({title:"确定收货钱将转入商家！",cancelText:"取消",okText:"确认"}).then(function(t){t&&s.post(i.ProductOrder.status.url+"?TradeNo="+o.TradeNo,104).then(function(t){r.customload("操作成功"),f.loadData()}).catch(function(){r.customload("操作失败")})})},f.deleteOrder=function(o){e.confirm({title:"确定删除订单？",cancelText:"取消",okText:"确认"}).then(function(t){t&&s.post(i.ProductOrder.status.url+"?TradeNo="+o.TradeNo,444).then(function(t){r.customload("操作成功"),f.loadData()}).catch(function(){r.customload("操作失败")})})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("myMallOrders",{url:"/mall/mallmine/mymallorders/params/:type",templateUrl:"views/mall/mall-mine/my-mallOrders/my-mallOrders.html",controller:"myMallOrdersCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("returnAfterSaleCtl",["enterViewLoad","appUtils","$interval","$ionicModal","$timeout","$http","$Factory","$state","$stateParams","$scope",function(t,e,i,o,n,c,a,s,u,r){r.back=function(){e.back()},r.$on("$ionicView.enter",function(){r.loadhousetimes()}),r.loadhousetimes=function(){c.post(a.News.query.url,{type:1,pagenum:0,pagesize:4}).then(function(t){r.housetimesList=t.data}).catch(function(){t.customload("获取房产时报失败")})},r.switchActive=u.type||0,r.switchTo=function(t){r.switchActive=t}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("returnAfterSale",{url:"/mall/mallmine/returnaftersale",templateUrl:"views/mall/mall-mine/return-afterSale/return-afterSale.html",controller:"returnAfterSaleCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("waitForCommentCtl",["$waitForCommentData","enterViewLoad","appUtils","$ionicPopup","$interval","$ionicModal","$timeout","$http","$Factory","$state","$stateParams","$scope",function(a,n,t,r,o,e,u,i,c,d,l,s){s.back=function(){t.back()},s.$on("$ionicView.enter",function(){s.loadData()}),s.resData=[],s.orderList=[],s.loadData=function(){i.post(c.ProductOrder.orderquery.url).then(function(t){s.resData=t.data,s.statusFilter()}).catch(function(){n.customload("获取订单列表失败")})},s.statusFilter=function(){s.orderList=s.resData.filter(function(t){var o,a;t.groupTotalNum=0;for(var n=a=o=t.groupTotalMoney=0;n<t.Items.length;n++)o+=t.Items[n].Quantity,a+=t.Items[n].SubTotal;return t.groupTotalNum=o,t.groupTotalMoney=a,104==t.OrderStatus||105==t.OrderStatus})},s.addOrderManage=function(){},s.goPublishComment=function(t,o){a.data.TradeNo=t.TradeNo,a.data.productInfo=o,d.go("publishComment")},s.deleteOrder=function(o){r.confirm({title:"确定删除订单？",cancelText:"取消",okText:"确认"}).then(function(t){t&&i.post(c.ProductOrder.status.url+"?TradeNo="+o.TradeNo,444).then(function(t){n.customload("操作成功"),s.loadData()}).catch(function(){n.customload("操作失败")})})}}]).factory("$waitForCommentData",[function(){var t=function(){};return t.prototype={data:{TradeNo:null,productInfo:null}},new t}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("waitForComment",{url:"/mall/mallmine/waitforcomment",templateUrl:"views/mall/mall-mine/waitForComment/waitForComment.html",controller:"waitForCommentCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("dialogBoxCtl",["$forwardMsgData","NimUtils","appUtils","enterViewLoad","$sce","$ionicLoading","$ionicModal","$localStorage","$ionicSlideBoxDelegate","$ionicActionSheet","$scope","$rootScope","$state","$Factory","$http","$stateParams","$ionicScrollDelegate","$timeout",function(o,n,t,i,e,c,s,a,d,l,r,u,g,m,f,p,h,w){r.back=function(){t.back()},r.contentScrollBottom=function(){w(function(){h.$getByHandle("dialog-message-scroll").scrollBottom()})},r.targetId=p.id,r.emojiList=n.emojiList(),r.emojiPages=[0,1,2,3,4],r.clickCustomMsg=function(o,e){o!=a.myselfInfo.Id&&g.go("agencyAgreementCheck",{userid:o,houseid:e})},r.keyboardShow=!1,r.showEmoji=!1,r.showFuncList=!1,r.openEmoji=function(){r.showEmoji=!0,r.showFuncList=!1,M(),r.contentScrollBottom()},r.openFuncList=function(){r.showFuncList=!0,r.showEmoji=!1,M(),r.contentScrollBottom()},r.openKeyboard=function(){r.showEmoji=!1,r.showFuncList=!1,r.contentScrollBottom()},window.addEventListener("native.keyboardshow",function(o){w(function(){r.keyboardHeight&&r.keyboardHeight==o.keyboardHeight||(r.keyboardHeight=o.keyboardHeight),r.keyboardShow=!0,r.showEmoji=!1,r.showFuncList=!1,r.contentScrollBottom()})}),window.addEventListener("native.keyboardhide",function(o){r.keyboardShow=!1,r.contentScrollBottom()}),r.currentIndex=0,r.changeEmojiSlide=function(){r.currentIndex=d.$getByHandle("dialog-emoji-handle").currentIndex()},r.addFriend=function(o){n.addFriend(o,function(){i.customload("发送好友申请成功")},function(){i.customload("发送好友申请失败")})};r.messageList=[];var y,b;u.$on("RECEIVEMSG",function(o,e){"p2p"==e.scene&&e.from==r.targetId&&("custom"==e.type&&(e.content=JSON.parse(e.content)),w(function(){r.messageList.push(e),r.contentScrollBottom()}))}),u.$on("DELETEMSG",function(o,e){if("p2p"==e.scene&&e.from==r.targetId)for(var n=0;n<r.messageList.length;n++)r.messageList[n].idServer==e.idServer&&r.messageList.splice(n,1)}),r.$on("$ionicView.enter",function(){w(function(){y=document.body.querySelector("#dialog_box .bar-footer"),b=angular.element(y.querySelector("textarea"))},0),nim.getHistoryMsgs({scene:"p2p",to:r.targetId,done:function(o,e){if(!o){for(var n=0;n<e.msgs.length;n++)"custom"==e.msgs[n].type&&t.isJsonString(e.msgs[n].content)&&(e.msgs[n].content=JSON.parse(e.msgs[n].content)),e.msgs[n].type;r.messageList=e.msgs.reverse(),w(function(){"dialogVideoPlayer"!=u.fromStateName&&"linkManDetail"!=u.fromStateName&&r.contentScrollBottom()})}}}),nim.getUser({account:r.targetId,done:function(o,e){o||w(function(){r.targetInfo=e,r.targetInfo=angular.extend({isFriend:n.isFriend(r.targetId)},r.targetInfo)})},sync:!0}),r.myselfInfo=n.myselfInfo}),r.$on("$ionicView.leave",function(){nim.resetSessionUnread("p2p-"+r.targetId),r.keyboardShow=!1,r.showEmoji=!1,r.showFuncList=!1}),r.playAudio=function(o){r.currentAudio||(r.currentAudio=new Audio(o),r.currentAudio.play(),r.currentAudio.onended=function(){r.currentAudio=null})};var I=function(o,e){o?i.customload("发送失败"):(r.input.message="","custom"==e.type&&(e.content=JSON.parse(e.content)),r.messageList.push(e),r.contentScrollBottom())};function M(){b.on("blur",function(){r.showEmoji||r.showFuncList?b[0].blur():b[0].focus()})}r.input={message:""},r.chooseEmoji=function(o){r.input.message=r.input.message+o},r.sendText=function(){nim.sendText({scene:"p2p",to:r.targetId,text:r.input.message,done:I,needMsgReceipt:!1}),M()},$("#dialog_box .func-wrapper").on("click",".send-image",function(){$(this).next().next().click()}),$("#dialog_box .func-wrapper").on("change","#dialog_box_imageinput",function(){nim.sendFile({scene:"p2p",to:r.targetId,type:"image",fileInput:document.getElementById("dialog_box_imageinput"),beginupload:function(o){},uploadprogress:function(o){c.show({template:o.percentageText})},uploaddone:function(o,e){o?i.customload("文件上传失败"):c.hide()},beforesend:function(o){},done:I})}),$("#dialog_box .func-wrapper").on("click",".send-video",function(){$(this).next().next().click()}),$("#dialog_box .func-wrapper").on("change","#dialog_box_videoinput",function(){nim.sendFile({scene:"p2p",to:r.targetId,type:"video",fileInput:document.getElementById("dialog_box_videoinput"),beginupload:function(o){},uploadprogress:function(o){c.show({template:o.percentageText})},uploaddone:function(o,e){o?i.customload("文件上传失败"):c.hide()},beforesend:function(o){},done:I})}),s.fromTemplateUrl("dialogbox_location_modal",{scope:r,animation:"slide-in-left"}).then(function(o){r.locationModal=o}),r.showLocationModal=function(){r.locationModal.show()},r.closeLocationModal=function(){r.locationModal.hide()},s.fromTemplateUrl("dialogbox_showbig_image_modal",{scope:r,animation:"slide-in-right"}).then(function(o){r.bigImageModal=o}),r.showBigImageModal=function(o){r.showBigImage=o,r.bigImageModal.show()},r.closeBigImageModal=function(){r.bigImageModal.hide()},s.fromTemplateUrl("dialogbox_delmsg_modal",{scope:r,animation:"slide-in-left"}).then(function(o){r.delmsgModal=o}),r.showDelmsgModal=function(o,e){"text"!==o.type&&"image"!==o.type&&"video"!==o.type&&"geo"!==o.type||(r.delmsgModal.show(),r.chooseMsgItem=o,r.chooseMsgIndex=e)},r.closeDelmsgModal=function(){r.delmsgModal.hide()},r.deleteMsg=function(){nim.deleteMsg({msg:r.chooseMsgItem,done:function(o){o?508==o.code&&i.customload("超出撤回时间"):(r.messageList.splice(r.chooseMsgIndex,1),nim.sendTipMsg({scene:"p2p",to:r.targetId,tip:"撤回了一条消息",done:I}))}})},r.forwardMsg=function(){o.data=r.chooseMsgItem,g.go("forwardMsg")},r.copyMsg=function(){document.addEventListener("deviceready",function(){cordova.plugins.clipboard.copy(r.chooseMsgItem.text)},!1)},r.saveImage=function(e){l.show({buttons:[{text:"保存图片"}],cancelText:"取消",cancel:function(){},buttonClicked:function(o){return t.saveImageToLocal(e),!0}})},r.$on("ngRepeatFinished",function(o,e){w(function(){r.contentScrollBottom()},100)})}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("dialogBox",{url:"/chatlist/dialogbox/params/:id",templateUrl:"views/tabs/chatList/dialogBox/dialogBox.html",controller:"dialogBoxCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("dialogLocationCtl",["enterViewLoad","appUtils","$ionicPopup","$localStorage","$ionicModal","$rootScope","$timeout","$scope","$state","$stateParams","$http","$Factory","$ionicLoading",function(o,a,n,t,i,e,l,d,c,r,p,u,m){d.back=function(){a.back()},d.lng=r.lng,d.lat=r.lat,d.mark=r.mark;var s=new BMap.Map("dialog_location_content");s.centerAndZoom(new BMap.Point(d.lng,d.lat),16),s.addOverlay(new BMap.Marker(new BMap.Point(d.lng,d.lat))),d.gMap=function(){document.addEventListener("deviceready",function(){/iphone/i.test(navigator.userAgent)||/ipad/i.test(navigator.userAgent)?cordovaNaviMap.amapRoute("iosamap://path?sourceApplication=房田&dlat="+d.lat+"&dlon="+d.lng+"&dname="+d.mark+"&dev=0&t=0",function(a){},function(a){o.customload(a)}):cordovaNaviMap.amapRoute("amapuri://route/plan/?sourceApplication=房田&dlat="+d.lat+"&dlon="+d.lng+"&dname="+d.mark+"&dev=0&t=0",function(a){},function(a){o.customload(a)})},!1)},d.bMap=function(){document.addEventListener("deviceready",function(){cordovaNaviMap.bdmapRoute("baidumap://map/direction?destination=latlng:"+d.lat+","+d.lng+"|name:"+d.mark+"&mode=driving",function(a){},function(a){o.customload(a)})},!1)},i.fromTemplateUrl("dialog_location_modal",{scope:d,animation:"slide-in-up"}).then(function(a){d.modal=a}),d.showModal=function(){d.modal.show()},d.closeModal=function(){d.modal.hide()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("dialogLocation",{url:"/chatlist/dialoglocation/params/:lng/:lat/:mark",cache:!1,templateUrl:"views/tabs/chatList/dialogLocation/dialogLocation.html",controller:"dialogLocationCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("forwardMsgCtr",["$forwardMsgData","NimUtils","appUtils","enterViewLoad","$timeout","$state","$rootScope","$scope","$ionicPopup",function(n,o,t,e,i,r,c,a,u){a.back=function(){t.back()},a.$on("$ionicView.enter",function(){a.chooseMsgItem=n.data,nim.getTeams({done:function(n,o){n||i(function(){a.groupList=o})}}),o.myFriendsInfo(function(n){a.friendArr=n.filter(function(n){return t.isJsonString(n.custom)&&(n.custom=JSON.parse(n.custom)),n}),i(function(){a.friendArr=a.friendArr})})}),a.$on("$ionicView.enter",function(){n.data=null}),a.chooseTarget=function(o,t,n){u.confirm({title:"确定转发给"+n+"？",cancelText:"取消",okText:"确认"}).then(function(n){if(n){nim.forwardMsg({msg:a.chooseMsgItem,scene:o,to:t,done:function(n){n?e.customload("转发失败"):(e.customload("转发成功"),i(function(){a.back()},1500))}})}})},a.forwardMsg=function(){}}]).factory("$forwardMsgData",[function(){var n=function(){};return n.prototype={data:null},new n}]);
"use strict";angular.module("App").config(["$stateProvider",function(r){r.state("forwardMsg",{url:"/chatlist/forwardmsg",templateUrl:"views/tabs/chatList/forwardMsg/forwardMsg.html",controller:"forwardMsgCtr",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("groupDialogBoxCtl",["$openGroupRedpacketData","$forwardMsgData","NimUtils","appUtils","enterViewLoad","$ionicLoading","$ionicModal","$ionicActionSheet","$localStorage","$ionicSlideBoxDelegate","$scope","$rootScope","$state","$Factory","$http","$stateParams","$ionicScrollDelegate","$timeout",function(o,e,i,a,s,t,n,c,d,r,l,g,u,m,p,f,h,I){l.back=function(){a.back()},l.contentScrollBottom=function(){I(function(){h.$getByHandle("groupdialog-message-scroll").scrollBottom()})},l.targetId=f.id,l.emojiList=i.emojiList(),l.emojiPages=[0,1,2,3,4],l.keyboardShow=!1,l.showEmoji=!1,l.showFuncList=!1,l.openEmoji=function(){l.showEmoji=!0,l.showFuncList=!1,y(),l.contentScrollBottom()},l.openFuncList=function(){l.showFuncList=!0,l.showEmoji=!1,y(),l.contentScrollBottom()},l.openKeyboard=function(){l.showEmoji=!1,l.showFuncList=!1,l.contentScrollBottom()},window.addEventListener("native.keyboardshow",function(o){I(function(){l.keyboardHeight&&l.keyboardHeight==o.keyboardHeight||(l.keyboardHeight=o.keyboardHeight),l.keyboardShow=!0,l.showEmoji=!1,l.showFuncList=!1,h.scrollBottom()})}),window.addEventListener("native.keyboardhide",function(o){l.keyboardShow=!1,h.scrollBottom()}),l.currentIndex=0,l.changeEmojiSlide=function(){l.currentIndex=r.$getByHandle("groupdialog-emoji-handle").currentIndex()};l.messageList=[],l.hasRight=!0;var b,w;g.$on("RECEIVEMSG",function(o,e){"team"==e.scene&&e.to==l.targetId&&("custom"==e.type&&(e.content=JSON.parse(e.content)),I(function(){l.messageList.push(e),h.scrollBottom()}))}),g.$on("DELETEMSG",function(o,e){if("team"==e.scene&&e.to==l.targetId)for(var t=0;t<l.messageList.length;t++)l.messageList[t].idServer==e.idServer&&l.messageList.splice(t,1)}),l.$on("$ionicView.enter",function(){I(function(){b=document.body.querySelector("#group_dialog_box .bar-footer"),w=angular.element(b.querySelector("textarea"))}),l.myselfInfo=i.myselfInfo,nim.getTeam({teamId:l.targetId,done:function(o,e){o||(l.targetInfo=e).valid||s.customload("该群已解散")}}),nim.getHistoryMsgs({scene:"team",to:l.targetId,done:function(o,e){if(o){if(403==o.code){s.customload("你已退出该群"),I(function(){l.back()},1500);for(var t=0;t<i.sessionList.length;t++){var n="team-"+l.targetId;n==i.sessionList[t].id&&(i.sessionList.splice(t,1),l.hasRight=!1)}i.sessionList=i.sessionList}}else I(function(){for(var o=0;o<e.msgs.length;o++)"custom"==e.msgs[o].type&&a.isJsonString(e.msgs[o].content)&&(e.msgs[o].content=JSON.parse(e.msgs[o].content));l.messageList=e.msgs.reverse(),"groupDetail"!=g.fromStateName&&"linkManDetail"!=g.fromStateName&&h.scrollBottom()})}}),nim.notifyForNewTeamMsg({teamIds:[l.targetId],done:function(o,e){o||(l.isMute="1"==e[l.targetId])}}),nim.getTeamMembers({teamId:l.targetId,done:function(o,e){if(!o){for(var t=[],n=0;n<e.members.length;n++)t.push(e.members[n].account);M(t)}}})}),l.groupMembersInfo={};var M=function(o){o.length<=0||i.getUsers({accounts:o,done:function(o,e){o||e.map(function(o,e){l.groupMembersInfo[o.account]=o})}})};l.$on("$ionicView.leave",function(){l.hasRight&&nim.resetSessionUnread("team-"+l.targetId),l.keyboardShow=!1,l.showEmoji=!1,l.showFuncList=!1});var k=function(o,e){o?s.customload("发送失败"):(l.input.message="",l.messageList.push(e),h.scrollBottom())};function y(){w.on("blur",function(){l.showEmoji||l.showFuncList?w[0].blur():w[0].focus()})}l.input={message:""},l.chooseEmoji=function(o){l.input.message=l.input.message+o},l.sendText=function(){nim.sendText({scene:"team",to:l.targetId,text:l.input.message,done:k,needMsgReceipt:!1}),y()},$("#group_dialog_box .func-wrapper").on("click",".send-image",function(){$(this).next().next().click()}),$("#group_dialog_box .func-wrapper").on("change","#group_dialog_box_imageinput",function(){nim.sendFile({scene:"team",to:l.targetId,type:"image",fileInput:document.getElementById("group_dialog_box_imageinput"),beginupload:function(o){},uploadprogress:function(o){t.show({template:o.percentageText})},uploaddone:function(o,e){o?s.customload("文件上传失败"):t.hide()},beforesend:function(o){},done:k})}),$("#group_dialog_box .func-wrapper").on("click",".send-video",function(){$(this).next().next().click()}),$("#group_dialog_box .func-wrapper").on("change","#groupdialog_box_videoinput",function(){nim.sendFile({scene:"team",to:l.targetId,type:"video",fileInput:document.getElementById("groupdialog_box_videoinput"),beginupload:function(o){},uploadprogress:function(o){t.show({template:o.percentageText})},uploaddone:function(o,e){o?s.customload("文件上传失败"):t.hide()},beforesend:function(o){},done:k})}),n.fromTemplateUrl("groupdialogbox_location_modal",{scope:l,animation:"slide-in-left"}).then(function(o){l.locationModal=o}),l.showLocationModal=function(){l.locationModal.show()},l.closeLocationModal=function(){l.locationModal.hide()},n.fromTemplateUrl("groupdialogbox_showbig_image_modal",{scope:l,animation:"slide-in-right"}).then(function(o){l.bigImageModal=o}),l.showBigImageModal=function(o){l.showBigImage=o,l.bigImageModal.show()},l.closeBigImageModal=function(){l.bigImageModal.hide()},n.fromTemplateUrl("groupdialogbox_delmsg_modal",{scope:l,animation:"slide-in-left"}).then(function(o){l.delmsgModal=o}),l.showDelmsgModal=function(o,e){"text"!==o.type&&"image"!==o.type&&"video"!==o.type&&"geo"!==o.type||(l.delmsgModal.show(),l.chooseMsgItem=o,l.chooseMsgIndex=e)},l.closeDelmsgModal=function(){l.delmsgModal.hide()},l.deleteMsg=function(){nim.deleteMsg({msg:l.chooseMsgItem,done:function(o){o?508==o.code&&s.customload("超出撤回时间"):(l.messageList.splice(l.chooseMsgIndex,1),nim.sendTipMsg({scene:"team",to:l.targetId,tip:"撤回了一条消息",done:k}))}})},l.forwardMsg=function(){e.data=l.chooseMsgItem,u.go("forwardMsg")},l.copyMsg=function(){document.addEventListener("deviceready",function(){cordova.plugins.clipboard.copy(l.chooseMsgItem.text)},!1)},l.saveImage=function(e){c.show({buttons:[{text:"保存图片"}],cancelText:"取消",cancel:function(){},buttonClicked:function(o){return a.saveImageToLocal(e),!0}})},n.fromTemplateUrl("groupdialogbox_openredpacket_modal",{scope:l,animation:"slide-in-up"}).then(function(o){l.openredpacketModal=o}),l.showRedpacketModal=function(o,e){l.openredpacketModal.show()},l.closeRedpacketModal=function(){l.openredpacketModal.hide()},l.openRedPacket=function(o){l.redpacketInfo=o,l.redpacketInfo.avatar=l.groupMembersInfo[l.redpacketInfo.from]&&l.groupMembersInfo[l.redpacketInfo.from].avatar?l.groupMembersInfo[l.redpacketInfo.from].avatar:"",l.showRedpacketModal()},l.realOpen=function(){o.data=l.redpacketInfo,u.go("openGroupRedpacket")},l.$on("ngRepeatFinished",function(o,e){I(function(){l.contentScrollBottom()},100)})}]);
"use strict";angular.module("App").config(["$stateProvider",function(o){o.state("groupDialogBox",{url:"/chatlist/groupdialogbox/params/:id",templateUrl:"views/tabs/chatList/groupDialogBox/groupDialogBox.html",controller:"groupDialogBoxCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("groupInviteCtr",["NimUtils","enterViewLoad","appUtils","$timeout","$state","$stateParams","$rootScope","$ionicHistory","$Factory","$scope","$http",function(t,l,e,n,a,u,r,o,i,c,v){c.back=function(){e.back()},c.targetId=u.id,c.groupSubArr=[],c.addGroupMembers=function(){$.each($("#group_invite .letterli").find("input:checked"),function(){c.groupSubArr.push($(this).val())}),c.groupSubArr.length<1?l.customload("请选择至少一位群成员"):nim.addTeamMembers({teamId:c.targetId,accounts:c.groupSubArr,ps:"加入我们的群吧",done:function(e,t){e?l.customload("操作失败"):(l.customload("操作成功"),n(function(){c.back()},1500))}})},c.friendArr=[],c.$on("$ionicView.enter",function(){c.friendArr=[],nim.getFriends({done:function(e,t){if(!e){for(var a=[],n=0;n<t.length;n++)a.push(t[n].account);u(a)}}});var u=function(e){e.length<=0||t.getUsers({accounts:e,done:function(e,t){if(!e){var u=t;nim.getTeamMembers({teamId:c.targetId,done:function(e,t){if(!e){for(var a=t.members,n=0;n<u.length;n++)a.find(function(e){return e.account===u[n].account})?c.friendArr.push(angular.extend({existed:!0},u[n])):c.friendArr.push(angular.extend({existed:!1},u[n]));c.formatContacts=[{key:"A",value:[]},{key:"B",value:[]},{key:"C",value:[]},{key:"D",value:[]},{key:"E",value:[]},{key:"F",value:[]},{key:"G",value:[]},{key:"H",value:[]},{key:"I",value:[]},{key:"J",value:[]},{key:"K",value:[]},{key:"L",value:[]},{key:"M",value:[]},{key:"N",value:[]},{key:"O",value:[]},{key:"P",value:[]},{key:"Q",value:[]},{key:"R",value:[]},{key:"S",value:[]},{key:"T",value:[]},{key:"U",value:[]},{key:"V",value:[]},{key:"W",value:[]},{key:"X",value:[]},{key:"Y",value:[]},{key:"Z",value:[]},{key:"#",value:[]}],c.changeToPinyinArr()}}})}}})}}),c.formatContacts=[{key:"A",value:[]},{key:"B",value:[]},{key:"C",value:[]},{key:"D",value:[]},{key:"E",value:[]},{key:"F",value:[]},{key:"G",value:[]},{key:"H",value:[]},{key:"I",value:[]},{key:"J",value:[]},{key:"K",value:[]},{key:"L",value:[]},{key:"M",value:[]},{key:"N",value:[]},{key:"O",value:[]},{key:"P",value:[]},{key:"Q",value:[]},{key:"R",value:[]},{key:"S",value:[]},{key:"T",value:[]},{key:"U",value:[]},{key:"V",value:[]},{key:"W",value:[]},{key:"X",value:[]},{key:"Y",value:[]},{key:"Z",value:[]},{key:"#",value:[]}],c.changeToPinyinArr=function(){for(var e=0;e<c.friendArr.length;e++)for(var t=pinyinUtil.getFirstLetter(c.friendArr[e].nick).substr(0,1).toUpperCase(),a=0;a<c.formatContacts.length;a++){if(t==c.formatContacts[a].key){c.formatContacts[a].value.push(c.friendArr[e]);break}a==c.formatContacts.length-1&&c.formatContacts[26].value.push(c.friendArr[e])}n(function(){c.formatContacts=c.formatContacts})},c.changeToPinyinArr(),c.letterarr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","#"],c.mTouch=function(e,t){l.customload(t,500);var a=e.pageX||e.touches[0].pageX,n=e.pageY||e.touches[0].pageY;if(r=document.elementFromPoint(a,n)){var u=r.innerText;if(u&&" "!=u&&1==u.length&&(c.hint=u,document.getElementById("group_invite_index-"+c.hint))){var r,o=document.getElementById("group_invite_index-"+c.hint).offsetTop-$ionicScrollDelegate.$getByHandle("clientScroll").getScrollPosition().top;$ionicScrollDelegate.scrollBy(0,o,!0),(r=document.getElementsByTagName("ion-content"))[0].style.overflow="auto"}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("tabs.groupInvite",{url:"/chatlist/groupinvite/params/:id",cache:!1,views:{classify:{templateUrl:"views/tabs/chatList/groupInvite/groupInvite.html",controller:"groupInviteCtr"}},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("groupRedPacketCtl",["enterViewLoad","appUtils","$ionicPopup","$localStorage","$ionicModal","$rootScope","$timeout","$scope","$state","$stateParams","$http","$Factory","$ionicLoading",function(e,a,t,o,n,s,u,l,i,d,c,r,p){var m;l.back=function(){a.back()},l.targetId=d.id,nim.getTeamMembers({teamId:l.targetId,done:function(a,t){a||(l.teamMembersNum=t.members.length)}}),l.hasPassword=!1,c.post(r.Money.ispassword.url).then(function(a){(a.data||0===a.data)&&(l.hasPassword=!0,l.leftMoney=a.data)}).catch(function(){}),l.subData={PerFee:0,TotalFee:0,TotalNum:"",Type:1,message:""},l.perFeeChange=function(){1==l.subData.Type?(l.subData.TotalFee=l.subData.PerFee*l.subData.TotalNum,l.subData.PerFee<.01?l.tooSmall=!0:l.tooSmall=!1):0<l.subData.TotalNum&&l.subData.TotalFee/l.subData.TotalNum<.01?l.tooSmall=!0:l.tooSmall=!1},l.numChange=function(){this.subData.TotalNum&&(this.subData.TotalNum=this.subData.TotalNum.replace(/\D/g,""),l.subData.TotalNum=this.subData.TotalNum),l.perFeeChange()},l.changeType=function(a){l.subData.Type=a,l.subData.TotalFee=0,l.subData.PerFee=0},l.pwdInput={value:null},n.fromTemplateUrl("group_read_packer_password_modal",{scope:l,animation:"slide-in-up"}).then(function(a){l.modal=a}),l.showModal=function(){l.modal.show(),l.inputPassword()},l.closeModal=function(){l.modal.hide()},l.$on("$ionicView.beforeLeave",function(){l.modal.remove()}),l.inputPassword=function(){$(".groupread-packer-password-modalview .password").on("input",function(){var t=$(this).val().length;$(".groupread-packer-password-modalview .showView").find("li").each(function(a){a<t?$(this).find(".circle").css({display:"inline-block"}):$(this).find(".circle").hide()})})},l.clearPoint=function(){$(".groupread-packer-password-modalview .showView").find("li").each(function(a){$(this).find(".circle").hide()})},l.inputPwd=function(){this.pwdInput.value=this.pwdInput.value.replace(/\D/g,""),l.pwdInput.value=this.pwdInput.value},l.$watch("pwdInput.value",function(a){a&&6==a.length&&(m&&u.cancel(m),m=u(function(){l.passwordDone(a)},500))}),l.nextStep=function(){if(l.subData.TotalNum<1&&e.customload("红包个数不小于一个"),!l.hasPassword)return t.confirm({title:"未设置密码,前往设置？",cancelText:"取消",okText:"确定"}).then(function(a){a&&i.go("setPayPassword")}),!1;l.leftMoney<100*l.subData.TotalFee.toFixed(2)?e.customload("余额不足"):l.showModal()},l.passwordDone=function(a){if(l.pwdInput.value=null,l.clearPoint(),l.closeModal(),1==l.subData.Type)var t=100*l.subData.PerFee.toFixed(2)*l.subData.TotalNum;else t=100*l.subData.TotalFee.toFixed(2);c.post(r.Money.groupredpack.url,{TotalFee:t,TotalNum:l.subData.TotalNum,Type:l.subData.Type,Password:a}).then(function(a){var t={type:101,data:{title:"房田红包",text:l.subData.message||"恭喜发财,大吉大利",TotalFee:a.data.TotalFee,TotalNum:a.data.TotalNum,Id:a.data.Id,UserId:a.data.UserId,Type:a.data.Type,bTaken:!1}};nim.sendCustomMsg({scene:"team",to:l.targetId,content:JSON.stringify(t),done:function(a,t){}}),e.customload("操作成功"),u(function(){l.back()},1500)}).catch(function(a){e.customload(a.data.Message)})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("groupRedPacket",{url:"/chatlist/groupredpacket/params/:id",cache:!1,templateUrl:"views/tabs/chatList/groupRedPacket/groupRedPacket.html",controller:"groupRedPacketCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("locationToSendCtl",["enterViewLoad","appUtils","$ionicScrollDelegate","$timeout","$scope","$state","$stateParams",function(e,n,a,d,s,o,t){s.back=function(){n.back()},n.bMapLocation(function(n){s.lng=n.longitude,s.lat=n.latitude,s.loadMap()},function(n){e.customload("获取位置失败")}),s.loadMap=function(){var n=new BMap.Map("location_to_send_bcontent");n.centerAndZoom(new BMap.Point(s.lng,s.lat),16);var o,e,t=new BMap.Icon("imgs/定位.png",new BMap.Size(32,32));function i(n,o){(new BMap.Geocoder).getLocation(n.point,function(n){n.surroundingPois.unshift({title:n.address+n.business,point:n.point}),d(function(){s.addressList=n.surroundingPois,a.$getByHandle("location-adrlist-scroll").scrollTop(),s.indexChoosed=0})})}o=new BMap.Point(s.lng,s.lat),(e=new BMap.Marker(o,{icon:t})).addEventListener("dragend",i),e.enableDragging(),n.addOverlay(e),i({point:new BMap.Point(s.lng,s.lat)})},s.indexChoosed=0,s.chooseAddress=function(n){s.indexChoosed=n},s.send=function(){nim.sendGeo({scene:t.toscene,to:t.toid,geo:{lng:s.addressList[s.indexChoosed].point.lng,lat:s.addressList[s.indexChoosed].point.lat,title:s.addressList[s.indexChoosed].title},done:function(n,o){n?e.customload("发送失败"):(e.customload("发送成功"),d(function(){s.back()},1500))}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("locationToSend",{url:"/chatlist/locationtosend/params/:toscene/:toid",cache:!1,templateUrl:"views/tabs/chatList/locationToSend/locationToSend.html",controller:"locationToSendCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("makeCollectionsCtl",["enterViewLoad","appUtils","$localStorage","$ionicModal","$rootScope","$timeout","$scope","$state","$stateParams","$http","$Factory","$ionicLoading",function(n,t,o,e,a,c,i,r,d,s,u,p){i.back=function(){t.back()},i.pageType=d.type,103==d.type?i.headTitle="接收转账":i.headTitle="接收红包",i.targetId=d.fromid,i.type=d.type,i.fee=(d.fee/100).toFixed(2),i.tradeno=d.tradeno,i.otradno=d.otradno,nim.getUser({account:i.targetId,done:function(t,o){t||c(function(){i.targetInfo=o})},sync:!0}),i.inCome=function(){s.post(u.Money.income.url+"?TradeNo="+d.tradeno+"&OTradNo="+d.otradno).then(function(t){if(200==t.status){var o={type:103==d.type?104:102,data:{text:103==d.type?"接收转账":"领取红包"}};nim.sendCustomMsg({scene:"p2p",to:i.targetId,content:JSON.stringify(o),done:function(t,o){}}),n.customload("操作成功"),c(function(){i.back()},1500)}else if(202==t.status){var e=103==d.type?"已接收过的转账":"已接收过的红包";n.customload(e)}}).catch(function(t){n.customload("操作失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("makeCollections",{url:"/chatlist/makecollections/params/:fromid/:type/:fee/:tradeno/:otradno",cache:!1,templateUrl:"views/tabs/chatList/makeCollections/makeCollections.html",controller:"makeCollectionsCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("redPacketCtl",["enterViewLoad","appUtils","$ionicPopup","$localStorage","$ionicModal","$rootScope","$timeout","$scope","$state","$stateParams","$http","$Factory","$ionicLoading",function(e,t,a,n,o,i,s,d,c,l,u,r,p){var f;d.back=function(){t.back()},d.myselfInfo=n.myselfInfo,d.targetId=l.id,nim.getUser({account:d.targetId,done:function(t,a){t||(d.targetInfo=a)},sync:!0}),d.ftId=null,u.get(r.Neteast.getftid.url+"?accid="+l.id).then(function(t){d.ftId=t.data.UserId}).catch(function(t){}),d.hasPassword=!1,u.post(r.Money.ispassword.url).then(function(t){(t.data||0===t.data)&&(d.hasPassword=!0,d.leftMoney=t.data)}).catch(function(){}),d.subData={money:"",message:""},d.pwdInput={value:null},o.fromTemplateUrl("read_packer_password_modal",{scope:d,animation:"slide-in-up"}).then(function(t){d.modal=t}),d.showModal=function(){d.modal.show(),d.inputPassword()},d.closeModal=function(){d.modal.hide()},d.$on("$ionicView.beforeLeave",function(){d.modal.remove()}),d.inputPassword=function(){$(".read-packer-password-modalview .password").on("input",function(){var a=$(this).val().length;$(".read-packer-password-modalview .showView").find("li").each(function(t){t<a?$(this).find(".circle").css({display:"inline-block"}):$(this).find(".circle").hide()})})},d.clearPoint=function(){$(".read-packer-password-modalview .showView").find("li").each(function(t){$(this).find(".circle").hide()})},d.inputPwd=function(){this.pwdInput.value=this.pwdInput.value.replace(/\D/g,""),d.pwdInput.value=this.pwdInput.value},d.$watch("pwdInput.value",function(t){t&&6==t.length&&(f&&s.cancel(f),f=s(function(){d.passwordDone(t)},500))}),d.nextStep=function(){if(!d.hasPassword)return a.confirm({title:"未设置密码,前往设置？",cancelText:"取消",okText:"确定"}).then(function(t){t&&c.go("setPayPassword")}),!1;d.leftMoney<100*d.subData.money.toFixed(2)?e.customload("余额不足"):d.showModal()},d.passwordDone=function(t){d.pwdInput.value=null,d.clearPoint(),d.closeModal();var n=100*d.subData.money.toFixed(2);u.post(r.Money.transfer.url+"?toUserId="+d.ftId+"&fee="+n+"&pwd="+t).then(function(t){var a={type:101,data:{title:"房田红包",text:d.subData.message||"恭喜发财,大吉大利",moneyNum:n,TradeNo:t.data.TradeNo,OTradNo:t.data.OTradNo,bTaken:!1}};nim.sendCustomMsg({scene:"p2p",to:d.targetId,content:JSON.stringify(a),done:function(t,a){}}),e.customload("操作成功"),s(function(){d.back()},1500)}).catch(function(t){e.customload(t.data.Message)})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("redPacket",{url:"/chatlist/redpacket/params/:id",cache:!1,templateUrl:"views/tabs/chatList/redPacket/redPacket.html",controller:"redPacketCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("transferAccountsCtl",["enterViewLoad","appUtils","$ionicPopup","$localStorage","$ionicModal","$rootScope","$timeout","$scope","$state","$stateParams","$http","$Factory","$ionicLoading",function(a,t,n,o,e,s,i,c,d,u,r,l,f){var p;c.back=function(){t.back()},c.myselfInfo=o.myselfInfo,c.targetId=u.id,nim.getUser({account:c.targetId,done:function(t,n){t||(c.targetInfo=n)},sync:!0}),c.ftId=null,r.get(l.Neteast.getftid.url+"?accid="+u.id).then(function(t){c.ftId=t.data.UserId}).catch(function(t){}),c.hasPassword=!1,r.post(l.Money.ispassword.url).then(function(t){(t.data||0===t.data)&&(c.hasPassword=!0,c.leftMoney=t.data)}).catch(function(){}),c.subData={money:""},c.pwdInput={value:null},e.fromTemplateUrl("transfer_accounts_password_modal",{scope:c,animation:"slide-in-up"}).then(function(t){c.modal=t}),c.showModal=function(){c.modal.show(),c.inputPassword()},c.closeModal=function(){c.modal.hide()},c.$on("$ionicView.beforeLeave",function(){c.modal.remove()}),c.inputPassword=function(){$(".transfer-accounts-password-modalview .password").on("input",function(){var n=$(this).val().length;$(".transfer-accounts-password-modalview .showView").find("li").each(function(t){t<n?$(this).find(".circle").css({display:"inline-block"}):$(this).find(".circle").hide()})})},c.clearPoint=function(){$(".transfer-accounts-password-modalview .showView").find("li").each(function(t){$(this).find(".circle").hide()})},c.inputPwd=function(){this.pwdInput.value=this.pwdInput.value.replace(/\D/g,""),c.pwdInput.value=this.pwdInput.value},c.$watch("pwdInput.value",function(t){t&&6==t.length&&(p&&i.cancel(p),p=i(function(){c.passwordDone(t)},500))}),c.nextStep=function(){c.hasPassword?c.leftMoney<100*c.subData.money.toFixed(2)?a.customload("余额不足"):c.showModal():n.confirm({title:"未设置密码,前往设置？",cancelText:"取消",okText:"确定"}).then(function(t){return t?void d.go("setPayPassword"):void 0})},c.passwordDone=function(t){c.pwdInput.value=null,c.clearPoint(),c.closeModal();var o=100*c.subData.money.toFixed(2);r.post(l.Money.transfer.url+"?toUserId="+c.ftId+"&fee="+o+"&pwd="+t).then(function(t){var n={type:103,data:{redPacketId:c.targetId,title:"房田红包",text:"转账",moneyNum:o,TradeNo:t.data.TradeNo,OTradNo:t.data.OTradNo,bTaken:!1}};nim.sendCustomMsg({scene:"p2p",to:c.targetId,content:JSON.stringify(n),done:function(t,n){}}),a.customload("操作成功"),i(function(){c.back()},1500)}).catch(function(t){t.data.Message&&"原密码错误"==t.data.Message?a.customload("密码错误"):a.customload("操作失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("transferAccounts",{url:"/chatlist/transferaccounts/params/:id",cache:!1,templateUrl:"views/tabs/chatList/transferAccounts/transferAccounts.html",controller:"transferAccountsCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("transferTeamCtr",["NimUtils","enterViewLoad","appUtils","$timeout","$stateParams","$rootScope","$scope",function(a,r,e,n,t,u,y){y.back=function(){e.back()},y.targetId=t.id,y.myselfInfo=a.myselfInfo,y.subData={account:""},y.transferDone=function(){y.subData.account?nim.transferTeam({teamId:y.targetId,account:y.subData.account,leave:!1,done:function(e,a){e?r.customload(e.message):(r.customload("操作成功"),n(function(){y.back()},1500))}}):r.customload("请选择新群主")},y.friendArr=[],y.$on("$ionicView.enter",function(){y.friendArr=[],nim.getTeamMembers({teamId:y.targetId,done:function(e,a){if(!e){for(var t=[],n=0;n<a.members.length;n++)t.push(a.members[n].account);u(t)}}});var u=function(e){e.length<=0||a.getUsers({accounts:e,done:function(e,a){n(function(){y.friendArr=a,y.formatContacts=[{key:"A",value:[]},{key:"B",value:[]},{key:"C",value:[]},{key:"D",value:[]},{key:"E",value:[]},{key:"F",value:[]},{key:"G",value:[]},{key:"H",value:[]},{key:"I",value:[]},{key:"J",value:[]},{key:"K",value:[]},{key:"L",value:[]},{key:"M",value:[]},{key:"N",value:[]},{key:"O",value:[]},{key:"P",value:[]},{key:"Q",value:[]},{key:"R",value:[]},{key:"S",value:[]},{key:"T",value:[]},{key:"U",value:[]},{key:"V",value:[]},{key:"W",value:[]},{key:"X",value:[]},{key:"Y",value:[]},{key:"Z",value:[]},{key:"#",value:[]}],y.changeToPinyinArr()})}})}}),y.formatContacts=[{key:"A",value:[]},{key:"B",value:[]},{key:"C",value:[]},{key:"D",value:[]},{key:"E",value:[]},{key:"F",value:[]},{key:"G",value:[]},{key:"H",value:[]},{key:"I",value:[]},{key:"J",value:[]},{key:"K",value:[]},{key:"L",value:[]},{key:"M",value:[]},{key:"N",value:[]},{key:"O",value:[]},{key:"P",value:[]},{key:"Q",value:[]},{key:"R",value:[]},{key:"S",value:[]},{key:"T",value:[]},{key:"U",value:[]},{key:"V",value:[]},{key:"W",value:[]},{key:"X",value:[]},{key:"Y",value:[]},{key:"Z",value:[]},{key:"#",value:[]}],y.changeToPinyinArr=function(){for(var e=0;e<y.friendArr.length;e++)for(var a=pinyinUtil.getFirstLetter(y.friendArr[e].nick).substr(0,1).toUpperCase(),t=0;t<y.formatContacts.length;t++){if(a==y.formatContacts[t].key){y.formatContacts[t].value.push(y.friendArr[e]);break}t==y.formatContacts.length-1&&y.formatContacts[26].value.push(y.friendArr[e])}n(function(){y.formatContacts=y.formatContacts})},y.changeToPinyinArr(),y.letterarr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","#"],y.mTouch=function(e,a){r.customload(a,500);var t=e.pageX||e.touches[0].pageX,n=e.pageY||e.touches[0].pageY;if(l=document.elementFromPoint(t,n)){var u=l.innerText;if(u&&" "!=u&&1==u.length&&(y.hint=u,document.getElementById("transfer_team_index-"+y.hint))){var l,o=document.getElementById("transfer_team_index-"+y.hint).offsetTop-$ionicScrollDelegate.$getByHandle("transferTeamScroll").getScrollPosition().top;$ionicScrollDelegate.scrollBy(0,o,!0),(l=document.getElementsByTagName("ion-content"))[0].style.overflow="auto"}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("transferTeam",{url:"/chatlist/transferteam/params/:id",cache:!1,templateUrl:"views/tabs/chatList/transferTeam/transferTeam.html",controller:"transferTeamCtr",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("agentEntranceCtl",["appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(t,e,a,o,r,i,n,c,l,u,s,p,$){l.back=function(){t.back()},l.$on("$ionicView.enter",function(){l.initData()}),l.initData=function(){l.oldQueryData={cityId:1,pagesize:5,pagenum:0,type:1,query:"",district:"",street:"",minprize:"",maxprize:"",roomType:"",sort:""},i.get(n.NewHouseSource.publicquery.url,{params:l.oldQueryData}).then(function(t){l.$broadcast("scroll.refreshComplete");for(var e=0;e<t.data.length;e++){var a=t.data[e].Thumb;t.data[e].Thumb=a.replace(/230x150/,"90x90")}l.oldhousearr=t.data}).catch(function(){l.$broadcast("scroll.refreshComplete")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("agentEntrance",{url:"/agententrance",templateUrl:"views/tabs/home/agentEntrance/agentEntrance.html",controller:"agentEntranceCtl",resolve:{load:["$ocLazyLoad",function(t){return t.load(["views/tabs/home/agentEntrance/agentEntrance.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("aislePageCtl",["appUtils","enterViewLoad","wechatLinkBase","WechatService","$localStorage","$ionicModal","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$rootScope","$stateParams","$ionicPopover","$ionicPopup","$timeout","$ionicActionSheet",function(t,e,i,a,o,c,n,p,r,$,s,l,d,u,h,m,v,x){l.back=function(){t.back()},l.paramsData={type:u.type,index:u.index},l.activeIndex=l.paramsData.index||1,l.switchActive=function(t){l.activeIndex=t}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("aislePage",{url:"/aislePage/:type/:index",templateUrl:"views/tabs/home/aislePage/aislePage.html",controller:"aislePageCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/aislePage/aislePage.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("bannerDetailPageCtl",["appUtils","enterViewLoad","wechatLinkBase","WechatService","$localStorage","$ionicModal","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$rootScope","$stateParams","$ionicPopover","$ionicPopup","$timeout","$ionicActionSheet",function(o,t,i,e,a,c,n,$,r,l,p,s,u,d,g,h,P,S){s.back=function(){o.back()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("bannerDetailPage",{url:"/home/bannerdetailpage",templateUrl:"views/tabs/home/bannerDetailPage/bannerDetailPage.html",controller:"bannerDetailPageCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/bannerDetailPage/bannerDetailPage.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("buyrentChannelCtl",["enterViewLoad","appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,t,o,n,i,s,r,c,a,u,l,p,$,h){u.back=function(){t.back()},u.showOwner=!0,u.usertypeTetx="房东房源",u.toggleUserType=function(){s(function(){u.showOwner?(u.showOwner=!1,u.usertypeTetx="中介房源"):(u.showOwner=!0,u.usertypeTetx="房东房源")})},u.$on("$ionicView.enter",function(){u.loadhousetimes()}),u.loadhousetimes=function(){r.post(c.News.query.url,{type:3,pagenum:0,pagesize:3}).then(function(e){u.housetimesList=e.data,u.$broadcast("scroll.refreshComplete")}).catch(function(){u.$broadcast("scroll.refreshComplete"),e.customload("获取房产行情失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("buyrentChannel",{url:"/buyrentchannel",templateUrl:"views/tabs/home/buyrentChannel/buyrentChannel.html",controller:"buyrentChannelCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/buyrentChannel/buyrentChannel.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("cityChooseCtl",["appUtils","enterViewLoad","$rootScope","$ionicScrollDelegate","$timeout","$http","$Factory","$scope",function(i,c,a,s,t,n,o,u){u.back=function(){i.back()},u.hotCitys=[{name:"厦门",id:1},{name:"漳州",id:2},{name:"泉州",id:3},{name:"福州",id:4},{name:"宁德",id:5},{name:"莆田",id:6},{name:"龙岩",id:7},{name:"三明",id:8},{name:"南平",id:9},{name:"中山",id:200}],u.currentCity=i.city.name,u.getLocation=function(){i.bMapLocation(function(t){u.currentCity=t.city},function(t){c.customload("获取定位失败")})},u.chooseCity=function(t){for(var e=0;e<u.hotCitys.length;e++)if(t==u.hotCitys[e].name)return i.city.name=u.hotCitys[e].name,i.city.id=u.hotCitys[e].id,n.post(o.Community.cities.url+"?city="+u.hotCitys[e].id).then(function(t){i.currentDistricts=t.data[u.hotCitys[e].name]}),a.$emit("appUtilsCityChange",i.city),void u.back();c.customload("当前城市暂未开放服务")},u.$on("$ionicView.enter",function(){u.initStatus||u.initData()}),u.initStatus=!1,u.initData=function(){u.formatCitys=[{key:"A",value:[]},{key:"B",value:[]},{key:"C",value:[]},{key:"D",value:[]},{key:"E",value:[]},{key:"F",value:[]},{key:"G",value:[]},{key:"H",value:[]},{key:"I",value:[]},{key:"J",value:[]},{key:"K",value:[]},{key:"L",value:[]},{key:"M",value:[]},{key:"N",value:[]},{key:"O",value:[]},{key:"P",value:[]},{key:"Q",value:[]},{key:"R",value:[]},{key:"S",value:[]},{key:"T",value:[]},{key:"U",value:[]},{key:"V",value:[]},{key:"W",value:[]},{key:"X",value:[]},{key:"Y",value:[]},{key:"Z",value:[]},{key:"#",value:[]}],u.changeToPinyinArr=function(){for(var t=0;t<u.resCityList.length;t++)for(var e=pinyinUtil.getFirstLetter(u.resCityList[t]).substr(0,1).toUpperCase(),i=0;i<u.formatCitys.length;i++){if(e==u.formatCitys[i].key){u.formatCitys[i].value.push(u.resCityList[t]);break}i==u.formatCitys.length-1&&u.formatCitys[26].value.push(u.resCityList[t])}},u.resCityList=[],n.get("jsonData/cityChoose/cities.json").then(function(t){u.initStatus=!0;for(var e=0;e<t.data.length;e++)for(var i=0;i<t.data[e].citys.length;i++){var a=t.data[e].citys[i].citysName.substr(0,t.data[e].citys[i].citysName.length-1);u.resCityList.push(a)}u.changeToPinyinArr()}).catch(function(){u.initStatus=!1})},u.backTop=function(){s.$getByHandle("citychoose-Scroll").scrollTop(!0)},u.letterarr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","#"],u.mTouch=function(t,e){c.customload(e,500);var i=t.pageX||t.touches[0].pageX,a=t.pageY||t.touches[0].pageY;if(o=document.elementFromPoint(i,a)){var n=o.innerText;if(n&&" "!=n&&1==n.length&&(u.hint=n,document.getElementById("city_choose_index-"+u.hint))){var o,y=document.getElementById("city_choose_index-"+u.hint).offsetTop-s.$getByHandle("citychoose-Scroll").getScrollPosition().top;s.scrollBy(0,y,!0),(o=document.getElementsByTagName("ion-content"))[0].style.overflow="auto"}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(o){o.state("cityChoose",{url:"/citychoose",cache:!1,templateUrl:"views/tabs/home/cityChoose/cityChoose.html",controller:"cityChooseCtl",resolve:{load:["$ocLazyLoad",function(o){return o.load(["views/tabs/home/cityChoose/cityChoose.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("clientDetailCtl",["appUtils","$timeout","$ionicPopup","$state","$stateParams","$ionicActionSheet","$ionicScrollDelegate","$rootScope","$ionicHistory","$Factory","$scope","$http","$ionicLoading","$ionicSlideBoxDelegate",function(t,i,o,n,e,c,r,a,l,u,s,$,f,g){s.back=function(){t.back()},s.gochat=function(){n.go("dialogBox",{id:"上帝"})}}]).filter("customFilter",function(){return function(t,i,o){if(o=o||2,t){for(var n=(t=t.toFixed(o)).indexOf(".");3<n;)n-=3,t=t.substring(0,n)+","+t.substring(n);return(i=i||"")+t}}});
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("clientDetail",{url:"/ifhavehouse/next/clientdetail",templateUrl:"views/tabs/home/clientDetail/clientDetail.html",controller:"clientDetailCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/clientDetail/clientDetail.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("daibanListCtl",["appUtils","$timeout","$ionicScrollDelegate","$rootScope","$ionicHistory","$Factory","$scope","$http","$ionicLoading","$ionicSlideBoxDelegate",function(a,i,n,o,t,c,e,r,d,u){e.back=function(){a.back()},e.headTitle="贷款",e.changeindex=function(){e.currentindex=u.$getByHandle("daibanList-handle").currentIndex(),0==e.currentindex?e.headTitle="贷款":1==e.currentindex?e.headTitle="过户":2==e.currentindex&&(e.headTitle="保险")},e.showBackTopBtn=function(a){25<a?$("#be_agent .backtop").css("display","block"):$("#be_agent .backtop").css("display","none")},e.videoScrollListen=function(){var a=n.$getByHandle("videoScroll").getScrollPosition().top;e.showBackTopBtn(a)},e.videoScrollTop=function(){n.scrollTop(!0)},e.liveScrollListen=function(){var a=n.$getByHandle("liveScroll").getScrollPosition().top;e.showBackTopBtn(a)},e.liveScrollTop=function(){n.scrollTop(!0)},e.$on("$ionicView.beforeEnter",function(){window.StatusBar&&(StatusBar.show(),StatusBar.backgroundColorByName("gray"))}),e.headChoose=0,e.move=function(a,i){if(2==a){var n=25*a+4+"%";$(".underline").css("width","16vw")}else{$(".underline").css("width","11vw");n=25*a+7+"%"}$(".underline").animate({left:n},500),e.headChoose=a,e.pagenum=1},e.testData={room:[{roomid:"744244",cateid:181,pic:"https://rpic.douyucdn.cn/amrpic-180208/744244_1642.jpg",roomname:"只有把自己变得更好才不会被抛弃。",gamename:"王者荣耀",nickname:"谢小R",icon_data:-{status:5,icon_url:"",icon_width:0,icon_height:0}},{roomid:"446321",cateid:124,pic:"https://rpic.douyucdn.cn/amrpic-180208/446321_1641.jpg",roomname:"小年夜~弹幕免费抽奖",gamename:"户外",nickname:"主播海涛",icon_data:-{status:5,icon_url:"https://staticlive.douyucdn.cn/upload/icon/e8da504ced5717125d31f712a2e68d4d.png",icon_width:"126",icon_height:"33"}},{roomid:"3219235",cateid:331,pic:"https://rpic.douyucdn.cn/amrpic-180208/3219235_1639.jpg",roomname:"新赛季排位极速上分",gamename:"QQ飞车",nickname:"青青青青青青山",icon_data:-{status:5,icon_url:"https://club-img.douyucdn.cn/dylamr/2018/01/10/a99a04a2dc9bb3d3afef6d1a0f32e43a.png",icon_width:"126",icon_height:"33"}},{roomid:"4055898",cateid:270,pic:"https://rpic.douyucdn.cn/amrpic-180208/4055898_1639.jpg",roomname:"小哥哥 敢上我的车吗",gamename:"绝地求生",nickname:"桃子乄小萌妹",icon_data:-{status:5,icon_url:"",icon_width:0,icon_height:0}},{roomid:"2634712",cateid:270,pic:"https://rpic.douyucdn.cn/amrpic-180208/2634712_1638.jpg",roomname:"三思:看直播还有钱拿, 来啊!",gamename:"绝地求生",nickname:"SanSi2tap",icon_data:-{status:5,icon_url:"",icon_width:0,icon_height:0}},{roomid:"618839",cateid:270,pic:"https://rpic.douyucdn.cn/amrpic-180208/618839_1638.jpg",roomname:"报告今天可能不杀生",gamename:"绝地求生",nickname:"迷人蜜",icon_data:-{status:5,icon_url:"",icon_width:0,icon_height:0}},{roomid:"2458360",cateid:331,pic:"https://rpic.douyucdn.cn/amrpic-180208/2458360_1639.jpg",roomname:"免费帮上分！关注游城十代！",gamename:"QQ飞车",nickname:"游城十代2017",icon_data:-{status:5,icon_url:"",icon_width:0,icon_height:0}},{roomid:"3572355",cateid:331,pic:"https://rpic.douyucdn.cn/amrpic-180208/3572355_1639.jpg",roomname:"骑马骚是个贴墙怪：睡过头了继续冲击星耀",gamename:"QQ飞车",nickname:"金秀杀骑马",icon_data:-{status:5,icon_url:"",icon_width:0,icon_height:0}},{roomid:"3398036",cateid:270,pic:"https://rpic.douyucdn.cn/amrpic-180208/3398036_1638.jpg",roomname:"1万关注开启1000现金红包抽，点关注哦",gamename:"绝地求生",nickname:"李豌豆吖",icon_data:-{status:5,icon_url:"",icon_width:0,icon_height:0}},{roomid:"1343255",cateid:195,pic:"https://rpic.douyucdn.cn/amrpic-180208/1343255_1642.jpg",roomname:"千万豪宅搞直播练肩点关注送计划",gamename:"鱼教",nickname:"好教练文哥珠宝",icon_data:-{status:5,icon_url:"",icon_width:0,icon_height:0}}],bzdata:0,title:"互动抽奖",type:3},e.pagenum=1;function m(i,n){r.get(c.News.query.url,{params:{pagenum:e.pagenum,size:10,query:"",newsType:n}}).then(function(a){if(a.data.length<=0)return d.show({template:"加载到底了",duration:1e3}),void(e.noMore=!1);i?(e.pagenum+=1,1==n?e.loushiarr=e.loushiarr.concat(a.data):2==n?e.xiamenarr=e.xiamenarr.concat(a.data):3==n?e.yulearr=e.yulearr.concat(a.data):e.xiaoshouarr=e.xiaoshouarr.concat(a.data),e.$broadcast("scroll.infiniteScrollComplete")):(1==n?e.loushiarr=a.data:2==n?e.xiamenarr=a.data:3==n?e.yulearr=a.data:e.xiaoshouarr=a.data,e.$broadcast("scroll.refreshComplete"),9<a.data.length?e.noMore=!0:e.noMore=!1)}).catch(function(a){d.show({template:"请求新闻数据失败",duration:1500})})}e.noMore=!0,e.loushiarr=[],e.xiamenarr=[],e.yulearr=[],e.xiaoshouarr=[],0==e.head&&(e.lsloadMore=function(a){m(a,1)},e.lsdoRefresh=function(a){e.pagenum=1;m(a,1)})}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("daibanList",{url:"/ifhavehouse/daibanlist",templateUrl:"views/tabs/home/daibanList/daibanList.html",controller:"daibanListCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/daibanList/daibanList.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("evaluationListCtl",["enterViewLoad","appUtils","$ionicPopup","$localStorage","$http","$Factory","$state","$stateParams","$scope","$rootScope","$timeout",function(e,t,a,o,n,l,i,r,u,c,s){u.back=function(){t.back()},u.houseId=r.houseid,u.loadEchart=function(){echarts.init(document.getElementById("evaluation_list_echarts"),"light").setOption({title:{text:""},tooltip:{},legend:{data:["特点"]},radar:{center:["50%","50%"],name:{textStyle:{color:"#000",backgroundColor:"rgba(0,0,0,0)",borderRadius:3,fontSize:12,padding:[3,5]}},indicator:[{name:"",max:400},{name:"",max:400},{name:"",max:400},{name:"",max:400},{name:"",max:400},{name:"",max:400}],splitArea:{areaStyle:{color:["rgb(102,152,255)","rgb(148,183,255)","rgb(178,203,255)"]}},splitLine:{lineStyle:{color:"rgba(255, 255, 255, 0.9)"}},axisLine:{lineStyle:{color:"rgba(255, 255, 255, 0.9)"}},lineStyle:{shadowColor:"rgb(255, 0, 0)",shadowBlur:10}},series:[{name:"预算 vs 开销",type:"radar",data:[{value:[300,100,280,350,200,190],name:""}]}],color:["rgb(255,255,255)"]})},u.$on("$ionicView.enter",function(){u.loadEvaluationList(),u.loadHouseInfo(),s(function(){u.loadEchart()})}),u.myselfInfo=o.myselfInfo,u.loadEvaluationList=function(){var t={method:"POST",url:l.Evalu.list.url+"?houseId="+u.houseId+"&type=2",headers:{"Content-Type":"application/json"}};n(t).then(function(t){u.evaluationList=t.data}).catch(function(){e.customload("获取评测列表失败")})},u.loadHouseInfo=function(){var t={method:"POST",url:l.NewHouseSource.postdetail.url+"/"+u.houseId,headers:{"Content-Type":"application/json"}};n(t).then(function(t){u.houseInfo=t.data})},u.deleteEvaluation=function(o){a.confirm({title:"确定删除？",cancelText:"取消",okText:"删除"}).then(function(t){t&&n.post(l.Evalu.delete.url,o).then(function(t){u.loadEvaluationList()}).catch(function(){e.customload("删除失败")})})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("tabs.evaluationList",{url:"/ifhavehouse/evaluationlist/:houseid/:evaltype",cache:!1,views:{home:{templateUrl:"views/tabs/home/evaluationList/evaluationList.html",controller:"evaluationListCtl"}},resolve:{load:["$ocLazyLoad",function(t){return t.load(["views/tabs/home/evaluationList/evaluationList.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("evaluationValuationCtl",["appUtils","$location","enterViewLoad","$localStorage","$rootScope","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$stateParams","$ionicPopup","$timeout","$ionicActionSheet",function(t,e,n,o,i,a,c,u,s,l,p,d,r,m,y){p.back=function(){u.go("tabs.perCenter")},p.$on("$ionicView.enter",function(){p.loadData()}),p.activeIndex=d.type?d.type-1:0,p.switchSlide=function(t){p.activeIndex=t},p.loadData=function(){s.post(l.NewHouseSource.query.url+"?housetype=1",{pagesize:100,pagenum:0,cityId:1}).then(function(t){p.myOldList=t.data}).catch(function(){n.customload("获取失败")}),s.post(l.NewHouseSource.query.url+"?housetype=2",{pagesize:100,pagenum:0,cityId:1}).then(function(t){p.myRentList=t.data}).catch(function(){n.customload("获取失败")}),s.post(l.SimpleHouse.selfquery.url,{pagesize:100,pagenum:0,type:1}).then(function(t){p.myShopList=t.data}).catch(function(){n.customload("获取失败")}),s.post(l.SimpleHouse.selfquery.url,{pagesize:100,pagenum:0,type:2}).then(function(t){p.myOfficList=t.data}).catch(function(){n.customload("获取失败")})},p.showAction=function(e,o,t){y.show({buttons:[{text:"查看估价"},{text:"房源评测"}],cancelText:"取消",cancel:function(){},buttonClicked:function(t){return 0==t?"sell"==o?void u.go("tabs.systemPrice",{query:e.CommunityName,space:e.Space,houseid:e.Id}):(n.customload("暂时对二手房开发"),!0):1!=t||("sell"==o||"rent"==o?void u.go("tabs.evaluationList",{houseid:e.Id}):(n.customload("暂时对二手房和租房开发"),!0))}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("evaluationValuation",{url:"/home/evaluationvaluation/:type",templateUrl:"views/tabs/home/evaluationValuation/evaluationValuation.html",controller:"evaluationValuationCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("fbTypeChooseCtl",["appUtils","$scope","$stateParams",function(e,t,a){t.back=function(){e.back()},t.pageType=a.type}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("fbTypeChoose",{url:"/home/fbtypechoose/params/:type",templateUrl:"views/tabs/home/fbTypeChoose/fbTypeChoose.html",controller:"fbTypeChooseCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/fbTypeChoose/fbTypeChoose.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("goldBrokerCtl",["enterViewLoad","appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(o,t,i,e,c,n,a,l,r,$,p,u,d,s){$.back=function(){t.back()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(o){o.state("goldBroker",{url:"/home/goldbroker",templateUrl:"views/tabs/home/goldBroker/goldBroker.html",controller:"goldBrokerCtl",resolve:{load:["$ocLazyLoad",function(o){return o.load(["views/tabs/home/goldBroker/goldBroker.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("guessPriceCtl",["upImgBase","enterViewLoad","appUtils","$http","$Factory","$state","$stateParams","$scope","$rootScope","$timeout",function(a,e,t,s,u,o,n,i,c,r){i.back=function(){t.back()},c.$on("guesspriceCommunityChange",function(a,e){i.subData.query=e}),i.subData={query:"",type:1,level:4,orientation:"",houseType:"",space:""},s.get("sellHouseData.json").then(function(a){$.scrEvent3({data:[0,1,2,3,4,5,6,7,8,9],data2:[0,1,2,3,4,5,6,7,8,9],data3:[0,1,2,3,4,5,6,7,8,9],evEle:".guess-huxing",title:"选择户型",defValue:1,defValue2:1,defValue3:1,eleName:"室",eleName2:"厅",eleName3:"卫",afterAction:function(a,e,t){$(".guess-huxing").val(a+"室"+e+"厅"+t+"卫"),i.subData.houseType=a+"室"+e+"厅"+t+"卫"}}),i.chaoxiang=a.data.HouseStatus.Orientation,i.chaoxiangarr=[];for(var e=0;e<i.chaoxiang.length;e++)i.chaoxiangarr.push(i.chaoxiang[e].text);$.scrEvent({data:i.chaoxiangarr,evEle:".guess-chaoxiang",title:"选择朝向",defValue:"东",afterAction:function(a){$(".guess-chaoxiang").val(a),i.subData.orientation=a}})}),i.submitData=function(){i.subData.query?i.subData.space?o.go("tabs.systemPrice",{query:i.subData.query,space:i.subData.space}):e.customload("请输入面积"):e.customload("请选择小区")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("guessPrice",{url:"/home/guessprice",templateUrl:"views/tabs/home/guessPrice/guessPrice.html",controller:"guessPriceCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/guessPrice/guessPrice.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("homeClassifyCtl",["enterViewLoad","appUtils","NimUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(o,t,n,e,a,i,l,s,c,d,r,u,m,f,$){r.tabActiveName="secondTab",r.$on("$ionicView.enter",function(){r.loadhousetimes(),$.clearHistory();var e=function(o){for(var t=0;t<o.length;t++)r.totalUnread=r.totalUnread+o[t].unread};r.totalUnread=0,e(n.sessionList),u.$on("updateSessions",function(o,t){l(function(){r.totalUnread=0,e(t)})})}),a.fromTemplateUrl("home_classify_nav_modal",{scope:r,animation:"slide-in-up"}).then(function(o){r.modal=o}),r.showModal=function(){r.modal.show()},r.closeModal=function(){r.modal.hide()},r.$on("modal.shown",function(){t.fbModalShow()}),r.$on("modal.hidden",function(){t.fbModalHidden()}),r.loadhousetimes=function(){s.post(c.News.query.url,{type:3,pagenum:0,pagesize:3}).then(function(o){r.housetimesList=o.data,r.$broadcast("scroll.refreshComplete")}).catch(function(){r.$broadcast("scroll.refreshComplete"),o.customload("获取房产行情失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(s){s.state("homeClassify",{url:"/home/homeclassify",nativeTransitions:null,templateUrl:"views/tabs/home/homeClassify/homeClassify.html",controller:"homeClassifyCtl",resolve:{load:["$ocLazyLoad",function(s){return s.load(["views/tabs/home/homeClassify/homeClassify.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("houseOnMapCtl",["appUtils","$ionicModal","$interval","$timeout","$state","$Factory","$scope","$rootScope","$http",function(e,a,t,o,n,r,i,u,c){i.back=function(){e.back()},i.switchIndex=1,i.typeSwitch=function(e){var a=50*((i.switchIndex=e)-1)+18+"%";$("#house_on_map .mid-switch").find(".under-line").animate({left:a},100),i.reloadMap(e)},i.$on("$ionicView.enter",function(){a.fromTemplateUrl("house_on_map_modal",{scope:i,animation:"slide-in-up"}).then(function(e){i.modal=e}),i.showModal=function(){i.modal.show()},i.closeModal=function(){i.modal.hide()}}),i.$on("$ionicView.leave",function(){i.modal.remove()}),document.getElementById("house_on_map_baidumap").onclick=function(e){if("label"==((e=e||window.event).target||e.srcElement).nodeName.toLowerCase()){i.showModal();var a=e.target.lastElementChild.getAttribute("data-text"),t=e.target.lastElementChild.getAttribute("data-city");i.loadHouse(a,t)}},i.loadHouse=function(e,a){var t=1;switch(a){case"厦门":t=1;break;case"漳州":t=2;break;case"泉州":t=3;break;case"福州":t=4;break;case"宁德":t=5;break;case"莆田":t=6;break;case"龙岩":t=7;break;case"三明":t=8;break;case"南平":t=9;break;case"中山":t=200;break;default:t=1}i.QueryData={cityId:t,pagesize:100,pagenum:0,type:i.switchIndex,query:e,district:"",street:"",minprize:"",maxprize:"",roomType:"",sort:""},c.get(r.NewHouseSource.publicquery.url,{params:i.QueryData}).then(function(e){for(var a=0;a<e.data.length;a++){var t=e.data[a].Thumb;e.data[a].Thumb=t.replace(/230x150/,"120x90")}1==i.switchIndex?i.oldhousearr=e.data:i.renthousearr=e.data})},i.reloadMap=function(e){c.post(r.Community.query.url+"?type="+e).then(function(e){i.render(e.data)})},i.reloadMap(1),i.render=function(e){var a=new BMap.Map("house_on_map_baidumap");a.centerAndZoom(new BMap.Point(118.180242,24.488324),11),a.addControl(new BMap.NavigationControl({enableGeolocation:!0})),a.addControl(new BMap.OverviewMapControl),a.setCurrentCity("厦门"),a.enableScrollWheelZoom(!0),a.disableDragging(),$("#house_on_map_baidumap").on("touchstart",function(e){a.disableDragging()}),$("#house_on_map_baidumap").on("touchmove",function(e){a.enableDragging()}),$("#house_on_map_baidumap").on("touchend",function(e){a.disableDragging()});var t=[],o=null;for(var n in e){o=new BMap.Point(e[n].Longitude,e[n].Latitude);var r=new BMap.Marker(o);r.province="福建",r.city=e[n].City,r.district=e[n].District,r.street=e[n].Street,r.id=e[n].Id,r.communityName=e[n].Name||"优质小区",r.housecount=e[n].Count,t.push(r)}var i=new BMapLib.MarkerClusterer(a,{markers:t,girdSize:100,styles:[{size:new BMap.Size(80,80),backgroundColor:"#FFD202",textColor:"#333"}]});i.setMaxZoom(13),i.setGridSize(100)}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("houseOnMap",{url:"/houseonmap",cache:!1,templateUrl:"views/tabs/home/houseOnMap/houseOnMap.html",controller:"houseOnMapCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/houseOnMap/houseOnMap.js"])}]},data:{isPublic:!0}})}]);
"use strict";var BMapLib=window.BMapLib=BMapLib||{};!function(){var o=function(t,e,r){e=a(e);var s=t.pointToPixel(e.getNorthEast()),i=t.pointToPixel(e.getSouthWest());s.x+=r,s.y-=r,i.x-=r,i.y+=r;var o=t.pixelToPoint(s),n=t.pixelToPoint(i);return new BMap.Bounds(n,o)},a=function(t){var e=n(t.getNorthEast().lng,-180,180),r=n(t.getSouthWest().lng,-180,180),s=n(t.getNorthEast().lat,-74,74),i=n(t.getSouthWest().lat,-74,74);return new BMap.Bounds(new BMap.Point(r,i),new BMap.Point(e,s))},n=function(t,e,r){return e&&(t=Math.max(t,e)),r&&(t=Math.min(t,r)),t},h=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=function(t,e){var r=-1;if(h(e))if(e.indexOf)r=e.indexOf(t);else for(var s,i=0;s=e[i];i++)if(s===t){r=i;break}return r},t=BMapLib.MarkerClusterer=function(t,e){if(t){this._map=t,this._markers=[],this._clusters=[];var r=e||{};this._gridSize=r.gridSize||60,this._maxZoom=r.maxZoom||18,this._minClusterSize=r.minClusterSize||1,this._isAverageCenter=!1,null!=r.isAverageCenter&&(this._isAverageCenter=r.isAverageCenter),this._styles=r.styles||[];var s=this;this._map.addEventListener("zoomend",function(){s._redraw()}),this._map.addEventListener("moveend",function(){s._redraw()});var i=r.markers;h(i)&&this.addMarkers(i)}};function u(t){this._markerClusterer=t,this._map=t.getMap(),this._minClusterSize=t.getMinClusterSize(),this._isAverageCenter=t.isAverageCenter(),this._center=null,this._markers=[],this._gridBounds=null,this._isReal=!1,this._styles=t.getStyles(),this._labels=[],this._clusterMarker=new BMapLib.TextIconOverlay(this._center,{name:"共找到",value:this._markers.length+"套房源"},{styles:this._markerClusterer.getStyles()})}t.prototype.addMarkers=function(t){for(var e=0,r=t.length;e<r;e++)this._pushMarkerTo(t[e]);this._createClusters()},t.prototype._pushMarkerTo=function(t){-1===r(t,this._markers)&&(t.isInCluster=!1,this._markers.push(t))},t.prototype.addMarker=function(t){this._pushMarkerTo(t),this._createClusters()},t.prototype._createClusters=function(){for(var t,e=this._map.getBounds(),r=o(this._map,e,this._gridSize),s=0;t=this._markers[s];s++)!t.isInCluster&&r.containsPoint(t.getPosition())&&this._addToClosestCluster(t);var i=this._markers.length;for(s=0;s<i;s++)this._clusters[s]&&this._clusters[s].render()},t.prototype._addToClosestCluster=function(t){for(var e,r=4e6,s=null,i=(t.getPosition(),0);e=this._clusters[i];i++){var o=e.getCenter();if(o){var n=this._map.getDistance(o,t.getPosition());n<r&&(r=n,s=e)}}s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):((e=new u(this)).addMarker(t),this._clusters.push(e))},t.prototype._clearLastClusters=function(){for(var t,e=0;t=this._clusters[e];e++)t.remove();this._clusters=[],this._removeMarkersFromCluster()},t.prototype._removeMarkersFromCluster=function(){for(var t,e=0;t=this._markers[e];e++)t.isInCluster=!1},t.prototype._removeMarkersFromMap=function(){for(var t,e=0;t=this._markers[e];e++)t.isInCluster=!1,this._map.removeOverlay(t)},t.prototype._removeMarker=function(t){var e=r(t,this._markers);return-1!==e&&(this._map.removeOverlay(t),this._markers.splice(e,1),!0)},t.prototype.removeMarker=function(t){var e=this._removeMarker(t);return e&&(this._clearLastClusters(),this._createClusters()),e},t.prototype.removeMarkers=function(t){for(var e=!1,r=0;r<t.length;r++){var s=this._removeMarker(t[r]);e=e||s}return e&&(this._clearLastClusters(),this._createClusters()),e},t.prototype.clearMarkers=function(){this._clearLastClusters(),this._removeMarkersFromMap(),this._markers=[]},t.prototype._redraw=function(){this._clearLastClusters(),this._createClusters()},t.prototype.getGridSize=function(){return this._gridSize},t.prototype.setGridSize=function(t){this._gridSize=t,this._redraw()},t.prototype.getMaxZoom=function(){return this._maxZoom},t.prototype.setMaxZoom=function(t){this._maxZoom=t,this._redraw()},t.prototype.getStyles=function(){return this._styles},t.prototype.setStyles=function(t){this._styles=t,this._redraw()},t.prototype.getMinClusterSize=function(){return this._minClusterSize},t.prototype.setMinClusterSize=function(t){this._minClusterSize=t,this._redraw()},t.prototype.isAverageCenter=function(){return this._isAverageCenter},t.prototype.getMap=function(){return this._map},t.prototype.getMarkers=function(){return this._markers},t.prototype.getClustersCount=function(){for(var t,e=0,r=0;t=this._clusters[r];r++)t.isReal()&&e++;return e},u.prototype.addMarker=function(t){if(this.isMarkerInCluster(t))return!1;if(this._center){if(this._isAverageCenter){var e=this._markers.length+1,r=(this._center.lat*(e-1)+t.getPosition().lat)/e,s=(this._center.lng*(e-1)+t.getPosition().lng)/e;this._center=new BMap.Point(s,r),this.updateGridBounds()}}else this._center=t.getPosition(),this.updateGridBounds();t.isInCluster=!0,this._markers.push(t)},u.prototype.render=function(){var t=this._markers.length;if(t<this._minClusterSize)for(var e=0;e<t;e++)this._map.addOverlay(this._markers[e]);else this._map.addOverlay(this._clusterMarker),this._isReal=!0,this.updateClusterMarker()},u.prototype.isMarkerInCluster=function(t){if(this._markers.indexOf)return-1!=this._markers.indexOf(t);for(var e,r=0;e=this._markers[r];r++)if(e===t)return!0;return!1},u.prototype.isMarkerInClusterBounds=function(t){return this._gridBounds.containsPoint(t.getPosition())},u.prototype.isReal=function(t){return this._isReal},u.prototype.updateGridBounds=function(){var t=new BMap.Bounds(this._center,this._center);this._gridBounds=o(this._map,t,this._markerClusterer.getGridSize())},u.prototype.addLabel=function(t){var e=t.getPosition(),r=new BMap.Label({position:e});r.setStyle({height:"25px",color:"#333",backgroundColor:this._styles[0].backgroundColor,border:"none",borderRadius:"25px",fontWeight:"bold"});var s='<span style="color:#333"><i class="fa fa-map-marker"></i></span><p data-id="'+t.id+'" data-city="'+t.city+'" data-text="'+t.communityName+'" style="padding:0px 13px;text-align:center;line-height:25px;margin:0;">'+t.communityName+"("+t.housecount+"套)</p>";r.setContent(s),r.setPosition(e),this._labels.push(r),this._map.addOverlay(r)},u.prototype.updateClusterMarker=function(){if(this._map.getZoom()>this._markerClusterer.getMaxZoom()){this._clusterMarker&&this._map.removeOverlay(this._clusterMarker);for(var t,e=0;t=this._markers[e];e++)this.addLabel(t)}else if(this._markers.length<this._minClusterSize)this._clusterMarker.hide();else{this._clusterMarker.setPosition(this._center);var r=this._map.getZoom(),s="";if(r<=7)s=this._markers[0].province;else if(7<r&&r<=9)s=this._markers[0].city;else if(9<r&&r<=11)s=this._markers[0].district;else if(11<r){for(e=0;e<this._markers.length;e++)if(this._markers[e].street){s=this._markers[e].street;break}s||(s=this._markers[0].city+"片区")}this._clusterMarker.setText('<div style="width: 80px;height:80px;line-height: 80px;"><span style="display:inline-block;vertical-align:middle;line-height:20px;">'+s+"<br/>"+this._markers.length+"个小区<span></div>");var i=this._map,o=(this.getBounds(),this._center);this._clusterMarker.addEventListener("click",function(t){var e=i.getZoom();i.setCenter(o),i.clearOverlays(),e<9?i.setZoom(9):9<=e&&e<13?i.setZoom(13):i.setZoom(16)})}},u.prototype.remove=function(){for(var t,e=0;t=this._labels[e];e++)this._map.removeOverlay(t);this._map.removeOverlay(this._clusterMarker),this._markers.length=0,delete this._markers},u.prototype.getBounds=function(){for(var t,e=new BMap.Bounds(this._center,this._center),r=0;t=this._markers[r];r++)e.extend(t.getPosition());return e},u.prototype.getCenter=function(){return this._center}}();
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BMapLib=window.BMapLib=BMapLib||{};!function(){var d,t,u=d=u||{version:"1.3.8"};u.guid="$BAIDU$",window[u.guid]=window[u.guid]||{},u.dom=u.dom||{},u.dom.g=function(t){return"string"==typeof t||t instanceof String?document.getElementById(t):t&&t.nodeName&&(1==t.nodeType||9==t.nodeType)?t:null},u.g=u.G=u.dom.g,u.dom.getDocument=function(t){return 9==(t=u.dom.g(t)).nodeType?t:t.ownerDocument||t.document},u.lang=u.lang||{},u.lang.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},u.isString=u.lang.isString,u.dom._g=function(t){return u.lang.isString(t)?document.getElementById(t):t},u._g=u.dom._g,u.browser=u.browser||{},/msie (\d+\.\d)/i.test(navigator.userAgent)&&(u.browser.ie=u.ie=document.documentMode||+RegExp.$1),u.dom.getComputedStyle=function(t,e){t=u.dom._g(t);var i,o=u.dom.getDocument(t);return o.defaultView&&o.defaultView.getComputedStyle&&(i=o.defaultView.getComputedStyle(t,null))?i[e]||i.getPropertyValue(e):""},u.dom._styleFixer=u.dom._styleFixer||{},u.dom._styleFilter=u.dom._styleFilter||[],u.dom._styleFilter.filter=function(t,e,i){for(var o,n=0,s=u.dom._styleFilter;o=s[n];n++)(o=o[i])&&(e=o(t,e));return e},u.string=u.string||{},u.string.toCamelCase=function(t){return t.indexOf("-")<0&&t.indexOf("_")<0?t:t.replace(/[-_][^-_]/g,function(t){return t.charAt(1).toUpperCase()})},u.dom.getStyle=function(t,e){var i=u.dom;t=i.g(t),e=u.string.toCamelCase(e);var o=t.style[e]||(t.currentStyle?t.currentStyle[e]:"")||i.getComputedStyle(t,e);if(!o){var n=i._styleFixer[e];n&&(o=n.get?n.get(t):u.dom.getStyle(t,n))}return(n=i._styleFilter)&&(o=n.filter(e,o,"get")),o},u.getStyle=u.dom.getStyle,/opera\/(\d+\.\d)/i.test(navigator.userAgent)&&(u.browser.opera=+RegExp.$1),u.browser.isWebkit=/webkit/i.test(navigator.userAgent),u.browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent),u.browser.isStrict="CSS1Compat"==document.compatMode,u.dom.getPosition=function(t){t=u.dom.g(t);var e,i,o=u.dom.getDocument(t),n=u.browser,s=u.dom.getStyle,r=(0<n.isGecko&&o.getBoxObjectFor&&"absolute"==s(t,"position")&&(""===t.style.top||t.style.left),{left:0,top:0});if(t==(n.ie&&!n.isStrict?o.body:o.documentElement))return r;if(t.getBoundingClientRect){i=t.getBoundingClientRect(),r.left=Math.floor(i.left)+Math.max(o.documentElement.scrollLeft,o.body.scrollLeft),r.top=Math.floor(i.top)+Math.max(o.documentElement.scrollTop,o.body.scrollTop),r.left-=o.documentElement.clientLeft,r.top-=o.documentElement.clientTop;var l=o.body,a=parseInt(s(l,"borderLeftWidth")),p=parseInt(s(l,"borderTopWidth"));n.ie&&!n.isStrict&&(r.left-=isNaN(a)?2:a,r.top-=isNaN(p)?2:p)}else{e=t;do{if(r.left+=e.offsetLeft,r.top+=e.offsetTop,0<n.isWebkit&&"fixed"==s(e,"position")){r.left+=o.body.scrollLeft,r.top+=o.body.scrollTop;break}e=e.offsetParent}while(e&&e!=t);for((0<n.opera||0<n.isWebkit&&"absolute"==s(t,"position"))&&(r.top-=o.body.offsetTop),e=t.offsetParent;e&&e!=o.body;)r.left-=e.scrollLeft,n.opera&&"TR"==e.tagName||(r.top-=e.scrollTop),e=e.offsetParent}return r},u.event=u.event||{},u.event._listeners=u.event._listeners||[],u.event.on=function(e,t,i){t=t.replace(/^on/i,""),e=u.dom._g(e);var o,n=function(t){i.call(e,t)},s=u.event._listeners,r=u.event._eventFilter,l=t;return t=t.toLowerCase(),r&&r[t]&&(l=(o=r[t](e,t,n)).type,n=o.listener),e.addEventListener?e.addEventListener(l,n,!1):e.attachEvent&&e.attachEvent("on"+l,n),s[s.length]=[e,t,i,n,l],e},u.on=u.event.on,t=window[u.guid],u.lang.guid=function(){return"TANGRAM__"+(t._counter++).toString(36)},t._counter=t._counter||1,window[u.guid]._instances=window[u.guid]._instances||{},u.lang.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},u.lang.Class=function(t){this.guid=t||u.lang.guid(),window[u.guid]._instances[this.guid]=this},window[u.guid]._instances=window[u.guid]._instances||{},u.lang.Class.prototype.dispose=function(){for(var t in delete window[u.guid]._instances[this.guid],this)u.lang.isFunction(this[t])||delete this[t];this.disposed=!0},u.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"},u.lang.Event=function(t,e){this.type=t,this.returnValue=!0,this.target=e||null,this.currentTarget=null},u.lang.Class.prototype.addEventListener=function(t,e,i){if(u.lang.isFunction(e)){!this.__listeners&&(this.__listeners={});var o,n=this.__listeners;if("string"==typeof i&&i){if(/[^\w\-]/.test(i))throw"nonstandard key:"+i;o=e.hashCode=i}0!=t.indexOf("on")&&(t="on"+t),"object"!=_typeof(n[t])&&(n[t]={}),o=o||u.lang.guid(),e.hashCode=o,n[t][o]=e}},u.lang.Class.prototype.removeEventListener=function(t,e){if(void 0===e||(!u.lang.isFunction(e)||(e=e.hashCode))&&u.lang.isString(e)){!this.__listeners&&(this.__listeners={}),0!=t.indexOf("on")&&(t="on"+t);var i=this.__listeners;if(i[t])if(void 0!==e)i[t][e]&&delete i[t][e];else for(var o in i[t])delete i[t][o]}},u.lang.Class.prototype.dispatchEvent=function(t,e){for(var i in u.lang.isString(t)&&(t=new u.lang.Event(t)),!this.__listeners&&(this.__listeners={}),e=e||{})t[i]=e[i];var o=this.__listeners,n=t.type;if(t.target=t.target||this,t.currentTarget=this,0!=n.indexOf("on")&&(n="on"+n),u.lang.isFunction(this[n])&&this[n].apply(this,arguments),"object"==_typeof(o[n]))for(i in o[n])o[n][i].apply(this,arguments);return t.returnValue},u.lang.inherits=function(t,e,i){var o,n,s=t.prototype,r=new Function;for(o in r.prototype=e.prototype,n=t.prototype=new r,s)n[o]=s[o];(t.prototype.constructor=t).superClass=e.prototype,"string"==typeof i&&(n._className=i)},u.inherits=u.lang.inherits;var e=BMapLib.TextIconOverlay=function(t,e,i,o){this._position=t,this._text=e,this._markers=o,this._options=i||{},this._styles=this._options.styles||[],!this._styles.length&&this._setupDefaultStyles()};d.lang.inherits(e,BMap.Overlay,"TextIconOverlay"),e.prototype._setupDefaultStyles=function(){for(var t,e=[53,56,66,78,90],i=0;t=e[i];i++)this._styles.push({url:"http://api.map.baidu.com/library/TextIconOverlay/1.2/src/images/m"+i+".png",size:new BMap.Size(t,t)})},e.prototype.initialize=function(t){return this._map=t,this._domElement=document.createElement("div"),this._domElement.classList.add("clustererContent"),this._updateCss(),this._updateText(),this._updatePosition(),this._bind(),this._map.getPanes().markerMouseTarget.appendChild(this._domElement),this._domElement},e.prototype.draw=function(){this._map&&this._updatePosition()},e.prototype.getText=function(){return this._text},e.prototype.setText=function(t){!t||this._text&&this._text.toString()==t.toString()||(this._text=t,this._updateText(),this._updateCss(),this._updatePosition())},e.prototype.getPosition=function(){return this._position},e.prototype.setPosition=function(t){!t||this._position&&this._position.equals(t)||(this._position=t,this._updatePosition())},e.prototype.getStyleByText=function(t,e){var i=parseInt(t),o=parseInt(i/10);return o=Math.max(0,o),o=Math.min(o,e.length-1),e[0]},e.prototype._updateCss=function(){var t=this.getStyleByText(this._text,this._styles);this._domElement.style.cssText=this._buildCssText(t)},e.prototype._updateText=function(){this._domElement&&(this._domElement.innerHTML=this._text)},e.prototype._updatePosition=function(){if(this._domElement&&this._position){var t=this._domElement.style,e=this._map.pointToOverlayPixel(this._position);e.x-=Math.ceil(parseInt(t.width)/2),e.y-=Math.ceil(parseInt(t.height)/2),t.left=e.x+"px",t.top=e.y+"px"}},e.prototype._buildCssText=function(t){var e=t.url,i=t.size,o=t.anchor,n=t.offset,s=t.textColor||"black",r=t.textSize||10,l=t.backgroundColor,a=[];if(d.browser.ie<7)a.push('filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="'+e+'");');else{a.push("background-color:"+l+";");var p="0 0";n instanceof BMap.Size&&(p=n.width+"px "+n.height+"px"),a.push("background-position:"+p+";")}return i instanceof BMap.Size&&(o instanceof BMap.Size?(0<o.height&&o.height<i.height&&a.push("height:"+(i.height-o.height)+"px; padding-top:"+o.height+"px;"),0<o.width&&o.width<i.width&&a.push("width:"+(i.width-o.width)+"px; padding-left:"+o.width+"px;")):(a.push("height:"+i.height+"px; line-height:20px;"),a.push("width:"+i.width+"px; text-align:center;"))),a.push("cursor:pointer; opacity:0.9; border-radius:50%; color:"+s+"; position:absolute; font-size:"+r+"px; font-family:Arial,sans-serif; font-weight:bold"),a.join("")},e.prototype._bind=function(){if(this._domElement){var e=this,r=this._map,i=d.lang.Event;d.event.on(this._domElement,"mouseover",function(t){e.dispatchEvent(o(t,new i("onmouseover")))}),d.event.on(this._domElement,"mouseout",function(t){e.dispatchEvent(o(t,new i("onmouseout")))}),d.event.on(this._domElement,"click",function(t){e.dispatchEvent(o(t,new i("onclick")))})}function o(t,e){var i=t.srcElement||t.target,o=t.clientX||t.pageX,n=t.clientY||t.pageY;if(t&&e&&o&&n&&i){var s=d.dom.getPosition(r.getContainer());e.pixel=new BMap.Pixel(o-s.left,n-s.top),e.point=r.pixelToPoint(e.pixel)}return e}}}();
"use strict";angular.module("App").controller("houseSourceCtl",["enterViewLoad","appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(t,o,e,i,n,c,a,u,r,l,s,p,d,$){var y=!(l.back=function(){o.back()});s.$on("appUtilsCityChange",function(t,o){y=!0}),l.$on("$ionicView.enter",function(){l.initData(),y&&(n.$getByHandle("house-source-Scroll").scrollTop(),y=!1)}),l.initData=function(){a.get(u.NewHouseSource.counts.url).then(function(t){l.countsData=t.data}).catch(function(){t.customload("获取失败")}),l.oldQueryData={cityId:o.city.id,pagesize:10,pagenum:0,type:1,query:"",district:"",street:"",minprize:"",maxprize:"",roomType:"",sort:""},a.get(u.NewHouseSource.publicquery.url,{params:l.oldQueryData}).then(function(t){l.oldhousearr=t.data}).catch(function(){t.customload("获取失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("houseSource",{url:"/tabs/housesource",templateUrl:"views/tabs/home/houseSource/houseSource.html",controller:"houseSourceCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("houseSearchCtl",["appUtils","$ionicScrollDelegate","$ionicModal","$stateParams","$timeout","$state","$Factory","$http","$scope",function(e,i,t,r,a,s,o,l,n){n.back=function(){e.back()},n.houseType=r.type?1*r.type:0,n.chooseHouseType=function(e){var t=33.33*(n.houseType=e)+12.5+"%";$("#house_search .switch-wrapper .under-line").animate({left:t},200)},a(function(){n.chooseHouseType(n.houseType)}),n.searchData={sort:"",roomtype:"",district:"",street:"",minprize:"",maxprize:"",query:""},n.districtList=[],n.streetList=[],e.getCurrentDistricts(function(e){n.districtList=angular.extend({"不限":["不限"]},e)}),n.areaClicked={district:"",street:""},n.districtActive=null,n.streetActive=null,n.isShowStreet=!1,n.districtChoose=function(e,t,r){i.$getByHandle("housesearch-street-scroll").scrollTop(),n.districtActive=e,n.streetActive=null,n.streetList=r,n.areaClicked.district="不限"==t?"":t,n.isShowStreet=!0},n.streetChoose=function(e,t){n.streetActive=e,n.areaClicked.street="不限"==t?"":t},t.fromTemplateUrl("house_search_modal",{scope:n,animation:"slide-in-up"}).then(function(e){n.modal=e}),n.showModal=function(){n.modal.show()},n.closeModal=function(){n.modal.hide()},n.reset=function(){n.isShowStreet=!1,n.districtActive=null,n.areaClicked.district="",n.areaClicked.street=""},n.confirm=function(){n.searchData.district=n.areaClicked.district,n.searchData.street=n.areaClicked.street,n.closeModal()},$("#house_price_range_new").ionRangeSlider({type:"double",min:0,max:5e4,from:0,to:5e4,postfix:"元/m²"}),n.sliderNew=$("#house_price_range_new").data("ionRangeSlider"),$("#house_price_range_sell").ionRangeSlider({type:"double",min:0,max:2e3,from:0,to:2e3,postfix:"万"}),n.sliderSell=$("#house_price_range_sell").data("ionRangeSlider"),$("#house_price_range_rent").ionRangeSlider({type:"double",min:0,max:1e4,from:0,to:1e4,postfix:"元/月"}),n.sliderRent=$("#house_price_range_rent").data("ionRangeSlider"),n.search=function(){0==n.houseType?(n.searchData.minprize=n.sliderNew.old_from,5e4==n.sliderNew.old_to?n.searchData.maxprize=null:n.searchData.maxprize=n.sliderNew.old_to,s.go("tabs.newHouseArr",n.searchData)):1==n.houseType?(n.searchData.minprize=n.sliderSell.old_from,2e3==n.sliderSell.old_to?n.searchData.maxprize=null:n.searchData.maxprize=n.sliderSell.old_to,s.go("ershouHouseList",angular.extend({classify:"住宅"},n.searchData))):(n.searchData.minprize=n.sliderRent.old_from,1e3==n.sliderRent.old_to?n.searchData.maxprize=null:n.searchData.maxprize=n.sliderRent.old_to,s.go("rentHouseList",angular.extend({classify:"住宅"},n.searchData)))},document.getElementById("house_search_keyword").addEventListener("keydown",function(e){13==e.keyCode&&n.search()},!1)}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("houseSearch",{url:"/home/housesearch/params/:type",cache:!1,templateUrl:"views/tabs/home/houseSearch/houseSearch.html",controller:"houseSearchCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/houseSearch/houseSearch.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("houseTimesCtl",["appUtils","enterViewLoad","wechatLinkBase","WechatService","$localStorage","$ionicModal","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$rootScope","$stateParams","$ionicPopover","$ionicPopup","$timeout","$ionicActionSheet",function(i,e,o,s,a,t,n,r,c,l,h,d,u,m,p,f,g,k){d.back=function(){i.back()},d.hasLike=!1,d.loadhousetimes=function(){l.get(h.News.get.url,{params:{id:m.id}}).then(function(e){d.dataDetail=e.data,g(function(){$("br").parent().css("height","10")}),d.likeNum=e.data.Persons?e.data.Persons.length:0,e.data.Persons&&0<=e.data.Persons.indexOf(a.myselfInfo.Id+"")&&(d.hasLike=!0)}).catch(function(){e.customload("获取房产时报失败")})},d.$on("$ionicView.enter",function(){d.loadhousetimes()}),d.clickLike=function(){l.post(h.News.approve.url+"?id="+m.id).then(function(e){d.likeNum++,d.hasLike=!0}).catch(function(){e.customload("点赞失败")})},t.fromTemplateUrl("house_times_share_modal",{scope:d,animation:"slide-in-up"}).then(function(e){d.shareModal=e}),d.showBottomShareModal=function(){d.shareModal.show()},d.closeBottomShareModal=function(){d.shareModal.hide()},d.share=function(a){if(d.shareImgUrl=d.dataDetail.ShowImage||"http://imgs.wujiuyun.com/images/logo.png",0==a||1==a)o.changeBase(d.shareImgUrl,function(e){d.params={scene:a,message:{title:d.dataDetail.Title||"房源资讯",thumb:e,description:d.dataDetail.Brief||"房田网为您推荐资讯",media:{type:Wechat.Type.LINK,webpageUrl:i.shareHost+"/#/housetimes/"+m.id}}},s.share(d.params)});else if(2==a){(e={}).url=i.shareHost+"/#/housetimes/"+m.id,e.title=d.dataDetail.Title||"房源资讯",e.description=d.dataDetail.Brief||"房田网为您推荐资讯",e.imageUrl=d.shareImgUrl,e.appName="房田网",i.qqShareQQAndroid(e,function(){},function(e){})}else{var e;(e={}).url=i.shareHost+"/#/housetimes/"+m.id,e.title=d.dataDetail.Title||"房源资讯",e.description=d.dataDetail.Brief||"房田网为您推荐资讯";var t=[d.shareImgUrl];e.imageUrl=t,YCQQ.shareToQzone(function(){},function(e){},e)}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("houseTimes",{url:"/housetimes/:id",templateUrl:"views/tabs/home/houseTimes/houseTimes.html",controller:"houseTimesCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/houseTimes/houseTimes.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("lotteryPageCtl",["appUtils","enterViewLoad","wechatLinkBase","WechatService","$localStorage","$ionicModal","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$rootScope","$stateParams","$timeout","$interval",function(e,t,i,n,a,o,l,r,s,c,u,d,p,f,m,h){d.back=function(){e.back()},d.splashStatus=!0;var z=0;d.splashInterval=h(function(){z++,d.splashStatus=z%2==0},1e3),d.clicked=!1,d.$on("$ionicView.enter",function(){y.init("luck"),d.startLottery=function(){return d.clicked||d.startDraw(),!1},d.getTimes(),d.allPrizes(),new Swiper(".lottery-winning-swiper",{direction:"vertical",autoplay:!0,loop:!0,observer:!0,on:{click:function(e){}}})}),d.$on("$ionicView.leave",function(){h.cancel(d.splashInterval)}),d.swiperList=["恭喜用户“不服来战”获得50抵用金红包。","恭喜用户“谢塊元”获得3抵用金红包。","恭喜用户“东植”获得3抵用金红包。","恭喜用户“zzg”获得500抵用金红包。","恭喜用户“房田用户9”获得100抵用金红包。"],d.allPrizes=function(){c.post(u.Draw.lists.url).then(function(e){d.allprizeList=e.data}).catch(function(e){d.allprizeList=[],t.customload("获取失败")})},d.getTimes=function(){c.post(u.Draw.times.url).then(function(e){d.drawTimes=e.data}).catch(function(e){d.drawTimes=resData.data,t.customload("获取失败")})},d.startDraw=function(){d.drawData={},c.post(u.Draw.raffle.url).then(function(e){--d.drawTimes,d.drawData=e.data,y.speed=100,w(),d.clicked=!0}).catch(function(e){t.customload("操作失败")})},d.getDraw=function(i){c.post(u.Draw.getprize.url+"?id="+i.Id).then(function(e){i.Status=1,t.customload("领取成功")}).catch(function(e){t.customload("领取失败")})},d.myPrizes=function(){t.load(),c.post(u.Draw.myprize.url).then(function(e){l.hide(),d.myprizeList=e.data.filter(function(e){return e.CreateTime=e.CreateTime.replace(/T/," / "),e}),d.myprizeList=d.myprizeList.reverse()}).catch(function(e){d.myprizeList=[],t.customload("获取失败")})},d.rolling=!1;var y={index:-1,count:0,timer:0,speed:20,times:0,cycle:50,prize:-1,init:function(e){0<$("#"+e).find(".luck-unit").length&&($luck=$("#"+e),$units=$luck.find(".luck-unit"),this.obj=$luck,this.count=$units.length,$luck.find(".luck-unit-"+this.index).addClass("active"))},roll:function(){d.rolling=!0;var e=this.index,i=this.count;this.obj;return i-1<(e+=1)&&(e=0),d.activeIndex=e,this.index=e,!1},stop:function(e){return d.rolling=!1,this.prize=e,!1}};function w(){if(y.times+=1,y.roll(),y.times>y.cycle+10&&y.prize==y.index)m.cancel(y.timer),y.prize=-1,y.times=0,d.clicked=!1,m(function(){d.rolling=!1,d.showWinningModal()});else{if(y.times<y.cycle)y.speed-=10;else if(y.times==y.cycle){var e;switch(d.drawData.Money){case d.allprizeList[0].Money:e=0;break;case d.allprizeList[1].Money:e=1;break;case d.allprizeList[2].Money:e=2;break;case d.allprizeList[3].Money:e=3;break;case d.allprizeList[4].Money:e=4;break;case d.allprizeList[5].Money:e=5;break;case d.allprizeList[6].Money:e=6;break;case d.allprizeList[7].Money:e=7;break;case d.allprizeList[8].Money:e=8;break;case d.allprizeList[9].Money:e=9;break;case d.allprizeList[10].Money:e=10;break;case d.allprizeList[11].Money:e=11;break;default:e=0}y.prize=e}else y.times>y.cycle+10&&(0==y.prize&&7==y.index||y.prize==y.index+1)?y.speed+=110:y.speed+=20;y.speed<40&&(y.speed=40),y.timer=m(w,y.speed)}return!1}o.fromTemplateUrl("lottery_page_rules_modal",{scope:d,animation:"slide-in-up"}).then(function(e){d.Modal=e}),d.showModal=function(e){"prize"==(d.modalType=e)?d.myPrizes():"recording"==e&&d.allPrizes(),d.Modal.show()},d.closeModal=function(){d.Modal.hide()},o.fromTemplateUrl("lottery_page_winning_modal",{scope:d,animation:"slide-in-left"}).then(function(e){d.winningModal=e}),d.showWinningModal=function(){d.winningModal.show(),m(function(){d.closeWinningModal()},3e3)},d.closeWinningModal=function(){d.winningModal.hide()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("lotteryPage",{url:"/home/lotteryPage",templateUrl:"views/tabs/home/lotteryPage/lotteryPage.html",controller:"lotteryPageCtl",resolve:{load:["$ocLazyLoad",function(t){return t.load(["views/tabs/home/lotteryPage/lotteryPage.js"])}]},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("moreVideosCtl",["Upload","appUtils","enterViewLoad","actionImgShow","$ionicScrollDelegate","$sce","$ionicModal","$ionicLoading","$localStorage","$timeout","$rootScope","$scope","$stateParams","$http","$Factory",function(e,n,t,o,a,i,r,l,c,s,u,d,p,f,$){function h(o){f.post($.Zone.indexlist.url,d.queryData).then(function(e){if(l.hide(),!(e.data.length<=0&&(d.haveMore=!1,d.$broadcast("scroll.infiniteScrollComplete"),d.$broadcast("scroll.refreshComplete"),o)))if(d.haveMore=!0,o){d.queryData.pagenum+=1;var t=e.data[0].List.filter(function(e){return n.isJsonString(e.Content)?e.Content=JSON.parse(e.Content):e.Content={},e});d.videoList=d.videoList.concat(t),d.$broadcast("scroll.infiniteScrollComplete")}else d.queryData.pagenum=1,d.simplehousearr=e,d.videoList=e.data[0].List.filter(function(e){return n.isJsonString(e.Content)?e.Content=JSON.parse(e.Content):e.Content={},e}),d.$broadcast("scroll.refreshComplete")}).catch(function(){l.hide(),d.haveMore=!1,l.show({template:"获取数据失败",duration:1e3}),d.$broadcast("scroll.infiniteScrollComplete"),d.$broadcast("scroll.refreshComplete")})}d.back=function(){n.back()},d.$on("$ionicView.enter",function(){d.haveMore=!0}),d.queryData={isOnlyFollow:!1,type:30,pagenum:0,pagesize:10},d.videoList=[],d.haveMore=!0,d.loadMore=function(e){h(!0)},d.loadeRefresh=function(e){d.queryData.pagenum=0,h(!1)}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("moreVideos",{url:"/home/morevideos",templateUrl:"views/tabs/home/moreVideos/moreVideos.html",controller:"moreVideosCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/moreVideos/moreVideos.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("needTypeChooseCtl",["appUtils","$scope","$stateParams",function(e,t,a){t.back=function(){e.back()},t.pageType=a.type}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("needTypeChoose",{url:"/home/needtypechoose/params/:type",templateUrl:"views/tabs/home/needTypeChoose/needTypeChoose.html",controller:"needTypeChooseCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/needTypeChoose/needTypeChoose.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("noCtrVideoCtl",["appUtils","$noCtrVideoBack","enterViewLoad","$ionicModal","$localStorage","$http","$Factory","$timeout","$sce","$scope","$rootScope","$state","$stateParams",function(o,e,t,a,n,i,r,s,d,l,c,u,f){l.back=function(){o.back()},l.backRealHome=function(){c.fromStateName,u.go("tabs.realHome")},l.swipeDown=function(){l.back()},l.swipeUp=function(){1*l.paramsData.pagenum+1>=l.maxCount?t.customload("暂无更多"):u.go("noCtrVideo",{pagenum:1*l.paramsData.pagenum+1,followed:l.paramsData.followed})},l.paramsData={pagenum:f.pagenum,followed:f.followed},l.maxCount=0,i.post(r.Zone.indexlist.url,{isOnlyFollow:l.paramsData.followed,type:30,pagenum:f.pagenum,pagesize:1}).then(function(e){e.data.length?(l.videoList=e.data[0].List.filter(function(e){return o.isJsonString(e.Content)&&(e.Content=JSON.parse(e.Content)),n.myselfInfo?e.agreed=0<=e.AgressUsers.indexOf(n.myselfInfo.Id):e.agreed=!1,e}),l.maxCount=e.data[0].Count||0,l.pageData=l.videoList[0],l.renderData.videoSrc=d.trustAsResourceUrl(l.videoList[0].Content.video),l.renderData.videoImage=l.videoList[0].Content.image):l.videoList=[]}).catch(function(){t.customload("获取失败")}),l.agreeAction=function(o){o.agreed||i.post(r.Zone.agree.url+"?id="+o.Id).then(function(e){o.agreed=!0,o.AgressUsers.push(n.myselfInfo.Id)}).catch(function(e){t.customload("操作失败")})},l.followHim=function(o,e){e.stopPropagation(),n.myselfInfo?i.post(r.Zone.follow.url+"?uid="+o.UserId).then(function(e){o.IsFollow=!0}).catch(function(e){t.customload("操作失败")}):u.go("login")},a.fromTemplateUrl("noctr_video_comments_modalview",{scope:l,animation:"slide-in-up"}).then(function(e){l.commentsModal=e}),l.showCommentsModal=function(e){l.commentsModal.show()},l.closeCommentsModal=function(){l.commentsModal.hide()},l.replyData={data:""},l.replyComment=function(){l.replyData.data&&i.post(r.Zone.save.url,{type:70,ParentId:l.pageData.Id,Content:l.replyData.data}).then(function(e){l.pageData.Children.push({Content:l.replyData.data,UserName:n.myselfInfo?n.myselfInfo.NickName:"房田用户",UserImage:n.myselfInfo?n.myselfInfo.ShowImage:"http://imgs.wujiuyun.com//Images//logo.png"}),l.replyData.data=""}).catch(function(){l.replyData.data="",t.customload("评论失败")})},l.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(e){s(function(){l.keyboardHeight&&l.keyboardHeight==e.keyboardHeight||(l.keyboardHeight=e.keyboardHeight),l.keyboardShow=!0})}),window.addEventListener("native.keyboardhide",function(e){s(function(){l.keyboardShow=!1})}),s(function(){m.fullScreenStatus=!0}),l.$on("$ionicView.leave",function(){l.$broadcast("pauseVideo",!0),l.$broadcast("viewLeave",!0)});var m=l.renderData={};m.hideBar=!1,m.fullScreenStatus=!1,l.$on("videoBarHide",function(e,o){o&&(m.hideBar=!0,l.$apply())}),l.$on("videoBarShow",function(e,o){o&&(m.hideBar=!1,l.$apply())}),l.$on("videoIsLoading",function(e,o){l.videoIsLoading=o}),l.$on("changeFullscreenStatus",function(e,o){}),l.closeFullscreen=function(){m.fullScreenStatus=!1,l.$broadcast("closeFullscreenStatus",!1)}}]).factory("$noCtrVideoBack",[function(){var e=function(){};return e.prototype={fromstate:null},new e}]);
"use strict";angular.module("App").config(["$stateProvider",function(o){o.state("noCtrVideo",{url:"/home/noctrvideo/params/:pagenum/:followed",cache:!1,nativeTransitions:{type:"slide",direction:"up"},nativeTransitionsBack:{type:"slide",direction:"down"},templateUrl:"views/tabs/home/noCtrVideo/noCtrVideo.html",controller:"noCtrVideoCtl",resolve:{load:["$ocLazyLoad",function(o){return o.load(["views/tabs/home/noCtrVideo/noCtrVideo.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("ownerColumnCtl",["appUtils","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(t,e,o,a,i,r,n,c,l,u,s){n.back=function(){t.back()},n.goHome=function(t){n.back(),c.$emit("homeScrollType",t)},n.$on("$ionicView.enter",function(){n.currentMonth=(new Date).getMonth()+1,n.initData()}),n.initData=function(){n.oldQueryData={cityId:1,pagesize:5,pagenum:0,type:1,query:"",district:"",street:"",minprize:"",maxprize:"",roomType:"",sort:""},a.get(i.NewHouseSource.publicquery.url,{params:n.oldQueryData}).then(function(t){n.$broadcast("scroll.refreshComplete");for(var e=0;e<t.data.length;e++){var o=t.data[e].Thumb;t.data[e].Thumb=o.replace(/230x150/,"60x60")}n.oldhousearr=t.data}).catch(function(){n.$broadcast("scroll.refreshComplete")});echarts.init(document.getElementById("owner_column_trend_echarts"),"light").setOption({title:{text:""},tooltip:{},legend:{data:["全部"],itemGap:10,itemWidth:20,itemHeight:14},xAxis:{data:["8月","9月","10月","11月","12月","1月","2月","3月","4月","5月","6月","7月"]},yAxis:[{type:"value",axisLabel:{formatter:function(t){return t/1e4+"万"}},min:0,max:75e3,interval:1e4,splitArea:{show:!1}}],series:[{name:"",type:"line",data:[47689,48e3,48030,47849,47177,46661,47101,46536,45640,45008,45004,45068]}],color:["rgba(105,151,255,0.6"]})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(o){o.state("ownerColumn",{url:"/ownercolumn",templateUrl:"views/tabs/home/ownerColumn/ownerColumn.html",controller:"ownerColumnCtl",resolve:{load:["$ocLazyLoad",function(o){return o.load(["views/tabs/home/ownerColumn/ownerColumn.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("redEnvelopeCtl",["appUtils","$timeout","$scope","$state","$ionicModal","$http","$Factory",function(e,o,n,l,t,i,u){n.back=function(){e.back()},n.openRed=function(){0<n.redTimes?l.go("receiveRedEnvelope",{open:!0}):n.openAlert()},n.openAlert=function(){n.nullTimeout&&o.cancel(n.nullTimeout),n.showNull?n.showNull=!1:(n.showNull=!0,n.nullTimeout=o(function(){n.showNull=!1},2e3))},n.$on("$ionicView.enter",function(){i.post(u.Draw.redtimes.url).then(function(e){n.redTimes=e.data}).catch(function(){n.redTimes=0})}),t.fromTemplateUrl("redenvelope_rule_modal",{scope:n,animation:"slide-in-left"}).then(function(e){n.modal=e}),n.showModal=function(){n.modal.show()},n.closeModal=function(){n.modal.hide()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("redEnvelope",{url:"/home/redenvelope",templateUrl:"views/tabs/home/redEnvelope/redEnvelope.html",controller:"redEnvelopeCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/redEnvelope/redEnvelope.js"])}]},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("videoListCtl",["appUtils","$scope",function(t,c){c.back=function(){t.back()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("videoList",{url:"/home/videolist",cache:!1,templateUrl:"views/tabs/home/videoList/videoList.html",controller:"videoListCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/videoList/videoList.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("welcomePageCtl",["appUtils","$localStorage","$timeout","$scope","$state","$ionicSlideBoxDelegate",function(e,o,t,g,i,l){g.goHome=function(){o.firstTimeOpen=!0,i.go("tabs.realHome")},g.adImgList=["imgs/home/welcomepage/1.jpg","imgs/home/welcomepage/2.jpg","imgs/home/welcomepage/3.jpg","imgs/home/welcomepage/4.jpg"],t(function(){l.update()}),g.currentAdSlideIndex=0,g.changeAdSlide=function(e){g.currentAdSlideIndex=e}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("welcomePage",{url:"/home/welcomepage",templateUrl:"views/tabs/home/welcomePage/welcomePage.html",controller:"welcomePageCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/welcomePage/welcomePage.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("blackListCtr",["NimUtils","appUtils","enterViewLoad","$localStorage","$ionicModal","$timeout","$window","$state","$ionicActionSheet","$ionicTabsDelegate","$ionicScrollDelegate","$rootScope","$ionicHistory","$Factory","$scope","$http","$ionicLoading","$ionicSlideBoxDelegate",function(o,i,l,t,c,n,e,a,s,r,u,k,b,$,d,f,g,m){d.back=function(){i.back()},d.$on("$ionicView.enter",function(){d.blacklist=o.blacklist,d.blacklistAcids=[];for(var i=0;i<d.blacklist.length;i++)d.blacklistAcids.push(d.blacklist[i].account);d.getUserInfo(d.blacklistAcids)}),d.blackList=[],d.getUserInfo=function(i){i.length<=0?d.blackList=[]:o.getUsers({accounts:i,done:function(i,t){n(i?function(){d.blackList=[]}:function(){d.blackList=t})}})},d.removeBlack=function(i,c){nim.removeFromBlacklist({account:i.account,done:function(i,t){i||(l.customload("移除成功"),o.blacklist=nim.cutRelations(o.blacklist,t.record),d.blackList.splice(c,1))}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("blackList",{url:"/linkman/blacklist",templateUrl:"views/tabs/linkMan/blackList/blackList.html",controller:"blackListCtr",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("groupChatCtr",["NimUtils","appUtils","$timeout","$state","$rootScope","$scope",function(t,o,n,i,e,c){c.back=function(){o.back()},c.$on("$ionicView.enter",function(){nim.getTeams({done:function(t,o){t||n(function(){c.groupList=o})}})})}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("groupChat",{url:"/linkman/groupchat",templateUrl:"views/tabs/linkMan/groupChat/groupChat.html",controller:"groupChatCtr",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("linkManDetailCtr",["$hisBusinessCardData","actionImgShow","NimUtils","appUtils","enterViewLoad","$ionicLoading","$ionicPopup","$timeout","$localStorage","$http","$Factory","$state","$stateParams","$scope",function(o,i,e,a,n,s,t,d,r,c,l,f,u,g){g.back=function(){a.back()},g.targetId=u.account,g.myselfInfo=e.myselfInfo,g.goHisBusiness=function(t,n){o.slide=n,f.go("hisBusinessCard",{id:t})},g.showBigImg=function(t){for(var n=new Array,o=[t],e=0;e<o.length;e++){var a=new Image;a.src=o[e],a.onload=void(n[e]=a)}i.show({larImgs:n,currentImg:0,imgClose:function(){i.close()}})},c.post(l.Account.showinfo.url+"?id="+u.account).then(function(t){g.ftInfo=t.data,c.post(l.Zone.home.url+"?uid="+t.data.Id,{type:0}).then(function(t){for(var n=0;n<t.data.length;n++)if(10==t.data[n].Type)g.dynamicData=t.data[n].List.filter(function(t){return a.isJsonString(t.Content)&&(t.Content=JSON.parse(t.Content)),t}),g.newsList=[],g.newsList=t.data[n].List.map(function(t){return t.Content.text}),new Swiper(".linkman-detail-tl-swiper",{direction:"vertical",autoplay:!0,loop:1<g.newsList.length});else if(20==t.data[n].Type)g.imagesData=t.data[n].List;else if(30==t.data[n].Type)g.videosData=t.data[n].List.filter(function(t){return t.Content=JSON.parse(t.Content),t});else if(60==t.data[n].Type)0<t.data[n].List.length?(a.isJsonString(t.data[n].List[0].Content)&&(g.honorImageUrl=JSON.parse(t.data[n].List[0].Content).Options[0].ImgUrl),g.honorImageId=t.data[n].List[0].Id):g.honorImageUrl="";else if(50==t.data[n].Type)if(0<t.data[n].List.length){(new Date).getTime();a.isJsonString(t.data[n].List[0].Content)&&(g.posterImageUrl=JSON.parse(t.data[n].List[0].Content).Options[0].ImgUrl),g.posterImageId=t.data[n].List[0].Id}else g.posterImageUrl="";else 80==t.data[n].Type?0<t.data[n].List.length?g.photoBgImg=t.data[n].List[0].Content:g.photoBgImg="":90==t.data[n].Type&&(0<t.data[n].List.length?g.videoBgImg=t.data[n].List[0].Content:g.videoBgImg="")}).catch(function(){n.customload("加载数据失败"),g.photoBgImg="",g.videoBgImg="",g.posterImageUrl="",g.honorImageUrl=""})}).catch(function(t){}),g.followAction=function(t){n.load(),c.post(l.Zone.follow.url+"?uid="+g.ftInfo.Id).then(function(t){s.hide(),g.ftInfo.IsFollow=!0,++g.ftInfo.FollowNum}).catch(function(t){n.customload("操作失败")})},g.unFollowAction=function(){n.load(),c.post(l.Zone.unfollow.url+"?uid="+g.ftInfo.Id).then(function(t){s.hide(),g.ftInfo.IsFollow=!1,--g.ftInfo.FollowNum}).catch(function(t){n.customload("操作失败")})},g.getNimInfo=function(t){nim.getUser({account:t,done:function(t,n){t||d(function(){g.targetInfo=n,g.targetInfo=angular.extend({isFriend:e.isFriend(g.targetId)},g.targetInfo)})},sync:!0})},u.phone&&c.post(l.Neteast.queryphone.url+"?phone="+u.phone).then(function(t){g.targetId=t.data.accid,g.getNimInfo(g.targetId)}).catch(function(t){g.targetId=null,g.errMsg=t.data.Message,n.customload(t.data.Message)}),u.account&&g.getNimInfo(g.targetId),g.addFriend=function(t){e.addFriend(t,function(){n.customload("发送好友申请成功"),d(function(){g.back()},1500)},function(){n.customload("发送好友申请失败")})},g.deleteFriend=function(n){t.confirm({title:"确定删除好友？",cancelText:"取消",okText:"确定"}).then(function(t){t&&e.deleteFriend(n,function(){d(function(){g.targetInfo.isFriend=!1,g.reloadMyFriends()})},function(){})})},g.reloadMyFriends=function(){nim.getFriends({done:function(t,n){t?err():e.myFriends=n}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("linkManDetail",{url:"/linkman/linkmandetail/params/:account/:phone",cache:!1,templateUrl:"views/tabs/linkMan/linkManDetail/linkManDetail.html",controller:"linkManDetailCtr",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("linkManSearchCtl",["enterViewLoad","NimUtils","appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(n,o,i,t,e,r,c,a,u,s,m,f,d,p,l){m.back=function(){i.back()},m.$on("$ionicView.enter",function(){o.myFriendsInfo(function(n){m.friendArr=n.filter(function(n){return i.isJsonString(n.custom)&&(n.custom=JSON.parse(n.custom)),n})},function(n){m.friendArr=[]}),nim.getTeams({done:function(n,o){n||c(function(){m.groupList=o})}})}),m.searchData={data:""},m.searchEmpty=function(){m.searchData.data=""},m.inputChange=function(){m.moreFriend=!1,m.moreGroup=!1},m.moreFriend=!1,m.showMoreFriend=function(){m.moreFriend=!0},m.moreGroup=!1,m.showMoreGroup=function(){m.moreGroup=!0}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("linkManSearch",{url:"/tabs/linkman/linkmansearch",templateUrl:"views/tabs/linkMan/linkManSearch/linkManSearch.html",controller:"linkManSearchCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("newFriendsCtr",["NimUtils","appUtils","enterViewLoad","$localStorage","$ionicModal","$timeout","$window","$state","$ionicActionSheet","$ionicTabsDelegate","$ionicScrollDelegate","$rootScope","$ionicHistory","$Factory","$scope","$http","$ionicLoading","$ionicSlideBoxDelegate",function(t,e,i,n,o,a,r,s,c,d,f,m,u,l,g,p,$,v){g.back=function(){e.back()},g.$on("$ionicView.beforeLeave",function(){t.sysMsg.allSysMsgUnread=0});var S={};g.getUserInfo=function(o){var e=[];if(0<o.length){for(var n=0;n<o.length;n++)e.push(o[n].from);t.getUsers({accounts:e,done:function(e,n){e||(n.map(function(e,n){S[e.account]=e}),g.sysMsgs=o.filter(function(e){e.name="",e.avatar="",e.reason="";var n=null;return n=S[e.from],e.avatar=n.avatar||"",e.name=n.alias||n.nick||e.from,e.reason=(n.alias||n.nick||e.from)+"添加您为好友",e}),a(function(){g.sysMsgs=g.sysMsgs}))}})}},g.$on("$ionicView.enter",function(){g.getUserInfo(t.sysMsg.allSysMsg),m.$on("SYSMSGUPDATE",function(e,n){g.getUserInfo(n)})}),g.acceptTeam=function(o){nim.acceptTeamInvite({idServer:o.idServer,teamId:o.to,from:o.from,done:function(e,n){e?i.customload(e.message):o.state="passed"}})},g.rejectTeam=function(o){nim.rejectTeamInvite({idServer:o.idServer,teamId:o.to,from:o.from,ps:"拒绝",done:function(e,n){e?i.customload(e.message):o.state="rejected"}})},g.acceptFriend=function(o){nim.passFriendApply({idServer:o.idServer,account:o.from,ps:"同意添加你为好友",done:function(e,n){e?i.customload(e.message):o.state="passed"}})},g.rejectFriend=function(o){nim.rejectFriendApply({idServer:o.idServer,account:o.from,ps:"拒绝添加你为好友",done:function(e,n){e?i.customload(e.message):o.state="rejected"}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("newFriends",{url:"/linkman/newfriends",templateUrl:"views/tabs/linkMan/newFriends/newFriends.html",controller:"newFriendsCtr",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("scanResultCtl",["appUtils","$scope","$stateParams",function(t,s,a){s.back=function(){t.back()},s.result=a.result}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("scanResult",{url:"/linkman/scanresult/params/:result",cache:!1,templateUrl:"views/tabs/linkMan/scanResult/scanResult.html",controller:"scanResultCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("spacePermissionsCtr",["NimUtils","appUtils","enterViewLoad","$localStorage","$ionicModal","$timeout","$window","$state","$ionicActionSheet","$ionicTabsDelegate","$ionicScrollDelegate","$rootScope","$ionicHistory","$Factory","$scope","$http","$ionicLoading","$ionicSlideBoxDelegate",function(i,o,e,t,n,c,a,$,l,r,s,p,u,d,g,S,m,w){g.back=function(){o.back()},g.$on("$ionicView.enter",function(){})}]);
"use strict";angular.module("App").config(["$stateProvider",function(s){s.state("spacePermissions",{url:"/linkman/spacepermissions",templateUrl:"views/tabs/linkMan/spacePermissions/spacePermissions.html",controller:"spacePermissionsCtr",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("hisBusinessCardCtl",["$hisBusinessCardData","appUtils","enterViewLoad","actionImgShow","$localStorage","$ionicModal","$ionicScrollDelegate","$http","$Factory","$scope","$stateParams","$timeout",function(t,n,i,o,e,a,s,r,d,l,c,u){l.back=function(){n.back()},l.$on("$ionicView.enter",function(){t.slide&&(l.mySwiper.slideTo(4,500,!1),l.swiperActiveIndex=4)}),l.$on("$ionicView.leave",function(){t.slide=null}),l.currentBG="rgba(17,17,17,0)",l.swiperActiveIndex=0,l.mySwiper=new Swiper(".hisbusinesscard-swiper-container",{direction:"vertical",noSwiping:!0,noSwipingClass:"stop-swiping",on:{slideChangeTransitionStart:function(){},slideChangeTransitionEnd:function(){l.swiperActiveIndex=this.activeIndex,0==this.activeIndex?u(function(){l.currentBG="rgba(17,17,17,0)"}):u(function(){l.currentBG="rgba(17,17,17,1)"})}}}),l.delegate=s.$getByHandle("his-business-card-Scroll"),l.hisBusinessCardListen=function(){try{l.contentScrollTop=l.delegate.getScrollPosition().top}catch(t){}},l.swipeUp=function(){l.mySwiper.slideNext()},l.swipeDown=function(){l.contentScrollTop&&!(l.contentScrollTop<0)||l.stopSlide||l.mySwiper.slidePrev()},l.paramsData={id:c.id},a.fromTemplateUrl("hisbusiness_switch_modal",{scope:l,animation:"slide-in-down"}).then(function(t){l.switchModal=t}),l.showSwitchModal=function(){l.switchModal.show()},l.closeSwitchModal=function(){l.switchModal.hide()},l.switchItem="timeline",l.switchItemTo=function(t){l.switchItem=t,l.delegate.resize()},l.initData=function(){l.myselfInfo=e.myselfInfo,r.post(d.Zone.home.url+"?uid="+l.paramsData.id,{type:0}).then(function(t){for(var e=0;e<t.data.length;e++)if(10==t.data[e].Type)l.dynamicData=t.data[e].List.filter(function(t){return n.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},l.myselfInfo?t.agreed=0<=t.AgressUsers.indexOf(l.myselfInfo.Id+""):t.agreed=!1,t.showCom=!1,t});else if(20==t.data[e].Type)l.imagesData=t.data[e].List;else if(21==t.data[e].Type)l.albumList=t.data[e].List.filter(function(t){return t.Content?t.Content=t.Content.split("|"):t.Content=[],t});else if(30==t.data[e].Type)l.videosData=t.data[e].List.filter(function(t){return n.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},t});else if(31==t.data[e].Type)l.vcrData=t.data[e].List.filter(function(t){return n.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},t});else if(40==t.data[e].Type)t.data[e].List.length?l.articleData=t.data[e].List.filter(function(t){return n.isJsonString(t.ShowInList)&&(t.ShowInList=JSON.parse(t.ShowInList)),t}):l.articleData=[];else if(60==t.data[e].Type)0<t.data[e].List.length&&(n.isJsonString(t.data[e].List[0].Content)&&(l.honorImageUrl=JSON.parse(t.data[e].List[0].Content).Options[0].ImgUrl),l.honorImageId=t.data[e].List[0].Id);else if(50==t.data[e].Type&&0<t.data[e].List.length){(new Date).getTime();n.isJsonString(t.data[e].List[0].Content)&&(l.posterImageUrl=JSON.parse(t.data[e].List[0].Content).Options[0].ImgUrl),l.posterImageId=t.data[e].List[0].Id}}).catch(function(){i.customload("加载数据失败")})},l.initData(),l.showBigImg=function(t,e){for(var n=new Array,i=0;i<t.length;i++){var a=new Image;a.src=t[i],a.onload=void(n[i]=a)}o.show({larImgs:n,currentImg:e,imgClose:function(){o.close()}})},l.agreeTl=function(e){r.post(d.Zone.agree.url+"?id="+e.Id).then(function(t){e.agreed=!0,i.customload("点赞成功")}).catch(function(){i.customload("点赞失败")})},l.replyData={data:""},l.clickComment=function(t){l.showBotReply=!l.showBotReply,l.replyTo=t},l.replyComment=function(){l.replyData.data&&r.post(d.Zone.save.url,{type:70,ParentId:l.replyTo.Id,Content:l.replyData.data}).then(function(t){l.initData(),l.replyData.data=""}).catch(function(){l.replyData.data="",i.customload("评论失败")})},l.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(t){u(function(){l.keyboardHeight&&l.keyboardHeight==t.keyboardHeight||(l.keyboardHeight=t.keyboardHeight),l.keyboardShow=!0})}),window.addEventListener("native.keyboardhide",function(t){u(function(){l.keyboardShow=!1,l.showBotReply=!1})})}]).factory("$hisBusinessCardData",[function(){var t=function(){};return t.prototype={slide:null},new t}]);
"use strict";angular.module("App").config(["$stateProvider",function(s){s.state("hisBusinessCard",{url:"/percenter/hisbusinesscard/params/:id",cache:!1,templateUrl:"views/tabs/perCenter/hisBusinessCard/hisBusinessCard.html",controller:"hisBusinessCardCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("humanMapCtl",["appUtils","enterViewLoad","upImgBase","$sce","$timeout","$rootScope","$scope","$stateParams","$http","$Factory",function(e,t,a,o,r,i,l,n,c,s){l.back=function(){e.back()};var m=echarts.init(document.getElementById("article_main")),u=[{category:0,name:"东旭蓝天",value:3,size:40,symbol:"image://http://imgs.wujiuyun.com//Images//logo.png"},{category:1,name:"国信证券经",value:1,size:10},{category:1,name:"海通证券研",value:1,size:10},{category:1,name:"招商证券",value:1,size:10},{category:1,name:"伍玖云",value:1,size:20},{category:1,name:"房田科技",value:1,size:20}];u.forEach(function(e){e.itemStyle={overflow:"hidden",borderRadius:"50%"},e.symbolSize=e.size});var g={title:{text:"调研关系图",subtext:"纯属虚构",top:"bottom",left:"center",textStyle:{fontSize:18,color:"#ff0"}},tooltip:{trigger:"item",formatter:function(e){return e.data.flow?e.data.flow:e.data.name+":"+e.data.value+"次"}},toolbox:{show:!0,feature:{saveAsImage:!0}},legend:[{x:"center",data:["公司","客户"]}],series:[{type:"graph",layout:"force",symbolSize:20,edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,8],animation:!0,roam:!0,label:{normal:{show:!0,position:"right"},emphasis:{}},draggable:!0,focusNodeAdjacency:!0,data:u,edges:[{source:"东旭蓝天",target:"国信证券经",flow:"老爸"},{source:"东旭蓝天",target:"国信证券经",flow:"爸"},{source:"东旭蓝天",target:"海通证券研",flow:"老妈"},{source:"东旭蓝天",target:"招商证券",flow:"爷爷"},{source:"招商证券",target:"伍玖云",flow:"奶奶"},{source:"东旭蓝天",target:"房田科技",flow:"媳妇"}],categories:[{name:"公司"},{name:"客户"}],force:{repulsion:100,edgeLength:120},lineStyle:{normal:{opacity:.5,width:2,curveness:0}}}]};m.setOption(g),m.on("click",function(e){})}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("humanMap",{url:"/percenter/humanmap",cache:!1,templateUrl:"views/tabs/perCenter/humanMap/humanMap.html",controller:"humanMapCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("infoDetailCtl",["appUtils","$timeout","$ionicHistory","$rootScope","$scope","$http","$Factory","$stateParams",function(t,n,o,c,i,e,a,u){i.back=function(){t.back()},i.$on("$ionicView.enter",function(){e.get(a.Account.getuserinfo.url).then(function(t){i.myinfo=t.data}).catch(function(t){})}),i.name=u.name}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("infoDetail",{url:"/percenter/infodetail",templateUrl:"views/tabs/perCenter/infoDetail/infoDetail.html",controller:"infoDetailCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myAccountCtl",["appUtils","enterViewLoad","$localStorage","$ionicModal","$timeout","$scope","$stateParams","$http","$Factory",function(o,t,a,n,e,c,i,l,u){c.back=function(){o.back()},c.$on("$ionicView.enter",function(){l.post(u.Money.money.url).then(function(o){c.myBalance=(o.data.Total/100).toFixed(2),c.disCount=(o.data.DisTotal/100).toFixed(2),c.pageData=o.data}).catch(function(o){})}),n.fromTemplateUrl("my_account_rule_modal",{scope:c,animation:"slide-in-left"}).then(function(o){c.modal=o}),c.showModal=function(o){c.ruleType=o,c.modal.show()},c.closeModal=function(){c.modal.hide()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("myAccount",{url:"/percenter/myaccount",templateUrl:"views/tabs/perCenter/myAccount/myAccount.html",controller:"myAccountCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myBusinessCtl",["$myBusinessData","WechatService","wechatLinkBase","actionImgShow","upImgBase","appUtils","enterViewLoad","$rootScope","$state","$ionicModal","$localStorage","$ionicPopover","$ionicScrollDelegate","$http","$Factory","$scope","$timeout",function(n,o,a,i,t,r,s,e,c,l,d,m,u,p,f,h,g){h.back=function(){r.back()},h.$on("$ionicView.enter",function(){h.myPoster=n.myPoster,h.initData(),g(function(){"tabs.perCenter"!=e.fromStateName&&"mallMine"!=e.fromStateName||("intro"===n.tag?(h.mySwiper.slideTo(0,500,!1),h.swiperActiveIndex=0):"dynamic"===n.tag&&(h.mySwiper.slideTo(4,500,!1),h.swiperActiveIndex=4))})}),h.currentBG="rgba(17,17,17,0)",h.swiperActiveIndex=0,h.mySwiper=new Swiper(".mybusiness-swiper-container",{direction:"vertical",noSwiping:!0,noSwipingClass:"stop-swiping",on:{slideChangeTransitionStart:function(){},slideChangeTransitionEnd:function(){h.swiperActiveIndex=this.activeIndex,0==this.activeIndex?g(function(){h.currentBG="rgba(17,17,17,0)"}):g(function(){h.currentBG="rgba(17,17,17,1)"})}}}),h.delegate=u.$getByHandle("my-business-Scroll"),h.myBusinessListen=function(){try{h.contentScrollTop=h.delegate.getScrollPosition().top}catch(t){}},h.swipeUp=function(){h.mySwiper.slideNext()},h.swipeDown=function(){h.contentScrollTop&&!(h.contentScrollTop<0)||h.stopSlide||h.mySwiper.slidePrev()},l.fromTemplateUrl("mybusiness_switch_modal",{scope:h,animation:"slide-in-down"}).then(function(t){h.switchModal=t}),h.showSwitchModal=function(){h.switchModal.show()},h.closeSwitchModal=function(){h.switchModal.hide()},h.switchItem="timeline",h.switchItemTo=function(t){h.switchItem=t,h.delegate.resize()},h.initData=function(){h.myselfInfo=d.myselfInfo,p.post(f.Zone.home.url+"?uid=0",{type:0}).then(function(t){for(var e=0;e<t.data.length;e++)10==t.data[e].Type?h.dynamicData=t.data[e].List.filter(function(t){return r.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},h.myselfInfo?t.agreed=0<=t.AgressUsers.indexOf(h.myselfInfo.Id):t.agreed=!1,t.showCom=!1,t}):20==t.data[e].Type?h.imagesData=t.data[e].List:21==t.data[e].Type?h.albumList=t.data[e].List.filter(function(t){return t.Content?t.Content=t.Content.split("|"):t.Content=[],t}):30==t.data[e].Type?h.videosData=t.data[e].List.filter(function(t){return r.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},h.myselfInfo?t.agreed=0<=t.AgressUsers.indexOf(h.myselfInfo.Id):t.agreed=!1,t.showCom=!1,t}):31==t.data[e].Type?h.vcrData=t.data[e].List.filter(function(t){return r.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},t}):40==t.data[e].Type?t.data[e].List.length?h.articleData=t.data[e].List.filter(function(t){return r.isJsonString(t.ShowInList)&&(t.ShowInList=JSON.parse(t.ShowInList)),t}):h.articleData=[]:60==t.data[e].Type?0<t.data[e].List.length&&(r.isJsonString(t.data[e].List[0].Content)&&(h.honorImageUrl=JSON.parse(t.data[e].List[0].Content).Options[0].ImgUrl),h.honorImageId=t.data[e].List[0].Id):50==t.data[e].Type&&0<t.data[e].List.length&&(r.isJsonString(t.data[e].List[0].Content)&&(h.posterImageUrl=JSON.parse(t.data[e].List[0].Content).Options[0].ImgUrl),h.posterImageId=t.data[e].List[0].Id)}).catch(function(){s.customload("加载数据失败")})};var y=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,!1)[e]},I=document.getElementById("myhonor_free_content");I.offsetWidth,I.offsetHeight;function w(c){c.style.top=y(c,"top"),c.style.left=y(c,"left");var l=new Hammer.Manager(c),t=new Hammer.Pinch,e=new Hammer.Rotate,n=new Hammer.Pan;t.recognizeWith(e),l.add([t,e,n]),l.get("pan").set({direction:Hammer.DIRECTION_ALL});var o=0,a=0;l.on("panstart",function(t){h.currentMaxIndex++,c.style.zIndex=h.currentMaxIndex,o=parseInt(c.style.left),a=parseInt(c.style.top),h.stopSlide=!0}),l.on("panmove",function(t){g(function(){a+t.deltaY<-30?c.style.top="-30px":300<a+t.deltaY?c.style.top="300px":c.style.top=a+t.deltaY+"px",o+t.deltaX<-10?c.style.left="-10px":345<o+t.deltaX?c.style.left="345px":c.style.left=o+t.deltaX+"px"})}),l.on("panend",function(t){h.stopSlide=!1}),l.on("pinchstart rotatestart",function(t){h.currentMaxIndex++,c.style.zIndex=h.currentMaxIndex,h.stopSlide=!0;var o=t.scale,a=t.rotation,e=y(c,"transform").split("(")[1].split(")")[0].split(","),n=e[0],i=e[1],r=(e[2],e[3],Math.sqrt(n*n+i*i)),s=Math.round(Math.atan2(i,n)*(180/Math.PI));l.on("pinchmove rotatemove",function(t){var e=t.scale-o+r,n=t.rotation-a+s;c.style.transform="scale("+e+") rotate("+n+"deg)",c.style.webkitTransform="scale("+e+") rotate("+n+"deg)",l.on("pinchend rotateend",function(t){c.style.transform="scale("+e+") rotate("+n+"deg)",c.style.webkitTransform="scale("+e+") rotate("+n+"deg)",h.stopSlide=!1}),t.preventDefault()}),t.preventDefault()})}h.currentMaxIndex=1,h.cancelHonor=function(){h.imgsList=[]},h.saveHonor=function(){s.load(),html2canvas(document.querySelector("#myhonor_free_content")).then(function(t){document.body.appendChild(t);var e=t.toDataURL("image/png");h.saveScreenShot(e),document.body.removeChild(t)})},h.saveScreenShot=function(t){p.post(f.Account.upload.url,{path:"18/businesscard/honor",file:t}).then(function(t){if(0==t.data.error){var e={Width:375,Height:413,Options:[{DrawingType:1,Top:0,Left:0,ZIndex:-100,Rotate:0,Width:375,Height:413,ImgUrl:t.data.view}]},n={Content:JSON.stringify(e),Type:60,Id:h.honorImageId||""};p.post(f.Zone.save.url,n).then(function(t){s.customload("保存成功"),h.initData(),h.imgsList=[]}).catch(function(){s.customload("保存失败")})}}).catch(function(t){s.customload("图片上传失败")})},h.imgsList=[],h.honorPhotoChoose=function(){h.imgsList=[];r.photoLiberary({selectMode:100,maxSelectCount:9,maxSelectSize:188743680,quality:100},function(t){h.imgsList.push(t)},function(t){s.customload("获取图片失败")})},h.startDrag=function(){for(var t=0;t<h.imgsList.length;t++){var e=document.getElementById("imgid-"+t);w(e),e.classList.add("zoomIn")}};var v=document.getElementById("myposter_free_content"),S=v.offsetWidth,T=v.offsetHeight;h.posterPhotoChoose=function(){try{var t={selectMode:100,maxSelectCount:1,maxSelectSize:188743680};document.addEventListener("deviceready",function(){MediaPicker.getMedias(t,function(t){for(var e="",n=0;n<t.length;n++)e=t[n].path;MediaPicker.getExifForKey(e,"Orientation",function(t){c.go("busintroImgCut",{imgurl:e,orientation:t})},function(t){})},function(t){err(t)})},!1)}catch(t){}},h.savePoster=function(){var t={Width:S,Height:T,Options:[{DrawingType:1,Top:0,Left:0,ZIndex:-100,Rotate:0,Width:S,Height:T,ImgUrl:h.myPoster}]},e={Content:JSON.stringify(t),Type:50,Id:h.posterImageId||""};p.post(f.Zone.save.url,e).then(function(t){s.customload("保存成功"),h.initData(),h.myPoster="",n.myPoster=""}).catch(function(){s.customload("保存失败")})},h.cancelPoster=function(){h.myPoster="",n.myPoster=""},m.fromTemplateUrl("businesscard_add_content_popover.html",{scope:h}).then(function(t){h.addpopover=t}),h.openAddTLPopover=function(t){h.addpopover.show(t)},h.closeAddTLPopover=function(){h.addpopover.hide()},m.fromTemplateUrl("del_time_line_popover.html",{scope:h}).then(function(t){h.popover=t}),h.openDelTLPopover=function(t,e,n){h.popover.show(t),h.delTLItem={item:e,index:n}},h.closeDelTLPopover=function(){h.popover.hide()},h.deleteTL=function(){h.closeDelTLPopover(),p.post(f.Zone.delete.url+"?id="+h.delTLItem.item.Id).then(function(t){s.customload("删除成功"),h.delegate.resize(),10==h.delTLItem.item.Type?h.dynamicData.splice(h.delTLItem.index,1):40==h.delTLItem.item.Type&&h.articleData.splice(h.delTLItem.index,1)}).catch(function(){s.customload("删除失败")})},l.fromTemplateUrl("mybusiness_addalbum_modal",{scope:h,animation:"slide-in-left"}).then(function(t){h.Modal=t}),h.showModal=function(){h.Modal.show()},h.closeModal=function(){h.Modal.hide()},h.addAlbumData={Title:""},h.addAlbum=function(){h.addAlbumData.Title?p.post(f.Zone.save.url,{Title:h.addAlbumData.Title,Type:21}).then(function(t){s.customload("新建成功"),h.initData(),h.closeModal()}).catch(function(){s.customload("新建相册失败")}):s.customload("请输入相册名称")},h.showBigImg=function(t,e){for(var n=new Array,o=0;o<t.length;o++){var a=new Image;a.src=t[o],a.onload=void(n[o]=a)}i.show({larImgs:n,currentImg:e,imgClose:function(){i.close()}})},h.agreeTl=function(e){p.post(f.Zone.agree.url+"?id="+e.Id).then(function(t){e.agreed=!0,s.customload("点赞成功")}).catch(function(){s.customload("点赞失败")})},h.replyData={data:""},h.clickComment=function(t){h.showBotReply=!h.showBotReply,h.replyTo=t},h.replyComment=function(){h.replyData.data&&p.post(f.Zone.save.url,{type:70,ParentId:h.replyTo.Id,Content:h.replyData.data}).then(function(t){h.initData(),h.replyData.data=""}).catch(function(){h.replyData.data="",s.customload("评论失败")})},h.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(t){g(function(){h.keyboardHeight&&h.keyboardHeight==t.keyboardHeight||(h.keyboardHeight=t.keyboardHeight),h.keyboardShow=!0})}),window.addEventListener("native.keyboardhide",function(t){g(function(){h.keyboardShow=!1,h.showBotReply=!1})}),l.fromTemplateUrl("my_business_card_share_modal",{scope:h,animation:"slide-in-up"}).then(function(t){h.shareModal=t}),h.showBottomShareModal=function(){h.shareModal.show()},h.closeBottomShareModal=function(){h.shareModal.hide()},h.share=function(e){if(h.shareImgUrl=h.posterImageUrl||h.honorImageUrl||"http://imgs.wujiuyun.com/images/logo.png",0==e||1==e)a.changeBase(h.shareImgUrl,function(t){h.params={scene:e,message:{title:"我的房田空间",thumb:t,description:"为您推荐房田空间",media:{type:Wechat.Type.LINK,webpageUrl:r.shareHost+"/#/percenter/hisbusinesscard/params/"+h.myselfInfo.Id}}},o.share(h.params)});else{var t={};if(t.url=r.shareHost+"/#/percenter/hisbusinesscard/params/"+h.myselfInfo.Id,t.title="我的房田空间",t.description="为您推荐房田空间",2==e)t.imageUrl=h.shareImgUrl,t.appName="房田",r.qqShareQQAndroid(t,function(){},function(t){});else{var n=[h.shareImgUrl];t.imageUrl=n,YCQQ.shareToQzone(function(){},function(t){},t)}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(s){s.state("myBusiness",{url:"/percenter/mybusiness",templateUrl:"views/tabs/perCenter/myBusiness/myBusiness.html",controller:"myBusinessCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myBusinessCardCtl",["WechatService","wechatLinkBase","actionImgShow","upImgBase","appUtils","enterViewLoad","$rootScope","$stateParams","$ionicModal","$localStorage","$ionicPopover","$ionicScrollDelegate","$http","$Factory","$scope","$timeout",function(n,a,r,t,i,s,e,o,c,l,d,u,p,f,h,m){h.back=function(){i.back()},h.delegate=u.$getByHandle("my-business-card-Scroll"),h.scroll_onepage_height=window.innerHeight-61,h.scrollToIntro=function(){m(function(){h.delegate.scrollTo(0,0,!0)})},h.scrollToHonor=function(){m(function(){h.delegate.scrollTo(0,h.scroll_onepage_height,!0)})},h.scrollToOther=function(){m(function(){h.delegate.scrollTo(0,2*h.scroll_onepage_height,!0)})},h.otherSwipeDown=function(){h.lastST<2*h.scroll_onepage_height&&h.scrollToHonor()},h.$on("$ionicView.enter",function(){h.scroll_onepage_height=window.innerHeight-61,m(function(){"tabs.perCenter"==e.fromStateName&&("intro"==o.tag?h.scrollToIntro():"honor"==o.tag&&h.scrollToHonor())})}),h.currentBG="rgba(17,17,17,0)",h.showAdd=!1,h.myBusinessCardListen=function(){try{var e=h.delegate.getScrollPosition().top}catch(e){}var t=0;if(30<e){var o=(e-20)/10;.97<o/10?t=1:t+=o/10,h.showAdd=!0}else h.showAdd=!1,t=0;m(function(){h.currentBG="rgba(17,17,17,"+t+")"}),h.lastST=e},h.switchItem="timeline",h.switchItemTo=function(e){h.switchItem=e},h.$on("$ionicView.enter",function(){h.initData()}),h.initData=function(){h.myselfInfo=l.myselfInfo,p.post(f.Zone.home.url+"?uid=0",{type:0}).then(function(e){for(var t=0;t<e.data.length;t++)10==e.data[t].Type?h.dynamicData=e.data[t].List.filter(function(e){return e.Content=JSON.parse(e.Content),h.myselfInfo?e.agreed=0<=e.AgressUsers.indexOf(h.myselfInfo.Id):e.agreed=!1,e.showCom=!1,e}):20==e.data[t].Type?h.imagesData=e.data[t].List:30==e.data[t].Type?h.videosData=e.data[t].List.filter(function(e){return e.Content=JSON.parse(e.Content),h.myselfInfo?e.agreed=0<=e.AgressUsers.indexOf(h.myselfInfo.Id):e.agreed=!1,e.showCom=!1,e}):40==e.data[t].Type?e.data[t].List.length?h.articleData=e.data[t].List.filter(function(e){return i.isJsonString(e.ShowInList)&&(e.ShowInList=JSON.parse(e.ShowInList)),e}):h.articleData=[]:60==e.data[t].Type?0<e.data[t].List.length&&(i.isJsonString(e.data[t].List[0].Content)&&(h.honorImageUrl=JSON.parse(e.data[t].List[0].Content).Options[0].ImgUrl),h.honorImageId=e.data[t].List[0].Id):50==e.data[t].Type&&0<e.data[t].List.length&&(i.isJsonString(e.data[t].List[0].Content)&&(h.posterImageUrl=JSON.parse(e.data[t].List[0].Content).Options[0].ImgUrl),h.posterImageId=e.data[t].List[0].Id)}).catch(function(){s.customload("加载数据失败")})};var g=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},y=document.getElementById("myhonor_free_content");y.offsetWidth,y.offsetHeight;function I(c){c.style.top=g(c,"top"),c.style.left=g(c,"left");var l=new Hammer.Manager(c),e=new Hammer.Pinch,t=new Hammer.Rotate,o=new Hammer.Pan;pan_ex=pan_ey=rota_ex=0,pin_sl=1,e.recognizeWith(t),l.add([e,t,o]),l.get("pan").set({direction:Hammer.DIRECTION_ALL});var n=0,a=0;l.on("panstart",function(e){h.currentMaxIndex++,c.style.zIndex=h.currentMaxIndex,n=parseInt(c.style.left),a=parseInt(c.style.top),h.delegate.freezeScroll(!0)}),l.on("panmove",function(e){m(function(){a+e.deltaY<-30?c.style.top="-30px":300<a+e.deltaY?c.style.top="300px":c.style.top=a+e.deltaY+"px",n+e.deltaX<-10?c.style.left="-10px":345<n+e.deltaX?c.style.left="345px":c.style.left=n+e.deltaX+"px"})}),l.on("panend",function(e){h.delegate.freezeScroll(!1)}),l.on("pinchstart rotatestart",function(e){h.currentMaxIndex++,c.style.zIndex=h.currentMaxIndex,h.delegate.freezeScroll(!0);var n=e.scale,a=e.rotation,t=g(c,"transform").split("(")[1].split(")")[0].split(","),o=t[0],r=t[1],i=(t[2],t[3],Math.sqrt(o*o+r*r)),s=Math.round(Math.atan2(r,o)*(180/Math.PI));l.on("pinchmove rotatemove",function(e){var t=e.scale-n+i,o=e.rotation-a+s;c.style.transform="scale("+t+") rotate("+o+"deg)",c.style.webkitTransform="scale("+t+") rotate("+o+"deg)",l.on("pinchend rotateend",function(e){c.style.transform="scale("+t+") rotate("+o+"deg)",c.style.webkitTransform="scale("+t+") rotate("+o+"deg)",h.delegate.freezeScroll(!1)}),e.preventDefault()}),e.preventDefault()})}h.currentMaxIndex=1,h.cancelHonor=function(){h.imgsList=[]},h.saveHonor=function(){s.load(),html2canvas(document.querySelector("#myhonor_free_content")).then(function(e){document.body.appendChild(e);var t=e.toDataURL("image/png");h.saveScreenShot(t),document.body.removeChild(e)})},h.saveScreenShot=function(e){p.post(f.Account.upload.url,{path:"18/businesscard/honor",file:e}).then(function(e){if(0==e.data.error){var t={Width:375,Height:413,Options:[{DrawingType:1,Top:0,Left:0,ZIndex:-100,Rotate:0,Width:375,Height:413,ImgUrl:e.data.view}]},o={Content:JSON.stringify(t),Type:60,Id:h.honorImageId||""};p.post(f.Zone.save.url,o).then(function(e){s.customload("保存成功"),h.initData(),h.imgsList=[]}).catch(function(){s.customload("保存失败")})}}).catch(function(){s.customload("图片上传失败")})},h.imgsList=[],$("#test_pick_imgs").change(function(){var e=$(this)[0].files[0];t.changeBase(URL.createObjectURL(e),function(e){h.imgsList.push(e)})}),h.honorPhotoChoose=function(){h.imgsList=[];i.photoLiberary({selectMode:100,maxSelectCount:9,maxSelectSize:188743680,quality:100},function(e){m(function(){h.imgsList.push(e)})},function(e){s.customload("获取图片失败")})},h.startDrag=function(){for(var e=0;e<h.imgsList.length;e++){I(document.getElementById("imgid-"+e))}};var v=document.getElementById("myposter_free_content"),w=v.offsetWidth,L=v.offsetHeight;h.posterPhotoChoose=function(){i.photoLiberary({selectMode:100,maxSelectCount:1,maxSelectSize:188743680,quality:100},function(e,t){p.post(f.Account.upload.url,{path:"18/businesscard/poster",file:e,orientation:t}).then(function(e){0==e.data.error&&(h.myPoster=e.data.view)}).catch(function(){s.customload("图片上传失败")})},function(e){s.customload("获取图片失败")})},h.savePoster=function(){var e={Width:w,Height:L,Options:[{DrawingType:1,Top:0,Left:0,ZIndex:-100,Rotate:0,Width:w,Height:L,ImgUrl:h.myPoster}]},t={Content:JSON.stringify(e),Type:50,Id:h.posterImageId||""};p.post(f.Zone.save.url,t).then(function(e){s.customload("保存成功"),h.initData(),h.myPoster=""}).catch(function(){s.customload("保存失败")})},h.cancelPoster=function(){h.myPoster=""},d.fromTemplateUrl("businesscard_add_content_popover.html",{scope:h}).then(function(e){h.addpopover=e}),h.openAddTLPopover=function(e){h.addpopover.show(e)},h.closeAddTLPopover=function(){h.addpopover.hide()},d.fromTemplateUrl("del_time_line_popover.html",{scope:h}).then(function(e){h.popover=e}),h.openDelTLPopover=function(e,t,o){h.popover.show(e),h.delTLItem={item:t,index:o}},h.closeDelTLPopover=function(){h.popover.hide()},h.deleteTL=function(){h.closeDelTLPopover(),p.post(f.Zone.delete.url+"?id="+h.delTLItem.item.Id).then(function(e){s.customload("删除成功"),h.dynamicData.splice(h.delTLItem.index,1),h.delegate.resize()}).catch(function(){s.customload("删除失败")})},h.showBigImg=function(e,t){for(var o=new Array,n=0;n<e.length;n++){var a=new Image;a.src=e[n],a.onload=void(o[n]=a)}r.show({larImgs:o,currentImg:t,imgClose:function(){r.close()}})},h.agreeTl=function(t){p.post(f.Zone.agree.url+"?id="+t.Id).then(function(e){t.agreed=!0,s.customload("点赞成功")}).catch(function(){s.customload("点赞失败")})},h.replyData={data:""},h.clickComment=function(e){h.showBotReply=!h.showBotReply,h.replyTo=e},h.replyComment=function(){h.replyData.data&&p.post(f.Zone.save.url,{type:70,ParentId:h.replyTo.Id,Content:h.replyData.data}).then(function(e){h.initData(),h.replyData.data=""}).catch(function(){h.replyData.data="",s.customload("评论失败")})},h.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(e){m(function(){h.keyboardHeight&&h.keyboardHeight==e.keyboardHeight||(h.keyboardHeight=e.keyboardHeight),h.keyboardShow=!0})}),window.addEventListener("native.keyboardhide",function(e){m(function(){h.keyboardShow=!1,h.showBotReply=!1})}),c.fromTemplateUrl("my_business_card_share_modal",{scope:h,animation:"slide-in-up"}).then(function(e){h.shareModal=e}),h.showBottomShareModal=function(){h.shareModal.show()},h.closeBottomShareModal=function(){h.shareModal.hide()},h.share=function(t){if(h.shareImgUrl=h.posterImageUrl||h.honorImageUrl||"http://imgs.wujiuyun.com/images/logo.png",0==t||1==t)a.changeBase(h.shareImgUrl,function(e){h.params={scene:t,message:{title:"我的房田空间",thumb:e,description:"为您推荐房田空间",media:{type:Wechat.Type.LINK,webpageUrl:i.shareHost+"/#/percenter/hisbusinesscard/params/"+h.myselfInfo.Id}}},n.share(h.params)});else{var e={};if(e.url=i.shareHost+"/#/percenter/hisbusinesscard/params/"+h.myselfInfo.Id,e.title="我的房田空间",e.description="为您推荐房田空间",2==t)e.imageUrl=h.shareImgUrl,e.appName="房田",i.qqShareQQAndroid(e,function(){},function(e){});else{var o=[h.shareImgUrl];e.imageUrl=o,YCQQ.shareToQzone(function(){},function(e){},e)}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(s){s.state("myBusinessCard",{url:"/percenter/mybusinesscard/params/:tag",templateUrl:"views/tabs/perCenter/myBusinessCard/myBusinessCard.html",controller:"myBusinessCardCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myCommissionCtl",["appUtils","$Factory","$http","$scope","$state","$timeout",function(t,o,c,a,i,n){a.back=function(){t.back()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(m){m.state("myCommission",{url:"/percenter/mycommission",templateUrl:"views/tabs/perCenter/myCommission/myCommission.html",controller:"myCommissionCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myHomePageCtl",["appUtils","$ionicHistory","$http","$Factory","$scope","$state","$stateParams","$timeout","$ionicLoading",function(o,t,e,n,a,i,s,c,h){a.back=function(){o.back()},a.$on("$ionicView.enter",function(){var t={showMySex:!0,showMyJob:!0,showMyChoosePrefer:!0,showMyHouse:!0,showMyNeed:!0,showMyEvaluation:!0,showMyRecruitment:!0,showMyShop:!0,showMyTask:!0};e.get(n.Account.getuserinfo.url).then(function(o){o.data.ShowConfig=JSON.parse(o.data.ShowConfig)||t,a.myInfo=o.data}).catch(function(o){})})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("myHomePage",{url:"/percenter/myhomepage",templateUrl:"views/tabs/perCenter/myHomePage/myHomePage.html",controller:"myHomePageCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myHousesCtl",["appUtils","$location","enterViewLoad","$localStorage","$ionicScrollDelegate","$ionicListDelegate","$rootScope","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$stateParams","$ionicPopup","$timeout","$ionicActionSheet","$ionicPopover",function(e,t,i,o,a,u,n,s,l,c,r,p,d,f,y,h,v,x){function m(t){r.post(p.MyHouse.myhouse.url,d.queryData).then(function(e){(!e.data||e.data.length<=0)&&(d.haveMore=!1,d.$broadcast("scroll.infiniteScrollComplete"),t)||(d.haveMore=!0,t?(d.queryData.pagenum+=1,d.myhouseList=d.myhouseList.concat(e.data),d.$broadcast("scroll.infiniteScrollComplete")):(d.queryData.pagenum=1,d.myhouseList=e.data))}).catch(function(){d.haveMore=!1,s.show({template:"获取数据失败",duration:1500}),d.$broadcast("scroll.infiniteScrollComplete"),d.$broadcast("scroll.refreshComplete")})}d.back=function(){!l.backView()||"tabs.Home"!=l.backView().stateName&&"guessPrice"!=l.backView().stateName?c.go("tabs.perCenter"):e.back()},d.$on("$ionicView.enter",function(){d.loadData(),d.haveMore=!0}),d.$on("$ionicView.leave",function(){h(function(){u.closeOptionButtons()}),d.closeFilter()}),x.fromTemplateUrl("my_house_popover.html",{scope:d}).then(function(e){d.popover=e}),d.openPopover=function(e){d.popover.show(e)},d.closePopover=function(){d.popover.hide()},d.activeIndex=f.type?f.type-1:0,d.switchSlide=function(e){d.activeIndex=e},d.filterActiveIndex=null,d.switchFilterIndex=function(e){e==d.filterActiveIndex?d.closeFilter():d.filterActiveIndex=e},d.loadData=function(){r.get("jsonData/houseFilter/filterData.json").then(function(t){e.getCurrentDistricts(function(e){t.data.utilsDistricts=angular.extend({"不限":["不限"]},e),t.data.typeList=[{text:"二手房",value:2},{text:"租房",value:3},{text:"商铺",value:4},{text:"写字楼",value:5},{text:"全部",value:-1}],t.data.timeList=[{text:"今天",value:1},{text:"三天内",value:2},{text:"一周内",value:3},{text:"三周内",value:4},{text:"一个月内",value:5},{text:"全部",value:0}],t.data.statusList=[{text:"已认证",value:1},{text:"待认证",value:0},{text:"待审核",value:2},{text:"未通过",value:3},{text:"全部",value:-1}],d.filterData=t.data})})},d.queryTextData={query:"",type:"",date:"",antype:""},d.chooseDistrict=function(e,t){d.streetList=t,a.$getByHandle("myhouse-filter-street-scroll").scrollTop()},d.streetList=["不限"],d.chooseStreet=function(e){d.queryTextData.query=e,d.queryData.query="不限"==e?"":e,d.loadRefresh()},d.chooseType=function(e){d.queryTextData.type=e.text,d.queryData.type=e.value,d.loadRefresh()},d.chooseDate=function(e){d.queryTextData.date=e.text,d.queryData.date=e.value,d.loadRefresh()},d.chooseStatus=function(e){d.queryTextData.antype=e.text,d.queryData.antype=e.value,d.loadRefresh()},d.closeFilter=function(){d.filterActiveIndex=null},d.queryData={pagenum:0,pagesize:10,query:"",type:-1,date:0,antype:-1},d.haveMore=!0,d.myhouseList=[],d.loadMore=function(e){m(!0)},d.loadRefresh=function(e){d.queryData.pagenum=0,m(!1),d.closeFilter()},d.detailSref=function(e){"Shop"!=e.HouseType&&"Office"!=e.HouseType&&1==e.Type?c.go("sellHouseDetail",{id:e.Id}):"Shop"!=e.HouseType&&"Office"!=e.HouseType&&2==e.Type?c.go("rentHouseDetail",{id:e.Id}):"Shop"==e.HouseType?c.go("otherHouseDetail",{id:e.Id,isshop:"true"}):"Office"==e.HouseType&&c.go("otherHouseDetail",{id:e.Id,isshop:"false"})},d.editSref=function(e,t){e.stopPropagation(),"Shop"!=t.HouseType&&"Office"!=t.HouseType&&1==t.Type?c.go("addSell",{id:t.Id}):"Shop"!=t.HouseType&&"Office"!=t.HouseType&&2==t.Type?c.go("addRent",{id:t.Id}):"Shop"==t.HouseType?c.go("addShop",{id:t.Id,type:1,behaviour:t.Behaviour}):"Office"==t.HouseType&&c.go("addOther",{id:t.Id,type:2,behaviour:t.Behaviour})},d.deleteSellHouse=function(e,t){var o;"Shop"!=e.HouseType&&"Office"!=e.HouseType&&1==e.Type?o=p.NewHouseSource.delete.url+"?id="+e.Id:"Shop"!=e.HouseType&&"Office"!=e.HouseType&&2==e.Type?o=p.NewHouseSource.delete.url+"?id="+e.Id:"Shop"!=e.HouseType&&"Office"!=e.HouseType||(o=p.SimpleHouse.delete.url+"?id="+e.Id),y.confirm({title:"确定删除？",cancelText:"取消",okText:"删除"}).then(function(e){e?(d.loadData(),r.post(o).then(function(e){i.customload("删除成功"),u.closeOptionButtons(),d.myhouseList.splice(t,1)}).catch(function(){i.customload("删除失败")})):u.closeOptionButtons()})},d.showAction=function(t,o,e){var a=v.show({buttons:[{text:"详情"},{text:"编辑"},{text:"查看估价"},{text:"房源评测"}],destructiveText:"删除",cancelText:"取消",destructiveButtonClicked:function(){a()},cancel:function(){},buttonClicked:function(e){return 2==e?"sell"==o?void c.go("tabs.systemPrice",{query:t.CommunityName,space:t.Space,houseid:t.Id}):(i.customload("暂时对二手房开发"),!0):3!=e||("sell"==o||"rent"==o?void c.go("tabs.evaluationList",{houseid:t.Id}):(i.customload("暂时对二手房和租房开发"),!0))}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("myHouses",{url:"/percenter/myhouses/:type",templateUrl:"views/tabs/perCenter/myHouses/myHouses.html",controller:"myHousesCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myInfoQrcodeCtl",["NimUtils","appUtils","enterViewLoad","$http","$Factory","$stateParams","$location","$rootScope","$timeout","$scope",function(o,t,e,n,c,a,f,i,l,r){if(r.back=function(){t.back()},a.id&&n.post(c.Account.showinfo.url+"?id="+a.id).then(function(o){r.hisInfo=o.data}).catch(function(){}),o.myselfInfo){r.myselfInfo=o.myselfInfo;var d=a.id||o.myselfInfo.account;new QRCode(document.getElementById("my_info_qrcode_detail"),{text:"http://app.fang-tian.com/app/#/downloadpage/fangtian_"+d,width:200,height:200,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}else e.customload("登录超时请重新登录！")}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("myInfoQrcode",{url:"/percenter/myinfoqrcode/params/:id",cache:!1,templateUrl:"views/tabs/perCenter/myInfoQrcode/myInfoQrcode.html",controller:"myInfoQrcodeCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myNeedsCtl",["appUtils","enterViewLoad","$ionicPopup","$ionicActionSheet","$ionicLoading","$Factory","$http","$scope","$rootScope","$state","$stateParams","$ionicPopover","$timeout",function(e,o,n,i,t,u,c,s,a,d,l,p,r){s.back=function(){e.back()},s.$on("$ionicView.enter",function(){"buy"==l.needtype?(s.isBuy=!0,s.headTitle="求购"):(s.isBuy=!1,s.headTitle="求租");var e=0;s.transform="rotate(0deg)",s.switchBuySell=function(){e+=180,s.transform="rotate("+e+"deg)",s.isBuy?(s.isBuy=!1,s.headTitle="求租",s.houseType=2):(s.isBuy=!0,s.headTitle="求购",s.houseType=0),s.loadNeeds(s.houseType)},s.houseType=0,s.switchHouseType=function(e){s.houseType=e,s.loadNeeds(s.houseType)},s.loadNeeds(s.houseType)}),s.loadNeeds=function(e){c.get(u.HouseNeed.query.url,{params:{Type:e}}).then(function(e){s.needList=e.data}).catch(function(){t.show({template:"获取数据失败",duration:1500})})},s.showAction=function(t){var e=i.show({buttons:[{text:"详情"},{text:"编辑"}],destructiveText:"删除",cancelText:"取消",destructiveButtonClicked:function(){n.confirm({title:"确定删除？",cancelText:"取消",okText:"删除"}).then(function(e){e&&c.post(u.HouseNeed.delete.url,t).then(function(e){o.customload("删除成功"),s.loadNeeds(s.houseType)}).catch(function(){o.customload("删除失败")})}),e()},cancel:function(){},buttonClicked:function(e){return 0==e?d.go("needDetail",{id:t}):s.isBuy?d.go("addBuyNeed",{type:s.houseType,id:t}):d.go("addRentNeed",{type:s.houseType,id:t}),!0}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("myNeeds",{url:"/percenter/myneeds/:needtype/:housetype",templateUrl:"views/tabs/perCenter/myNeeds/myNeeds.html",controller:"myNeedsCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myPointsCtl",["appUtils","$timeout","$scope","$state",function(t,o,c,n){c.back=function(){t.back()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("myPoints",{url:"/percenter/mypoints",cache:!1,templateUrl:"views/tabs/perCenter/myPoints/myPoints.html",controller:"myPointsCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("mySafeCtl",["appUtils","$rootScope","$ionicModal","$ionicLoading","$ionicHistory","$timeout","$scope","$stateParams","$http","$Factory",function(t,o,n,i,c,e,a,u,p,r){a.back=function(){t.back()},a.data={topicContentList:[1,22,34]},e(function(){a.data.topicContentList.push(333)},3e3),Sortable.create(document.getElementById("items"),{group:{name:"words",pull:"clone",put:!0},animation:150,onAdd:function(t){},onUpdate:function(t){},onRemove:function(t){},onStart:function(t){},onSort:function(t){},onEnd:function(t){}})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("mySafe",{url:"/percenter/mysafe",templateUrl:"views/tabs/perCenter/mySafe/mySafe.html",controller:"mySafeCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myRecommendCtl",["appUtils","wechatLinkBase","WechatService","$localStorage","$ionicModal","$rootScope","$ionicHistory","$timeout","$scope","$stateParams","$http","$Factory","$ionicLoading",function(r,e,l,m,o,a,t,n,c,i,s,d,h){c.back=function(){r.back()},c.$on("$ionicView.enter",function(){c.getData(),c.createModal()}),c.$on("$ionicView.leave",function(){c.modal.remove(),c.shareModal.remove()}),c.myId=m.myselfInfo.Id,c.getData=function(){s.post(d.Account.gethier.url).then(function(e){e.data.total=(e.data.total/100).toFixed(2),c.myInvitation=e.data})},c.createModal=function(){o.fromTemplateUrl("vip_rule_modal",{scope:c,animation:"slide-in-left"}).then(function(e){c.modal=e}),c.showModal=function(){c.modal.show()},c.closeModal=function(){c.modal.hide()},o.fromTemplateUrl("my_recommend_share_modal",{scope:c,animation:"slide-in-up"}).then(function(e){c.shareModal=e}),c.showBottomShareModal=function(){c.shareModal.show()},c.closeBottomShareModal=function(){c.shareModal.hide()}},c.myinfo=m.myselfInfo,c.ParPhone=window.btoa(m.myselfInfo.UserName),c.share=function(o){if(c.shareImgUrl=d.Account.qcode.url+"?id="+m.myselfInfo.Id,0==o||1==o){var a=document.createElement("canvas");a.width=375,a.height=468;var t=a.getContext("2d"),n=new Image;n.src=c.shareImgUrl,n.onload=function(){t.drawImage(n,0,0,375,468);var e=a.toDataURL("image/png");c.params={scene:o,message:{title:"【房田网】为您推荐",thumb:e,description:"Discription",media:{type:Wechat.Type.IMAGE,image:e}}},l.share(c.params)}}else if(2==o){(e={}).url=r.shareHost+"/#/shareregister/"+c.ParPhone,e.title=c.myinfo.Name||"房田用户",e.description=c.myinfo.Name+"邀您上房田",e.imageUrl=c.shareImgUrl,e.appName="房田网",r.qqShareQQAndroid(e,function(){},function(e){})}else{var e;(e={}).url=r.shareHost+"/#/shareregister/"+c.ParPhone,e.title=c.myinfo.Name||"房田用户",e.description=c.myinfo.Name+"邀您上房田";var i=[c.shareImgUrl];e.imageUrl=i,YCQQ.shareToQzone(function(){},function(e){},e)}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("myRecommend",{url:"/percenter/myrecommend",templateUrl:"views/tabs/perCenter/myRecommend/myRecommend.html",controller:"myRecommendCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myTaskCtl",["appUtils","enterViewLoad","$timeout","$rootScope","$scope","$stateParams","$http","$Factory",function(t,o,a,e,c,r,n,p){c.back=function(){t.back()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("myTask",{url:"/percenter/mytask",cache:!1,templateUrl:"views/tabs/perCenter/myTask/myTask.html",controller:"myTaskCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("openVipCtl",["appUtils","enterViewLoad","$ionicActionSheet","$ionicScrollDelegate","$ionicSlideBoxDelegate","$ionicHistory","$timeout","$scope","$rootScope","$state","$stateParams","$http","$Factory",function(e,i,t,n,a,l,c,r,o,p,u,s,v){r.back=function(){e.back()},r.$on("$ionicView.enter",function(){r.getLevel()}),r.getLevel=function(){s.get(v.Account.getuserinfo.url).then(function(e){switch(r.currentRole=e.data.Role,e.data.Role){case"普通":r.currentVipLevel=0;break;case"白银":r.currentVipLevel=1;break;case"黄金":r.currentVipLevel=2;break;case"铂金":r.currentVipLevel=3;break;case"钻石":r.currentVipLevel=4;break;case"股东":r.currentVipLevel=5;break;default:r.currentVipLevel=0}r.currentClass="personal",r.roleDay=e.data.RoleDay}).catch(function(e){r.currentVipLevel=0,r.currentClass="personal"}),s.get(v.ReChange.query.url).then(function(e){r.chooseableVip=e.data;for(var t=0;t<e.data.length;t++)"个人会员"==e.data[t].Title?r.personPrice=(e.data[t].TotalFee/100).toFixed(2):"团队首领"==e.data[t].Title?r.teamPrice=(e.data[t].TotalFee/100).toFixed(2):"商户老板"==e.data[t].Title?r.shopPrice=(e.data[t].TotalFee/100).toFixed(2):"企业主"==e.data[t].Title&&(r.businessPrice=(e.data[t].TotalFee/100).toFixed(2))}).catch(function(e){})},r.goPayVip=function(){if(r.wantVipLevel<=r.currentVipLevel){var e="个人会员";1==r.currentVipLevel?e="个人会员":2==r.currentVipLevel?e="团队首领":3==r.currentVipLevel?e="商户老板":4==r.currentVipLevel&&(e="企业主"),i.customload("您已开通"+e)}else{var t={productid:"",price:"",vipname:""},n=r.wantVipLevel-r.currentVipLevel-1;t.productid=r.chooseableVip[n].Id,t.price=r.chooseableVip[n].TotalFee,t.vipname=r.chooseableVip[n].Title,p.go("tabs.payVip",t)}},r.vipLevelImgs=["imgs/viplevel/个人会员.png","imgs/viplevel/团队首领.png","imgs/viplevel/商户老板.png","imgs/viplevel/企业主.png"],r.wantVipLevel=1,r.changeindex=function(){r.wantVipLevel=a.$getByHandle("vip-level-slide-handle").currentIndex()+1,n.resize(),1==r.wantVipLevel?r.currentClass="personal":2==r.wantVipLevel?r.currentClass="team":3==r.wantVipLevel?r.currentClass="shop":4==r.wantVipLevel&&(r.currentClass="company")},r.prePage=function(){a.$getByHandle("vip-level-slide-handle").previous()},r.nextPage=function(){a.$getByHandle("vip-level-slide-handle").next()},r.applyMoney=function(){t.show({buttons:[{text:"申请退款"}],cancelText:"取消",cancel:function(){},buttonClicked:function(e){return s.post(v.WaitReceive.refound.url).then(function(){i.customload("申请成功")}).catch(function(){i.customload("操作失败")}),!0}})}}]).filter("cutVipName",function(){return function(e){return e?e.slice(0,-1):""}});
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("openVip",{url:"/percenter/openvip",templateUrl:"views/tabs/perCenter/openVip/openVip.html",controller:"openVipCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("productDetailCtl",["appUtils","$ionicLoading","$ionicHistory","$timeout","$rootScope","$scope","$stateParams","$http","$Factory",function(o,t,n,c,i,a,u,s,e){a.back=function(){o.back()},a.goodsCount=1,a.changeGoodsCount=function(o){o?a.goodsCount++:a.goodsCount--}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("tabs.productDetail",{url:"/percenter/productdetail",cache:!1,views:{mine:{templateUrl:"views/tabs/perCenter/productDetail/productDetail.html",controller:"productDetailCtl"}},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("realHouseListCtl",["appUtils","$location","enterViewLoad","$ionicScrollDelegate","$localStorage","$rootScope","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$stateParams","$ionicPopup","$timeout","$ionicActionSheet",function(e,a,t,o,r,s,c,l,n,i,u,p,h,d,f,m){p.back=function(){e.back()},p.pageType=1,p.changePageType=function(e){p.pageType=e},p.queryData={pagesize:10,pagenum:0},p.myOldList=[],p.haveMore=!0,p.loadData=function(a){i.post(u.NewHouseSource.query.url+"?housetype=1",p.queryData).then(function(e){e.data.length<=0&&(p.haveMore=!1,p.$broadcast("scroll.infiniteScrollComplete"),a)||(p.haveMore=!0,a?(p.queryData.pagenum+=1,p.myOldList=p.myOldList.concat(e.data),p.$broadcast("scroll.infiniteScrollComplete")):(p.queryData.pagenum+=1,p.myOldList=e.data,p.$broadcast("scroll.refreshComplete")))}).catch(function(){p.haveMore=!1,t.customload("获取失败"),p.$broadcast("scroll.infiniteScrollComplete"),p.$broadcast("scroll.refreshComplete")})},p.houseLoadMore=function(){p.loadData(!0)},p.houseRefresh=function(){p.queryData.pagenum=0,p.loadData(!1)},p.shopQueryData={pagesize:10,pagenum:0,type:1,behaviour:1},p.myShopList=[],p.shopHaveMore=!0,p.loadShopData=function(o){i.post(u.SimpleHouse.selfquery.url,p.shopQueryData).then(function(e){if(!(e.data.length<=0&&(p.shopHaveMore=!1,p.$broadcast("scroll.infiniteScrollComplete"),o))){p.shopHaveMore=!0;var a=e.data.filter(function(e){return 1==e.Behaviour});o?(p.shopQueryData.pagenum+=1,p.myShopList=p.myShopList.concat(a),p.$broadcast("scroll.infiniteScrollComplete")):(p.shopQueryData.pagenum+=1,p.myShopList=a,p.$broadcast("scroll.refreshComplete"))}}).catch(function(){p.shopHaveMore=!1,t.customload("获取失败"),p.$broadcast("scroll.infiniteScrollComplete"),p.$broadcast("scroll.refreshComplete")})},p.shopLoadMore=function(){p.loadShopData(!0)},p.shopRefresh=function(){p.shopQueryData.pagenum=0,p.loadShopData(!1)},p.showAction=function(o,t){var e="去认证";switch(o.AuthStatus){case 0:e="去认证";break;case 1:e="审核中";break;case 2:e="已认证";break;case 3:e="认证不通过";break;case 4:e="已提交";break;default:e="去认证"}m.show({buttons:[{text:e}],cancelText:"取消",cancel:function(){},buttonClicked:function(e){if(0==e&&(0==o.AuthStatus||3==o.AuthStatus)){var a=1;a=1==t?1:2,n.go("realHouse",{id:o.Id,address:o.Address,housetype:a})}return!0}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("realHouseList",{url:"/percenter/realhouselist",templateUrl:"views/tabs/perCenter/realHouseList/realHouseList.html",controller:"realHouseListCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("tradeDoneCtl",["upImgBase","appUtils","$rootScope","$http","$Factory","$state","$stateParams","$scope","$timeout","$ionicLoading",function(t,e,a,o,n,i,c,d,r,l){d.back=function(){e.back()};var u={method:"POST",url:n.NewHouseTrade.getdetail.url,headers:{"Content-Type":"application/json"},data:{ProxerId:c.proxerid,BuyerId:c.buyerid,NewHouseId:c.houseid}};o(u).then(function(e){d.detailData=e.data}),$("#trade_done .choose-img-click").on("click",".img",function(){$(this).next().click()}),$("#trade_done .choose-img-click").on("change","input",function(){var e=$(this)[0].files[0];t.changeBase(URL.createObjectURL(e),function(e){var t={method:"POST",url:n.Account.upload.url,headers:{"Content-Type":"application/json"},data:{path:"18/tradeDone",file:e}};o(t).then(function(e){d.detailData.ShowDoneImage.push(e.data.view),d.detailData.DoneImage.push(e.data.url)})})}),d.remove=function(e){d.detailData.DoneImage.splice(e,1),d.detailData.ShowDoneImage.splice(e,1)},d.save=function(){if(d.detailData.DoneImage.length<1)l.show({template:"请至少选择一张图片",duration:1500});else{var e={method:"POST",url:n.NewHouseTrade.traded.url,headers:{"Content-Type":"application/json"},data:d.detailData};o(e).then(function(e){l.show({template:"提交成功",duration:1500}),r(function(){a.$ionicGoBack()},1500)}).catch(function(){l.show({template:"提交失败",duration:1500})})}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("tradeDone",{url:"/percenter/tradedone/:proxerid/:buyerid/:houseid",templateUrl:"views/tabs/perCenter/tradeDone/tradeDone.html",controller:"tradeDoneCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("visitDoneCtl",["wechatLinkBase","upImgBase","appUtils","$rootScope","$http","$Factory","$state","$stateParams","$scope","$timeout","$ionicLoading",function(t,e,a,o,i,n,c,l,s,u,d){s.back=function(){a.back()};var r={method:"POST",url:n.NewHouseTrade.getdetail.url,headers:{"Content-Type":"application/json"},data:{ProxerId:l.proxerid,BuyerId:l.buyerid,NewHouseId:l.houseid}};i(r).then(function(t){s.detailData=t.data}),$("#visit_done .choose-img-click").on("click",".img",function(){$(this).next().click()}),$("#visit_done .choose-img-click").on("change","input",function(){var t=$(this)[0].files[0];e.changeBase(URL.createObjectURL(t),function(t){var e={method:"POST",url:n.Account.upload.url,headers:{"Content-Type":"application/json"},data:{path:"18/visitDone",file:t}};i(e).then(function(t){s.detailData.ShowLookImage.push(t.data.view),s.detailData.LookImage.push(t.data.url)})})}),s.remove=function(t){s.detailData.LookImage.splice(t,1),s.detailData.ShowLookImage.splice(t,1)},s.save=function(){if(s.detailData.LookImage.length<1)d.show({template:"请至少选择一张图片",duration:1500});else{var t={method:"POST",url:n.NewHouseTrade.looked.url,headers:{"Content-Type":"application/json"},data:s.detailData};i(t).then(function(t){d.show({template:"提交成功",duration:1500}),u(function(){o.$ionicGoBack()},1500)}).catch(function(){d.show({template:"提交失败",duration:1500})})}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("visitDone",{url:"/percenter/visitdone/:proxerid/:buyerid/:houseid",templateUrl:"views/tabs/perCenter/visitDone/visitDone.html",controller:"visitDoneCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("agencyAgreementDetailCtl",["appUtils","enterViewLoad","$timeout","$localStorage","$rootScope","$http","$Factory","$state","$stateParams","$scope","$ionicLoading","$ionicHistory",function(t,e,a,o,c,n,i,r,$,g,s,l){g.back=function(){t.back()},g.agencyType=$.agencytype,g.changeStatus=function(){c.$emit("changeAgreementStatus",1),c.$ionicGoBack()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("agencyAgreementDetail",{url:"/agencyagreementdetail/:agencytype",cache:!1,templateUrl:"views/publicPage/agencyAgreement/agencyAgreementDetail/agencyAgreementDetail.html",controller:"agencyAgreementDetailCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("aboutUsCtl",["appUtils","$timeout","$rootScope","$scope","$stateParams",function(t,a,o,e,c){e.back=function(){t.back()},e.name=c.name}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("aboutUs",{url:"/publicpage/myset/aboutus",templateUrl:"views/publicPage/mySet/aboutUs/aboutUs.html",controller:"aboutUsCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("changePwdCtl",["appUtils","$ionicHistory","$timeout","$ionicLoading","$http","$state","$Factory","$rootScope","$scope","$stateParams",function(t,o,a,n,c,e,i,s,r,u){r.back=function(){t.back()},r.subData={Password:"",NewPassword:"",ConfirmPassword:""},r.save=function(){var t={method:"POST",url:i.Account.changepwd.url,headers:{"Content-Type":"application/json"},data:r.subData};c(t).then(function(){n.show({template:"修改成功",duration:1500}),a(function(){s.$ionicGoBack()},1500)}).catch(function(t){n.show({template:"操作失败",duration:1500})})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("changePassword",{url:"/page/myset/changepwd",cache:!1,templateUrl:"views/publicPage/mySet/changePwd/changePwd.html",controller:"changePwdCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("myPrivacyCtl",["appUtils","$timeout","$rootScope","$scope","$stateParams",function(t,a,o,c,e){c.back=function(){t.back()},c.name=e.name}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("myPrivacy",{url:"/publicpage/myset/myprivacy",templateUrl:"views/publicPage/mySet/myPrivacy/myPrivacy.html",controller:"myPrivacyCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("usageRulesCtl",["appUtils","enterViewLoad","wechatLinkBase","WechatService","$localStorage","$ionicModal","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$rootScope","$stateParams","$ionicPopover","$ionicPopup","$timeout","$ionicActionSheet",function(o,i,t,c,e,a,n,$,r,l,s,p,u,d,g,h,k,S){p.back=function(){o.back()},p.clickArea=function(){}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("usageRules",{url:"/newhousedetail/usagerules",templateUrl:"views/publicPage/newHouseDetail/usageRules/usageRules.html",controller:"usageRulesCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("chooseOrderHouseCtl",["appUtils","enterViewLoad","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,o,t,n,i,c,r,a,u,d,s,p,l,$){d.back=function(){e.back()},d.$on("$ionicView.enter",function(){o.load(),d.newQueryData={cityId:1,pagesize:"",pagenum:0,type:null,query:"",district:"",street:"",minprize:"",maxprize:"",roomType:"",sort:""},r.get(a.NewHouse.publicquery.url,{params:d.newQueryData}).then(function(e){p.hide(),d.newhousearr=e.data}).catch(function(){p.hide(),o.customload("获取数据失败")})}),d.chooseHouse=function(e){s.$emit("chooseOrderHouseSuc",{Id:e.Id,Space:e.Space}),d.back()},d.renderdone=!0,d.$on("ngRepeatFinished",function(e){d.renderdone=!1})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("chooseOrderHouse",{url:"/ordervisit/chooseorderhouse",templateUrl:"views/publicPage/orderVisit/chooseOrderHouse/chooseOrderHouse.html",controller:"chooseOrderHouseCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("orderAgentListCtl",["appUtils","$rootScope","$ionicModal","$ionicLoading","$ionicHistory","$timeout","$scope","$stateParams","$http","$Factory",function(t,o,i,n,e,a,c,s,r,u){c.back=function(){t.back()},s.houseid,c.chooseAgent=function(t){o.$ionicGoBack(),o.$emit("chooseVisitAgentChange",t)},r({method:"POST",url:u.NewHouseProxy.applicantlist.url,headers:{"Content-Type":"application/json"},data:s.houseid}).then(function(t){c.agentList=t.data}).catch(function(){n.show({template:"请求失败",duration:1500})})}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("orderAgentList",{url:"/ordervisit/next/orderAgentList/:houseid",cache:!1,templateUrl:"views/publicPage/orderVisit/orderAgentList/orderAgentList.html",controller:"orderAgentListCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("registerAgreementController",["appUtils","$scope",function(e,r){r.back=function(){e.back()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("agreement",{url:"/registerorback/next/agreement",templateUrl:"views/publicPage/registerorback/agreement/agreement.html",controller:"registerAgreementController",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("CompleteInfoCtl",["NimUtils","enterViewLoad","$timeout","upImgBase","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(t,a,e,o,d,n,r,s,i,u,c,f){s.back=function(){r.go("tabs.perCenter")},d.get(n.Account.getuserinfo.url).then(function(r){s.userinfo=r.data}).catch(function(){}),s.showIdCard={showFrontVCard:"",frontVCard:"",showReverseVCard:"",reverseVCard:""},$("#complete_info .id-img").on("click",".img",function(){$(this).next().click()}),$("#complete_info .id-img").on("change","input",function(){var r=$(this)[0].files[0];o.changeBase(URL.createObjectURL(r),function(r){d.post(n.Account.upload.url,{path:"18/userVcards",file:r}).then(function(r){0==r.data.error&&(s.showIdCard.showFrontVCard=r.data.view,s.showIdCard.frontVCard=r.data.url)})})}),$("#complete_info .id-img-reverse").on("click",".img",function(){$(this).next().click()}),$("#complete_info .id-img-reverse").on("change","input",function(){var r=$(this)[0].files[0];o.changeBase(URL.createObjectURL(r),function(r){d.post(n.Account.upload.url,{path:"18/userVcards",file:r}).then(function(r){0==r.data.error&&(s.showIdCard.showReverseVCard=r.data.view,s.showIdCard.reverseVCard=r.data.url)})})}),s.baiduData={signOrgan:""},s.baidu=function(){a.load(),d.post(n.BaiduAPI.idcard.url,{frontUrl:s.showIdCard.frontVCard,backUrl:s.showIdCard.reverseVCard}).then(function(r){u.hide(),s.userinfo.Name=r.data.font.words_result.姓名?r.data.font.words_result.姓名.words:"",s.userinfo.VNumber=r.data.font.words_result.公民身份号码?r.data.font.words_result.公民身份号码.words:"",s.userinfo.Address=r.data.font.words_result.住址?r.data.font.words_result.住址.words:"",s.baiduData={signOrgan:r.data.back.words_result.签发机关?r.data.back.words_result.签发机关.words:""}}).catch(function(r){u.hide(),a.customload("身份证识别错误")})},s.$watch("showIdCard.frontVCard",function(r){s.showIdCard.frontVCard&&s.showIdCard.reverseVCard&&s.baidu()}),s.$watch("showIdCard.reverseVCard",function(r){s.showIdCard.frontVCard&&s.showIdCard.reverseVCard&&s.baidu()}),s.save=function(){if(!s.showIdCard.frontVCard||!s.showIdCard.reverseVCard)return a.customload("请上传身份证"),!1;if(!s.baiduData.signOrgan)return a.customload("身份证反面识别错误<br/>请重新上传",2e3),!1;if(!s.userinfo.Name)return a.customload("身份证姓名识别错误<br/>请重新上传",2e3),!1;if(!/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(s.userinfo.VNumber))return a.customload("身份证号识别错误<br/>请重新上传"),!1;var o=JSON.parse(JSON.stringify(s.userinfo));o.AICheck=!0,o.VStatus=4,o.VCard=s.showIdCard.frontVCard+"|"+s.showIdCard.reverseVCard,d.post(n.Account.setuserinfo.url,o).then(function(r){a.customload("保存成功"),e(function(){s.back()},1500),$localStorage.myselfInfo=o,nim.updateMyInfo({email:s.userinfo.Email,done:function(r,o){r||t.updateMyInfo()}})},function(r){a.customload("保存失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("CompleteInfo",{cache:!1,url:"/registerorback/next/completeinfo",templateUrl:"views/publicPage/registerorback/completeInfo/completeInfo.html",controller:"CompleteInfoCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").directive("noctrVideoContainer",["appUtils",function(a){return{restrict:"EA",templateUrl:"views/publicPage/videoDirective/noCtrVideo/noCtrVideo.directive.html",scope:{source:"=",image:"="},link:function(e,i){var o=i.find("video")[0],n=0,t=e.videoData={};t.playing=!1,t.currentOrigin=0,t.fullscreenStatus=!1,e.play=function(){t.playing?(o.autoplay=t.playing=!1,o.pause()):(o.autoplay=t.playing=!0,o.play())},e.$on("pauseVideo",function(i,n){t.playing&&(o.autoplay=t.playing=!1,o.pause())}),e.$on("viewLeave",function(i,n){e.viewLeave=!0}),e.seeking=function(){o.currentTime=t.currentOrigin,n=0},e.openFullscreen=function(){t.fullscreenStatus=!0,e.$emit("changeFullscreenStatus",!0)},e.closeFullscreen=function(){t.fullscreenStatus=!1,e.$emit("changeFullscreenStatus",!1)},e.$on("closeFullscreenStatus",function(i,n){t.fullscreenStatus=!1}),ionic.EventController.on("loadstart",function(){t.playing=this.autoplay=!1,t.isLoading=!0,e.$emit("videoIsLoading",!0),e.$apply()},o),ionic.EventController.on("loadedmetadata",function(){a.checkToGetMediaDuration(e,o,t),n=0,this.autoplay=t.isLoading=!1,e.$emit("videoIsLoading",!1),e.viewLeave||e.play(),e.$apply()},o),ionic.EventController.on("durationchange",function(){a.checkToGetMediaDuration(e,o,t),this.autoplay=!0,e.$apply()},o),ionic.EventController.on("progress",function(){a.checkToGetMediaDuration(e,o,t),e.$apply()},o),ionic.EventController.on("waiting",function(){t.isLoading=this.autoplay=!0,e.$emit("videoIsLoading",!0),t.playing=!0,e.$apply()},o),ionic.EventController.on("seeking",function(){t.isLoading=t.playing=this.autoplay=!0,e.$emit("videoIsLoading",!0),this.play(),e.$apply()},o),ionic.EventController.on("playing",function(){a.checkToGetMediaDuration(e,o,t),this.autoplay=t.isLoading=!0,e.$emit("videoIsLoading",!0),e.$apply()},o),ionic.EventController.on("pause",function(){t.playing=t.isLoading=!1,e.$emit("videoIsLoading",!1),e.$apply()},o),ionic.EventController.on("timeupdate",function(){a.checkToGetMediaDuration(e,o,t),t.currentOrigin=o.currentTime,t.current=a.handlePlayingTime(o.currentTime),1<=n&&(t.isLoading=!1,e.$emit("videoIsLoading",!1),t.playing=!0),15===n&&(e.$emit("videoBarHide",1),t.hide=!0),n++,e.$apply()},o),ionic.EventController.on("touchstart",function(){t.hide?e.$emit("videoBarShow",1):e.$emit("videoBarHide",1),t.hide=!t.hide,n=0},o),ionic.EventController.on("canplaythrough",function(){},o),ionic.EventController.on("canplay",function(){},o),ionic.EventController.on("ended",function(){this.pause(),e.hide=!1,e.$apply(),e.$emit("videoBarShow",1),t.hide=!1},o)}}}]);
"use strict";angular.module("App").controller("commentListCtl",["enterViewLoad","appUtils","$ionicModal","$stateParams","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(n,t,o,e,a,i,c,d,m,r,u,l,s){m.back=function(){t.back()},m.$on("$ionicView.enter",function(){m.loadData(),m.keyboardShow=!1}),m.loadData=function(){i.get(c.Product.get.url+"?id="+e.id).then(function(t){m.productDetail=t.data}).catch(function(){n.customload("获取评论列表失败")})},m.agreeComment=function(o){i.post(c.Product.agree.url+"?id="+o.Id).then(function(t){o.AgressUsers.push(0)}).catch(function(t){var o=t.data.Message||"点赞失败";n.customload(o)})},o.fromTemplateUrl("product_commentlist_modalview",{scope:m,animation:"slide-in-up"}).then(function(t){m.commentsModal=t}),m.showCommentsModal=function(t){m.commentsModal.show(),m.parentComment=t,m.getChildComments()},m.closeCommentsModal=function(){m.commentsModal.hide()},m.getChildComments=function(){i.post(c.Product.comments.url+"?pid="+m.parentComment.Id).then(function(t){m.childComments=t.data}).catch(function(t){})},m.replayData={data:""},m.replyComment=function(){m.replayData.data?i.post(c.Product.replycomment.url,{Content:m.replayData.data,ParentId:m.parentComment.Id}).then(function(t){m.replayData.data="",m.getChildComments(),m.parentComment.ChildrenCount++}).catch(function(t){n.customload("回复失败！")}):n.customload("请输入回复内容！")},m.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(t){a(function(){m.keyboardHeight||(m.keyboardHeight=t.keyboardHeight),m.keyboardShow=!0})}),window.addEventListener("native.keyboardhide",function(t){a(function(){m.keyboardShow=!1})})}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("commentList",{url:"/mall/classify/goodsdetail/comment/params/:id",templateUrl:"views/mall/mall-classify/goods-detail/comment-list/comment-list.html",controller:"commentListCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("hisShopDetailCtl",["enterViewLoad","appUtils","$ionicSlideBoxDelegate","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(o,t,e,i,n,c,a,s,u,l,$,p,r,d){l.back=function(){t.back()},l.$on("$ionicView.enter",function(){l.loadhousetimes()}),l.loadhousetimes=function(){a.post(s.News.query.url,{type:1,pagenum:0,pagesize:4}).then(function(o){l.housetimesList=o.data}).catch(function(){o.customload("获取房产时报失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("hisShopDetail",{url:"/mall/classify/hisshop/hisshopdetail/:id",templateUrl:"views/mall/mall-classify/his-shop/his-shopDetail/his-shopDetail.html",controller:"hisShopDetailCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("shippingAddressCtl",["appUtils","enterViewLoad","$ionicLoading","$ionicHistory","$timeout","$rootScope","$scope","$stateParams","$http","$Factory",function(t,i,a,e,c,n,o,s,r,d){o.back=function(){t.back()},o.paramsId=s.id,o.subData={Name:"",Phone:"",Province:"",City:"",District:"",Street:"",Address:"",Tag:0,IsDefault:!0},o.$on("$ionicView.enter",function(){s.id&&r.get(d.UserAddress.get.url+"?id="+s.id).then(function(t){o.subData=t.data}).catch(function(){i.customload("获取失败")})}),o.tagList=[{id:0,text:"家"},{id:10,text:"公司"},{id:250,text:"学校"}];var u=o.vm={};u.cb=function(){o.subData.Province=u.CityPickData1.areaData[0]||"",o.subData.City=u.CityPickData1.areaData[1]||"",o.subData.District=u.CityPickData1.areaData[2]||""},s.province?u.CityPickData1={areaData:[],defaultAreaData:[s.province,s.city,s.district],title:"省、市、区县",buttonClicked:function(){u.cb()},tag:"/"}:u.CityPickData1={areaData:[],title:"省、市、区县",buttonClicked:function(){u.cb()},tag:"/"},o.saveAddress=function(){r.post(d.UserAddress.save.url,o.subData).then(function(t){var a=o.paramsId?"修改成功":"新增成功";i.customload(a),c(function(){o.back()},1500)}).catch(function(){var t=o.paramsId?"修改失败":"新增失败";i.customload(t)})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(s){s.state("shippingAddress",{url:"/mall/mallmine/addresslist/shippingaddress/params/:id/:province/:city/:district",cache:!1,templateUrl:"views/mall/mall-mine/addressList/shippingAddress/shippingAddress.html",controller:"shippingAddressCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("logisticsDetailsCtl",["enterViewLoad","appUtils","$ionicPopup","$interval","$ionicModal","$timeout","$http","$Factory","$state","$stateParams","$scope",function(t,a,o,i,n,e,c,r,d,u,l){l.back=function(){a.back()},l.$on("$ionicView.enter",function(){l.loadData(),l.paramsData={id:u.id,done:u.done}}),l.loadData=function(){c.post(r.ProductOrder.tracequery.url+"?TradeNo="+u.id).then(function(t){l.resData=t.data}).catch(function(){t.customload("获取房产时报失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("logisticsDetails",{url:"/mall/mallmine/mymallorders/logisticsdetails/params/:id/:done",templateUrl:"views/mall/mall-mine/my-mallOrders/logistics-details/logistics-details.html",controller:"logisticsDetailsCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("waitForPayingCtl",["enterViewLoad","appUtils","$ionicPopup","$interval","$ionicModal","$timeout","$http","$Factory","$state","$stateParams","$scope",function(t,n,o,e,c,i,a,u,l,s,r){r.back=function(){n.back()},r.$on("$ionicView.enter",function(){r.loadhousetimes(),r.timeLeft=90,r.startCountDown()}),r.$on("$ionicView.leave",function(){r.clock&&(r.timeLeft=90,e.cancel(r.clock))}),r.loadhousetimes=function(){a.post(u.News.query.url,{type:1,pagenum:0,pagesize:4}).then(function(t){r.housetimesList=t.data}).catch(function(){t.customload("获取房产时报失败")})},r.startCountDown=function(){r.clock=e(function(){r.timeLeft--,r.countDownNum<1&&r.endCountDownNum()},1e3)},r.cancelOrder=function(){o.confirm({title:"确定取消订单？",cancelText:"取消",okText:"确认"}).then(function(t){})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("waitForPaying",{url:"/mall/mallmine/mymallorders/waitforpaying/params/:order",templateUrl:"views/mall/mall-mine/my-mallOrders/waitForPaying/waitForPaying.html",controller:"waitForPayingCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("afterSaleServiceCtl",["enterViewLoad","appUtils","$ionicPopup","$interval","$ionicModal","$timeout","$http","$Factory","$state","$stateParams","$scope",function(t,e,o,i,a,n,c,s,u,l,r){r.back=function(){e.back()},r.$on("$ionicView.enter",function(){r.loadhousetimes()}),r.loadhousetimes=function(){c.post(s.News.query.url,{type:1,pagenum:0,pagesize:4}).then(function(t){r.housetimesList=t.data}).catch(function(){t.customload("获取房产时报失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("afterSaleService",{url:"/mall/mallmine/returnaftersale/aftersaleservice",templateUrl:"views/mall/mall-mine/return-afterSale/afterSaleService/afterSaleService.html",controller:"afterSaleServiceCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("refundDetailCtl",["enterViewLoad","appUtils","$ionicPopup","$interval","$ionicModal","$timeout","$http","$Factory","$state","$stateParams","$scope",function(t,e,o,i,n,a,u,c,s,l,p){p.back=function(){e.back()},p.$on("$ionicView.enter",function(){p.loadhousetimes()}),p.loadhousetimes=function(){u.post(c.News.query.url,{type:1,pagenum:0,pagesize:4}).then(function(t){p.housetimesList=t.data}).catch(function(){t.customload("获取房产时报失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("refundDetail",{url:"/mall/mallmine/returnaftersale/refunddetail/params/:id",templateUrl:"views/mall/mall-mine/return-afterSale/refund-detail/refund-detail.html",controller:"refundDetailCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("publishCommentCtl",["$waitForCommentData","upImgBase","enterViewLoad","appUtils","$ionicPopup","$interval","$ionicModal","$timeout","$http","$Factory","$state","$stateParams","$scope",function(n,i,o,t,c,a,r,s,g,e,l,m,f){f.back=function(){t.back()},f.$on("$ionicView.enter",function(){f.productInfo=n.data,f.commentData={TradeNo:f.productInfo.TradeNo,ProductStar:3,ShopStar:3,LogisticsStar:3,IsAnonymous:!0,Content:"",Images:"",ProductId:f.productInfo.productInfo.ProductId}}),f.switchCheck=function(){f.commentData.IsAnonymous=!f.commentData.IsAnonymous},f.checkLength=function(){100<f.commentData.Content.length&&(o.customload("评论内容少于100字"),f.commentData.Content=f.commentData.Content.substr(0,101))},f.ratingsObject={iconOn:"ion-ios-star",iconOff:"ion-ios-star-outline",iconOnColor:"rgb(255,210,2)",iconOffColor:"rgb(102,102,102)",rating:3,minRating:0,iconSize:"25px",iconMargin:"13px",readOnly:!1,callback:function(n){f.commentData.ProductStar=n}},f.ratingsObjecttwo={iconOn:"ion-ios-star",iconOff:"ion-ios-star-outline",iconOnColor:"rgb(255,210,2)",iconOffColor:"rgb(102,102,102)",rating:3,minRating:0,iconSize:"25px",iconMargin:"13px",readOnly:!1,callback:function(n){f.commentData.ShopStar=n}},f.ratingsObjectthree={iconOn:"ion-ios-star",iconOff:"ion-ios-star-outline",iconOnColor:"rgb(255,210,2)",iconOffColor:"rgb(102,102,102)",rating:3,minRating:0,iconSize:"25px",iconMargin:"13px",readOnly:!1,callback:function(n){f.commentData.LogisticsStar=n}},f.commentImgs=[],$("#publish_comment .comment-imgs").on("click",".txt-in",function(){$(this).next().click()}),$("#publish_comment .comment-imgs").on("change","input",function(){var n=$(this)[0].files[0];i.changeBase(URL.createObjectURL(n),function(n){g.post(e.Account.upload.url,{path:"18/mall/publishComment",file:n}).then(function(n){0==n.data.error&&(10<f.commentImgs.length&&f.commentImgs.shift(),f.commentImgs.push(n.data.view))})})}),f.deleteImg=function(n){f.commentImgs.splice(n,1)},f.addComment=function(n){f.commentData.Content?(f.commentData.Images=f.commentImgs.join("|"),g.post(e.Product.commentadd.url,f.commentData).then(function(n){o.customload("评论成功"),s(function(){f.back()},1500)}).catch(function(){o.customload("评论失败")})):o.customload("请输入评价内容")}}]).directive("ionicRatings",[function(){return{restrict:"AE",replace:!0,template:'<div class="ionic_ratings"><span class="icon {{::iconOff}} ionic_rating_icon_off" ng-style="::iconOffColor" ng-click="ratingsClicked(1)" ng-show="rating < 1"></span><span class="icon {{::iconOn}} ionic_rating_icon_on" ng-style="::iconOnColor" ng-click="ratingsUnClicked(1)" ng-show="rating > 0"></span><span class="icon {{::iconOff}} ionic_rating_icon_off" ng-style="::iconOffColor" ng-click="ratingsClicked(2)" ng-show="rating < 2"></span><span class="icon {{::iconOn}} ionic_rating_icon_on" ng-style="::iconOnColor" ng-click="ratingsUnClicked(2)" ng-show="rating > 1"></span><span class="icon {{::iconOff}} ionic_rating_icon_off" ng-style="::iconOffColor" ng-click="ratingsClicked(3)" ng-show="rating < 3"></span><span class="icon {{::iconOn}} ionic_rating_icon_on" ng-style="::iconOnColor" ng-click="ratingsUnClicked(3)" ng-show="rating > 2"></span><span class="icon {{::iconOff}} ionic_rating_icon_off" ng-style="::iconOffColor" ng-click="ratingsClicked(4)" ng-show="rating < 4"></span><span class="icon {{::iconOn}} ionic_rating_icon_on" ng-style="::iconOnColor" ng-click="ratingsUnClicked(4)" ng-show="rating > 3"></span><span class="icon {{::iconOff}} ionic_rating_icon_off" ng-style="::iconOffColor" ng-click="ratingsClicked(5)" ng-show="rating < 5"></span><span class="icon {{::iconOn}} ionic_rating_icon_on" ng-style="::iconOnColor" ng-click="ratingsUnClicked(5)" ng-show="rating > 4"></span></div>',scope:{ratingsObj:"=ratingsobj"},link:function(i,n,o){(i.iconOn=i.ratingsObj.iconOn||"ion-ios-star",i.iconOff=i.ratingsObj.iconOff||"ion-ios-star-outline",i.iconOnColor=i.ratingsObj.iconOnColor||"rgb(27,197,187)",i.iconOffColor=i.ratingsObj.iconOffColor||"rgb(27,197,187)",i.iconSize=i.ratingsObj.iconSize||"none",i.iconMargin=i.ratingsObj.iconMargin||"3px",i.rating=i.ratingsObj.rating||1,i.minRating=i.ratingsObj.minRating||0,i.ratingsObj.readOnly?i.readOnly=i.ratingsObj.readOnly:i.readOnly=!1,i.iconOnColor={color:i.iconOnColor,fontSize:i.iconSize,marginLeft:i.iconMargin},i.iconOffColor={color:i.iconOffColor,fontSize:i.iconSize,marginLeft:i.iconMargin},i.rating=i.rating>i.minRating?i.rating:i.minRating,i.prevRating=0,i.readOnly)&&n[0].querySelectorAll(".icon").forEach(function(n){n.style.pointerEvents="none"});i.ratingsClicked=function(n){0!==i.minRating&&n<i.minRating?i.rating=i.minRating:i.rating=n,i.prevRating=n,i.ratingsObj.callback(i.rating)},i.ratingsUnClicked=function(n){0!==i.minRating&&n<i.minRating?i.rating=i.minRating:i.rating=n,i.prevRating==n&&(0!==i.minRating?i.rating=i.minRating:i.rating=0),i.prevRating=n,i.ratingsObj.callback(i.rating)}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(m){m.state("publishComment",{url:"/mall/mallmine/waitforcomment/publishcomment/params/:id",templateUrl:"views/mall/mall-mine/waitForComment/publishComment/publishComment.html",controller:"publishCommentCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("groupAvatarCtl",["appUtils","$timeout","$http","$Factory","$state","$rootScope","$scope","$stateParams","$ionicActionSheet",function(t,i,a,e,o,n,r,c,u){r.back=function(){t.back()},r.targetId=c.id,r.$on("$ionicView.enter",function(){nim.getTeam({teamId:r.targetId,done:function(t,a){t||i(function(){r.targetInfo=a})}})}),r.show=function(){$("#group_avatar input").click(),$("#group_avatar input").change(function(){var t=$(this)[0].files[0];t.type.startsWith("image")&&(r.imgurl=URL.createObjectURL(t),o.go("groupAvatarCut",{id:r.targetId,imgurl:r.imgurl}))})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("groupAvatar",{url:"/percenter/group/groupavatar/params/:id",templateUrl:"views/tabs/chatList/groupDialogBox/groupAvatar/groupAvatar.html",controller:"groupAvatarCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("groupDetailCtr",["NimUtils","appUtils","enterViewLoad","$ionicModal","$ionicPopup","$timeout","$localStorage","$rootScope","$http","$Factory","$state","$stateParams","$scope",function(n,e,a,o,t,i,s,m,c,r,u,d,f){f.back=function(){e.back()},f.targetId=d.id,f.getTeamInfo=function(){nim.getTeam({teamId:f.targetId,done:function(e,o){e||(f.targetInfo=o)}})},f.$on("$ionicView.enter",function(){f.showRemove=!1,nim.notifyForNewTeamMsg({teamIds:[f.targetId],done:function(e,o){e||(f.isMute="1"==o[f.targetId])}}),f.myselfInfo=n.myselfInfo,f.getTeamInfo(),nim.getTeamMembers({teamId:f.targetId,done:function(e,o){if(!e){for(var t=[],n=0;n<o.members.length;n++)t.push(o.members[n].account);l(t)}}})}),f.groupMembers=[];var g,l=function(e){e.length<=0||n.getUsers({accounts:e,done:function(e,t){i(function(){if(f.groupMembers=t,f.targetInfo)for(var e=0;e<f.groupMembers.length;e++)if(f.groupMembers[e].account===f.targetInfo.owner){var o=f.groupMembers[e];f.groupMembers.splice(e,1),f.groupMembers.unshift(o);break}})}})};f.dismissTeam=function(){t.confirm({title:"确定解散群聊？",cancelText:"取消",okText:"确定"}).then(function(e){if(e){nim.dismissTeam({teamId:f.targetId,done:function(e,o){e?a.customload("操作失败"):(a.customload("操作成功"),i(function(){u.go("tabs.chatList")}))}})}})},f.exitGroup=function(){t.confirm({title:"确定退出该群？",cancelText:"取消",okText:"确定"}).then(function(e){if(e){nim.leaveTeam({teamId:f.targetId,done:function(e,o){if(e)a.customload(e.message);else{a.customload("操作成功"),i(function(){u.go("tabs.chatList")},1500);for(var t=0;t<n.sessionList.length;t++)"team-"+f.targetId==n.sessionList[t].id&&n.sessionList.splice(t,1);n.sessionList=n.sessionList}}})}})},f.changeShowRemove=function(){f.showRemove=!f.showRemove},f.removeTeamMembers=function(e,t){nim.removeTeamMembers({teamId:f.targetId,accounts:[e],done:function(e,o){e?a.customload("操作失败"):(f.groupMembers.splice(t,1),i(function(){f.groupMembers=f.groupMembers}))}})},f.changeModalView=1,o.fromTemplateUrl("group_detail_name_desc_modal",{scope:f,animation:"slide-in-up"}).then(function(e){f.shareModal=e}),f.showChangeInfoModal=function(e){f.myselfInfo.account==f.targetInfo.owner&&(f.shareModal.show(),f.changeModalView=e)},f.closeChangeInfoModal=function(){f.shareModal.hide()},f.changeData={Name:"",Intro:""},f.changeName=function(){nim.updateTeam({teamId:f.targetId,name:f.changeData.Name,done:function(e,o){e?a.customload("修改失败"):(f.closeChangeInfoModal(),f.getTeamInfo(),a.customload("修改成功"))}})},f.changeIntro=function(){nim.updateTeam({teamId:f.targetId,intro:f.changeData.Intro,done:function(e,o){e?a.customload("修改失败"):(f.closeChangeInfoModal(),f.getTeamInfo(),a.customload("修改成功"))}})},f.changeInviteMode=function(){nim.updateTeam({teamId:f.targetId,beInviteMode:f.targetInfo.beInviteMode,done:function(e,o){e?a.customload("修改失败"):(f.getTeamInfo(),a.customload("修改成功"))}})},f.blockChange=function(){g&&i.cancel(g),g=i(function(){nim.updateInfoInTeam({teamId:f.targetId,muteTeam:!f.isMute,done:function(e,o){e?a.customload("修改失败"):f.isMute=!f.isMute}})},500)}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("groupDetail",{url:"/chatlist/groupdialogbox/groupdetail/params/:id",templateUrl:"views/tabs/chatList/groupDialogBox/groupDetail/groupDetail.html",controller:"groupDetailCtr",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("openGroupRedpacketCtl",["$openGroupRedpacketData","appUtils","enterViewLoad","$ionicLoading","$timeout","$scope","$state","$stateParams","$http","$Factory",function(a,t,e,o,n,c,r,p,i,u){c.back=function(){t.back()},c.$on("$ionicView.enter",function(){e.load();try{c.paramsData=a.data,c.queryData=a.data.content.data,i.post(u.Money.opengrouppack.url,c.queryData).then(function(a){o.hide(),c.pageData=a.data,c.rotate=!0}).catch(function(a){c.pageData={};var t=a.data&&a.data.Message||"操作失败";e.customload(t)})}catch(a){o.hide()}}),c.$on("$ionicView.leave",function(){a.data=null,c.rotate=!1})}]).factory("$openGroupRedpacketData",[function(){var a=function(){};return a.prototype={data:null},new a}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("openGroupRedpacket",{url:"/chatlist/groupdialogbox/opengroupredpacket",cache:!1,templateUrl:"views/tabs/chatList/groupDialogBox/openGroupRedpacket/openGroupRedpacket.html",controller:"openGroupRedpacketCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("evaluationDetailCtl",["enterViewLoad","appUtils","$ionicModal","$localStorage","$ionicSlideBoxDelegate","$http","$Factory","$state","$stateParams","$scope","$rootScope","$timeout",function(n,e,t,o,a,i,l,u,c,s,m,d){s.back=function(){e.back()},s.houseId=c.houseid,s.userId=c.userid,s.$on("$ionicView.enter",function(){s.loadEvaluationDetail(),s.loadHouseInfo()}),s.myselfInfo=o.myselfInfo,s.currentIndex=0,s.changeindex=function(){s.currentIndex=a.$getByHandle("evaluation-detail-handle").currentIndex()},s.loadEvaluationDetail=function(){i.get(l.Evalu.get.url,{params:{houseId:s.houseId,userId:s.userId,type:2}}).then(function(e){e.data.ReplyJson=JSON.parse(e.data.ReplyJson)||[],s.evaluationDetail=e.data}).catch(function(e){n.customload("获取评测列表失败")})},s.loadHouseInfo=function(){i.post(l.NewHouseSource.postdetail.url+"/"+s.houseId).then(function(e){s.houseInfo=e.data})},s.commentInput={comment:""},s.subComment=function(){s.closeCommentModal();var e={comment:{userinfo:o.myselfInfo,content:s.commentInput.comment,likeNum:0,createTime:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate()}};s.evaluationDetail.ReplyJson.push(e),n.customload("保存成功")},t.fromTemplateUrl("evaluation_detail_comment_modal",{scope:s,animation:"slide-in-up"}).then(function(e){s.commentModal=e}),s.showCommentModal=function(){s.commentModal.show()},s.closeCommentModal=function(){s.commentModal.hide()},s.actionDo=function(e,t,o){s.evaluationDetail.AgreeNum=s.evaluationDetail.AgreeNum+e,s.evaluationDetail.DisAgreeNum=s.evaluationDetail.DisAgreeNum+t,s.evaluationDetail.Tips=s.evaluationDetail.Tips+o,n.customload("操作成功")},s.$on("$ionicView.beforeLeave",function(){s.evaluationDetail.ReadNum++;var e=s.evaluationDetail;e.ReplyJson=JSON.stringify(e.ReplyJson),i.post(l.Evalu.reply.url,e).then(function(e){}).catch(function(e){})})}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("evaluationDetail",{url:"/ifhavehouse/evaluationdetail/:houseid/:userid",cache:!1,templateUrl:"views/tabs/home/evaluationList/evaluationDetail/evaluationDetail.html",controller:"evaluationDetailCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/evaluationList/evaluationDetail/evaluationDetail.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("publishEvaluationCtl",["enterViewLoad","appUtils","$localStorage","$rootScope","$http","$Factory","$state","$stateParams","$scope","$timeout","$ionicLoading","$document",function(t,o,a,e,n,s,u,c,i,l,d,r){i.back=function(){o.back()},i.houseId=c.houseid,i.userInfo=a.myselfInfo,i.subData={HouseId:i.houseId,Type:2,Title:"",Content:"",UserId:a.myselfInfo.Id},i.saveData=function(){var o={method:"POST",url:s.Evalu.save.url,headers:{"Content-Type":"application/json"},data:i.subData};n(o).then(function(o){t.customload("提交成功"),l(function(){e.$ionicGoBack()},1500)}).catch(function(o){"不能修改"==o.data.Message?t.customload("您已发布过一条评测"):t.customload("提交失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("publishEvaluation",{url:"/ifhavehouse/publishevaluation/:houseid",cache:!1,templateUrl:"views/tabs/home/evaluationList/publishEvaluation/publishEvaluation.html",controller:"publishEvaluationCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/evaluationList/publishEvaluation/publishEvaluation.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addCommunityCtl",["enterViewLoad","appUtils","$ionicSlideBoxDelegate","$localStorage","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$rootScope","$stateParams","$ionicPopover","$ionicPopup","$timeout",function(e,i,t,a,c,s,o,r,d,n,u,l,b,p,f){n.back=function(){i.back()},n.showData={PropType:""},n.subData={PropType:"",City:"",CityId:null,District:"",Street:"",Pics:[],ShowPics:[],Address:""},r.get("jsonData/addCommunity/communityArea.json").then(function(t){switch($.scrEvent({data:["别墅","普通住宅","平房","公寓","其他"],evEle:".addcom-wuye",title:"选择物业",defValue:"平房",afterAction:function(t){switch($(".addcom-wuye").val(t),t){case"别墅":n.subData.PropType=2;break;case"其他":n.subData.PropType=4;break;case"普通住宅":n.subData.PropType=9;break;case"平房":n.subData.PropType=12;break;case"公寓":n.subData.PropType=71;break;default:n.subData.PropType=null}}}),n.districtObj=null,n.streetArrs=[],n.districts=[],n.streets=[],i.city.name){case"厦门":n.districtObj=t.data.福建省.厦门市;break;case"漳州":n.districtObj=t.data.福建省.漳州市;break;case"泉州":n.districtObj=t.data.福建省.泉州市;break;case"福州":n.districtObj=t.data.福建省.福州市;break;case"宁德":n.districtObj=t.data.福建省.宁德市;break;case"莆田":n.districtObj=t.data.福建省.莆田市;break;case"龙岩":n.districtObj=t.data.福建省.龙岩市;break;case"三明":n.districtObj=t.data.福建省.三明市;break;case"南平":n.districtObj=t.data.福建省.南平市;break;case"中山":n.districtObj=t.data.广东省.中山市;break;default:n.districtObj=t.data.福建省.厦门市}for(var a in n.districtObj)n.districts.push(a),n.streetArrs.push(n.districtObj[a]);$.scrEvent({data:n.districts,evEle:".addcom-quyu",title:"选择区域",defValue:n.districts[0],afterAction:function(t){$(".addcom-quyu").val(t),n.subData.District=t,f(function(){n.subData.Street="",$(".addcom-jiedao").val("")}),n.streets=n.streetArrs[n.districts.indexOf(t)],$.scrEvent({data:n.streets,evEle:".addcom-jiedao",title:"选择街道",defValue:n.streets[0],afterAction:function(t){$(".addcom-jiedao").val(t),n.subData.Street=t}})}}),$.scrEvent({data:n.streetArrs[0],evEle:".addcom-jiedao",title:"选择街道",defValue:n.streetArrs[0][0],afterAction:function(t){$(".addcom-jiedao").val(t),n.subData.Street=t}})}),n.photoChoose=function(){i.photoLiberary({selectMode:100,maxSelectCount:9,maxSelectSize:188743680},function(t,a){r.post(d.Account.upload.url,{path:"18/addcommunity",file:t,orientation:a}).then(function(t){0==t.data.error&&(n.subData.Pics.push(t.data.url),n.subData.ShowPics.push(t.data.view))}).catch(function(){e.customload("图片上传失败")})},function(t){e.customload("获取图片失败")})},n.cameraBase=function(){i.cameraBase({width:1e3,height:1e3},function(t){r.post(d.Account.upload.url,{path:"18/addcommunity",file:t}).then(function(t){0==t.data.error&&(n.subData.Pics.push(t.data.url),n.subData.ShowPics.push(t.data.view))}).catch(function(){e.customload("图片上传失败")})},function(t){e.customload("调用相机失败")})},n.remove=function(t){n.subData.Pics.splice(t,1),n.subData.ShowPics.splice(t,1)},n.save=function(){var t=JSON.parse(JSON.stringify(n.subData));t.City=i.city.name,t.CityId=i.city.id,r.post(d.Community.add.url,t).then(function(t){c.show({template:"保存成功",duration:1500}),f(function(){u.$ionicGoBack()},1500)}).catch(function(){c.show({template:"保存失败",duration:1500})})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("addCommunity",{url:"/ifhavehouse/fbmanage/next/addcommunity",cache:!1,templateUrl:"views/tabs/home/fbManage/addCommunity/addCommunity.html",controller:"addCommunityCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/fbManage/addCommunity/addCommunity.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addNewCtl",["enterViewLoad","$addNewData","upImgBase","appUtils","$ionicScrollDelegate","$ionicModal","$timeout","$http","$Factory","$scope","$rootScope","$stateParams",function(o,D,a,g,e,t,d,n,i,b,u,l){b.back=function(){g.back()},b.type=l.type,b.headtitle="一手房新增",b.scrollTo=function(a){e.scrollTo(0,a||0,!0)},b.addNewScrollListing=function(){b.currentTop=e.getScrollPosition().top,D.scrollTo=b.currentTop},window.addEventListener("native.keyboardshow",function(a){b.scrollTo(b.currentTop)}),b.$on("$ionicView.enter",function(){b.initData(),b.scrollTo(D.scrollTo)}),b.initData=function(){n.get(i.Account.hjson.url).then(function(a){b.chaoxiang=a.data.Bounds,b.chaoxiangarr=[];for(var e=0;e<b.chaoxiang.length;e++)b.chaoxiangarr.push(b.chaoxiang[e].text);$.scrEvent({data:b.chaoxiangarr,evEle:".qu-chaoxiang",title:"请选择朝向",defValue:"东",afterAction:function(a){$(".qu-chaoxiang").val(a),b.addNewSubData.Orientation=a}}),$.scrEvent({data:["按千分比","按现金"],evEle:".addnew-commisiontype",title:"请选择佣金类型",defValue:"按千分比",afterAction:function(a){switch($(".addnew-commisiontype").val(a),b.addNewShowData.CommisionType=a){case"按千分比":b.addNewSubData.CommisionType=1;break;case"按现金":b.addNewSubData.CommisionType=2}}}),b.houseperiod=a.data.HousePeriod,b.houseperiodarr=[];for(e=0;e<b.houseperiod.length;e++)b.houseperiodarr.push(b.houseperiod[e].text);$.scrEvent({data:b.houseperiodarr,evEle:".addnew-houseperiod",title:"请选择房期",defValue:"现房",afterAction:function(a){switch($(".addnew-houseperiod").val(a),b.addNewSubData.HousePeriodName=a){case"期房":b.addNewSubData.HousePeriod=1;break;case"现房":b.addNewSubData.HousePeriod=2;break;case"待售":b.addNewSubData.HousePeriod=3;break;case"尾盘":b.addNewSubData.HousePeriod=4}}});var t=a.data.FloorOptions,o=[];for(e=0;e<t.length;e++)o.push(t[e].text);$.scrEvent2({data:o,data2:o,evEle:".qu-louceng",title:"楼层",defValue:1,defValue2:1,eleName:"层 ",eleTotal:"共",eleNo:"第",eleName2:"层",afterAction:function(a,e){$(".qu-louceng").val(a+"/"+e),b.addNewSubData.Floor=a,b.addNewSubData.TotalFloor=e,b.addNewShowData.louCeng=a+"/"+e}});var d=a.data.RoomTypes.customData,n=d.y,i=d.m,u=d.d,l=[],c=[],r=[];for(e=0;e<n.length;e++)l.push(n[e].text);for(e=0;e<i.length;e++)c.push(i[e].text);for(e=0;e<u.length;e++)r.push(u[e].text);$.scrEvent3({data:l,data2:c,data3:r,evEle:".qu-fangxing",title:"房型",defValue:1,defValue2:1,defValue3:1,eleName:"室",eleName2:"厅",eleName3:"卫",afterAction:function(a,e,t){$(".qu-fangxing").val(a+"室"+e+"厅"+t+"卫"),b.addNewSubData.RoomType=a,b.addNewSubData.HallType=e,b.addNewSubData.BathType=t,b.addNewShowData.fangXing=a+"室"+e+"厅"+t+"卫"}});var s=a.data.BuildingTypes,w=[];for(e=0;e<s.length;e++)w.push(s[e].text);$.scrEvent({data:w,evEle:".qu-leixing",title:"",defValue:"普通住宅",afterAction:function(a){$(".qu-leixing").val(a),b.addNewSubData.BuildType=a}});var m=a.data.Fitments,h=[];for(e=0;e<m.length;e++)h.push(m[e].text);$.scrEvent({data:h,evEle:".addnew-zhuangxiu",title:"装修",defValue:"豪装",afterAction:function(a){switch($(".addnew-zhuangxiu").val(a),b.addNewSubData.DecorateSituationName=a){case"豪装":b.addNewSubData.DecorateSituation=1;break;case"精装":b.addNewSubData.DecorateSituation=2;break;case"中装":b.addNewSubData.DecorateSituation=3;break;case"简装":case"毛坯":b.addNewSubData.DecorateSituation=4}}}),$.scrEvent({data:a.data.NewBuildingTypes,evEle:".addnew-buildingtype",title:"建筑类型",defValue:"SOHO",afterAction:function(a){$(".addnew-buildingtype").val(a),b.addNewSubData.BuildingType=a}});var p=a.data.YearOptions,S=[];for(e=0;e<p.length;e++)S.push(p[e].text);$.scrEvent({data:S,evEle:".qu-niandai",title:"年代",defValue:1995,afterAction:function(a){$(".qu-niandai").val(a),b.addNewSubData.Year=a}}),$.scrEvent3({data:S,data2:a.data.MonthArr,data3:a.data.DateArr,evEle:".addnew-opentime",title:"开盘时间",defValue:1995,defValue2:1,defValue3:1,eleName:"年",eleName2:"月",eleName3:"日",afterAction:function(a,e,t){$(".addnew-opentime").val(a+"/"+e+"/"+t),b.addNewSubData.OpenTime=a+"/"+e+"/"+t}}),$.scrEvent3({data:S,data2:a.data.MonthArr,data3:a.data.DateArr,evEle:".addnew-deliverdate",title:"交房时间",defValue:1995,defValue2:1,defValue3:1,eleName:"年",eleName2:"月",eleName3:"日",afterAction:function(a,e,t){$(".qu-niandai").val(a+"/"+e+"/"+t),b.addNewSubData.DeliverDate=a+"/"+e+"/"+t}});var f=a.data.Cities,N=[];for(e=0;e<f.length;e++)N.push(f[e].text);$.scrEvent({data:N,evEle:".addnew-city",title:"城市",defValue:"厦门",afterAction:function(a){switch($(".addnew-city").val(a),b.addNewSubData.CityName=a,D.city=a){case"厦门":g.city=b.addNewSubData.City=1;break;case"漳州":g.city=b.addNewSubData.City=2;break;case"泉州":g.city=b.addNewSubData.City=3;break;case"福州":g.city=b.addNewSubData.City=4;break;case"宁德":g.city=b.addNewSubData.City=5;break;case"莆田":g.city=b.addNewSubData.City=6;break;case"龙岩":g.city=b.addNewSubData.City=7;break;case"三明":g.city=b.addNewSubData.City=8;break;default:g.city=b.addNewSubData.City=1}}})})},0<l.id?n.get(i.NewHouse.getdetail.url,{params:{id:l.id}}).then(function(a){if(D.data&&D.data.Id==a.data.Id)b.addNewSubData=D.data,b.addNewShowData=D.showData;else switch(b.addNewSubData=a.data,b.addNewShowData={CommisionType:""},a.data.CommisionType){case 1:b.addNewShowData.CommisionType="按千分比";break;case 2:b.addNewShowData.CommisionType="按现金"}}):D.data&&!D.data.Id?(b.addNewSubData=D.data,b.addNewShowData=D.showData):(b.addNewShowData={CommisionType:"按千分比"},b.addNewSubData={Id:null,BuildingImg:[],ShowBuildingImg:[],HouseRoomSpaces:[],NewHouseName:"",LandAgent:"",City:null,CityName:"",HousePeriod:null,HousePeriodName:"",Price:null,OpenTime:"",DeliverDate:"",DecorateSituation:null,DecorateSituationName:"",PlotRatio:null,BuildingType:"",NumberOfHouseholds:null,Green:"",Description:"",SupportingFacilities:"",Address:"",Longitude:null,Latitude:null,CommisionType:1,Commision:null,CommisionName:"",Users:[]}),b.photoChoose=function(){g.photoLiberary({selectMode:100,maxSelectCount:9,maxSelectSize:188743680},function(a,e){n.post(i.Account.upload.url,{path:"18/HouseSource/new",file:a,orientation:e}).then(function(a){0==a.data.error&&(b.addNewSubData.BuildingImg.push(a.data.url),b.addNewSubData.ShowBuildingImg.push(a.data.view))}).catch(function(){o.customload("图片上传失败")})},function(a){o.customload("获取图片失败")})},b.indoorCameraBase=function(){g.cameraBase({width:1e3,height:1e3},function(a){n.post(i.Account.upload.url,{path:"18/HouseSource/new",file:a}).then(function(a){0==a.data.error&&(b.addNewSubData.BuildingImg.push(a.data.url),b.addNewSubData.ShowBuildingImg.push(a.data.view))})},function(a){o.customload("调用相机失败")})},b.onePhotoChoose=function(t){var a={selectMode:100,maxSelectCount:0<=t?1:3,maxSelectSize:188743680};g.photoLiberary(a,function(a,e){n.post(i.Account.upload.url,{path:"18/HouseSource/new",file:a,orientation:e}).then(function(a){0==a.data.error&&(0<=t?(b.addNewSubData.HouseRoomSpaces[t].Image=a.data.url,b.addNewSubData.HouseRoomSpaces[t].ShowImage=a.data.view):(b.addhouseRoomData={Space:null,RoomType:null,HallType:null,BathType:null,Image:a.data.url,ShowImage:a.data.view,SaleStatus:0,NewsHouseId:null,Id:null},b.addNewSubData.HouseRoomSpaces.push(b.addhouseRoomData)))}).catch(function(){o.customload("图片上传失败")})},function(a){o.customload("获取图片失败")})},b.huxingCameraBase=function(){g.cameraBase({width:1e3,height:1e3},function(a){n.post(i.Account.upload.url,{path:"18/HouseSource/new",file:a}).then(function(a){0==a.data.error&&(b.addhouseRoomData={Space:null,RoomType:null,HallType:null,BathType:null,Image:a.data.url,ShowImage:a.data.view,SaleStatus:0,NewsHouseId:null,Id:null},b.addNewSubData.HouseRoomSpaces.push(b.addhouseRoomData))})},function(a){o.customload("调用相机失败")})},b.remove=function(a){b.addNewSubData.ShowBuildingImg.splice(a,1),b.addNewSubData.BuildingImg.splice(a,1)},b.reduceHuxing=function(a){b.addNewSubData.HouseRoomSpaces.splice(a,1)},Sortable.create(document.getElementById("addNew_sortindoor_img"),{group:{name:"otherwords",pull:"clone",put:!0},animation:150,onAdd:function(a){},onUpdate:function(a){},onRemove:function(a){},onStart:function(a){},onSort:function(a){},onEnd:function(t){d(function(){var a=b.addNewSubData.BuildingImg[t.oldIndex],e=b.addNewSubData.ShowBuildingImg[t.oldIndex];b.addNewSubData.BuildingImg.splice(t.oldIndex,1),b.addNewSubData.ShowBuildingImg.splice(t.oldIndex,1),b.addNewSubData.BuildingImg.splice(t.newIndex,0,a),b.addNewSubData.ShowBuildingImg.splice(t.newIndex,0,e)})}}),t.fromTemplateUrl("newGoLogin-modal",{scope:b,animation:"slide-in-up"}).then(function(a){b.modal=a}),b.closeModal=function(){b.modal.hide()},b.publish=function(){if(b.addNewSubData.NewHouseName)if(b.addNewSubData.Price)if(b.addNewSubData.BuildingImg.length<1)o.customload("请上传楼盘图片");else{var a=JSON.parse(JSON.stringify(b.addNewSubData));n.post(i.NewHouse.postdetail.url,a).then(function(a){b.deleteSubData=!0,(D.scrollTo=0)<l.id?o.customload("修改成功"):o.customload("新增成功"),d(function(){u.$ionicGoBack()},1500)}).catch(function(a){400==a.status?(b.modalType="realname",b.modal.show()):401==a.status?(b.modalType="login",b.modal.show()):500==a.status&&o.customload("请将信息填写完整")})}else o.customload("请输均价");else o.customload("请输入房源名称")},b.$on("$ionicView.beforeLeave",function(a,e){b.deleteSubData?(D.data=null,D.showData=null):(D.data=b.addNewSubData,D.showData=b.addNewShowData)})}]).factory("$addNewData",[function(){var a=function(){};return a.prototype={data:null,showData:null,scrollTo:null,city:null},new a}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("addNew",{url:"/home/fbmanage/addnew/params/:id",cache:!1,templateUrl:"views/tabs/home/fbManage/addNew/addNew.html",controller:"addNewCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/fbManage/addNew/addNew.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addOtherCtl",["enterViewLoad","$addOtherData","appUtils","$ionicScrollDelegate","$localStorage","$ionicModal","$ionicHistory","$timeout","$http","$Factory","$scope","$rootScope","$state","$stateParams","$ionicPopover",function(t,o,d,a,e,n,r,u,l,i,c,s,h,p,S){c.back=function(){d.back()},c.headtitle="新增",0<p.id&&(c.headtitle="修改"),c.pageType=p.type,c.behaviour=p.behaviour,c.scrollTo=function(e){a.scrollTo(0,e||0,!1)},c.addOtherScrollListing=function(){c.currentTop=a.getScrollPosition().top,o.scrollTo=c.currentTop},window.addEventListener("native.keyboardshow",function(e){c.scrollTo(c.currentTop)}),c.filterShowData=function(e,a,t){$.map(e,function(e){e.text!=a||t(e.value)})},c.filterChangeData=function(e,a,t){$.map(e,function(e){e.value!=a||t(e.text)})},c.$on("$ionicView.enter",function(){c.initData(),c.scrollTo(o.scrollTo)}),c.initData=function(){l.get("jsonData/addOther/subOfficeData.json").then(function(e){c.loucengtype=e.data.Floor,c.loucengtypearr=[];for(var a=0;a<c.loucengtype.length;a++)c.loucengtypearr.push(c.loucengtype[a].text);$.scrEvent({data:c.loucengtypearr,evEle:".other-loucengtype",title:"请选择楼层类型",defValue:"低层",afterAction:function(e){$(".other-loucengtype").val(e),c.addOtherShowData.loucengType=e,c.filterShowData(c.loucengtype,e,function(e){c.addOtherSubData.FloorType=e})}}),$.scrEvent({data:["不代理","可被代理","可探讨代理"],evEle:".other-proxtype",title:"选择代理状态",defValue:"不代理",afterAction:function(e){switch($(".other-proxtype").val(e),c.addOtherShowData.proxType=e){case"不代理":c.addOtherSubData.ProxType=0;break;case"可被代理":c.addOtherSubData.ProxType=1;break;case"可探讨代理":c.addOtherSubData.ProxType=2;break;default:c.addOtherSubData.ProxType=0}}}),$.scrEvent({data:["个人房源","房东委托"],evEle:".other-usertype",title:"房源类型",defValue:"个人房源",afterAction:function(e){switch($(".other-usertype").val(e),c.addOtherShowData.userType=e){case"个人房源":c.addOtherSubData.UserType=2;break;case"房东委托":c.addOtherSubData.UserType=3;break;default:c.addOtherShowData.UserType=null}}}),0<p.id?l.get(i.SimpleHouse.getdetail.url,{params:{id:p.id,isShop:!1}}).then(function(e){if(o.data&&o.data.Id==e.data.Id)c.addOtherSubData=o.data,c.addOtherShowData=o.showData;else{switch(c.addOtherShowData={loucengType:"",proxType:""},e.data.ProxyStatus){case 0:c.addOtherShowData.proxType="不代理";break;case 1:c.addOtherShowData.proxType="可被代理";break;case 2:c.addOtherShowData.proxType="可探讨代理"}e.data.Exprop&&c.filterChangeData(c.loucengtype,e.data.Exprop.RightType,function(e){c.addOtherShowData.loucengType=e}),c.addOtherSubData=e.data}}):(o.data&&!o.data.Id?(c.addOtherSubData=o.data,c.addOtherShowData=o.showData):(c.addOtherShowData={userType:"",loucengType:"",proxType:""},c.addOtherSubData={AccountId:0,Address:null,AuthStatus:0,Behaviour:1,City:d.city.id,CommunityId:null,CommunityName:null,Discription:null,District:null,FloorType:0,HouseRate:0,HouseType:2,Id:0,IndoorImages:[],IndoorShowImages:[],Price:null,Space:null,Street:null,Tags:[],Title:null,UserType:2}),c.addOtherSubData.HouseType=c.pageType)})},c.photoChoose=function(){d.photoLiberary({selectMode:100,maxSelectCount:9,maxSelectSize:188743680},function(e,a){l.post(i.Account.upload.url,{path:"18/otherHouseSource",file:e,orientation:a}).then(function(e){0==e.data.error&&(c.addOtherSubData.IndoorImages.push(e.data.url),c.addOtherSubData.IndoorShowImages.push(e.data.view))}).catch(function(){t.customload("图片上传失败")})},function(e){t.customload("获取图片失败")})},c.cameraBase=function(){d.cameraBase({width:1e3,height:1e3},function(e){l.post(i.Account.upload.url,{path:"18/otherHouseSource",file:e}).then(function(e){0==e.data.error&&(c.addOtherSubData.IndoorImages.push(e.data.url),c.addOtherSubData.IndoorShowImages.push(e.data.view))})},function(e){t.customload("调用相机失败")})},c.remove=function(e){c.addOtherSubData.IndoorImages.splice(e,1),c.addOtherSubData.IndoorShowImages.splice(e,1)},Sortable.create(document.getElementById("addOther_sortindoor_img"),{group:{name:"otherwords",pull:"clone",put:!0},animation:150,onAdd:function(e){},onUpdate:function(e){},onRemove:function(e){},onStart:function(e){},onSort:function(e){},onEnd:function(t){u(function(){var e=c.addOtherSubData.IndoorImages[t.oldIndex],a=c.addOtherSubData.IndoorShowImages[t.oldIndex];c.addOtherSubData.IndoorImages.splice(t.oldIndex,1),c.addOtherSubData.IndoorShowImages.splice(t.oldIndex,1),c.addOtherSubData.IndoorImages.splice(t.newIndex,0,e),c.addOtherSubData.IndoorShowImages.splice(t.newIndex,0,a)})}}),n.fromTemplateUrl("other_GoLogin-modal",{scope:c,animation:"slide-in-up"}).then(function(e){c.modal=e}),c.closeModal=function(){c.modal.hide()},n.fromTemplateUrl("add_other_preview_modal",{scope:c,animation:"slide-in-up"}).then(function(e){c.previewModal=e}),c.showPreviewModal=function(){c.previewModal.show()},c.closePreviewModal=function(){c.previewModal.hide()},c.publish=function(){if(c.addOtherSubData.Title)if(c.addOtherSubData.Space)if(c.addOtherSubData.Price)if(c.addOtherSubData.IndoorImages.length<3)t.customload("至少三张室内图");else if(10<c.addOtherSubData.IndoorImages.length)t.customload("最多十张室内图");else{var e=JSON.parse(JSON.stringify(c.addOtherSubData));e.Behaviour=c.behaviour,e.HouseType=c.pageType,l.post(i.SimpleHouse.save.url,e).then(function(e){c.deleteSubData=!0,(o.scrollTo=0)<p.id?t.customload("修改成功"):t.customload("新增成功"),u(function(){h.go("myHouses",{type:4})},1500)}).catch(function(e){400==e.status?(c.modalType="realname",c.modal.show()):401==e.status?(c.modalType="login",c.modal.show()):t.customload("发布房源失败")})}else t.customload("请输入价格");else t.customload("请输入面积");else t.customload("请输入标题")},c.$on("$ionicView.beforeLeave",function(e,a){c.deleteSubData?(o.data=null,o.showData=null):c.addOtherSubData&&(o.data=c.addOtherSubData,o.showData=c.addOtherShowData)})}]).factory("$addOtherData",[function(){var e=function(){};return e.prototype={data:null,showData:null,scrollTo:null},new e}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("addOther",{url:"/home/fbmanage/next/addOther/params/:id/:type/:behaviour",cache:!1,templateUrl:"views/tabs/home/fbManage/addOther/addOther.html",controller:"addOtherCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/fbManage/addOther/addOther.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addRentCtl",["$addRentData","enterViewLoad","upImgBase","appUtils","$ionicScrollDelegate","$localStorage","$ionicModal","$ionicHistory","$http","$Factory","$rootScope","$scope","$state","$stateParams","$ionicPopover","$timeout",function(i,e,a,c,t,n,o,u,r,s,d,f,l,h,p,m){switch(f.back=function(){c.back()},f.scrollTo=function(a){t.scrollTo(0,a||0,!1)},f.addRentScrollListing=function(){f.currentTop=t.getScrollPosition().top,i.scrollTo=f.currentTop},window.addEventListener("native.keyboardshow",function(a){f.scrollTo(f.currentTop)}),f.doType="新增",0<h.id&&(f.doType="修改"),f.attach=h.attach,1*f.attach){case 1:f.headTitle="品牌公寓";break;case 2:f.headTitle="个人房源";break;case 3:f.headTitle="房东委托";break;case 4:f.headTitle="合租";break;case 5:f.headTitle="短租";break;default:f.headTitle="整租"}f.filterShowData=function(a,t,e){$.map(a,function(a){a.text!=t||e(a.value)})},f.filterChangeData=function(a,t,e){$.map(a,function(a){a.value!=t||e(a.text)})},f.$on("$ionicView.enter",function(){f.initData(),f.scrollTo(i.scrollTo)}),f.initData=function(){r.get("jsonData/addRent/rentHouseData.json").then(function(a){$.scrEvent({data:["整租","合租","短租"],evEle:".zf-zufang",title:"租房方式",defValue:"整租",afterAction:function(a){$(".zf-zufang").val(a),f.addRentSubData.RentType=a}}),f.fukuangtype=a.data.PayType;for(var t=[],e=0;e<f.fukuangtype.length;e++)t.push(f.fukuangtype[e].text);$.scrEvent({data:t,evEle:".zf-fukuan",title:"选择付款方式",defValue:"押1付1",afterAction:function(a){$(".zf-fukuan").val(a),f.addRentShowData.fukuanType=a,f.filterShowData(f.fukuangtype,a,function(a){f.addRentSubData.PayType=a})}}),$.scrEvent3({data:[0,1,2,3,4,5,6,7,8,9],data2:[0,1,2,3,4,5,6,7,8,9],data3:[0,1,2,3,4,5,6,7,8,9],evEle:".zf-fangxing",title:"选择户型",defValue:1,defValue2:1,defValue3:1,eleName:"室",eleName2:"厅",eleName3:"卫",afterAction:function(a,t,e){$(".zf-fangxing").val(a+"室"+t+"厅"+e+"卫"),f.addRentSubData.RoomType=a,f.addRentSubData.HallType=t,f.addRentSubData.BathType=e,f.addRentShowData.fangXing=a+"室"+t+"厅"+e+"卫"}});var n=[];for(e=0;e<99;e++)n.push(e);$.scrEvent2({data:n,data2:n,evEle:".zf-louceng",title:"选择楼层",defValue:1,defValue2:1,afterAction:function(a,t){$(".zf-louceng").val(a+"/"+t),f.addRentSubData.Floor=a,f.addRentSubData.TotalFloor=t,f.addRentShowData.louCeng=a+"/"+t}});var o=a.data.HouseStatus.HouseType,u=[];for(e=0;e<o.length;e++)u.push(o[e].text);$.scrEvent({data:u,evEle:".zf-leixing",title:"选择类型",defValue:"普通住宅",afterAction:function(a){$(".zf-leixing").val(a),f.addRentSubData.BuildType=a}}),f.chaoxiang=a.data.RentRoom.Orientation,f.chaoxiangarr=[];for(e=0;e<f.chaoxiang.length;e++)f.chaoxiangarr.push(f.chaoxiang[e].text);$.scrEvent({data:f.chaoxiangarr,evEle:".zf-chaoxiang",title:"选择朝向",defValue:"东",afterAction:function(a){$(".zf-chaoxiang").val(a),f.addRentSubData.Orientation=a}});var d=a.data.HouseStatus.Fitment,l=[];for(e=0;e<d.length;e++)l.push(d[e].text);$.scrEvent({data:l,evEle:".zf-zhuangxiu",title:"选择装修",defValue:"毛坯",afterAction:function(a){$(".zf-zhuangxiu").val(a),f.addRentSubData.Fitment=a}});for(d=a.data.HouseStatus.Fitment,l=[],e=0;e<d.length;e++)l.push(d[e].text);$.scrEvent({data:l,evEle:".zf-zhuangxiu",title:"选择装修",defValue:"毛坯",afterAction:function(a){$(".zf-zhuangxiu").val(a),f.addRentSubData.Fitment=a}}),f.chuzujian=a.data.RentRoom.Room,f.chuzujianarr=[];for(e=0;e<f.chuzujian.length;e++)f.chuzujianarr.push(f.chuzujian[e].text);$.scrEvent({data:f.chuzujianarr,evEle:".zf-chuzujian",title:"选择出租间",defValue:"次卧",afterAction:function(a){$(".zf-chuzujian").val(a),f.addRentShowData.chuzujian=a,f.filterShowData(f.chuzujian,a,function(a){f.addRentSubData.RentRoom=a})}}),f.roomate=a.data.RoomMate,f.roomatearr=[];for(e=0;e<f.roomate.length;e++)f.roomatearr.push(f.roomate[e].text);$.scrEvent({data:f.roomatearr,evEle:".zf-roomate",title:"选择出租间要求",defValue:"男女不限",afterAction:function(a){$(".zf-roomate").val(a),f.addRentSubData.OwnerPsy=a}}),0<h.id?r.get(s.NewHouseSource.detail.url,{params:{id:h.id}}).then(function(a){i.data&&i.data.Id==a.data.Id?(f.addRentShowData=i.showData,f.addRentSubData=i.data):(f.addRentShowData={louCeng:a.data.Floor+"/"+a.data.TotalFloor,fangXing:a.data.RoomType+"室"+a.data.HallType+"厅"+a.data.BathType+"卫",fukuanType:"",chuzujian:""},f.filterChangeData(f.fukuangtype,a.data.PayYear,function(a){f.addRentShowData.fukuanType=a}),f.filterChangeData(f.chuzujian,a.data.RentRoom,function(a){f.addRentShowData.chuzujian=a}),f.addRentSubData=a.data,f.addRentSubData.ExProp=JSON.parse(f.addRentSubData.ExProp))}):i.data&&!i.data.Id?(f.addRentShowData=i.showData,f.addRentSubData=i.data):(f.addRentShowData={louCeng:"",fangXing:"",fukuanType:"",chuzujian:""},f.addRentSubData={AccountId:0,Address:null,BathType:0,BuildType:null,City:c.city.id,CommunityAddress:null,CommunityId:0,CommunityName:null,Commuport:null,Configure:null,CreateTime:null,Discription:null,ExProp:[{text:"床",value:1,isChecked:!1},{text:"电视",value:2,isChecked:!1},{text:"空调",value:3,isChecked:!1},{text:"冰箱",value:4,isChecked:!1},{text:"洗衣机",value:5,isChecked:!1},{text:"热水器",value:6,isChecked:!1},{text:"宽带",value:7,isChecked:!1},{text:"可做饭",value:8,isChecked:!1},{text:"独立卫生间",value:9,isChecked:!1},{text:"独立阳台",value:10,isChecked:!1},{text:"衣柜",value:11,isChecked:!1},{text:"沙发",value:12,isChecked:!1},{text:"暖气",value:13,isChecked:!1}],Fitment:null,Floor:0,HallType:0,Id:0,IndoorImages:[],IndoorShowImages:[],IsShowPhone:!1,Number:null,Orientation:null,OwnerPsy:null,PayType:1,Price:null,ProxyStatus:0,Recommend:!1,RentRoom:0,RentType:null,RoomType:0,ServiceIntro:null,Space:null,Special:null,Tags:null,Title:null,TotalFloor:0,Type:2,UserType:0,Year:0})}).catch(function(){e.customload("获取失败")})},f.remove=function(a){f.addRentSubData.IndoorImages.splice(a,1),f.addRentSubData.IndoorShowImages.splice(a,1)},f.photoChoose=function(){c.photoLiberary({selectMode:100,maxSelectCount:9,maxSelectSize:188743680},function(a,t){r.post(s.Account.upload.url,{path:"18/rentHouseSource",file:a,orientation:t}).then(function(a){0==a.data.error&&(f.addRentSubData.IndoorImages.push(a.data.url),f.addRentSubData.IndoorShowImages.push(a.data.view))}).catch(function(){e.customload("图片上传失败")})},function(a){e.customload("获取图片失败")})},f.cameraBase=function(){c.cameraBase({width:1e3,height:1e3},function(a){r.post(s.Account.upload.url,{path:"18/rentHouseSource",file:a}).then(function(a){0==a.data.error&&(f.addRentSubData.IndoorImages.push(a.data.url),f.addRentSubData.IndoorShowImages.push(a.data.view))})},function(a){e.customload("调用相机失败")})},Sortable.create(document.getElementById("addrent_sortindoor_img"),{group:{name:"rentwords",pull:"clone",put:!0},animation:150,onAdd:function(a){},onUpdate:function(a){},onRemove:function(a){},onStart:function(a){},onSort:function(a){},onEnd:function(e){m(function(){var a=f.addRentSubData.IndoorImages[e.oldIndex],t=f.addRentSubData.IndoorShowImages[e.oldIndex];f.addRentSubData.IndoorImages.splice(e.oldIndex,1),f.addRentSubData.IndoorShowImages.splice(e.oldIndex,1),f.addRentSubData.IndoorImages.splice(e.newIndex,0,a),f.addRentSubData.IndoorShowImages.splice(e.newIndex,0,t)})}}),o.fromTemplateUrl("rentGoLogin-modal",{scope:f,animation:"slide-in-up"}).then(function(a){f.modal=a}),f.closeModal=function(){f.modal.hide()},o.fromTemplateUrl("add_rent_preview_modal",{scope:f,animation:"slide-in-up"}).then(function(a){f.previewModal=a}),f.showPreviewModal=function(){f.previewModal.show()},f.closePreviewModal=function(){f.previewModal.hide()},f.publish=function(){if(f.addRentSubData.IndoorImages.length<3)e.customload("至少三张室内图");else if(10<f.addRentSubData.IndoorImages.length)e.customload("最多十张室内图");else if(f.addRentSubData.Title)if(f.addRentSubData.CommunityName)if(f.addRentSubData.Space)if(f.addRentSubData.Price)if(f.addRentSubData.RoomType||f.addRentSubData.HallType||f.addRentSubData.BathType){4==f.attach?f.addRentSubData.RentType="合租":f.attach||(f.addRentSubData.RentType="整租");var a=JSON.parse(JSON.stringify(f.addRentSubData));a.ExProp=JSON.stringify(a.ExProp),r.post(s.NewHouseSource.save.url,a).then(function(a){f.deleteSubData=!0,(i.scrollTo=0)<h.id?e.customload("修改成功"):e.customload("新增成功"),m(function(){l.go("myHouses",{type:2})},1500)}).catch(function(a){400==a.status?(f.modalType="realname",f.modal.show()):401==a.status?(f.modalType="login",f.modal.show()):500==a.status&&e.customload("服务器错误")})}else e.customload("请选择户型");else e.customload("请输入租金");else e.customload("请输入面积");else e.customload("请选择小区");else e.customload("请输入标题")},f.$on("$ionicView.beforeLeave",function(a,t){f.deleteSubData?(i.data=null,i.showData=null):(i.data=f.addRentSubData,i.showData=f.addRentShowData)})}]).factory("$addRentData",[function(){var a=function(){};return a.prototype={data:null,showData:null,scrollTo:null},new a}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("addRent",{url:"/home/fbmanage/addrent/params/:id/:type/:attach",cache:!1,templateUrl:"views/tabs/home/fbManage/addRent/addRent.html",controller:"addRentCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/fbManage/addRent/addRent.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addSellCtl",["$addSellData","appUtils","wechatLinkBase","WechatService","$ionicScrollDelegate","$localStorage","$ionicModal","enterViewLoad","$ionicLoading","$ionicHistory","$timeout","$http","$Factory","$scope","$rootScope","$state","$stateParams","$ionicPopover",function(r,u,l,n,e,a,t,o,d,i,s,c,S,h,p,f,m,g){h.back=function(){u.back()},h.headtitle="二手房新增",0<m.id&&(h.headtitle="二手房修改"),h.scrollTo=function(a){e.scrollTo(0,a||0,!1)},h.addSellScrollListing=function(){h.currentTop=e.getScrollPosition().top,r.scrollTo=h.currentTop},window.addEventListener("native.keyboardshow",function(a){h.scrollTo(h.currentTop)}),h.filterShowData=function(a,e,t){$.map(a,function(a){a.text!=e||t(a.value)})},h.filterChangeData=function(a,e,t){$.map(a,function(a){a.value!=e||t(a.text)})},h.$on("$ionicView.enter",function(){h.initData(),h.scrollTo(r.scrollTo)}),h.initData=function(){c.get("jsonData/addSell/sellHouseData.json").then(function(a){h.righttype=a.data.PropertyRight.Type,h.righttypearr=[];for(var e=0;e<h.righttype.length;e++)h.righttypearr.push(h.righttype[e].text);$.scrEvent({data:h.righttypearr,evEle:".qu-righttype",title:"选择产权类型",defValue:"商品房",afterAction:function(a){$(".qu-righttype").val(a),h.addSellShowData.chanquanType=a,h.filterShowData(h.righttype,a,function(a){h.addSellSubData.ExProp.RightType=a})}}),h.rightyear=a.data.PropertyRight.Year,h.rightyeararr=[];for(e=0;e<h.rightyear.length;e++)h.rightyeararr.push(h.rightyear[e].text);$.scrEvent({data:h.rightyeararr,evEle:".qu-rightyear",title:"选择产权年限",defValue:"70年",afterAction:function(a){$(".qu-rightyear").val(a),h.addSellShowData.chanquanYear=a,h.filterShowData(h.rightyear,a,function(a){h.addSellSubData.ExProp.RightYear=a})}}),h.usedyear=a.data.UsedYear,h.usedyeararr=[];for(e=0;e<h.usedyear.length;e++)h.usedyeararr.push(h.usedyear[e].text);$.scrEvent({data:h.usedyeararr,evEle:".qu-usedyear",title:"选择房屋年限",defValue:"满二",afterAction:function(a){$(".qu-usedyear").val(a),h.addSellShowData.fangwuYear=a,h.filterShowData(h.usedyear,a,function(a){h.addSellSubData.ExProp.UsedYear=a})}}),$.scrEvent({data:["不代理","可被代理","可探讨代理"],evEle:".qu-proxtype",title:"选择代理状态",defValue:"不代理",afterAction:function(a){switch($(".qu-proxtype").val(a),h.addSellShowData.proxType=a){case"不代理":h.addSellSubData.ProxType=0;break;case"可被代理":h.addSellSubData.ProxType=1;break;case"可探讨代理":h.addSellSubData.ProxType=2;break;default:h.addSellSubData.ProxType=0}}}),h.chaoxiang=a.data.HouseStatus.Orientation,h.chaoxiangarr=[];for(e=0;e<h.chaoxiang.length;e++)h.chaoxiangarr.push(h.chaoxiang[e].text);$.scrEvent({data:h.chaoxiangarr,evEle:".qu-chaoxiang",title:"选择朝向",defValue:"东",afterAction:function(a){$(".qu-chaoxiang").val(a),h.addSellSubData.Orientation=a}});var t=[];for(e=0;e<99;e++)t.push(e);$.scrEventCus2({data:t,data2:t,evEle:".sell-louceng",title:"选择楼层",defValue:1,defValue2:1,eleName:"层",eleName2:"层",eleNo:"第",eleTotal:"共",afterAction:function(a,e){$(".sell-louceng").val(a+"/"+e),h.addSellSubData.Floor=a,h.addSellSubData.TotalFloor=e,h.addSellShowData.louCeng=a+"/"+e}}),$.scrEvent3({data:[0,1,2,3,4,5,6,7,8,9],data2:[0,1,2,3,4,5,6,7,8,9],data3:[0,1,2,3,4,5,6,7,8,9],evEle:".qu-fangxing",title:"选择户型",defValue:1,defValue2:1,defValue3:1,eleName:"室",eleName2:"厅",eleName3:"卫",afterAction:function(a,e,t){$(".qu-fangxing").val(a+"室"+e+"厅"+t+"卫"),h.addSellSubData.RoomType=a,h.addSellSubData.HallType=e,h.addSellSubData.BathType=t,h.addSellShowData.fangXing=a+"室"+e+"厅"+t+"卫"}});var o=a.data.HouseStatus.HouseType,l=[];for(e=0;e<o.length;e++)l.push(o[e].text);$.scrEvent({data:l,evEle:".qu-leixing",title:"选择类型",defValue:"普通住宅",afterAction:function(a){$(".qu-leixing").val(a),h.addSellSubData.BuildType=a}});var n=a.data.HouseStatus.Fitment,d=[];for(e=0;e<n.length;e++)d.push(n[e].text);$.scrEvent({data:d,evEle:".qu-zhuangxiu",title:"选择装修",defValue:"毛坯",afterAction:function(a){$(".qu-zhuangxiu").val(a),h.addSellSubData.Fitment=a}}),0<m.id?c.get(S.NewHouseSource.detail.url,{params:{id:m.id}}).then(function(a){if(r.data&&r.data.Id==a.data.Id)h.addSellShowData=r.showData,h.addSellSubData=r.data;else{switch(h.addSellShowData={louCeng:a.data.Floor+"/"+a.data.TotalFloor,fangXing:a.data.RoomType+"室"+a.data.HallType+"厅"+a.data.BathType+"卫",chanquanYear:"",chanquanType:"",fangwuYear:"",proxType:"",commissionNum:"",huShiHao:""},a.data.ExProp?(a.data.ExProp=JSON.parse(a.data.ExProp),h.filterChangeData(h.usedyear,a.data.ExProp.UsedYear,function(a){h.addSellShowData.fangwuYear=a}),h.filterChangeData(h.rightyear,a.data.ExProp.RightYear,function(a){h.addSellShowData.chanquanYear=a}),h.filterChangeData(h.righttype,a.data.ExProp.RightType,function(a){h.addSellShowData.chanquanType=a})):a.data.ExProp={HouseNum1:null,HouseUnit1:null,HouseNum2:null,HouseUnit2:null,HouseNum3:null,RightYear:null,RightType:null,HasElevator:!1,UsedYear:null,OnlyOne:!1,IsNew:!1,Commission:null},a.data.ProxyStatus){case 0:h.addSellShowData.proxType="不代理";break;case 1:h.addSellShowData.proxType="可代理";break;case 2:h.addSellShowData.proxType="可探讨代理";break;default:h.addSellShowData.proxType="不代理"}h.addSellSubData=a.data}}):r.data&&!r.data.Id?(h.addSellShowData=r.showData,h.addSellSubData=r.data):(h.addSellShowData={louCeng:"",fangXing:"",chanquanYear:"",chanquanType:"",fangwuYear:"",proxType:"",commissionNum:"",huShiHao:""},h.addSellSubData={City:u.city.id,Type:1,Address:"",IndoorImages:[],IndoorShowImages:[],LayoutImages:[],LayoutShowImages:[],Title:"",Number:"",Price:"",PayType:"",RentType:"",Space:"",InnerSpace:"",RoomType:"",HallType:"",BathType:"",Floor:"",TotalFloor:"",BuildType:"",Orientation:"",Fitment:"",Year:"",Special:[],Configure:[],Discription:"",Recommend:!0,AccountId:"",CommunityId:"",CreateTime:"",CommunityName:"",CommunityAddress:"",Tags:[],ProxyStatus:0,Commuport:"",ExProp:{HouseNum1:null,HouseUnit1:null,HouseNum2:null,HouseUnit2:null,HouseNum3:null,RightYear:null,RightType:null,HasElevator:!1,UsedYear:null,OnlyOne:!1,IsNew:!1,Commission:null},OwnerPsy:null,ServiceIntro:null,IsShowPhone:!1,UserType:2})}).catch(function(){o.customload("获取失败")})},h.photoChoose=function(){u.photoLiberary({selectMode:100,maxSelectCount:9,maxSelectSize:188743680},function(a,e){c.post(S.Account.upload.url,{path:"18/sellHouseSource",file:a,orientation:e}).then(function(a){0==a.data.error&&(h.addSellSubData.IndoorImages.push(a.data.url),h.addSellSubData.IndoorShowImages.push(a.data.view))}).catch(function(){o.customload("图片上传失败")})},function(a){o.customload("获取图片失败")})},h.indoorCameraBase=function(){u.cameraBase({width:1e3,height:1e3},function(a){c.post(S.Account.upload.url,{path:"18/sellHouseSource",file:a}).then(function(a){0==a.data.error&&(h.addSellSubData.IndoorImages.push(a.data.url),h.addSellSubData.IndoorShowImages.push(a.data.view))})},function(a){o.customload("调用相机失败")})},h.remove=function(a){h.addSellSubData.IndoorImages.splice(a,1),h.addSellSubData.IndoorShowImages.splice(a,1)},Sortable.create(document.getElementById("addsell_sortindoor_img"),{group:{name:"indoorwords",pull:"",put:!1},animation:150,onAdd:function(a){},onUpdate:function(a){},onRemove:function(a){},onStart:function(a){},onSort:function(a){},onEnd:function(t){s(function(){var a=h.addSellSubData.IndoorImages[t.oldIndex],e=h.addSellSubData.IndoorShowImages[t.oldIndex];h.addSellSubData.IndoorImages.splice(t.oldIndex,1),h.addSellSubData.IndoorShowImages.splice(t.oldIndex,1),h.addSellSubData.IndoorImages.splice(t.newIndex,0,a),h.addSellSubData.IndoorShowImages.splice(t.newIndex,0,e)})}}),t.fromTemplateUrl("sellGoLogin-modal",{scope:h,animation:"slide-in-up"}).then(function(a){h.modal=a}),h.closeModal=function(){h.modal.hide()},t.fromTemplateUrl("add_sell_preview_modal",{scope:h,animation:"slide-in-up"}).then(function(a){h.previewModal=a}),h.showPreviewModal=function(){h.previewModal.show()},h.closePreviewModal=function(){h.previewModal.hide()},t.fromTemplateUrl("choose_share_auth_modal",{scope:h,animation:"slide-in-up"}).then(function(a){h.authShareModal=a}),h.showauthShareModal=function(){h.authShareModal.show(),h.addSellSuccess=!0},h.closeauthShareModal=function(){h.authShareModal.hide()},t.fromTemplateUrl("bottom_share_modal",{scope:h,animation:"slide-in-up"}).then(function(a){h.bottomShareModal=a}),h.showBottomShareModal=function(){h.bottomShareModal.show()},h.closeBottomShareModal=function(){h.bottomShareModal.hide()},h.$on("modal.hidden",function(){h.addSellSuccess=!1,h.addSellSuccess&&(h.ShareOrAuth&&"share"==h.ShareOrAuth||h.ShareOrAuth&&"auth"==h.ShareOrAuth||f.go("myHouses",{type:1}))}),h.chooseShare=function(){h.ShareOrAuth,h.showBottomShareModal()},h.chooseAuth=function(){h.ShareOrAuth,f.go("realHouse",{id:h.returnId})},h.share=function(t){var a=h.addSellSubData.IndoorImages[0]||"http://imgs.wujiuyun.com/images/logo.png";if(0==t||1==t)l.changeBase(a,function(a){var e={scene:t,message:{title:h.addSellShowData.Title,thumb:a,description:h.addSellSubData.Discription||"房田网为您推荐",media:{type:Wechat.Type.LINK,webpageUrl:u.shareHost+"/#/sellhousedetail/"+h.returnId}}};n.share(e)});else if(2==t){(e={}).url=u.shareHost+"/#/sellhousedetail/"+h.returnId,e.title=h.addSellShowData.Title,e.description=h.addSellSubData.Discription||"房田网为您推荐",e.imageUrl=h.shareImgUrl,e.appName="房田网",u.qqShareQQAndroid(e,function(){},function(a){})}else{var e;(e={}).url=u.shareHost+"/#/sellhousedetail/"+h.returnId,e.title=h.addSellShowData.Title,e.description=h.addSellSubData.Discription||"房田网为您推荐";var o=[h.shareImgUrl];e.imageUrl=o,YCQQ.shareToQzone(function(){},function(a){},e)}},h.publish=function(){if(h.addSellSubData.IndoorImages.length<3)o.customload("至少三张室内图");else if(10<h.addSellSubData.IndoorImages.length)o.customload("最多十张室内图");else if(h.addSellSubData.CommunityName)if(h.addSellSubData.Address)if(h.addSellSubData.Title)if(h.addSellSubData.Space)if(h.addSellSubData.Price)if(h.addSellSubData.RoomType||h.addSellSubData.HallType||h.addSellSubData.BathType){var a=JSON.parse(JSON.stringify(h.addSellSubData));a.ExProp=JSON.stringify(a.ExProp),c.post(S.NewHouseSource.save.url,a).then(function(a){h.deleteSubData=!0,(r.scrollTo=0)<m.id?o.customload("修改成功"):o.customload("新增成功"),s(function(){f.go("myHouses",{type:1})},1500)}).catch(function(a){400==a.status?(h.modalType="realname",h.modal.show()):401==a.status?(h.modalType="login",h.modal.show()):500==a.status?o.customload("服务器错误"):o.customload("新增房源失败")})}else o.customload("请选择户型");else o.customload("请输入售价");else o.customload("请输入产权面积");else o.customload("请输入标题");else o.customload("请输入房地坐落");else o.customload("请选择小区")},h.$on("$ionicView.beforeLeave",function(a,e){if(h.deleteSubData)r.data=null,r.showData=null;else if(h.addSellSubData){var t=$('#add_sell input[type="checkbox"]');h.addSellSubData.Special=[];for(var o=0;o<t.length;o++)t[o].checked&&h.addSellSubData.Special.push(o+1);r.data=h.addSellSubData,r.showData=h.addSellShowData}})}]).factory("$addSellData",[function(){var a=function(){};return a.prototype={data:null,showData:null,scrollTo:null},new a}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("addSell",{url:"/home/fbmanage/addsell/params/:id",cache:!1,templateUrl:"views/tabs/home/fbManage/addSell/addSell.html",controller:"addSellCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/fbManage/addSell/addSell.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addShopCtl",["$addShopData","appUtils","enterViewLoad","$ionicScrollDelegate","$localStorage","$ionicModal","$ionicHistory","$timeout","$http","$Factory","$scope","$rootScope","$state","$stateParams","$ionicPopover",function(e,t,d,o,a,n,u,l,s,i,p,r,h,c,S){p.back=function(){t.back()},p.headtitle="商铺新增",0<c.id&&(p.headtitle="商铺修改"),p.paramsId=1*c.id,p.pageType=c.type,p.behaviour=1*c.behaviour,p.isTransfer={value:!1},p.scrollTo=function(a){o.scrollTo(0,a||0,!0)},p.addShopScrollListing=function(){p.currentTop=o.getScrollPosition().top,e.scrollTo=p.currentTop},window.addEventListener("native.keyboardshow",function(a){p.scrollTo(p.currentTop)}),p.filterShowData=function(a,o,e){$.map(a,function(a){a.text!=o||(a.subType?e(a.value,a.subType):e(a.value))})},p.filterChangeData=function(a,o,e){$.map(a,function(a){a.value!=o||e(a.text)})},p.$on("$ionicView.enter",function(){p.initData(),p.scrollTo(e.scrollTo)}),p.initData=function(){s.get("jsonData/addShop/subShopData.json").then(function(a){p.paytype=[];for(var o=0;o<99;o++)p.paytype.push(o);$.scrEvent2({data:p.paytype,data2:p.paytype,evEle:".shop-paytype",title:"选择付款方式",defValue:1,defValue2:1,eleName:"付",eleName2:"押",afterAction:function(a,o){p.addShopShowData.payType="付"+a+"押"+o,$(".shop-paytype").val("付"+a+"押"+o),p.addShopSubData.PayMouth=a,p.addShopSubData.MortMonth=o}}),$.scrEvent({data:["经营中","空置中"],evEle:".shop-businessstatus",title:"选择经营状态",defValue:"经营中",afterAction:function(a){switch($(".shop-businessstatus").val(a),p.addShopShowData.businessStatus=a){case"经营中":p.addShopSubData.BusinessState=0;break;case"空置中":p.addShopSubData.BusinessState=1;break;default:p.addShopSubData.BusinessState=0}}}),p.loucengarr=[];for(o=0;o<99;o++)p.loucengarr.push(o);$.scrEvent({data:p.paytype,evEle:".shop-louceng-from",title:"选择起始层",defValue:"1",afterAction:function(a){$(".shop-louceng-from").val(a+"层"),p.addShopSubData.Floor=a}}),$.scrEvent({data:p.paytype,evEle:".shop-louceng-mid",title:"选择至几层",defValue:"2",afterAction:function(a){$(".shop-louceng-mid").val(a+"层"),p.addShopSubData.MiddleFloor=a}}),$.scrEvent({data:p.paytype,evEle:".shop-louceng-total",title:"选择总楼层",defValue:"1",afterAction:function(a){$(".shop-louceng-total").val(a+"层"),p.addShopSubData.TotalFloor=a}}),$.scrEvent({data:["不代理","可被代理","可探讨代理"],evEle:".shop-proxtype",title:"选择代理状态",defValue:"不代理",afterAction:function(a){switch($(".shop-proxtype").val(a),p.addShopShowData.proxType=a){case"不代理":p.addShopSubData.ProxType=0;break;case"可被代理":p.addShopSubData.ProxType=1;break;case"可探讨代理":p.addShopSubData.ProxType=2;break;default:p.addShopSubData.ProxType=0}}}),0<c.id?s.get(i.SimpleHouse.getdetail.url,{params:{id:c.id,isshop:!0}}).then(function(a){e.data&&e.data.Id==a.data.Id?(p.addShopSubData=e.data,p.addShopShowData=e.showData):(3==a.data.Behaviour&&(p.isTransfer.value=!0),p.addShopSubData=a.data,p.addShopShowData={louCeng:"",manageType:"",subType:"",proxType:"",payType:"付"+a.data.PayMouth+"押"+a.data.MortMonth,businessStatus:""},p.addShopSubData.ConfigurJson=JSON.parse(p.addShopSubData.ConfigurJson))}):e.data&&!e.showData.Id?(p.addShopSubData=e.data,p.addShopShowData=e.showData):(p.addShopShowData={louCeng:"",manageType:"",subType:"",proxType:"",payType:"",businessStatus:""},p.addShopSubData={AccountId:0,Address:null,AuthStatus:0,Behaviour:0,BusinessState:0,City:t.city.id,CommunityId:null,CommunityName:null,ConfigurJson:[{text:"客梯",value:1,isChecked:!1},{text:"货梯",value:2,isChecked:!1},{text:"中央空调",value:3,isChecked:!1},{text:"停车位",value:4,isChecked:!1},{text:"天然气",value:5,isChecked:!1},{text:"电话/网络",value:6,isChecked:!1},{text:"暖气",value:7,isChecked:!1},{text:"扶梯",value:8,isChecked:!1},{text:"上水",value:9,isChecked:!1},{text:"下水",value:10,isChecked:!1},{text:"排烟",value:11,isChecked:!1},{text:"排污",value:12,isChecked:!1},{text:"管煤",value:13,isChecked:!1},{text:"380V",value:11,isChecked:!1},{text:"可明火",value:12,isChecked:!1},{text:"外摆区",value:13,isChecked:!1}],Depth:null,Discription:null,District:null,Floor:null,FloorType:0,FreeMouth:null,Height:null,HouseRate:0,HouseType:1,Id:0,IndoorImages:[],IndoorShowImages:[],ManageType:0,MiddleFloor:null,MinMouth:null,MortMonth:0,PayMouth:0,PayType:null,Price:null,ShopType:0,Space:null,Street:null,SubType:0,Tags:[],Title:null,TotalFloor:null,TransferFee:0,UserType:2,With:null,resiMonth:0})}).catch(function(){d.customload("获取失败")})},p.photoChoose=function(){t.photoLiberary({selectMode:100,maxSelectCount:9,maxSelectSize:188743680},function(a,o){s.post(i.Account.upload.url,{path:"18/otherHouseSource",file:a,orientation:o}).then(function(a){0==a.data.error&&(p.addShopSubData.IndoorImages.push(a.data.url),p.addShopSubData.IndoorShowImages.push(a.data.view))}).catch(function(){d.customload("图片上传失败")})},function(a){d.customload("获取图片失败")})},p.cameraBase=function(){t.cameraBase({width:1e3,height:1e3},function(a){s.post(i.Account.upload.url,{path:"18/otherHouseSource",file:a}).then(function(a){0==a.data.error&&(p.addShopSubData.IndoorImages.push(a.data.url),p.addShopSubData.IndoorShowImages.push(a.data.view))})},function(a){d.customload("调用相机失败")})},p.remove=function(a){p.addShopSubData.IndoorImages.splice(a,1),p.addShopSubData.IndoorShowImages.splice(a,1)},Sortable.create(document.getElementById("addShop_sortindoor_img"),{group:{name:"otherwords",pull:"clone",put:!0},animation:150,onAdd:function(a){},onUpdate:function(a){},onRemove:function(a){},onStart:function(a){},onSort:function(a){},onEnd:function(e){l(function(){var a=p.addShopSubData.IndoorImages[e.oldIndex],o=p.addShopSubData.IndoorShowImages[e.oldIndex];p.addShopSubData.IndoorImages.splice(e.oldIndex,1),p.addShopSubData.IndoorShowImages.splice(e.oldIndex,1),p.addShopSubData.IndoorImages.splice(e.newIndex,0,a),p.addShopSubData.IndoorShowImages.splice(e.newIndex,0,o)})}}),n.fromTemplateUrl("shop_GoLogin-modal",{scope:p,animation:"slide-in-up"}).then(function(a){p.modal=a}),p.closeModal=function(){p.modal.hide()},n.fromTemplateUrl("add_shop_preview_modal",{scope:p,animation:"slide-in-up"}).then(function(a){p.previewModal=a}),p.showPreviewModal=function(){p.previewModal.show()},p.closePreviewModal=function(){p.previewModal.hide()},p.publish=function(){if(p.addShopSubData.Address||1!=p.behaviour)if(p.addShopSubData.Title)if(p.addShopSubData.Space)if(p.addShopSubData.Price)if(p.addShopSubData.IndoorImages.length<3)d.customload("选择至少三张图片");else if(10<p.addShopSubData.IndoorImages.length)d.customload("选择最多十张图片");else{1==p.behaviour?p.addShopSubData.Behaviour=p.behaviour:p.isTransfer.value?p.addShopSubData.Behaviour=3:p.addShopSubData.Behaviour=2;var a=JSON.parse(JSON.stringify(p.addShopSubData));a.ConfigurJson=JSON.stringify(a.ConfigurJson),s.post(i.SimpleHouse.shopsave.url,a).then(function(a){p.deleteSubData=!0,(e.scrollTo=0)<c.id?d.customload("修改成功"):d.customload("新增成功"),l(function(){h.go("myHouses",{type:3})},1500)}).catch(function(a){400==a.status?(p.modalType="realname",p.modal.show()):401==a.status?(p.modalType="login",p.modal.show()):500==a.status&&d.customload("请将信息填写完整")})}else d.customload("请输入价格");else d.customload("请输入面积");else d.customload("请输入标题");else d.customload("请输入房地坐落")},p.$on("$ionicView.beforeLeave",function(a,o){p.deleteSubData?(e.data=null,e.showData=null):p.addShopSubData&&(e.data=p.addShopSubData,e.showData=p.addShopShowData)})}]).factory("$addShopData",[function(){var a=function(){};return a.prototype={data:null,showData:null,scrollTo:null},new a}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("addShop",{url:"/home/fbmanage/addshop/params/:id/:type/:behaviour",cache:!1,templateUrl:"views/tabs/home/fbManage/addShop/addShop.html",controller:"addShopCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/fbManage/addShop/addShop.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("chooseHouseTagsCtl",["enterViewLoad","appUtils","$ionicLoading","$Factory","$http","$cordovaKeyboard","$localStorage","$rootScope","$scope","$stateParams","$ionicPopover","$timeout","$ionicHistory",function(r,o,e,a,n,c,t,s,i,u,p,l,h){i.back=function(){o.back()},i.chooseData={brt:"",bus:"",subway:"",business:"",school:"",scenic:""};var b=function(r,o){for(var e=0;e<r.length;e++)o.push(angular.extend({isChecked:!1},r[e]));return o},d=new BMap.Map("choose_house_tags_map");(new BMap.Geocoder).getPoint("厦门 国金广场",function(r){r&&(d.centerAndZoom(r,18),d.addOverlay(new BMap.Marker(r)),new BMap.LocalSearch(d,{renderOptions:{map:d},onSearchComplete:function(r){i.brtArr=b(r[0].Br,[]),i.busArr=b(r[1].Br,[]),i.subwayArr=b(r[2].Br,[]),i.businessArr=b(r[3].Br,[]),i.schoolArr=b(r[4].Br,[]),i.scenicArr=b(r[5].Br,[])}}).searchNearby(["BRT","公交站","地铁站","商圈","学校","景区"],r,1e3))})}]);
"use strict";angular.module("App").config(["$stateProvider",function(o){o.state("chooseHouseTags",{url:"/home/fbmanage/choosehousetags/params/:name",cache:!1,templateUrl:"views/tabs/home/fbManage/chooseHouseTags/chooseHouseTags.html",controller:"chooseHouseTagsCtl",resolve:{load:["$ocLazyLoad",function(o){return o.load(["views/tabs/home/fbManage/chooseHouseTags/chooseHouseTags.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("guessPriceCommunityCtl",["appUtils","$localStorage","$ionicHistory","$ionicLoading","$http","$Factory","$rootScope","$scope","$stateParams","$timeout",function(o,e,a,t,c,i,n,r,u,s){r.name=u.name,r.cancel=function(){o.back()},r.searchName={key:""},r.choosexiaoqu=function(e,a){n.$emit("guesspriceCommunityChange",r.xiaoquarr[a].Name),o.back()},r.search=function(e){c.get(i.NewHouseSource.communities.url,{params:{query:r.searchName.key,city:o.city.id}}).then(function(e){r.xiaoquarr=e.data},function(){t.show({template:"获取二手小区失败",duration:1e3})})},r.clear=function(){r.searchName.key="",r.xiaoquarr=[]}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("tabs.guessPriceCommunity",{url:"/guessprice/guesspricecommunity",cache:!1,views:{home:{templateUrl:"views/tabs/home/guessPrice/guessPriceCommunity/guessPriceCommunity.html",controller:"guessPriceCommunityCtl"}},resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/guessPrice/guessPriceCommunity/guessPriceCommunity.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("systemPriceCtl",["enterViewLoad","appUtils","$http","$Factory","$state","$stateParams","$scope","$timeout",function(t,e,a,s,i,r,l,o){l.back=function(){e.back()},l.houseId=r.houseid,l.space=r.space,l.subData={query:r.query,type:1,level:4},a({method:"POST",url:s.Evalu.search.url+"?query="+l.subData.query+"&type="+l.subData.type+"&level="+l.subData.level,headers:{"Content-Type":"application/json"}}).then(function(t){l.price=(l.space*t.data.AvePrice).toFixed(2),l.resData=t.data,l.cellList=[],l.dataList=[];for(var e=0;e<t.data.List.length;e++)l.cellList.push(t.data.List[e].Mouth),l.dataList.push(t.data.List[e].AvePrice);var a=echarts.init(document.getElementById("system_price_echarts"),"light"),s={title:{text:"均价走势图"},tooltip:{},legend:{data:["当前小区"],top:20,right:12},xAxis:{data:l.cellList},yAxis:[{type:"value",axisLabel:{formatter:function(t){return t+"万"}},splitArea:{show:!1}}],series:[{name:"当前小区",type:"line",data:l.dataList}],color:["rgb(102,152,255)"]};a.setOption(s)}).catch(function(){t.customload("提交失败")})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("tabs.systemPrice",{url:"/guessprice/systemprice/:query/:space/:houseid",cache:!1,views:{home:{templateUrl:"views/tabs/home/guessPrice/systemPrice/systemPrice.html",controller:"systemPriceCtl"}},resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/guessPrice/systemPrice/systemPrice.js"])}]},data:{isPublic:!0}})}]);
"use strict";function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}angular.module("App").controller("ershouHouseListCtl",["enterViewLoad","appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,t,r,o,a,i,l,s,n,c,u,p,y,m,d){var f;switch(u.back=function(){u.filterActiveIndex?u.closeFilter():t.back()},u.classify=c.classify,u.classify){case"商铺":u.queryType=1;break;case"写字楼":u.queryType=2;break;case"工厂":u.queryType=3;break;case"仓库":u.queryType=4;break;case"车位":u.queryType=5;break;default:u.queryType=1}p.$on("appUtilsCityChange",function(e,r){u.oldQueryData.cityId=r.id,u.simpleQueryData.cityId=r.id,u.streetList=["不限"],a.scrollTop(),"住宅"==u.classify?u.oldRefresh():u.simpleRefresh()}),u.$on("$ionicView.enter",function(){u.oldQueryData.cityId=t.city.id,u.simpleQueryData.cityId=t.city.id,u.initFilterData(),"tabs.ershouPage"!=p.fromStateName&&"tabs.Home"!=p.fromStateName||u.initFilterMore(),u.oldHaveMore=!0,u.simpleHaveMore=!0}),u.$on("$ionicView.leave",function(){u.closeFilter()}),u.initFilterData=function(){l.get("jsonData/houseFilter/filterData.json").then(function(r){t.getCurrentDistricts(function(e){r.data.utilsDistricts=angular.extend({"不限":["不限"]},e),u.filterData=r.data})})},u.initFilterMore=function(){l.get("jsonData/houseFilter/oldHouseFilter.json").then(function(e){u.moreFilterRes=e.data,u.moreFilterData=JSON.parse(JSON.stringify(u.moreFilterRes))}).catch(function(){u.moreFilterRes=[],u.moreFilterData=[]})},u.filterActiveIndex=null,u.openFilter=function(e){u.filterActiveIndex==e?u.filterActiveIndex=null:u.filterActiveIndex=e},u.closeFilter=function(){u.filterActiveIndex=null},u.chooseDistrict=function(e,r){"住宅"==u.classify?u.oldQueryData.district="不限"==r?"":e:u.simpleQueryData.district="不限"==r?"":e,u.streetList=r,a.$getByHandle("ershou-filter-street-scroll").scrollTop()},u.streetList=["不限"],u.showStreetText=c.street||"",u.chooseStreet=function(e){u.closeFilter(),u.showStreetText=e,"住宅"==u.classify?("不限"==e?(u.oldQueryData.street="",u.oldQueryData.district=""):u.oldQueryData.street=e,u.oldRefresh(!1)):("不限"==e?(u.simpleQueryData.street="",u.simpleQueryData.district=""):u.simpleQueryData.street=e,u.simpleRefresh(!1))},!c.minprize&&c.maxprize?u.showPriceText=c.maxprize+"万以下":c.minprize&&!c.maxprize?u.showPriceText=c.minprize+"万以上":c.minprize&&c.maxprize?u.showPriceText=c.minprize+"-"+c.maxprize+"万":u.showPriceText="",u.choosePrice=function(e,r){u.closeFilter(),u.showPriceText=!e&&r?r+"万以下":e&&!r?e+"万以上":e&&r?e+"万-"+r+"万":"不限","住宅"==u.classify?(u.oldQueryData.minprize=e,u.oldQueryData.maxprize=r,u.oldRefresh(!1)):(u.simpleQueryData.minprize=e,u.simpleQueryData.maxprize=r,u.simpleRefresh(!1))},1*c.sort==1?u.showSortText="面积从大到小":1*c.sort==2?u.showSortText="面积从小到大":1*c.sort==3?u.showSortText="售价从小到大":1*c.sort==4?u.showSortText="售价从大到小":u.showSortText="",u.chooseSort=function(e,r){u.closeFilter(),u.showSortText=e,"住宅"==u.classify?(u.oldQueryData.sort=r,u.oldRefresh(!1)):(u.simpleQueryData.sort=r,u.simpleRefresh(!1))},1*c.roomtype==1?u.showroomType="一室":1*c.roomtype==2?u.showroomType="二室":1*c.roomtype==3?u.showroomType="三室":1*c.roomtype==4?u.showroomType="四室":1*c.roomtype==5?u.showroomType="五室":1*c.roomtype==6?u.showroomType="五室以上":u.showroomType="",u.chooseRoomType=function(e,r){u.closeFilter(),u.showroomType=e,"住宅"==u.classify&&(u.oldQueryData.roomType=r,u.oldRefresh(!1))},u.chooseHouseType=function(e,r){if(u.closeFilter(),u.classify=e,"住宅"==u.classify)u.oldRefresh(!1);else{switch(u.classify){case"商铺":u.queryType=1;break;case"写字楼":u.queryType=2;break;case"工厂":u.queryType=3;break;case"仓库":u.queryType=4;break;case"车位":u.queryType=5;break;default:u.queryType=1}u.simpleRefresh(!1)}},u.confirmFilter=function(){"住宅"==u.classify?u.oldRefresh(!1):u.simpleRefresh(!1),u.closeFilter()},u.resetFilter=function(){u.moreFilterData=JSON.parse(JSON.stringify(u.moreFilterRes)),u.oldQueryData.sort=null,u.simpleQueryData.sort=null},u.showQueryText=c.query,u.oldQueryData={cityId:t.city.id,pagesize:10,pagenum:0,type:1,query:c.query,district:c.district,street:c.street,minprize:c.minprize,maxprize:c.maxprize,roomType:c.roomtype,sort:c.sort,date:c.date,Orientation:[],Fitment:[],BuildType:[],Special:[],Spaces:[],Floor:[]},u.simpleQueryData=(_defineProperty(f={cityId:t.city.id,pagesize:10,pagenum:0,type:u.queryType,date:1,query:"",district:"",street:"",minprize:"",maxprize:"",roomType:"",sort:""},"date",c.date),_defineProperty(f,"behaviour",1),_defineProperty(f,"Orientation",null),_defineProperty(f,"Fitment",null),_defineProperty(f,"BuildType",null),_defineProperty(f,"Special",null),_defineProperty(f,"Spaces",null),_defineProperty(f,"Floor",null),f),function(){function i(r){l.post(s.NewHouseSource.publicquery.url,u.oldQueryData).success(function(e){y.hide(),e.length<=0&&(u.oldHaveMore=!1,u.$broadcast("scroll.infiniteScrollComplete"),r)||(u.oldHaveMore=!0,r?(u.oldQueryData.pagenum+=1,u.oldhousearr=u.oldhousearr.concat(e),u.$broadcast("scroll.infiniteScrollComplete")):(u.oldQueryData.pagenum=1,u.oldhousearr=e,u.$broadcast("scroll.refreshComplete")))}).error(function(){u.oldHaveMore=!1,y.show({template:"获取数据失败",duration:1e3}),u.$broadcast("scroll.infiniteScrollComplete"),u.$broadcast("scroll.refreshComplete")})}u.oldHaveMore=!0,u.oldhousearr=[],u.oldLoadMore=function(e){i(!0)},u.oldRefresh=function(e){for(var r=0;r<u.moreFilterData.length;r++)if(u.moreFilterData[r].field){u.oldQueryData[u.moreFilterData[r].field]=[];for(var t=0;t<u.moreFilterData[r].list.length;t++)if(u.moreFilterData[r].list[t].isChecked){var o=u.moreFilterData[r].list[t].value;u.oldQueryData[u.moreFilterData[r].field].push(o)}}u.oldQueryData.pagenum=0,i(!1),a.$getByHandle("ershouhouse-list-scroll").scrollTop()}}(),function(){function i(r){l.post(s.SimpleHouse.publicquery.url,u.simpleQueryData).success(function(e){y.hide(),e.length<=0&&(u.simpleHaveMore=!1,u.$broadcast("scroll.infiniteScrollComplete"),r)||(u.simpleHaveMore=!0,r?(u.simpleQueryData.pagenum+=1,u.simplehousearr=u.simplehousearr.concat(e),u.$broadcast("scroll.infiniteScrollComplete")):(u.simpleQueryData.pagenum=1,u.simplehousearr=e,u.$broadcast("scroll.refreshComplete")))}).error(function(){y.hide(),u.simpleHaveMore=!1,y.show({template:"获取数据失败",duration:1e3}),u.$broadcast("scroll.infiniteScrollComplete"),u.$broadcast("scroll.refreshComplete")})}u.simpleHaveMore=!0,u.simplehousearr=[],u.simpleLoadMore=function(e){i(!0)},u.simpleRefresh=function(e){for(var r=0;r<u.moreFilterData.length;r++)if(u.moreFilterData[r].field){u.simpleQueryData[u.moreFilterData[r].field]=[];for(var t=0;t<u.moreFilterData[r].list.length;t++)if(u.moreFilterData[r].list[t].isChecked){var o=u.moreFilterData[r].list[t].value;u.simpleQueryData[u.moreFilterData[r].field].push(o)}}u.simpleQueryData.pagenum=0,i(!1),a.$getByHandle("ershouhouse-list-scroll").scrollTop()}}(),u.classify,u.renderdone=!0,u.$on("ngRepeatFinished",function(e){u.renderdone=!1})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("ershouHouseList",{url:"/housesource/ershoupage/ershouhouselist/:classify/:district/:street/:roomtype/:sort/:minprize/:maxprize/:query/:date",templateUrl:"views/tabs/home/houseSource/ershouHouseList/ershouHouseList.html",controller:"ershouHouseListCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/houseSource/ershouHouseList/ershouHouseList.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("ershouPageCtl",["appUtils","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(t,e,o,a,r,i,c,n,l,s,u,p,d){l.back=function(){t.back()},l.paramsDate=n.date;var $=!1;s.$on("appUtilsCityChange",function(t,e){$=!0}),l.$on("$ionicView.enter",function(){l.initData(),$&&(o.$getByHandle("ershou-page-Scroll").scrollTop(),$=!1)}),l.oldhousearr=[],l.initData=function(){l.oldQueryData={cityId:t.city.id,pagesize:10,pagenum:0,type:1,query:"",district:"",street:"",minprize:"",maxprize:"",roomType:"",sort:"",date:n.date},r.get(i.NewHouseSource.publicquery.url,{params:l.oldQueryData}).then(function(t){l.$broadcast("scroll.refreshComplete"),l.oldhousearr=t.data}).catch(function(){l.$broadcast("scroll.refreshComplete"),u.show({template:"获取数据失败",duration:1e3})})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("tabs.ershouPage",{url:"/tabs/housesource/ershoupage/:date",views:{home:{templateUrl:"views/tabs/home/houseSource/ershouPage/ershouPage.html",controller:"ershouPageCtl"}},resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/houseSource/ershouPage/ershouPage.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("newHouseArrCtl",["enterViewLoad","appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,r,t,o,i,n,a,s,l,c,u,m,w,p,f){function y(t){a.post(s.NewHouse.publicquery.url+"?cityId="+u.newQueryData.cityId,u.newQueryData).success(function(e){w.hide(),e.length<=0&&(u.newHaveMore=!1,u.$broadcast("scroll.infiniteScrollComplete"),t)||(u.newHaveMore=!0,t?(u.newQueryData.pagenum+=1,u.newhousearr=u.newhousearr.concat(e),u.$broadcast("scroll.infiniteScrollComplete")):(u.newQueryData.pagenum=1,u.newhousearr=e))}).error(function(){u.newHaveMore=!1,w.hide(),w.show({template:"获取数据失败",duration:1e3}),u.$broadcast("scroll.infiniteScrollComplete"),u.$broadcast("scroll.refreshComplete")})}u.back=function(){u.filterActiveIndex?u.closeFilter():r.back()},m.$on("appUtilsCityChange",function(e,t){u.newQueryData.cityId=t.id,u.streetList=["不限"],i.scrollTop(),u.newRefresh()}),u.$on("$ionicView.enter",function(){u.newQueryData.cityId=r.city.id,u.initFilterData(),"newHousePage"!=m.fromStateName&&"tabs.Home"!=m.fromStateName||u.initFilterMore()}),u.$on("$ionicView.leave",function(){u.closeFilter()}),u.initFilterData=function(){a.get("jsonData/houseFilter/filterData.json").then(function(t){r.getCurrentDistricts(function(e){t.data.utilsDistricts=angular.extend({"不限":["不限"]},e),u.filterData=t.data})})},u.initFilterMore=function(){a.get("jsonData/houseFilter/newHouseFilter.json").then(function(e){u.moreFilterRes=e.data,u.moreFilterData=JSON.parse(JSON.stringify(u.moreFilterRes))}).catch(function(){u.moreFilterRes=[],u.moreFilterData=[]})},u.filterActiveIndex=null,u.openFilter=function(e){u.filterActiveIndex==e?u.filterActiveIndex=null:u.filterActiveIndex=e},u.closeFilter=function(){u.filterActiveIndex=null},u.chooseDistrict=function(e,t){u.newQueryData.district="不限"==t?"":e,u.streetList=t,i.$getByHandle("new-filter-street-scroll").scrollTop()},u.streetList=["不限"],u.showStreetText=c.street||"",u.chooseStreet=function(e){u.closeFilter(),"不限"==e?(u.showStreetText="",u.newQueryData.district="",u.newQueryData.street=""):(u.showStreetText=e,u.newQueryData.street=e),u.newRefresh(!1)},!c.minprize&&c.maxprize?u.showPriceText=c.maxprize+"元/m²以下":c.minprize&&!c.maxprize?u.showPriceText=c.minprize+"元/m²以上":c.minprize&&c.maxprize?u.showPriceText=c.minprize+"-"+c.maxprize+"元/m²":u.showPriceText="",u.choosePrice=function(e,t){u.closeFilter(),u.showPriceText=!e&&t?t+"元/m²以下":e&&!t?e+"元/m²以上":e&&t?e+"元/m²-"+t+"元/m²":"不限",u.newQueryData.minprize=e,u.newQueryData.maxprize=t,u.newRefresh(!1)},1*c.sort==1?u.showSortText="面积从大到小":1*c.sort==2?u.showSortText="面积从小到大":1*c.sort==3?u.showSortText="单价从小到大":1*c.sort==4?u.showSortText="单价从大到小":u.showSortText="",u.chooseSort=function(e,t){u.closeFilter(),u.showSortText=e,u.newQueryData.sort=t,u.newRefresh(!1)},1*c.roomtype==1?u.showroomType="一室":1*c.roomtype==2?u.showroomType="二室":1*c.roomtype==3?u.showroomType="三室":1*c.roomtype==4?u.showroomType="四室":1*c.roomtype==5?u.showroomType="五室":1*c.roomtype==6?u.showroomType="五室以上":u.showroomType="",u.chooseRoomType=function(e,t){u.closeFilter(),u.showroomType=e,u.newQueryData.roomType=t,u.newRefresh(!1)},u.confirmFilter=function(){u.newRefresh(!1),u.closeFilter()},u.resetFilter=function(){u.moreFilterData=JSON.parse(JSON.stringify(u.moreFilterRes)),u.newQueryData.sort=null},u.showQueryText=c.query,u.newQueryData={cityId:r.city.id,pagesize:10,pagenum:0,type:null,query:c.query,district:c.district,street:c.street,minprize:c.minprize,maxprize:c.maxprize,roomType:c.roomtype,sort:c.sort,Special:[],HousePeriod:[],BuildType:[],Fitment:[]},u.newHaveMore=!0,u.newhousearr=[],u.newLoadMore=function(e){y(!0)},u.newRefresh=function(e){for(var t=0;t<u.moreFilterData.length;t++)if(u.moreFilterData[t].field){u.newQueryData[u.moreFilterData[t].field]=[];for(var r=0;r<u.moreFilterData[t].list.length;r++)if(u.moreFilterData[t].list[r].isChecked){var o=u.moreFilterData[t].list[r].value;u.newQueryData[u.moreFilterData[t].field].push(o)}}u.newQueryData.pagenum=0,y(!1),i.$getByHandle("newhouse-list-scroll").scrollTop()},u.renderdone=!0,u.$on("ngRepeatFinished",function(e){u.renderdone=!1})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("tabs.newHouseArr",{url:"/tabs/newhousepage/newhouselist/:district/:street/:roomtype/:sort/:minprize/:maxprize/:query",views:{home:{templateUrl:"views/tabs/home/houseSource/newHouseArr/newHouseArr.html",controller:"newHouseArrCtl"}},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("newHousePageCtl",["enterViewLoad","appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,t,o,n,i,a,c,r,u,s,l,p,d,h){var w=!(s.back=function(){t.back()});l.$on("appUtilsCityChange",function(e,t){w=!0}),s.$on("$ionicView.enter",function(){s.initData(),s.switchData(),w&&(i.$getByHandle("newhouse-page-Scroll").scrollTop(),w=!1),new Swiper(".newhouse-page-swiper-container",{freeMode:!0,freeModeMomentumRatio:.5,slidesPerView:"auto"})}),s.hotSwitchIndex=6,s.hotSwitch=function(e){s.hotSwitchIndex=e,s.switchData()},s.switchData=function(){c.get(r.NewHouse.publicquery.url,{params:{cityId:t.city.id,pagesize:5,pagenum:0,type:null,sort:s.hotSwitchIndex}}).then(function(e){s.hotListData=e.data}).catch(function(){e.customload("获取数据失败")})},s.initData=function(){s.newQueryData={cityId:t.city.id,pagesize:10,pagenum:0,type:null,query:"",district:"",street:"",minprize:"",maxprize:"",roomType:"",sort:""},c.get(r.NewHouse.publicquery.url,{params:s.newQueryData}).then(function(e){s.$broadcast("scroll.refreshComplete"),s.newhousearr=e.data}).catch(function(){e.customload("获取数据失败"),s.$broadcast("scroll.refreshComplete")})},s.renderdone=!0,s.$on("ngRepeatFinished",function(e){s.renderdone=!1})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("newHousePage",{url:"/tabs/newhousepage",templateUrl:"views/tabs/home/houseSource/newHousePage/newHousePage.html",controller:"newHousePageCtl",data:{isPublic:!0}})}]);
"use strict";function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}angular.module("App").controller("rentHouseListCtl",["enterViewLoad","appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,t,r,i,a,o,s,l,n,c,p,u,y,m,f){var d;switch(p.back=function(){p.filterActiveIndex?p.closeFilter():t.back()},p.pageType=c.type||2,p.classify=c.classify,p.classify){case"商铺":p.queryType=1;break;case"写字楼":p.queryType=2;break;case"厂房":p.queryType=3;break;case"仓库":p.queryType=4;break;case"车位":p.queryType=5;break;default:p.queryType=1}u.$on("appUtilsCityChange",function(e,r){p.rentQueryData.cityId=r.id,p.simpleQueryData.cityId=r.id,p.streetList=["不限"],a.scrollTop(),"住宅"==p.classify?p.rentRefresh():p.simpleRefresh()}),p.$on("$ionicView.enter",function(){p.rentQueryData.cityId=t.city.id,p.simpleQueryData.cityId=t.city.id,p.initFilterData(),"tabs.rentPage"!=u.fromStateName&&"tabs.Home"!=u.fromStateName||p.initFilterMore(),p.rentHaveMore=!0,p.simpleHaveMore=!0}),p.$on("$ionicView.leave",function(){p.closeFilter()}),p.initFilterData=function(){s.get("jsonData/houseFilter/filterData.json").then(function(r){t.getCurrentDistricts(function(e){r.data.utilsDistricts=angular.extend({"不限":["不限"]},e),p.filterData=r.data})})},p.initFilterMore=function(){s.get("jsonData/houseFilter/rentHouseFilter.json").then(function(e){p.moreFilterRes=e.data,p.moreFilterData=JSON.parse(JSON.stringify(p.moreFilterRes))}).catch(function(){p.moreFilterRes=[],p.moreFilterData=[]})},p.filterActiveIndex=null,p.openFilter=function(e){p.filterActiveIndex==e?p.filterActiveIndex=null:p.filterActiveIndex=e},p.closeFilter=function(){p.filterActiveIndex=null},p.chooseDistrict=function(e,r){"住宅"==p.classify?p.rentQueryData.district="不限"==r?"":e:p.simpleQueryData.district="不限"==r?"":e,p.streetList=r,a.$getByHandle("rent-filter-street-scroll").scrollTop()},p.streetList=["不限"],p.showStreetText=c.street||"",p.chooseStreet=function(e){p.closeFilter(),p.showStreetText=e,"住宅"==p.classify?("不限"==e?(p.rentQueryData.street="",p.rentQueryData.district=""):p.rentQueryData.street=e,p.rentRefresh(!1)):("不限"==e?(p.simpleQueryData.street="",p.simpleQueryData.district=""):p.simpleQueryData.street=e,p.simpleRefresh(!1))},!c.minprize&&c.maxprize?p.showPriceText=c.maxprize+"元/月以下":c.minprize&&!c.maxprize?p.showPriceText=c.minprize+"元/月以上":c.minprize&&c.maxprize?p.showPriceText=c.minprize+"-"+c.maxprize+"元/月":p.showPriceText="",p.choosePrice=function(e,r){p.closeFilter(),p.showPriceText=!e&&r?r+"元/月以下":e&&!r?e+"元/月以上":e&&r?e+"-"+r+"元/月":"不限","住宅"==p.classify?(p.rentQueryData.minprize=e,p.rentQueryData.maxprize=r,p.rentRefresh(!1)):(p.simpleQueryData.minprize=e,p.simpleQueryData.maxprize=r,p.simpleRefresh(!1))},1*c.sort==1?p.showSortText="面积从大到小":1*c.sort==2?p.showSortText="面积从小到大":1*c.sort==3?p.showSortText="租金从小到大":1*c.sort==4?p.showSortText="租金从大到小":p.showSortText="",p.chooseSort=function(e,r){p.closeFilter(),p.showSortText=e,"住宅"==p.classify?(p.rentQueryData.sort=r,p.rentRefresh(!1)):(p.simpleQueryData.sort=r,p.simpleRefresh(!1))},1*c.roomtype==1?p.showroomType="一室":1*c.roomtype==2?p.showroomType="二室":1*c.roomtype==3?p.showroomType="三室":1*c.roomtype==4?p.showroomType="四室":1*c.roomtype==5?p.showroomType="五室":1*c.roomtype==6?p.showroomType="五室以上":p.showroomType="",p.chooseRoomType=function(e,r){p.closeFilter(),p.showroomType=e,"住宅"==p.classify&&(p.rentQueryData.roomType=r,p.rentRefresh(!1))},p.chooseHouseType=function(e,r){if(p.closeFilter(),p.classify=e,"住宅"==p.classify)p.rentRefresh(!1);else{switch(p.classify){case"商铺":p.queryType=1;break;case"写字楼":p.queryType=2;break;case"厂房":p.queryType=3;break;case"仓库":p.queryType=4;break;case"车位":p.queryType=5;break;default:p.queryType=1}p.simpleRefresh(!1)}},p.confirmFilter=function(){"住宅"==p.classify?p.rentRefresh(!1):p.simpleRefresh(!1),p.closeFilter()},p.resetFilter=function(){p.moreFilterData=JSON.parse(JSON.stringify(p.moreFilterRes)),p.rentQueryData.sort=null,p.simpleQueryData.sort=null},p.showQueryText=c.query,p.rentQueryData={cityId:t.city.id,pagesize:10,pagenum:0,type:2,date:c.date,query:c.query,district:c.district,street:c.street,minprize:c.minprize,maxprize:c.maxprize,roomType:c.roomtype,sort:c.sort,Orientation:[],Fitment:[],BuildType:[],Special:[],Spaces:[],Floor:[]},p.simpleQueryData=(_defineProperty(d={cityId:t.city.id,pagesize:10,pagenum:0,type:p.queryType,date:2,query:"",district:"",street:"",minprize:"",maxprize:"",roomType:"",sort:""},"date",c.date),_defineProperty(d,"behaviour",2),_defineProperty(d,"Orientation",null),_defineProperty(d,"Fitment",null),_defineProperty(d,"BuildType",null),_defineProperty(d,"Special",null),_defineProperty(d,"Spaces",null),_defineProperty(d,"Floor",null),d),function(){function o(r){s.post(l.NewHouseSource.publicquery.url,p.rentQueryData).success(function(e){y.hide(),e.length<=0&&(p.rentHaveMore=!1,p.$broadcast("scroll.infiniteScrollComplete"),p.$broadcast("scroll.refreshComplete"),r)||(p.rentHaveMore=!0,r?(p.rentQueryData.pagenum+=1,p.renthousearr=p.renthousearr.concat(e),p.$broadcast("scroll.infiniteScrollComplete")):(p.rentQueryData.pagenum=1,p.renthousearr=e,p.$broadcast("scroll.refreshComplete")))}).error(function(){y.hide(),p.rentHaveMore=!1,y.show({template:"获取数据失败",duration:1e3}),p.$broadcast("scroll.infiniteScrollComplete"),p.$broadcast("scroll.refreshComplete")})}p.rentHaveMore=!0,p.renthousearr=[],p.rentLoadMore=function(e){o(!0)},p.rentRefresh=function(e){for(var r=0;r<p.moreFilterData.length;r++)if(p.moreFilterData[r].field){p.rentQueryData[p.moreFilterData[r].field]=[];for(var t=0;t<p.moreFilterData[r].list.length;t++)if(p.moreFilterData[r].list[t].isChecked){var i=p.moreFilterData[r].list[t].value;p.rentQueryData[p.moreFilterData[r].field].push(i)}}p.rentQueryData.pagenum=0,o(!1),a.$getByHandle("renthouse-list-scroll").scrollTop()}}(),function(){function o(r){var e={method:"POST",url:l.SimpleHouse.publicquery.url,headers:{"Content-Type":"application/json"},data:p.simpleQueryData};s(e).success(function(e){y.hide(),e.length<=0&&(p.simpleHaveMore=!1,p.$broadcast("scroll.infiniteScrollComplete"),r)||(p.simpleHaveMore=!0,r?(p.simpleQueryData.pagenum+=1,p.simplehousearr=p.simplehousearr.concat(e),p.$broadcast("scroll.infiniteScrollComplete")):(p.simpleQueryData.pagenum=1,p.simplehousearr=e,p.$broadcast("scroll.refreshComplete")))}).error(function(){y.hide(),p.simpleHaveMore=!1,y.show({template:"获取数据失败",duration:1e3}),p.$broadcast("scroll.infiniteScrollComplete"),p.$broadcast("scroll.refreshComplete")})}p.simpleHaveMore=!0,p.simplehousearr=[],p.simpleLoadMore=function(e){o(!0)},p.simpleRefresh=function(e){for(var r=0;r<p.moreFilterData.length;r++)if(p.moreFilterData[r].field){p.simpleQueryData[p.moreFilterData[r].field]=[];for(var t=0;t<p.moreFilterData[r].list.length;t++)if(p.moreFilterData[r].list[t].isChecked){var i=p.moreFilterData[r].list[t].value;p.simpleQueryData[p.moreFilterData[r].field].push(i)}}p.simpleQueryData.pagenum=0,o(!1),a.$getByHandle("renthouse-list-scroll").scrollTop()}}(),p.classify,p.renderdone=!0,p.$on("ngRepeatFinished",function(e){p.renderdone=!1})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("rentHouseList",{url:"/housesource/rentpage/rentlist/:classify/:district/:street/:roomtype/:sort/:minprize/:maxprize/:query/:date",templateUrl:"views/tabs/home/houseSource/rentHouseList/rentHouseList.html",controller:"rentHouseListCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/houseSource/rentHouseList/rentHouseList.js"])}]},data:{isPublic:!0}})}]);
"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}angular.module("App").controller("rentPageCtl",["appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,t,r,n,o,a,i,c,d,u,l,p,s,$){u.back=function(){e.back()},u.paramsDate=d.date,u.currentAdSlideIndex=0;var f=!(u.changeAdSlide=function(e){u.currentAdSlideIndex=e});l.$on("appUtilsCityChange",function(e,t){f=!0}),u.$on("$ionicView.enter",function(){u.initData(),f&&(n.$getByHandle("rent-page-Scroll").scrollTop(),f=!1);new Swiper("#rent_type_swiper",{freeMode:!0,freeModeMomentumRatio:.5,slidesPerView:"auto"})}),u.initData=function(){u.rentQueryData=_defineProperty({cityId:e.city.id,pagesize:10,pagenum:0,type:2,date:"",query:"",district:"",street:"",minprize:"",maxprize:"",roomType:"",sort:""},"date",d.date),u.rentHaveMore=!0,u.renthousearr=[],a.get(i.NewHouseSource.publicquery.url,{params:u.rentQueryData}).then(function(e){u.$broadcast("scroll.refreshComplete"),u.renthousearr=e.data}).catch(function(e){u.$broadcast("scroll.refreshComplete"),p.show({template:"获取数据失败",duration:1e3})})},u.renderdone=!0,u.$on("ngRepeatFinished",function(e){u.renderdone=!1})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("tabs.rentPage",{url:"/housesource/rentpage/:date",views:{home:{templateUrl:"views/tabs/home/houseSource/rentPage/rentPage.html",controller:"rentPageCtl"}},resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/houseSource/rentPage/rentPage.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addBuyNeedCtl",["appUtils","$addBuyNeedData","enterViewLoad","$ionicScrollDelegate","$ionicModal","$stateParams","$timeout","$state","$Factory","$http","$scope",function(a,e,t,n,d,i,u,l,o,c,r){r.back=function(){a.back()},r.initRange=function(){$("#add_need_buy_price_range").ionRangeSlider({type:"double",min:0,max:1e3,from:r.needInfo?r.needInfo.MinPrize:0,to:r.needInfo?r.needInfo.MaxPrize:1e3,postfix:"万"}),r.rangePriceData=$("#add_need_buy_price_range").data("ionRangeSlider"),$("#add_need_buy_space_range").ionRangeSlider({type:"double",min:0,max:1e3,from:r.needInfo?r.needInfo.MinSpace:0,to:r.needInfo?r.needInfo.MaxSpace:1e3,postfix:"m²"}),r.rangeSpaceData=$("#add_need_buy_space_range").data("ionRangeSlider")},i.id?c.get(o.HouseNeed.detail.url,{params:{id:i.id}}).then(function(a){r.needInfo=a.data,r.addSubData=a.data,r.addSubData.CityId=a.data.CityId,r.addSubData.City=a.data.City,r.initData(),r.initRange()}).catch(function(a){r.initRange()}):r.initRange(),r.$on("$ionicView.enter",function(){r.addSubData=e.data,r.addSubData.CityId=a.city.id,r.addSubData.City=a.city.name,r.initData()}),r.initData=function(){var a,e;switch(a=[],e="思明",r.addSubData.City){case"厦门":a=["思明","湖里","集美","海沧","同安","翔安","其他"],e="湖里";break;case"漳州":a=["芗城区","龙文区","龙海市","南靖县","诏安县","漳浦县","华安县","东山县","长泰县","云霄县","其他"],e="龙海市";break;case"泉州":a=["鲤城区","丰泽区","洛江区","泉港区","石狮市","晋江市","南安市","惠安县","永春县","安溪县","德化县","金门县","其他"],e="泉港区";break;case"福州":a=["鼓楼区","台江区","仓山区","马尾区","晋安区","福清市","长乐市","闽侯县","闽清县","永泰县","连江县","罗源县","平潭县","其他"],e="鼓楼区";break;case"宁德":a=["蕉城区","福安市","福鼎市","寿宁县","霞浦县","柘荣县","屏南县","古田县","周宁县","其他"],e="霞浦县";break;case"莆田":a=["城厢区","涵江区","荔城区","秀屿区","仙游县","其他"],e="仙游县";break;case"龙岩":a=["新罗区","漳平市","长汀县","武平县","上杭县","永定县","连城县","其他"],e="长汀县";break;case"三明":a=["梅列区","三元区","永安市","明溪县","将乐县","大田县","宁化县","建宁县","沙县","尤溪县","清流县","泰宁县","其他"],e="沙县";break;case"南平":a=["延平区","建瓯市","邵武市","武夷山市","建阳市","松溪县","光泽县","顺昌县","浦城县","政和县","其他"],e="武夷山市";break;case"中山":a=["中山"],e="中山";break;default:a=["不限","思明","湖里","集美","海沧","同安","翔安"],e="思明"}$.scrEvent({data:a,evEle:".buy-need-district",title:"请选择区域",defValue:e,afterAction:function(a){$(".buy-need-district").val(a),r.addSubData.District=a}}),$.scrEvent3({data:[0,1,2,3,4,5,6,7,8,9],data2:[0,1,2,3,4,5,6,7,8,9],data3:[0,1,2,3,4,5,6,7,8,9],evEle:".buy-need-room-num",title:"选择户型",defValue:1,defValue2:1,defValue3:1,eleName:"室",eleName2:"厅",eleName3:"卫",afterAction:function(a,e,t){u(function(){r.addSubData.RoomType=a,r.addSubData.HallType=e,r.addSubData.BathType=t})}})},r.save=function(){r.addSubData.MinPrize=r.rangePriceData.old_from,r.addSubData.MaxPrize=r.rangePriceData.old_to,r.addSubData.MinSpace=r.rangeSpaceData.old_from,r.addSubData.MaxSpace=r.rangeSpaceData.old_to,17==r.pageType||7==r.pageType||9==r.pageType?(r.addSubData.RoomType=null,r.addSubData.HallType=null,r.addSubData.BathType=null,r.addSubData.CommunityId=null):5!=r.pageType&&11!=r.pageType||(r.addSubData.RoomType=null,r.addSubData.HallType=null,r.addSubData.BathType=null),c.post(o.HouseNeed.save.url,r.addSubData).then(function(a){r.deleteSubData=!0,t.customload("发布成功"),u(function(){r.back()},1e3),e.data={Type:1,RoomType:1,HallType:1,BathType:1,District:"",MinPrize:null,MaxPrize:null,MinSpace:null,MaxSpace:null,CommunityId:null,CommunityName:"",City:"",CityId:null,Attach:"",Address:""}}).catch(function(a){t.customload("提交失败")})}}]).factory("$addBuyNeedData",[function(){var a=function(){};return a.prototype={data:{Type:1,RoomType:1,HallType:1,BathType:1,District:"",MinPrize:null,MaxPrize:null,MinSpace:null,MaxSpace:null,CommunityId:null,CommunityName:"",City:"",CityId:null,Attach:"",Address:""}},new a}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("addBuyNeed",{url:"/needmanage/addbuyneed/params/:type/:id",templateUrl:"views/tabs/home/needManage/addBuyNeed/addBuyNeed.html",controller:"addBuyNeedCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/needManage/addBuyNeed/addBuyNeed.js"])}]},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("addRentNeedCtl",["appUtils","$addRentNeedData","enterViewLoad","$ionicScrollDelegate","$ionicModal","$stateParams","$timeout","$state","$Factory","$http","$scope",function(a,e,t,n,d,i,l,o,u,r,c){c.back=function(){a.back()},c.initRange=function(){$("#add_need_rent_price_range").ionRangeSlider({type:"double",min:0,max:2e4,from:c.needInfo?c.needInfo.MinPrize:0,to:c.needInfo?c.needInfo.MaxPrize:2e4,postfix:"元/月"}),c.rangePriceData=$("#add_need_rent_price_range").data("ionRangeSlider"),$("#add_need_rent_space_range").ionRangeSlider({type:"double",min:0,max:1e3,from:c.needInfo?c.needInfo.MinSpace:0,to:c.needInfo?c.needInfo.MaxSpace:1e3,postfix:"m²"}),c.rangeSpaceData=$("#add_need_rent_space_range").data("ionRangeSlider")},i.id?r.get(u.HouseNeed.detail.url,{params:{id:i.id}}).then(function(a){c.needInfo=a.data,c.addSubData=a.data,c.addSubData.CityId=a.data.CityId,c.addSubData.City=a.data.City,c.initData(),c.initRange()}).catch(function(a){c.initRange()}):c.initRange(),c.$on("$ionicView.enter",function(){c.addSubData=e.data,c.addSubData.CityId=a.city.id,c.addSubData.City=a.city.name,c.initData()}),c.initData=function(){var a,e;switch(a=[],e="思明",c.addSubData.City){case"厦门":a=["思明","湖里","集美","海沧","同安","翔安","其他"],e="湖里";break;case"漳州":a=["芗城区","龙文区","龙海市","南靖县","诏安县","漳浦县","华安县","东山县","长泰县","云霄县","其他"],e="龙海市";break;case"泉州":a=["鲤城区","丰泽区","洛江区","泉港区","石狮市","晋江市","南安市","惠安县","永春县","安溪县","德化县","金门县","其他"],e="泉港区";break;case"福州":a=["鼓楼区","台江区","仓山区","马尾区","晋安区","福清市","长乐市","闽侯县","闽清县","永泰县","连江县","罗源县","平潭县","其他"],e="鼓楼区";break;case"宁德":a=["蕉城区","福安市","福鼎市","寿宁县","霞浦县","柘荣县","屏南县","古田县","周宁县","其他"],e="霞浦县";break;case"莆田":a=["城厢区","涵江区","荔城区","秀屿区","仙游县","其他"],e="仙游县";break;case"龙岩":a=["新罗区","漳平市","长汀县","武平县","上杭县","永定县","连城县","其他"],e="长汀县";break;case"三明":a=["梅列区","三元区","永安市","明溪县","将乐县","大田县","宁化县","建宁县","沙县","尤溪县","清流县","泰宁县","其他"],e="沙县";break;case"南平":a=["延平区","建瓯市","邵武市","武夷山市","建阳市","松溪县","光泽县","顺昌县","浦城县","政和县","其他"],e="武夷山市";break;case"中山":a=["中山"],e="中山";break;default:a=["不限","思明","湖里","集美","海沧","同安","翔安"],e="思明"}$.scrEvent({data:a,evEle:".rent-need-district",title:"请选择区域",defValue:e,afterAction:function(a){$(".rent-need-district").val(a),c.addSubData.District=a}}),$.scrEvent3({data:[0,1,2,3,4,5,6,7,8,9],data2:[0,1,2,3,4,5,6,7,8,9],data3:[0,1,2,3,4,5,6,7,8,9],evEle:".rent-need-room-num",title:"选择户型",defValue:1,defValue2:1,defValue3:1,eleName:"室",eleName2:"厅",eleName3:"卫",afterAction:function(a,e,t){l(function(){c.addSubData.RoomType=a,c.addSubData.HallType=e,c.addSubData.BathType=t})}})},c.save=function(){c.addSubData.MinPrize=c.rangePriceData.old_from,c.addSubData.MaxPrize=c.rangePriceData.old_to,c.addSubData.MinSpace=c.rangeSpaceData.old_from,c.addSubData.MaxSpace=c.rangeSpaceData.old_to,4==c.pageType||6==c.pageType||8==c.pageType?(c.addSubData.RoomType=null,c.addSubData.HallType=null,c.addSubData.BathType=null,c.addSubData.CommunityId=null):3!=c.pageType&&10!=c.pageType||(c.addSubData.RoomType=null,c.addSubData.HallType=null,c.addSubData.BathType=null),r.post(u.HouseNeed.save.url,c.addSubData).then(function(a){c.deleteSubData=!0,t.customload("发布成功"),l(function(){c.back()},1e3),e.data={Type:2,RoomType:1,HallType:1,BathType:1,District:"",MinPrize:null,MaxPrize:null,MinSpace:null,MaxSpace:null,CommunityId:null,CommunityName:"",City:"",CityId:null,Attach:"",Address:""}}).catch(function(a){t.customload("提交失败")})}}]).factory("$addRentNeedData",[function(){var a=function(){};return a.prototype={data:{Type:2,RoomType:1,HallType:1,BathType:1,District:"",MinPrize:null,MaxPrize:null,MinSpace:null,MaxSpace:null,CommunityId:null,CommunityName:"",City:"",CityId:null,Attach:"",Address:""}},new a}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("addRentNeed",{url:"/needmanage/addrentneed/params/:type/:id",templateUrl:"views/tabs/home/needManage/addRentNeed/addRentNeed.html",controller:"addRentNeedCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/needManage/addRentNeed/addRentNeed.js"])}]},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("needBuyListCtl",["enterViewLoad","appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,t,a,o,r,n,i,c,l,u,y,d,p,s,$){function m(t){i.get(c.HouseNeed.publicquery.url,{params:y.queryData}).then(function(e){p.hide(),e.data.length<=0&&(y.needHaveMore=!1,y.$broadcast("scroll.infiniteScrollComplete"),t)||(y.needHaveMore=!0,t?(y.queryData.pagenum+=1,y.needBuyArr=y.needBuyArr.concat(e.data),y.$broadcast("scroll.infiniteScrollComplete")):(y.queryData.pagenum=1,y.needBuyArr=e.data))}).catch(function(){y.needHaveMore=!1,p.hide(),e.customload("获取数据失败"),y.$broadcast("scroll.infiniteScrollComplete"),y.$broadcast("scroll.refreshComplete")})}y.back=function(){t.back()},y.$on("$ionicView.enter",function(){y.paramsData={type:u.type},y.queryData.type!=y.paramsData.type||y.queryData.cityId!=t.city.id?(y.needBuyArr=[],y.queryData.type=y.paramsData.type,y.queryData.cityId=t.city.id,r.$getByHandle("needbuy-list-Scroll").scrollTop()):(y.queryData.type=y.paramsData.type,y.queryData.cityId=t.city.id)}),y.$on("$ionicView.leave",function(){}),y.queryData={sort:3,pagesize:10,pagenum:0,type:u.type,cityId:t.city.id},y.needHaveMore=!0,y.needBuyArr=[],y.needLoadMore=function(e){m(!0)},y.needRefresh=function(e){y.queryData.pagenum=0,m(!1),r.$getByHandle("needbuy-list-scroll").scrollTop()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("needBuyList",{url:"/tabs/home/needbuylist/params/:type",templateUrl:"views/tabs/home/needSource/needBuyList/needBuyList.html",controller:"needBuyListCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/needSource/needBuyList/needBuyList.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("needBuyPageCtl",["appUtils","enterViewLoad","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,t,a,n,o,i,c,r,l,d,u,s,$,p){d.back=function(){e.back()},d.paramsDate=l.date,d.currentAdSlideIndex=0;var y=!(d.changeAdSlide=function(e){d.currentAdSlideIndex=e});u.$on("appUtilsCityChange",function(e,t){y=!0}),d.$on("$ionicView.enter",function(){d.initData(),y&&(n.$getByHandle("need-buy-page-Scroll").scrollTop(),y=!1)}),d.needBuyArr=[],d.initData=function(){d.queryData={sort:-1,cityId:e.city.id},i.get(c.HouseNeed.publicquery.url,{params:d.queryData}).then(function(e){d.$broadcast("scroll.refreshComplete"),d.needBuyArr=e.data}).catch(function(){d.$broadcast("scroll.refreshComplete"),t.customload("获取数据失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("needBuyPage",{url:"/tabs/needsource/needbuypage",templateUrl:"views/tabs/home/needSource/needBuyPage/needBuyPage.html",controller:"needBuyPageCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/needSource/needBuyPage/needBuyPage.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("needRentListCtl",["enterViewLoad","appUtils","$interval","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,t,a,n,r,o,i,c,l,d,u,y,p,s,$){function m(t){i.get(c.HouseNeed.publicquery.url,{params:u.queryData}).then(function(e){p.hide(),e.data.length<=0&&(u.needHaveMore=!1,u.$broadcast("scroll.infiniteScrollComplete"),t)||(u.needHaveMore=!0,t?(u.queryData.pagenum+=1,u.needRentArr=u.needRentArr.concat(e.data),u.$broadcast("scroll.infiniteScrollComplete")):(u.queryData.pagenum=1,u.needRentArr=e.data))}).catch(function(){u.needHaveMore=!1,p.hide(),e.customload("获取数据失败"),u.$broadcast("scroll.infiniteScrollComplete"),u.$broadcast("scroll.refreshComplete")})}u.back=function(){t.back()},u.$on("$ionicView.enter",function(){u.paramsData={type:d.type},u.queryData.type!=u.paramsData.type||u.queryData.cityId!=t.city.id?(u.needRentArr=[],u.queryData.type=u.paramsData.type,u.queryData.cityId=t.city.id,r.$getByHandle("needrent-list-Scroll").scrollTop()):(u.queryData.type=u.paramsData.type,u.queryData.cityId=t.city.id)}),u.$on("$ionicView.leave",function(){}),u.queryData={sort:3,pagesize:10,pagenum:0,type:d.type,cityId:t.city.id},u.needHaveMore=!0,u.needRentArr=[],u.needLoadMore=function(e){m(!0)},u.needRefresh=function(e){u.queryData.pagenum=0,m(!1),r.$getByHandle("needbuy-list-scroll").scrollTop()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("needRentList",{url:"/tabs/home/needrentlist/params/:type",templateUrl:"views/tabs/home/needSource/needRentList/needRentList.html",controller:"needRentListCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/needSource/needRentList/needRentList.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("needRentPageCtl",["appUtils","enterViewLoad","$ionicModal","$ionicScrollDelegate","$timeout","$http","$Factory","$state","$stateParams","$scope","$rootScope","$ionicLoading","$document","$ionicHistory",function(e,t,n,a,o,i,r,c,l,d,u,s,$,p){d.back=function(){e.back()},d.paramsDate=l.date,d.currentAdSlideIndex=0;var f=!(d.changeAdSlide=function(e){d.currentAdSlideIndex=e});u.$on("appUtilsCityChange",function(e,t){f=!0}),d.$on("$ionicView.enter",function(){d.initData(),f&&(a.$getByHandle("need-rent-page-Scroll").scrollTop(),f=!1)}),d.needRentArr=[],d.initData=function(){d.queryData={sort:-2,cityId:e.city.id},i.get(r.HouseNeed.publicquery.url,{params:d.queryData}).then(function(e){d.$broadcast("scroll.refreshComplete"),d.needRentArr=e.data}).catch(function(){d.$broadcast("scroll.refreshComplete"),t.customload("获取数据失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("needRentPage",{url:"/tabs/needsource/needrentpage",templateUrl:"views/tabs/home/needSource/needRentPage/needRentPage.html",controller:"needRentPageCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/needSource/needRentPage/needRentPage.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("receiveRedEnvelopeCtl",["appUtils","$timeout","$scope","$state","$stateParams","$http","$Factory",function(e,t,n,c,a,r,i){n.back=function(){e.back()},n.$on("$ionicView.enter",function(){a.open?n.redPack():n.myReds()}),n.redPack=function(){r.post(i.Draw.redpack.url).then(function(e){n.redNum=e.data,n.myReds()}).catch(function(){n.redNum=0,n.myReds()})},n.myReds=function(){r.post(i.Draw.myreds.url).then(function(e){n.myRedList=e.data.filter(function(e){return e.CreateTime=e.CreateTime.replace(/T/," "),e})}).catch(function(){n.myRedList=[]})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("receiveRedEnvelope",{url:"/home/redenvelope/receiveredenvelope/params/:open",templateUrl:"views/tabs/home/redEnvelope/receiveRedEnvelope/receiveRedEnvelope.html",controller:"receiveRedEnvelopeCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/redEnvelope/receiveRedEnvelope/receiveRedEnvelope.js"])}]},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("mobileContactCtr",["NimUtils","appUtils","enterViewLoad","$localStorage","$ionicLoading","$ionicModal","$timeout","$state","$ionicScrollDelegate","$ionicHistory","$Factory","$scope","$http",function(n,e,i,a,t,o,u,l,c,r,v,m,y){m.back=function(){e.back()},i.loadcontacts(),m.searchInfo={name:""},m.searchEmpty=function(){m.searchInfo.name=""},m.inputChange=function(){c.resize()},m.friendArr=[],m.beFriend=function(e){return e.PhoneNumber==a.myselfInfo.UserName?(i.customload("你的手机"),!1):e.Accid?void n.addFriend(e.Accid,function(){i.customload("添加好友成功"),u(function(){e.IsFriend=!0})},function(){i.customload("添加好友失败")}):(i.customload("需要该用户重新登录房田才可以添加",2e3),!1)},m.inviteFriend=function(e){if(!/^1[34578]\d{9}$/.test(e))return i.customload("该号码不是手机号"),!1;y.post(v.Account.sendinvit.url+"?toPhone="+e,{toPhone:e}).then(function(e){i.customload("发送邀请成功")}).catch(function(e){i.customload("发送邀请失败")})},m.$on("$ionicView.enter",function(){m.getNimFriends()}),m.getNimFriends=function(){nim.getFriends({done:function(e,n){if(e)m.matchContacts();else{m.friendsAccount=[];for(var a=0;a<n.length;a++)m.friendsAccount.push(n[a].account);m.matchContacts()}}})},m.matchContacts=function(){document.addEventListener("deviceready",function(){e.contactManager().then(function(e){var a=[];angular.forEach(e,function(e,n){null!=e.phoneNumbers&&"mobile"==e.phoneNumbers[0].type&&null!=e.name&&(e.name.givenName&&e.name.familyName?a.push({Name:e.name.familyName+e.name.givenName,PhoneNumber:e.phoneNumbers[0].value}):a.push({Name:e.name.givenName?e.name.givenName:"",PhoneNumber:e.phoneNumbers[0].value}))}),y.post(v.Neteast.usermatch.url,a).then(function(e){t.hide(),e.data.filter(function(e){return e.IsFriend=!1,0<=m.friendsAccount.indexOf(e.Accid)&&(e.IsFriend=!0),e}),m.friendArr=e.data,m.formatContacts=[{key:"A",value:[]},{key:"B",value:[]},{key:"C",value:[]},{key:"D",value:[]},{key:"E",value:[]},{key:"F",value:[]},{key:"G",value:[]},{key:"H",value:[]},{key:"I",value:[]},{key:"J",value:[]},{key:"K",value:[]},{key:"L",value:[]},{key:"M",value:[]},{key:"N",value:[]},{key:"O",value:[]},{key:"P",value:[]},{key:"Q",value:[]},{key:"R",value:[]},{key:"S",value:[]},{key:"T",value:[]},{key:"U",value:[]},{key:"V",value:[]},{key:"W",value:[]},{key:"X",value:[]},{key:"Y",value:[]},{key:"Z",value:[]},{key:"#",value:[]}],m.changeToPinyinArr()}).catch(function(e){t.hide(),i.customload("获取手机联系人失败")})},function(e){t.hide(),i.customload("获取手机联系人失败")})},!1)},m.backTop=function(){c.scrollTop(!0)},m.formatContacts=[{key:"A",value:[]},{key:"B",value:[]},{key:"C",value:[]},{key:"D",value:[]},{key:"E",value:[]},{key:"F",value:[]},{key:"G",value:[]},{key:"H",value:[]},{key:"I",value:[]},{key:"J",value:[]},{key:"K",value:[]},{key:"L",value:[]},{key:"M",value:[]},{key:"N",value:[]},{key:"O",value:[]},{key:"P",value:[]},{key:"Q",value:[]},{key:"R",value:[]},{key:"S",value:[]},{key:"T",value:[]},{key:"U",value:[]},{key:"V",value:[]},{key:"W",value:[]},{key:"X",value:[]},{key:"Y",value:[]},{key:"Z",value:[]},{key:"#",value:[]}],m.changeToPinyinArr=function(){for(var e=0;e<m.friendArr.length;e++)for(var n=pinyinUtil.getFirstLetter(m.friendArr[e].Name).substr(0,1).toUpperCase(),a=0;a<m.formatContacts.length;a++){if(n==m.formatContacts[a].key){m.formatContacts[a].value.push(m.friendArr[e]);break}a==m.formatContacts.length-1&&m.formatContacts[26].value.push(m.friendArr[e])}},m.changeToPinyinArr(),m.letterarr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","#"],m.mTouch=function(e,n){i.customload(n,500);var a=e.pageX||e.touches[0].pageX,t=e.pageY||e.touches[0].pageY;if(u=document.elementFromPoint(a,t)){var o=u.innerText;if(o&&" "!=o&&1==o.length&&(m.hint=o,document.getElementById("mobilecontindex-"+m.hint))){var u,l=document.getElementById("mobilecontindex-"+m.hint).offsetTop-c.$getByHandle("mobileContScroll").getScrollPosition().top;c.scrollBy(0,l,!0),(u=document.getElementsByTagName("ion-content"))[0].style.overflow="auto"}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("mobileContact",{url:"/linkman/addfriend/mobilecontact",cache:!1,templateUrl:"views/tabs/linkMan/addFriend/mobileContact/mobileContact.html",controller:"mobileContactCtr",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("createGroupCtr",["NimUtils","enterViewLoad","appUtils","$ionicPopover","$ionicModal","$timeout","$window","$state","$ionicActionSheet","$ionicTabsDelegate","$ionicScrollDelegate","$rootScope","$ionicHistory","$Factory","$scope","$http","$ionicSlideBoxDelegate",function(a,r,e,o,t,n,u,l,i,c,v,y,k,s,f,d,m){f.back=function(){e.back()},f.groupSubArr=[],f.confirmGroup=function(){$.each($("#create_group .letterli").find("input:checked"),function(){f.groupSubArr.push($(this).val())}),f.groupSubArr.length<1?r.customload("请选择至少一位群成员"):f.showModal()},f.subData={groupName:"",groupDesc:""},f.createGroup=function(){f.subData.groupName?(f.closeModal(),nim.createTeam({type:"advanced",name:f.subData.groupName,avatar:"",accounts:f.groupSubArr,ps:f.subData.groupDesc||"群描述",intro:"",announcement:"",custom:"",joinMode:"noVerify",inviteMode:"all",beInviteMode:"noVerify",done:function(e,a){e?r.customload("添加群成员失败"):(r.customload("创建群成功"),n(function(){f.back()}))}})):r.customload("请输入群名称")},t.fromTemplateUrl("create_group_modal",{scope:f,animation:"slide-in-left"}).then(function(e){f.groupNmaeModal=e}),f.showModal=function(){f.groupNmaeModal.show()},f.closeModal=function(){f.groupNmaeModal.hide()},f.friendArr=[],f.$on("$ionicView.enter",function(){nim.getFriends({done:function(e,a){if(!e){for(var o=[],t=0;t<a.length;t++)o.push(a[t].account);n(o)}}});var n=function(e){e.length<=0||a.getUsers({accounts:e,done:function(e,a){e||(f.friendArr=a,f.friendsNum=a.length,f.formatContacts=[{key:"A",value:[]},{key:"B",value:[]},{key:"C",value:[]},{key:"D",value:[]},{key:"E",value:[]},{key:"F",value:[]},{key:"G",value:[]},{key:"H",value:[]},{key:"I",value:[]},{key:"J",value:[]},{key:"K",value:[]},{key:"L",value:[]},{key:"M",value:[]},{key:"N",value:[]},{key:"O",value:[]},{key:"P",value:[]},{key:"Q",value:[]},{key:"R",value:[]},{key:"S",value:[]},{key:"T",value:[]},{key:"U",value:[]},{key:"V",value:[]},{key:"W",value:[]},{key:"X",value:[]},{key:"Y",value:[]},{key:"Z",value:[]},{key:"#",value:[]}],f.changeToPinyinArr())}})}}),f.formatContacts=[{key:"A",value:[]},{key:"B",value:[]},{key:"C",value:[]},{key:"D",value:[]},{key:"E",value:[]},{key:"F",value:[]},{key:"G",value:[]},{key:"H",value:[]},{key:"I",value:[]},{key:"J",value:[]},{key:"K",value:[]},{key:"L",value:[]},{key:"M",value:[]},{key:"N",value:[]},{key:"O",value:[]},{key:"P",value:[]},{key:"Q",value:[]},{key:"R",value:[]},{key:"S",value:[]},{key:"T",value:[]},{key:"U",value:[]},{key:"V",value:[]},{key:"W",value:[]},{key:"X",value:[]},{key:"Y",value:[]},{key:"Z",value:[]},{key:"#",value:[]}],f.changeToPinyinArr=function(){for(var e=0;e<f.friendArr.length;e++)for(var a=pinyinUtil.getFirstLetter(f.friendArr[e].nick).substr(0,1).toUpperCase(),o=0;o<f.formatContacts.length;o++){if(a==f.formatContacts[o].key){f.formatContacts[o].value.push(f.friendArr[e]);break}o==f.formatContacts.length-1&&f.formatContacts[26].value.push(f.friendArr[e])}n(function(){f.formatContacts=f.formatContacts})},f.changeToPinyinArr(),f.letterarr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","#"],f.mTouch=function(e,a){r.customload(a,500);var o=e.pageX||e.touches[0].pageX,t=e.pageY||e.touches[0].pageY;if(u=document.elementFromPoint(o,t)){var n=u.innerText;if(n&&" "!=n&&1==n.length&&(f.hint=n,document.getElementById("create_group_index-"+f.hint))){var u,l=document.getElementById("create_group_index-"+f.hint).offsetTop-v.$getByHandle("clientScroll").getScrollPosition().top;v.scrollBy(0,l,!0),(u=document.getElementsByTagName("ion-content"))[0].style.overflow="auto"}}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("tabs.createGroup",{url:"/linkman/groupchat/creategroup",cache:!1,views:{find:{templateUrl:"views/tabs/linkMan/groupChat/createGroup/createGroup.html",controller:"createGroupCtr"}},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("setAliasNameCtl",["NimUtils","appUtils","enterViewLoad","$ionicPopup","$timeout","$ionicHistory","$ionicLoading","$rootScope","$http","$Factory","$scope","$stateParams","$ionicActionSheet",function(i,a,n,t,e,o,c,l,s,r,u,d,m){u.back=function(){a.back()},u.targetId=d.id,u.userinfo={Name:"",Tag:"朋友"},u.nameEmpty=function(){u.userinfo.Name=""},u.$on("$ionicView.enter",function(){for(var a=i.myFriends,t=0;t<a.length;t++)a[t].account===d.id&&(u.userinfo.Name=a[t].alias||"")}),$.scrEvent({data:["朋友","票友","同事","同学","家人"],evEle:".setaliasname-tag",title:"选择标签分类",defValue:"朋友",afterAction:function(a){$(".setaliasname-tag").val(a),u.userinfo.Tag=a}}),u.isBlack={data:i.isBlack(u.targetId)},u.blockChange=function(){u.isBlack.data&&t.confirm({title:"确定加入黑名单？",cancelText:"取消",okText:"确认"}).then(function(a){a||(u.isBlack.data=!1)})},u.save=function(){nim.updateFriend({account:u.targetId,alias:u.userinfo.Name,done:function(a,t){a?n.customload("修改备注失败"):(n.customload("保存成功"),e(function(){u.back()},1500))}}),u.clickCheckBox&&(u.isBlack.data?u.addBlack():u.removeBlack())},u.addBlack=function(){nim.addToBlacklist({account:u.targetId,done:function(a,t){a||(n.customload("保存成功"),i.blacklist=nim.mergeRelations(i.blacklist,t.record))}})},u.removeBlack=function(){nim.removeFromBlacklist({account:u.targetId,done:function(a,t){a||(n.customload("保存成功"),i.blacklist=nim.cutRelations(i.blacklist,t.record))}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("setAliasName",{url:"/linkman/linkmandetail/setaliasname/params/:id",cache:!1,templateUrl:"views/tabs/linkMan/linkManDetail/setAliasName/setAliasName.html",controller:"setAliasNameCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("agentVisitListCtl",["appUtils","$ionicLoading","$ionicScrollDelegate","$ionicHistory","$Factory","$http","$scope","$state","$rootScope","$ionicPopover","$timeout",function(t,o,e,a,n,i,s,r,l,u,c){s.back=function(){t.back()},s.slideChoose=0,s.changeSlideChoose=function(t){var e=20*(s.slideChoose=t)+5+"%";$("#agent_visit_list .head-slide .under-line").animate({left:e},150)},i.post(n.NewHouseTrade.agentlist.url+"?recordStatus=0").then(function(t){s.wantlookList=t.data}),i.post(n.NewHouseTrade.agentlist.url+"?recordStatus=3").then(function(t){s.checklookList=t.data}),i.post(n.NewHouseTrade.agentlist.url+"?recordStatus=4").then(function(t){s.willtradeList=t.data}),i.post(n.NewHouseTrade.agentlist.url+"?recordStatus=5").then(function(t){s.willtradeList=t.data}),i.post(n.NewHouseTrade.agentlist.url+"?recordStatus=6").then(function(t){s.tradedList=t.data}),s.cancelLook=function(t,e){t.stopPropagation(),e.RecordStatus=2,i.post(n.NewHouseTrade.looking.url,{params:e}).then(function(t){o.show({template:"操作成功",duration:1500}),i.post(n.NewHouseTrade.agentlist.url+"?recordStatus=0").then(function(t){s.wantlookList=t.data})})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("agentVisitList",{url:"/percenter/agentcenter/agentvisitlist",cache:!1,templateUrl:"views/tabs/perCenter/agentCenter/agentVisitList/agentVisitList.html",controller:"agentVisitListCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("changeInfoCtl",["NimUtils","appUtils","enterViewLoad","$timeout","$ionicHistory","$ionicLoading","$rootScope","$http","$Factory","$scope","$stateParams","$ionicActionSheet",function(e,n,o,i,t,c,a,u,f,s,r,d){i(function(){$(".radio-content i.radio-icon").removeClass("ion-checkmark icon"),$(".radio-content i.radio-icon").addClass("iconfont icon-xuanze")}),s.back=function(){n.back()},s.name=r.name,s.clientSideList=[{text:"男",value:"男"},{text:"女",value:"女"}],s.$on("$ionicView.enter",function(){u.get(f.Account.getuserinfo.url).then(function(n){s.userinfo=n.data}).catch(function(n){})}),s.save=function(){u.post(f.Account.setuserinfo.url,s.userinfo).then(function(n){if("修改昵称"==s.name){nim.updateMyInfo({nick:s.userinfo.NickName,done:function(n,o){n||e.updateMyInfo()}})}else if("修改性别"==s.name){"男"==s.userinfo.Sex?s.NimSex="male":"女"==s.userinfo.Sex?s.NimSex="female":s.NimSex="unknown",nim.updateMyInfo({gender:s.NimSex,done:function(n,o){n||e.updateMyInfo()}})}else if("个性签名"==s.name){nim.updateMyInfo({sign:s.userinfo.Discription,done:function(n,o){n||e.updateMyInfo()}})}o.customload("修改成功"),i(function(){a.$ionicGoBack()},1500)},function(n){o.customload("修改失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("changeInfo",{url:"/percenter/infodetail/changeinfo/:name",cache:!1,templateUrl:"views/tabs/perCenter/infoDetail/changeInfo/changeInfo.html",controller:"changeInfoCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("headimgPreviewCtl",["appUtils","$timeout","$ionicHistory","$http","$Factory","$state","$rootScope","$scope","$stateParams","$ionicActionSheet",function(t,i,e,n,c,o,a,u,r,l){u.back=function(){t.back()},n.get(c.Account.getuserinfo.url).then(function(t){u.userinfo=t.data}).catch(function(t){}),u.show=function(){l.show({buttons:[{text:"从相册中选择"}],cancelText:"取消",cancel:function(){},buttonClicked:function(t){return 0==t&&($("#headimg_preview input").click(),$("#headimg_preview input").change(function(){var t=$(this)[0].files[0];u.imgurl=URL.createObjectURL(t),o.go("headimgCut",{imgurl:u.imgurl})})),!0}})},u.init=function(){new AlloyCrop({image_src:"http://192.168.0.105:8100/3f9b9a83-1aa3-4407-9ffc-a0885962590f",circle:!0,width:200,height:200,ok:function(t,i){u.$apply(function(){u.view=t})},cancel:function(){$location.path("myAvatarPrev")},ok_text:"确定",cancel_text:"取消"})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("headimgPreview",{url:"/percenter/infodetail/headimgpreview",cache:!1,templateUrl:"views/tabs/perCenter/infoDetail/headimgPreview/headimgPreview.html",controller:"headimgPreviewCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("checkPageCtl",["upImgBase","appUtils","$ionicPopup","$rootScope","$http","$Factory","$state","$stateParams","$scope","$timeout","$ionicLoading",function(t,e,a,o,n,i,u,c,s,r,d){s.back=function(){e.back()},s.showType=c.showtype;var l={method:"POST",url:i.NewHouseTrade.getdetail.url,headers:{"Content-Type":"application/json"},data:{ProxerId:c.proxerid,BuyerId:c.buyerid,NewHouseId:c.houseid}};n(l).then(function(t){s.detailData=t.data}),s.visitPass=function(){s.detailData.RecordStatus=4,s.subReq()},s.tradePass=function(){s.detailData.RecordStatus=6,s.subReq()},s.noPass=function(){s.detailData.RecordStatus=7,s.subReq()},s.subReq=function(){a.confirm({title:"确定通过？",cancelText:"取消",okText:"确认"}).then(function(t){if(t){var e={method:"POST",url:i.NewHouseTrade.verify.url,headers:{"Content-Type":"application/json"},data:s.detailData};n(e).then(function(t){d.show({template:"提交成功",duration:1500}),r(function(){o.$ionicGoBack()},1500)}).catch(function(){d.show({template:"提交失败",duration:1500})})}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("checkPage",{url:"/percenter/landagent/checkpage/:buyerid/:proxerid/:houseid/:showtype",templateUrl:"views/tabs/perCenter/landAgent/checkPage/checkPage.html",controller:"checkPageCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("newHousesCtl",["appUtils","$rootScope","$ionicLoading","$ionicHistory","$state","$http","$Factory","$scope","$stateParams","$ionicPopover","$ionicPopup","$timeout","$ionicActionSheet",function(o,t,a,e,i,n,r,c,s,l,u,p,d){function f(t){var o={method:"POST",url:r.NewHouse.query.url+"?cityid=1",headers:{"Content-Type":"application/json"},data:c.queryData};n(o).then(function(o){if(o.data.length<=0)return c.loadMore=!1,void c.$broadcast("scroll.infiniteScrollComplete");c.loadMore=!0,c.queryData.pagenum+=1,t?(c.myNewList=c.myNewList.concat(o.data),c.$broadcast("scroll.infiniteScrollComplete")):c.myNewList=o.data}).catch(function(){c.loadMore=!1,a.show({template:"获取数据失败",duration:1e3}),c.$broadcast("scroll.infiniteScrollComplete"),c.$broadcast("scroll.refreshComplete")})}c.back=function(){o.back()},c.queryData={pagenum:0,pagesize:10},c.loadMore=!0,c.myNewList=[],c.newLoadMore=function(o){f(o)},c.newRefresh=function(o){c.queryData.pagenum=0,f(o)},c.soldOut=function(o){o.stopPropagation()},c.goEdit=function(o,t){o.stopPropagation(),i.go("addNew",{id:t})},c.goTrade=function(o,t){o.stopPropagation(),i.go("tradeData",{id:t})},c.goVisit=function(o,t){o.stopPropagation(),i.go("visitData",{id:t})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("newHouses",{url:"/percenter/landagent/newhouses",cache:!1,templateUrl:"views/tabs/perCenter/landAgent/newHouses/newHouses.html",controller:"newHousesCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("tradeReviewCtl",["appUtils","$Factory","$http","$scope","$rootScope","$timeout",function(e,t,a,o,n,i){o.back=function(){e.back()},o.showType=0,o.headSlide=function(e){var t=50*(o.showType=e)+15+"%";$("#trade_review .head-slide .under-line").animate({left:t},150)},a.post(t.NewHouseTrade.landagentlist.url+"?recordStatus=5").then(function(e){o.willdoneList=e.data}),a.post(t.NewHouseTrade.landagentlist.url+"?recordStatus=6").then(function(e){o.doneList=e.data})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("tradeReview",{url:"/percenter/landagent/tradeReview",cache:!1,templateUrl:"views/tabs/perCenter/landAgent/tradeReview/tradeReview.html",controller:"tradeReviewCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("visitReviewCtl",["appUtils","$Factory","$http","$scope","$rootScope","$timeout",function(t,e,o,a,i,n){a.back=function(){t.back()},a.showType=0,a.headSlide=function(t){var e=50*(a.showType=t)+15+"%";$("#visit_review .head-slide .under-line").animate({left:e},150)},o.post(e.NewHouseTrade.landagentlist.url+"?recordStatus=3").then(function(t){a.willdoneList=t.data}),o.post(e.NewHouseTrade.landagentlist.url+"?recordStatus=4").then(function(t){a.doneList=t.data})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("visitReview",{url:"/percenter/landagent/visitReview",cache:!1,templateUrl:"views/tabs/perCenter/landAgent/visitReview/visitReview.html",controller:"visitReviewCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("bonusListCtl",["enterViewLoad","appUtils","wechatLinkBase","WechatService","$localStorage","$ionicModal","$rootScope","$timeout","$interval","$scope","$stateParams","$http","$Factory",function(e,r,a,s,c,t,o,n,i,l,m,u,h){l.back=function(){r.back()},l.$on("$ionicView.enter",function(){l.initData()}),l.$on("$ionicView.leave",function(){l.intervalName&&i.cancel(l.intervalName)}),l.pageId=m.id||0,l.initData=function(){u.post(h.WaitReceive.bonuslist.url+"?uid="+l.pageId).then(function(e){e.data.result.length,l.pageData=e.data.result,l.intervalName=i(function(){for(var e=0;e<l.pageData.length;e++)l.pageData[e].StartSec=l.pageData[e].StartSec-1},1e3)}).catch(function(){e.customload("请求数据失败")})},l.disGet=function(){e.customload("未到领取时间",2e3)},l.getBonus=function(e){},t.fromTemplateUrl("bonus_list_share_modal",{scope:l,animation:"slide-in-up"}).then(function(e){l.shareModal=e}),l.showBottomShareModal=function(){l.shareModal.show()},l.closeBottomShareModal=function(){l.shareModal.hide()},l.myinfo=c.myselfInfo,l.ParPhone=window.btoa(c.myselfInfo.UserName),l.share=function(a){if(l.shareImgUrl=h.Account.qcode.url+"?id="+c.myselfInfo.Id,0==a||1==a){var t=document.createElement("canvas");t.width=375,t.height=468;var o=t.getContext("2d"),n=new Image;n.src=l.shareImgUrl,n.onload=function(){o.drawImage(n,0,0,375,468);var e=t.toDataURL("image/png");l.params={scene:a,message:{title:"【房田网】为您推荐",thumb:e,description:"Discription",media:{type:Wechat.Type.IMAGE,image:e}}},s.share(l.params)}}else if(2==a){(e={}).url=r.shareHost+"/#/registershareposter/"+l.ParPhone,e.title=l.myinfo.Name||"房田用户",e.description=l.myinfo.Name+"邀您上房田",e.imageUrl=l.shareImgUrl,e.appName="房田网",r.qqShareQQAndroid(e,function(){},function(e){})}else{var e;(e={}).url=r.shareHost+"/#/registershareposter/"+l.ParPhone,e.title=l.myinfo.Name||"房田用户",e.description=l.myinfo.Name+"邀您上房田";var i=[l.shareImgUrl];e.imageUrl=i,YCQQ.shareToQzone(function(){},function(e){},e)}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("bonusList",{url:"/percenter/myaccount/bonuslist/params/:id",cache:!1,templateUrl:"views/tabs/perCenter/myAccount/bonusList/bonusList.html",controller:"bonusListCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("forgetPayPasswordCtl",["enterViewLoad","appUtils","$state","$http","$Factory","$scope","$rootScope","$stateParams","$timeout",function(a,t,o,n,r,c,d,u,s){c.back=function(){t.back()},n.post(r.Allin.querycards.url+"?CardNo=ALL").then(function(t){"SUCCESS"==t.data.return_code?c.cardList=t.data.return_msg.bindCardList:a.customload(t.data.return_msg)}).catch(function(t){500==t.status?a.customload("还未实名绑卡"):a.customload("获取列表失败")}),c.unBind=function(t){n.post(r.Allin.unbindcard.url+"?CardNo="+t.bankCardNo).then(function(t){"SUCCESS"==t.data.return_code?o.go("bindBankCard",{isreset:!0}):a.customload(t.data.return_msg)}).catch(function(){a.customload("解绑失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("forgetPayPassword",{url:"/percenter/myaccount/forgetpaypassword",templateUrl:"views/tabs/perCenter/myAccount/forgetPayPassword/forgetPayPassword.html",controller:"forgetPayPasswordCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("myBankCardCtl",["enterViewLoad","appUtils","$localStorage","$rootScope","$ionicHistory","$timeout","$scope","$state","$stateParams","$http","$Factory",function(t,a,o,n,c,e,r,s,i,u,d){r.back=function(){a.back()},r.$on("$ionicView.enter",function(){u.post(d.Allin.querycards.url+"?CardNo=ALL").then(function(a){"SUCCESS"==a.data.return_code?r.cardList=a.data.return_msg.bindCardList.filter(function(a){return a.bankName=a.bankName.substr(a.bankName.length-4),a}):t.customload(a.data.return_msg)}).catch(function(a){500==a.status?t.customload("还未实名绑卡"):t.customload("获取列表失败")})}),r.chooseCard=function(a){"action"==i.actiontype?s.go("manageBankCard",{cardnumber:a.bankCardNo}):"choosebankcard"==i.actiontype&&(n.$emit("chooseBankCardSuccess",a),o.choosedPayBankCard=a,r.back())}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("tabs.myBankCard",{url:"/percenter/myaccount/mybankcard/params/:actiontype",cache:!1,views:{mine:{templateUrl:"views/tabs/perCenter/myAccount/myBankCard/myBankCard.html",controller:"myBankCardCtl"}},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("setPayPasswordCtl",["enterViewLoad","appUtils","$location","$localStorage","$rootScope","$ionicHistory","$timeout","$scope","$state","$http","$Factory","$ionicLoading",function(a,t,n,s,e,o,u,i,l,c,d,p){var r;i.back=function(){t.back()},i.fakeInput={value:null},i.stepStatus=1,$("#set_pay_password .password").on("input",function(){var a=$(this).val().length;$(".showView").find("li").each(function(t){t<a?$(this).find(".circle").css({display:"inline-block"}):$(this).find(".circle").hide()})}),i.clearPoint=function(){$(".showView").find("li").each(function(t){$(this).find(".circle").hide()})},i.inputPwd=function(){this.fakeInput.value=this.fakeInput.value.replace(/\D/g,""),i.fakeInput.value=this.fakeInput.value},i.$watch("fakeInput.value",function(t){t&&6==t.length&&(r&&u.cancel(r),r=u(function(){1==i.stepStatus?(i.oldPassword=t,i.fakeInput.value=null,i.clearPoint(),i.stepStatus=2):2==i.stepStatus?(i.newPassword=t,i.fakeInput.value=null,i.clearPoint(),i.stepStatus=3,u(function(){})):i.newPassword!==t&&(a.customload("两次输入密码不一致！"),i.fakeInput.value=null,i.clearPoint(),i.stepStatus=2)},500))}),i.oldPassword=null,i.isPassword=function(){c.post(d.Money.ispassword.url).then(function(t){t.data||0===t.data||(i.oldPassword=null,i.stepStatus=2)}).catch(function(){})},i.isPassword(),i.changeDone=function(){c.post(d.Money.setpassword.url+"?npwd="+i.newPassword+"&opwd="+i.oldPassword).then(function(t){a.customload("设置成功"),u(function(){i.back()},1500)}).catch(function(t){a.customload(t.data.Message),i.fakeInput.value=null,i.clearPoint(),"原密码错误"==t.data.Message?i.stepStatus=1:i.stepStatus=2})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("setPayPassword",{url:"/percenter/myaccount/setpaypassword",cache:!1,templateUrl:"views/tabs/perCenter/myAccount/setPayPassword/setPayPassword.html",controller:"setPayPasswordCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("topUpCtl",["enterViewLoad","appUtils","$location","$localStorage","$ionicModal","$rootScope","$ionicHistory","$timeout","$scope","$state","$http","$Factory","$ionicLoading",function(o,t,e,a,n,r,d,c,i,u,s,l,p){i.back=function(){t.back()},i.$on("$ionicView.enter",function(){i.choosedBankCard=a.choosedPayBankCard,r.$on("chooseBankCardSuccess",function(a,o){i.choosedBankCard=o})}),i.subData={money:""},n.fromTemplateUrl("topup_auth_code_modal",{scope:i,animation:"slide-in-up"}).then(function(a){i.codeModal=a}),i.showAuthCodeModal=function(){i.codeModal.show()},i.closeAuthCodeModal=function(){i.codeModal.hide()},i.payType={type:1},i.choosePayType=function(){i.showModal()},i.Pay=function(){1==i.payType.type?s.post(l.WxPay.unifiedorder.url+"?yearsOrFee="+100*i.subData.money.toFixed(2)+"&OrderPayType=1",11).then(function(a){i.resData=JSON.parse(a.data),i.wechatPayParams={partnerid:i.resData.partnerid,prepayid:i.resData.prepayid,noncestr:i.resData.noncestr,timestamp:i.resData.timestamp,sign:i.resData.sign},t.WxPay(i.wechatPayParams,function(a){o.customload("支付成功"),c(function(){i.back()},1500),s.post(l.WxPay.query.url,i.resData.trade_no).then(function(a){"SUCCESS"===a.data.return_code||a.data.return_code})},function(a){if("用户点击取消并返回"==a)return o.customload("您取消了订单"),void s.post(l.WxPay.close.url,i.resData.trade_no).then(function(a){a.data.return_code});o.customload(a)})}).catch(function(a){o.customload("生成订单失败")}):2==i.payType.type?s.post(l.AliPay.unifiedorder.url+"?yearsOrFee="+100*i.subData.money.toFixed(2)+"&OrderPayType=1",11).then(function(a){i.aliPayInfo=a.data.Request,i.aliTrade=a.data.TradeNO,t.AliPay(i.aliPayInfo,function(a){o.customload("支付成功"),c(function(){i.back()},1500),s.post(l.AliPay.query.url,i.aliTrade).then(function(a){"SUCCESS"===a.data.return_code||a.data.return_code})},function(a){4e3==a.resultStatus?o.customload("支付失败"):6001==a.resultStatus?o.customload("您取消了订单"):6002==a.resultStatus&&o.customload("网络连接失败")})}).catch(function(a){o.customload("生成订单失败")}):3==i.payType.type?s.post(l.Allin.applydeposit.url,{ProductId:11,Fee:100*i.subData.money.toFixed(2),CardNo:i.choosedBankCard.bankCardNo,ReturnUrl:e.url()}).then(function(a){"SUCCESS"==a.data.return_code&&(i.showAuthCodeModal(),i.allinData=JSON.parse(a.data.return_msg),i.confirmCardData.BizOrderNo=i.allinData.bizOrderNo,i.confirmCardData.TradeNo=i.allinData.tradeNo)}).catch(function(a){o.customload("生成银联订单失败")}):i.payType.type},i.payNow=function(a){i.choosedBankCard?s.post(l.Allin.applydeposit.url,{ProductId:11,Fee:100*i.subData.money.toFixed(2),CardNo:i.choosedBankCard.bankCardNo,ReturnUrl:e.url()}).then(function(a){"SUCCESS"==a.data.return_code&&(i.showAuthCodeModal(),i.allinData=JSON.parse(a.data.return_msg),i.confirmCardData.BizOrderNo=i.allinData.bizOrderNo,i.confirmCardData.TradeNo=i.allinData.tradeNo)}).catch(function(a){o.customload("生成银联订单失败")}):o.customload("请选择银行卡")},i.confirmCardData={BizOrderNo:"",TradeNo:"",Code:null},i.confirmCardPay=function(){i.closeAuthCodeModal();var a=JSON.parse(JSON.stringify(i.confirmCardData));i.confirmCardData.BizOrderNo="",i.confirmCardData.TradeNo="",i.confirmCardData.Code=null,s.post(l.Allin.mpay.url,a).then(function(a){"SUCCESS"==a.data.return_code?(o.customload("支付成功"),c(function(){i.back()},1500)):o.customload(a.data.return_msg||"支付失败")}).catch(function(){o.customload("支付失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("tabs.topUp",{url:"/percenter/myaccount/topup",cache:!1,views:{mine:{templateUrl:"views/tabs/perCenter/myAccount/topUp/topUp.html",controller:"topUpCtl"}},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("transactionRecordCtl",["enterViewLoad","appUtils","$rootScope","$timeout","$scope","$stateParams","$http","$Factory",function(t,o,c,a,e,n,r,i){e.back=function(){o.back()},r.post(i.Money.record.url+"?type=0").then(function(t){e.recordList=t.data}).catch(function(){t.customload("请求数据失败")})}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("transactionRecord",{url:"/percenter/myaccount/transactionrecord",templateUrl:"views/tabs/perCenter/myAccount/transactionRecord/transactionRecord.html",controller:"transactionRecordCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("withDrawCtl",["enterViewLoad","appUtils","$ionicPopup","$location","$localStorage","$rootScope","$ionicHistory","$timeout","$scope","$state","$http","$Factory","$ionicLoading",function(t,o,a,n,c,e,i,d,r,u,s,l,m){r.back=function(){o.back()},r.$on("$ionicView.enter",function(){s.post(l.Money.money.url).then(function(o){r.myBalance=(o.data.Total/100).toFixed(2)}).catch(function(o){})}),r.subData={money:""},r.choosedBankCard=c.choosedPayBankCard,e.$on("chooseBankCardSuccess",function(o,a){r.choosedBankCard=a}),r.drawNow=function(o){r.choosedBankCard?1*r.myBalance<r.subData.money?t.customload("余额不足"):a.confirm({title:"确定提现？",cancelText:"取消",okText:"确定"}).then(function(o){o&&s.post(l.Allin.applydraw.url,{ProductId:13,Fee:100*r.subData.money.toFixed(2),CardNo:r.choosedBankCard.bankCardNo}).then(function(o){if("SUCCESS"==o.data.return_code)t.customload("操作成功"),d(function(){r.back()},1500);else{var a=o.data.return_msg||"操作失败";t.customload(a)}}).catch(function(o){var a=o.data.Message||"操作失败";t.customload(a)})}):t.customload("请选择银行卡")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("tabs.withDraw",{url:"/percenter/myaccount/withdraw",cache:!1,views:{mine:{templateUrl:"views/tabs/perCenter/myAccount/withDraw/withDraw.html",controller:"withDrawCtl"}},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("bgImgCutCtl",["$myPhotosData","NimUtils","appUtils","enterViewLoad","$rootScope","$scope","$stateParams","$ionicHistory","$http","$Factory","$ionicLoading","$timeout",function(o,t,n,i,c,e,a,u,l,s,d,r){e.back=function(){n.back()},e.imgurl=a.imgurl,e.init=function(){new AlloyCrop({image_src:e.imgurl,circle:!1,width:document.body.clientWidth,height:.49*document.body.clientWidth,output:2,ok:function(t,n){e.$apply(function(){e.view=t,e.done()})},cancel:function(){e.back()},ok_text:"确定",cancel_text:"取消"})},e.init(),e.done=function(){e.save=function(){l.post(s.Account.upload.url,{path:"18/userHeadImg",file:e.view,orientation:a.orientation||null}).then(function(t){if(a.type)l.post(s.Zone.save.url,{Content:t.data.view,Type:a.type,Id:a.id||null}).then(function(t){i.customload("添加背景成功"),r(function(){e.back()},1500)}).catch(function(){i.customload("添加背景失败"),r(function(){e.back()},1500)});else{o.data.ShowInList=t.data.view;var n=JSON.parse(JSON.stringify(o.data));n.Content=n.Content.join("|"),l.post(s.Zone.save.url,n).then(function(t){i.customload("添加背景成功"),r(function(){e.back()},1500)}).catch(function(){i.customload("添加背景失败"),r(function(){e.back()},1500)})}},function(t){i.customload("保存图片失败"),r(function(){e.back()},1500)})}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("bgImgCut",{url:"/percenter/mybusiness/bgimgcut/params/:imgurl/:orientation/:type/:id",cache:!1,templateUrl:"views/tabs/perCenter/myBusiness/bgImgCut/bgImgCut.html",controller:"bgImgCutCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("busintroImgCutCtl",["$myBusinessData","NimUtils","appUtils","enterViewLoad","$rootScope","$scope","$stateParams","$ionicHistory","$http","$Factory","$ionicLoading","$timeout",function(i,t,n,o,c,e,a,u,l,s,r,d){e.back=function(){n.back()},e.imgurl=a.imgurl,e.init=function(){new AlloyCrop({image_src:e.imgurl,circle:!1,width:.7*document.body.clientWidth,height:.7*document.body.clientWidth*16/9,output:2,ok:function(t,i){e.$apply(function(){e.view=t,e.save()})},cancel:function(){e.back()},ok_text:"确定",cancel_text:"取消"})},e.init(),e.done=function(){},e.save=function(){o.load(),l.post(s.Account.upload.url,{path:"18/mybusiness",file:e.view,orientation:a.orientation||null}).then(function(t){i.myPoster=t.data.view,r.hide(),e.back()}).catch(function(t){o.customload("上传图片失败"),d(function(){e.back()},1500)})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("busintroImgCut",{url:"/percenter/mybusiness/busintroimgcut/params/:imgurl/:orientation",cache:!1,templateUrl:"views/tabs/perCenter/myBusiness/busintroImgCut/busintroImgCut.html",controller:"busintroImgCutCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myAlbumCtl",["Upload","appUtils","enterViewLoad","$ionicActionSheet","$sce","$ionicModal","$ionicLoading","$localStorage","$timeout","$rootScope","$scope","$state","$stateParams","$http","$Factory",function(t,o,a,i,n,e,c,u,d,l,s,m,r,f,p){s.back=function(){o.back()},s.$on("$ionicView.enter",function(){s.paramsData={id:r.id,uid:r.uid},s.initData()}),s.showAction=!1,s.switchShowAction=function(){s.showAction=!s.showAction},s.cancelShowAction=function(){s.showAction=!1},s.initData=function(){f.post(p.Zone.home.url+"?uid="+(s.paramsData.uid||0),{type:21}).then(function(t){t.data[0]?s.albumList=t.data[0].List.filter(function(t){return t.Content?t.Content=t.Content.split("|"):t.Content=[],t}):s.albumList=[]}).catch(function(){s.albumList=[],a.customload("加载数据失败")}),f.post(p.Zone.home.url+"?uid="+(s.paramsData.uid||0),{type:80}).then(function(t){t.data[0]&&(s.bgImage=t.data[0].List[0].Content,s.bgImageId=t.data[0].List[0].Id)})},s.removeImg=function(o,t,n){n.stopPropagation(),t.Id&&f.post(p.Zone.delete.url+"?id="+t.Id).then(function(t){a.customload("删除成功"),s.albumList.splice(o,1)}).catch(function(){a.customload("删除失败")})},s.uploadBgImg=function(){try{var t={selectMode:100,maxSelectCount:1,maxSelectSize:188743680};document.addEventListener("deviceready",function(){MediaPicker.getMedias(t,function(t){for(var o="",n=0;n<t.length;n++)o=t[n].path;MediaPicker.getExifForKey(o,"Orientation",function(t){m.go("bgImgCut",{imgurl:o,orientation:t,type:80,id:s.bgImageId||null})},function(t){})},function(t){err(t)})},!1)}catch(t){}},s.showActionSheet=function(t,o,n){if(!s.paramsData.uid)i.show({buttons:[{text:"更换背景"}],cancelText:"取消",destructiveButtonClicked:function(){},cancel:function(){},buttonClicked:function(t){return s.uploadBgImg(),!0}})},e.fromTemplateUrl("myalbum_addalbum_modal",{scope:s,animation:"slide-in-left"}).then(function(t){s.Modal=t}),s.showModal=function(){s.Modal.show()},s.closeModal=function(){s.Modal.hide()},s.addAlbumData={Title:""},s.addAlbum=function(){s.addAlbumData.Title?f.post(p.Zone.save.url,{Title:s.addAlbumData.Title,Type:21}).then(function(t){a.customload("新建成功"),s.initData(),s.closeModal()}).catch(function(){a.customload("新建相册失败")}):a.customload("请输入相册名称")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("myAlbum",{url:"/percenter/mybusiness/myalbum/params/:uid",templateUrl:"views/tabs/perCenter/myBusiness/myAlbum/myAlbum.html",controller:"myAlbumCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myPhotosCtl",["$myPhotosData","Upload","appUtils","enterViewLoad","actionImgShow","$ionicActionSheet","$sce","$ionicModal","$ionicLoading","$localStorage","$timeout","$rootScope","$scope","$state","$stateParams","$http","$Factory",function(a,t,o,e,i,c,n,u,r,s,d,l,f,p,h,m,g){f.back=function(){o.back()},f.$on("$ionicView.enter",function(){h.uid?f.headTitle="他的照片":f.headTitle="我的照片",f.paramsData={uid:h.uid,id:h.id||0},f.initImages()}),u.fromTemplateUrl("photos_videos_modal",{scope:f,animation:"slide-in-left"}).then(function(t){f.Modal=t}),f.showModal=function(){f.Modal.show()},f.closeModal=function(){f.Modal.hide()},f.showAction=!1,f.switchShowAction=function(){f.showAction=!f.showAction},f.cancelShowAction=function(){f.showAction=!1},f.initImages=function(){m.get(g.Zone.get.url+"?id="+f.paramsData.id,{type:20}).then(function(t){t.data.Content?t.data.Content=t.data.Content.split("|"):t.data.Content=[],f.pageData=t.data}).catch(function(){f.pageData={},f.pageData.Content=[],e.customload("加载数据失败")})},f.preBigImg=function(t){for(var o=new Array,n=0;n<f.pageData.Content.length;n++){var a=new Image;a.src=f.pageData.Content[n],a.onload=void(o[n]=a)}i.show({larImgs:o,currentImg:t,imgClose:function(){i.close()}})},f.cameraChoose=function(){f.closeModal();o.cameraBase({width:1e3,height:1e3},function(t){m.post(g.Account.upload.url,{path:"18/myPhotos",file:t}).then(function(t){if(0==t.data.error){var o=JSON.parse(JSON.stringify(f.pageData));o.Content.push(t.data.view),f.addAlbum(o)}}).catch(function(){e.customload("图片上传失败")})},function(t){e.customload("调用相机失败")})},f.photoChoose=function(){f.closeModal();o.photoLiberary({selectMode:100,maxSelectCount:9,maxSelectSize:188743680},function(t,o){m.post(g.Account.upload.url,{path:"18/myPhotos",file:t,orientation:o}).then(function(o){0==o.data.error&&d(function(){var t=JSON.parse(JSON.stringify(f.pageData));t.Content.push(o.data.view),f.addAlbum(t)})}).catch(function(){e.customload("图片上传失败")})},function(t){e.customload("获取图片失败")})},f.removeImg=function(t,o,n){n.stopPropagation();var a=JSON.parse(JSON.stringify(f.pageData));a.Content.splice(t,1),f.addAlbum(a)},f.uploadBgImg=function(){var t={selectMode:100,maxSelectCount:1,maxSelectSize:188743680};document.addEventListener("deviceready",function(){MediaPicker.getMedias(t,function(t){for(var o="",n=0;n<t.length;n++)o=t[n].path;MediaPicker.getExifForKey(o,"Orientation",function(t){a.data=JSON.parse(JSON.stringify(f.pageData)),p.go("bgImgCut",{imgurl:o,orientation:t})},function(t){})},function(t){err(t)})},!1)},f.showActionSheet=function(t,o,n){if(!f.paramsData.uid)c.show({buttons:[{text:"更换背景"}],cancelText:"取消",destructiveButtonClicked:function(){},cancel:function(){},buttonClicked:function(t){return f.uploadBgImg(),!0}})},f.addAlbum=function(o,n){var t=JSON.parse(JSON.stringify(o));t.Content=t.Content.join("|"),m.post(g.Zone.save.url,t).then(function(t){f.pageData=JSON.parse(JSON.stringify(o)),n&&e.customload("上传成功")}).catch(function(){e.customload("添加照片失败")})}}]).factory("$myPhotosData",[function(){var t=function(){};return t.prototype={data:null},new t}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("myPhotos",{url:"/percenter/mybusiness/myphotos/params/:uid/:id",cache:!1,templateUrl:"views/tabs/perCenter/myBusiness/myPhotos/myPhotos.html",controller:"myPhotosCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("myPhotosAndVideosCtl",["Upload","appUtils","enterViewLoad","$ionicActionSheet","$sce","$ionicLoading","$localStorage","$timeout","$rootScope","$scope","$state","$stateParams","$http","$Factory",function(i,e,n,a,t,c,d,u,o,s,r,l,m,h){s.back=function(){e.back()},l.uid?s.headTitle="他的视频":s.headTitle="我的视频",s.paramsData={uid:l.uid||0},s.showAction=!1,s.switchShowAction=function(){s.showAction=!s.showAction},s.cancelShowAction=function(){s.showAction=!1},s.showVideoList=[],s.vcrList=[],s.initVideos=function(){m.post(h.Zone.home.url+"?uid="+s.paramsData.uid,{type:31}).then(function(t){t.data[0]?s.vcrList=t.data[0].List.filter(function(t){return e.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},t}):s.vcrList=[]}).catch(function(){s.vcrList=[],n.customload("加载数据失败")}),m.post(h.Zone.home.url+"?uid="+s.paramsData.uid,{type:30}).then(function(t){t.data[0]?s.showVideoList=t.data[0].List.filter(function(t){return e.isJsonString(t.Content)?t.Content=JSON.parse(t.Content):t.Content={},t}):s.showVideoList=[]}).catch(function(){s.showVideoList=[],n.customload("加载数据失败")}),m.post(h.Zone.home.url+"?uid="+s.paramsData.uid,{type:90}).then(function(t){t.data[0]&&(s.bgImage=t.data[0].List[0].Content,s.bgImageId=t.data[0].List[0].Id)})},s.initVideos(),s.videoChoose=function(t){s.subType=t,$("#my_videos_add_input").click()},s.subVideoData={video:"",image:""},s.onFileChange=function(t){s.videoFileObj=t[0];var e=new Blob([t[0]]),o=URL.createObjectURL(e);document.getElementById("preview_my_video").src=o,document.getElementById("preview_my_video").onload=function(t){URL.revokeObjectURL(this.src)},s.$apply(),$("#my_videos_add_input").val(""),i.upload({url:h.Account.uploadmedia.url,data:{file:s.videoFileObj,userid:d.myselfInfo?d.myselfInfo.Id:null}}).progress(function(t){var e=parseInt(100*t.loaded/t.total);u(function(){c.show({template:"正在上传："+Math.floor(e)+"%"}),99<e&&(c.hide(),n.load(!0))})}).success(function(t,e,o,i){c.hide(),0==t.error?(s.subVideoData.video=t.view,s.subVideoData.image=t.cover,n.customload("上传成功")):n.customload("上传失败")}).error(function(t,e,o,i){c.hide(),n.customload("上传失败")})},s.convertBase64UrlToBlob=function(t){for(var e=t.split(","),o=(e[0].match(/:(.*?);/)[1],atob(e[1])),i=o.length,n=new Uint8Array(i);i--;)n[i]=o.charCodeAt(i);return new Blob([n],{type:"image/png"})},s.onLoadedData=function(){var o=document.getElementById("preview_my_video");o.play(),o.pause(),s.uploadShoot=function(){var t=document.createElement("canvas");t.width=.8*o.videoWidth,t.height=.8*o.videoHeight,t.getContext("2d").drawImage(o,0,0,t.width,t.height);var e=t.toDataURL("image/png");m.post(h.Account.upload.url,{path:"18/myVideos/screenshot",file:e}).then(function(t){0==t.data.error?(s.subVideoData.image=t.data.view,n.customload("上传成功")):n.customload("上传失败")}).catch(function(t){})}},s.publishVideo=function(){m.post(h.Zone.save.url,{Content:JSON.stringify(s.subVideoData),Type:s.subType}).then(function(t){s.subVideoData={video:"",image:""},s.videoFileObj="",n.customload("发布成功"),s.initVideos()}).catch(function(){n.customload("发布失败")})},s.cancelVideo=function(){s.subVideoData={video:"",image:""},s.videoFileObj=""},s.removeVideo=function(e,t,o,i){o.stopPropagation(),t.Id?m.post(h.Zone.delete.url+"?id="+t.Id).then(function(t){n.customload("删除成功"),30==i?s.showVideoList.splice(e,1):s.vcrList.splice(e,1)}).catch(function(){n.customload("删除失败")}):s.showVideoList.splice(e,1)},s.uploadBgImg=function(){var t={selectMode:100,maxSelectCount:1,maxSelectSize:188743680};document.addEventListener("deviceready",function(){MediaPicker.getMedias(t,function(t){for(var e="",o=0;o<t.length;o++)e=t[o].path;MediaPicker.getExifForKey(e,"Orientation",function(t){r.go("bgImgCut",{imgurl:e,orientation:t,type:90,id:s.bgImageId||null})},function(t){})},function(t){err(t)})},!1)},s.showActionSheet=function(t,e,o){if(!s.paramsData.uid)a.show({buttons:[{text:"更换背景"}],cancelText:"取消",destructiveButtonClicked:function(){},cancel:function(){},buttonClicked:function(t){return s.uploadBgImg(),!0}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(s){s.state("myPhotosAndVideos",{url:"/percenter/mybusiness/myphotosandvideos/params/:uid",cache:!1,templateUrl:"views/tabs/perCenter/myBusiness/myPhotosAndVideos/myPhotosAndVideos.html",controller:"myPhotosAndVideosCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("publishArticleCtl",["appUtils","enterViewLoad","upImgBase","$ionicModal","$timeout","$rootScope","$scope","$stateParams","$http","$Factory",function(t,i,e,o,n,a,l,s,r,d){l.back=function(){t.back()};l.editor=new Quill("#article_editor",{modules:{toolbar:[[{header:"1"}],[{align:""},{align:"center"},{align:"right"}],["bold","underline"],["image"]]},theme:"snow"}),l.showInList={title:"",imgs:[]},l.removeImg=function(t){l.showInList.imgs.splice(t,1)},l.addTitImg=function(){t.photoLiberary({selectMode:100,maxSelectCount:3,maxSelectSize:188743680},function(t,e){r.post(d.Account.upload.url,{path:"18/articles/titleimg",file:t,orientation:e}).then(function(t){if(0==t.data.error){var e=t.data.view;l.showInList.imgs.length<3||l.showInList.imgs.splice(0,1),l.showInList.imgs.push(e)}}).catch(function(){i.customload("图片上传失败")})},function(t){i.customload("选择图片失败")})},l.editor.getModule("toolbar").addHandler("image",function(t){l.insertImg()}),$(".ql-toolbar , .ql-editor").addClass("no-fastclick"),l.insertImg=function(){var o=l.editor.getSelection().index;t.photoLiberary({selectMode:100,maxSelectCount:1,maxSelectSize:188743680},function(t,e){r.post(d.Account.upload.url,{path:"18/articles",file:t,orientation:e}).then(function(t){if(0==t.data.error){var e=t.data.view;l.editor.insertEmbed(o,"image",e),l.editor.setSelection(o+1)}}).catch(function(){i.customload("图片上传失败")})},function(t){i.customload("选择图片失败")})},l.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(e){n(function(){l.keyboardHeight&&l.keyboardHeight==e.keyboardHeight||(l.keyboardHeight=e.keyboardHeight);var t=l.keyboardHeight+10;document.getElementsByClassName("ql-editor")[0].style.paddingBottom=t+"px"})}),window.addEventListener("native.keyboardhide",function(t){document.getElementsByClassName("ql-editor")[0].style.paddingBottom="10px"}),o.fromTemplateUrl("publish_article_title_modal",{scope:l,animation:"slide-in-left"}).then(function(t){l.Modal=t}),l.showModal=function(){l.editor.container.firstChild.innerHTML.length<12?i.customload("请编写文章内容",2e3):l.Modal.show()},l.closeModal=function(){l.Modal.hide()},l.save=function(){if(l.showInList.title){var t={Content:l.editor.container.firstChild.innerHTML,ShowInList:JSON.stringify(l.showInList),Type:40};r.post(d.Zone.save.url,t).then(function(t){i.customload("发布成功"),l.closeModal(),l.editor.container.firstChild.innerHTML="",l.showInList.title="",l.showInList.imgs=[],n(function(){l.back()},1500)}).catch(function(){i.customload("发布失败")})}else i.customload("请输入文章标题")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("publishArticle",{url:"/percenter/mybusiness/publisharticle",cache:!1,templateUrl:"views/tabs/perCenter/myBusiness/publishArticle/publishArticle.html",controller:"publishArticleCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("publishDynamicCtl",["appUtils","enterViewLoad","upImgBase","$ionicModal","$timeout","$rootScope","$scope","$stateParams","$http","$Factory",function(o,n,t,e,s,a,i,c,u,l){i.back=function(){o.back()},e.fromTemplateUrl("publish_dynamic_typechoose_modal",{scope:i,animation:"slide-in-left"}).then(function(t){i.Modal=t}),i.showModal=function(){i.Modal.show()},i.closeModal=function(){i.Modal.hide()},i.subContent={text:"",imgs:[],video:""},i.cameraChoose=function(){i.closeModal();o.cameraBase({width:1e3,height:1e3},function(t){u.post(l.Account.upload.url,{path:"18/myDynamicPhotos",file:t}).then(function(t){0==t.data.error&&(i.subContent.imgs.length<9||i.subContent.imgs.splice(0,1),i.subContent.imgs.push(t.data.view))}).catch(function(){n.customload("图片上传失败")})},function(t){n.customload("调用相机失败")})},i.photoChoose=function(){i.closeModal();var t={selectMode:100,maxSelectCount:9-i.subContent.imgs.length,maxSelectSize:188743680};o.photoLiberary(t,function(t,o){u.post(l.Account.upload.url,{path:"18/myDynamicPhotos",file:t,orientation:o}).then(function(t){0==t.data.error&&(i.subContent.imgs.length<9||i.subContent.imgs.splice(0,1),i.subContent.imgs.push(t.data.view))}).catch(function(){n.customload("图片上传失败")})},function(t){n.customload("获取图片失败")})},i.removeImg=function(t){i.subContent.imgs.splice(t,1)},i.save=function(){if(i.subContent.text||0!=i.subContent.imgs.length){n.load();JSON.parse(JSON.stringify(i.subContent));u.post(l.Zone.add.url,{Content:i.subContent,Type:10}).then(function(t){n.customload("发表成功"),s(function(){i.back()},1500)}).catch(function(){n.customload("发表失败")})}else n.customload("请输入文字或选择图片")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(i){i.state("publishDynamic",{url:"/percenter/mybusiness/publishdynamic",cache:!1,templateUrl:"views/tabs/perCenter/myBusiness/publishDynamic/publishDynamic.html",controller:"publishDynamicCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("vcrVideoCtl",["appUtils","enterViewLoad","$ionicModal","$localStorage","$http","$Factory","$timeout","$sce","$scope","$rootScope","$state","$stateParams",function(a,t,e,o,n,i,d,r,s,c,l,u){s.back=function(){a.back()},s.paramsData={id:u.id,video:u.video,image:u.image};var m=s.renderData={};s.paramsData.video?(s.renderData.videoSrc=r.trustAsResourceUrl(s.paramsData.video),s.renderData.videoImage=s.paramsData.image):n.get(i.Zone.get.url+"?id="+s.paramsData.id).then(function(e){a.isJsonString(e.data.Content)?e.data.Content=JSON.parse(e.data.Content):e.data.Content={},o.myselfInfo?e.data.agreed=0<=e.data.AgressUsers.indexOf(o.myselfInfo.Id):e.data.agreed=!1,s.pageData=e.data,s.renderData.videoSrc=r.trustAsResourceUrl(s.pageData.Content.video),s.renderData.videoImage=s.pageData.Content.image}).catch(function(){t.customload("获取失败")}),s.agreeAction=function(a){a.agreed||n.post(i.Zone.agree.url+"?id="+a.Id).then(function(e){a.agreed=!0,a.AgressUsers.push(o.myselfInfo.Id)}).catch(function(e){t.customload("操作失败")})},s.followHim=function(a,e){e.stopPropagation(),o.myselfInfo?n.post(i.Zone.follow.url+"?uid="+a.UserId).then(function(e){a.IsFollow=!0}).catch(function(e){t.customload("操作失败")}):l.go("login")},e.fromTemplateUrl("noctr_video_comments_modalview",{scope:s,animation:"slide-in-up"}).then(function(e){s.commentsModal=e}),s.showCommentsModal=function(e){s.commentsModal.show()},s.closeCommentsModal=function(){s.commentsModal.hide()},s.replyData={data:""},s.replyComment=function(){s.replyData.data&&n.post(i.Zone.save.url,{type:70,ParentId:s.pageData.Id,Content:s.replyData.data}).then(function(e){s.pageData.Children.push({Content:s.replyData.data,UserName:o.myselfInfo?o.myselfInfo.NickName:"房田用户",UserImage:o.myselfInfo?o.myselfInfo.ShowImage:"http://imgs.wujiuyun.com//Images//logo.png"}),s.replyData.data=""}).catch(function(){s.replyData.data="",t.customload("评论失败")})},s.keyboardHeight=null,window.addEventListener("native.keyboardshow",function(e){d(function(){s.keyboardHeight&&s.keyboardHeight==e.keyboardHeight||(s.keyboardHeight=e.keyboardHeight),s.keyboardShow=!0})}),window.addEventListener("native.keyboardhide",function(e){d(function(){s.keyboardShow=!1})}),d(function(){m.fullScreenStatus=!0}),s.$on("$ionicView.leave",function(){s.$broadcast("pauseVideo",!0),s.$broadcast("viewLeave",!0)}),m.hideBar=!1,m.fullScreenStatus=!1,s.$on("videoBarHide",function(e,a){a&&(m.hideBar=!0,s.$apply())}),s.$on("videoBarShow",function(e,a){a&&(m.hideBar=!1,s.$apply())}),s.$on("videoIsLoading",function(e,a){s.videoIsLoading=a}),s.$on("changeFullscreenStatus",function(e,a){}),s.closeFullscreen=function(){m.fullScreenStatus=!1,s.$broadcast("closeFullscreenStatus",!1)}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("vcrVideo",{url:"/percenter/vcrVideo/params/:id/:video/:image",cache:!1,templateUrl:"views/tabs/perCenter/myBusiness/vcrVideo/vcrVideo.html",controller:"vcrVideoCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("editMyHomePageCtl",["NimUtils","appUtils","enterViewLoad","$ionicSlideBoxDelegate","$rootScope","$ionicHistory","$ionicPopover","$ionicActionSheet","$ionicPopup","$http","$Factory","$scope","$state","$stateParams","$timeout","WechatService","$ionicLoading",function(o,n,t,e,a,i,c,f,s,h,u,r,m,y,l,S,w){r.back=function(){n.back()},r.myInfoChange=function(){r.myInfo.IsShowPhone||s.confirm({title:"隐藏后，联系人详情将不展示该信息？",cancelText:"取消",okText:"确认"}).then(function(o){o||(r.myInfo.IsShowPhone=!0)})},r.blockChange=function(n){r.myInfo.ShowConfig[n]||s.confirm({title:"隐藏后，联系人详情将不展示该信息？",cancelText:"取消",okText:"确认"}).then(function(o){o||(r.myInfo.ShowConfig[n]=!0)})},r.$on("$ionicView.enter",function(){var n={showMySex:!0,showMyJob:!0,showMyChoosePrefer:!0,showMyHouse:!0,showMyNeed:!0,showMyEvaluation:!0,showMyRecruitment:!0,showMyShop:!0,showMyTask:!0};h.get(u.Account.getuserinfo.url).then(function(o){o.data.ShowConfig=JSON.parse(o.data.ShowConfig)||n,2==o.data.VStatus?o.data.Name=o.data.Name?o.data.Name+"(已实名)":"(已实名)":1==o.data.VStatus?o.data.Name+="(审核中)":o.data.Name+="-(未实名)",r.myInfo=o.data}).catch(function(o){}),r.save=function(){var o=JSON.parse(JSON.stringify(r.myInfo));o.ShowConfig=JSON.stringify(o.ShowConfig),h.post(u.Account.setuserinfo.url,o).then(function(){t.customload("保存成功"),l(function(){r.back()},1500)}).catch(function(){});var n="male";n="男"==r.myInfo.Sex?"male":"女"==r.myInfo.Sex?"female":"unknown",nim.updateMyInfo({tel:r.myInfo.UserName,gender:n})}})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("editMyHomePage",{url:"/percenter/myhomepage/editmyhomePage",templateUrl:"views/tabs/perCenter/myHomePage/editMyHomePage/editMyHomePage.html",controller:"editMyHomePageCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("clickShareCtl",["appUtils","enterViewLoad","WechatService","$location","wechatLinkBase","$ionicModal","$rootScope","$ionicPopover","$ionicHistory","$timeout","$scope","$state","$stateParams","$http","$Factory","$ionicLoading",function(t,o,i,e,n,a,r,s,c,m,h,l,u,d,g,f){h.back=function(){t.back()},h.qcode=g.Account.qcode.url+"?id="+u.id,h.downloadImage=function(e){if(/iphone/i.test(navigator.userAgent)||/ipad/i.test(navigator.userAgent));else{var a=cordova.plugins.permissions;a.hasPermission(a.READ_EXTERNAL_STORAGE,function(e){e.hasPermission||a.requestPermission(a.READ_EXTERNAL_STORAGE,function(e){e.hasPermission},function(){})},null)}encodeURI(e);!function(e,a,o){var t,i,n,r=new Image;r.onload=function(){(t=document.createElement("canvas")).width=r.width,t.height=r.height,t.getContext("2d").drawImage(r,0,0);try{i=t.toDataURL("image/jpeg",1),n=i.replace(/data:image\/jpeg;base64,/,""),cordova.exec(a,o,"Canvas2ImagePlugin","saveImageDataToLibrary",[n])}catch(e){o(e.message)}};try{r.src=e}catch(e){}}(e,function(e){o.customload("保存图片成功")},function(e){o.customload("未设置存储权限，保存失败")}),h.closePopoverView()},a.fromTemplateUrl("click_share_share_modal",{scope:h,animation:"slide-in-up"}).then(function(e){h.shareModal=e}),h.showBottomShareModal=function(e,a){h.shareModal.show(),h.showShare=a},h.closeBottomShareModal=function(){h.shareModal.hide()},d.get(g.Account.getuserinfo.url).then(function(e){h.myinfo=e.data,h.ParPhone=window.btoa(e.data.UserName)}).catch(function(e){(e.status=401)&&o.customload("登录超时")}),h.share=function(a){if(h.shareImgUrl=h.myinfo.ShowImage?h.myinfo.ShowImage:"http://imgs.wujiuyun.com/images/logo.png",0==a||1==a)n.changeBase(h.shareImgUrl,function(e){h.params={scene:a,message:{title:h.myinfo.Name||"房田用户",thumb:e,description:h.myinfo.Name+"邀您上房田",media:{type:Wechat.Type.LINK,webpageUrl:t.shareHost+"/#/shareregister/"+h.ParPhone}}},i.share(h.params)});else if(2==a){(e={}).url=t.shareHost+"/#/shareregister/"+h.ParPhone,e.title=h.myinfo.Name||"房田用户",e.description=h.myinfo.Name+"邀您上房田",e.imageUrl=h.shareImgUrl,e.appName="房田网",t.qqShareQQAndroid(e,function(){},function(e){})}else{var e;(e={}).url=t.shareHost+"/#/shareregister/"+h.ParPhone,e.title=h.myinfo.Name||"房田用户",e.description=h.myinfo.Name+"邀您上房田";var o=[h.shareImgUrl];e.imageUrl=o,YCQQ.shareToQzone(function(){},function(e){},e)}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("tabs.clickShare",{url:"/percenter/myrecommend/clickshare/:id",cache:!1,views:{mine:{templateUrl:"views/tabs/perCenter/myRecommend/clickShare/clickShare.html",controller:"clickShareCtl"}},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("commissionIncomeCtl",["appUtils","enterViewLoad","WechatService","$location","wechatLinkBase","$ionicModal","$rootScope","$ionicPopover","$ionicHistory","$timeout","$scope","$state","$stateParams","$http","$Factory","$ionicLoading",function(t,i,o,c,n,e,a,s,u,l,r,$,d,p,m,L){r.back=function(){t.back()},r.$on("$ionicView.enter",function(){p.post(m.Account.gethier.url).then(function(t){t.data.total=(t.data.total/100).toFixed(2),r.myInvitation=t.data}).catch(function(){i.customload("获取失败")}),r.subListActive=null,r.showSubList=function(t){r.subListActive==t?r.subListActive=null:r.subListActive=t}})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("commissionIncome",{url:"/percenter/myrecommend/commissionincome",templateUrl:"views/tabs/perCenter/myRecommend/commissionIncome/commissionIncome.html",controller:"commissionIncomeCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("numberOfInviteCtl",["appUtils","enterViewLoad","WechatService","$location","wechatLinkBase","$ionicModal","$rootScope","$ionicScrollDelegate","$timeout","$scope","$state","$stateParams","$http","$Factory","$ionicLoading",function(t,n,a,i,e,o,c,u,l,r,s,d,h,$,f){r.back=function(){t.back()},r.$on("$ionicView.enter",function(){h.post($.Account.gethier.url).then(function(t){t.data.total=(t.data.total/100).toFixed(2);for(var n=t.data.childCount=0;n<t.data.children.length;n++)t.data.childCount+=t.data.children[n].Children.length;r.myInvitation=t.data}).catch(function(){n.customload("获取失败")}),r.subListActive=null,r.showSubList=function(t){r.subListActive==t?r.subListActive=null:r.subListActive=t,u.resize()}}),r.toLinkMan=function(t){h.post($.Neteast.user.url+"?id="+t).then(function(t){"SUCCESS"==t.data.return_code?s.go("linkManDetail",{account:t.data.return_msg.accid}):f.show({template:t.data.return_msg,duration:1500})}).catch(function(){n.customload("用户未开通微聊")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("numberOfInvite",{url:"/percenter/myrecommend/numberofinvite",templateUrl:"views/tabs/perCenter/myRecommend/numberOfInvite/numberOfInvite.html",controller:"numberOfInviteCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("payVipCtl",["enterViewLoad","appUtils","$ionicPopup","$location","$window","$localStorage","$ionicModal","$ionicLoading","$ionicHistory","$interval","$timeout","$scope","$rootScope","$state","$stateParams","$http","$Factory",function(t,a,o,e,n,r,c,u,i,d,l,s,p,y,m,f,h){s.back=function(){a.back()},s.productId=m.productid,s.vipName=m.vipname,s.$on("$ionicView.enter",function(){"tabs.topUp"==p.fromStateName&&s.showModal()}),s.$on("$ionicView.beforeLeave",function(){s.closeModal()}),s.shoulePay=1*(m.price/100).toFixed(2),s.initBalance=function(a){f.post(h.Money.money.url).then(function(o){a&&t.customload("刷新成功"),s.myBalance=1*(o.data.Total/100).toFixed(2)}).catch(function(o){}),f.post(h.ReChange.surplus.url).then(function(o){s.surplusMoney=o.data,s.shoulePay=1*((m.price-o.data)/100).toFixed(2)})},s.initBalance(),s.yearValue=1,s.inputYear=function(){this.yearValue=this.yearValue.replace(/\D/g,""),s.yearValue=this.yearValue},s.choosedBankCard=r.choosedPayBankCard,p.$on("chooseBankCardSuccess",function(o,a){s.choosedBankCard=a}),s.$on("$ionicView.beforeLeave",function(){s.closeModal(),s.closeAuthCodeModal()}),c.fromTemplateUrl("vip_pay_modal",{scope:s,animation:"slide-in-up"}).then(function(o){s.modal=o}),s.showModal=function(){s.modal.show()},s.closeModal=function(){s.modal.hide()},c.fromTemplateUrl("pay_auth_code_modal",{scope:s,animation:"slide-in-up"}).then(function(o){s.codeModal=o}),s.showAuthCodeModal=function(){s.codeModal.show()},s.closeAuthCodeModal=function(){s.codeModal.hide(),s.endCountDownNum()},s.showCountDown=!1,s.countDownNum=60,s.startCountDown=function(){s.showCountDown=!0,s.clock=d(function(){s.countDownNum--,s.countDownNum<1&&s.endCountDownNum()},1e3)},s.endCountDownNum=function(){s.showCountDown=!1,s.clock&&(s.countDownNum=60,d.cancel(s.clock))},s.agreeProtocol=!0,s.siwtchAgreeStatus=function(){s.agreeProtocol=!s.agreeProtocol},s.payType={type:0},s.choosePayType=function(){s.agreeProtocol?s.showModal():t.customload("您还未同意房田会员协议",2e3)},s.Pay=function(){s.closeModal(),1==s.payType.type?f.post(h.WxPay.unifiedorder.url+"?yearsOrFee="+s.yearValue+"&OrderPayType=2",s.productId).then(function(o){s.resData=JSON.parse(o.data),s.wechatPayParams={partnerid:s.resData.partnerid,prepayid:s.resData.prepayid,noncestr:s.resData.noncestr,timestamp:s.resData.timestamp,sign:s.resData.sign},a.WxPay(s.wechatPayParams,function(o){t.customload("支付成功"),l(function(){s.back()},1500),f.post(h.WxPay.query.url,s.resData.trade_no).then(function(o){"SUCCESS"===o.data.return_code||o.data.return_code})},function(o){if("用户点击取消并返回"==o)return t.customload("您取消了订单"),void f.post(h.WxPay.close.url,s.resData.trade_no).then(function(o){o.data.return_code});t.customload(o)})}).catch(function(o){t.customload("生成订单失败")}):2==s.payType.type?f.post(h.AliPay.unifiedorder.url+"?yearsOrFee="+s.yearValue+"&OrderPayType=2",s.productId).then(function(o){s.aliPayInfo=o.data.Request,s.aliTrade=o.data.TradeNO,a.AliPay(s.aliPayInfo,function(o){t.customload("支付成功"),l(function(){s.back()},1500),f.post(h.AliPay.query.url,s.aliTrade).then(function(o){"SUCCESS"===o.data.return_code||o.data.return_code})},function(o){4e3==o.resultStatus?t.customload("支付失败"):6001==o.resultStatus?t.customload("您取消了订单"):6002==o.resultStatus&&t.customload("网络连接失败")})}).catch(function(o){t.customload("生成订单失败")}):3==s.payType.type?f.post(h.Allin.applyconsume.url,{ProductId:s.productId,Years:s.yearValue,Fee:100*s.shoulePay,CardNo:s.choosedBankCard.bankCardNo,ReturnUrl:e.url()}).then(function(o){"SUCCESS"==o.data.return_code&&(s.showAuthCodeModal(),s.allinData=JSON.parse(o.data.return_msg),s.confirmCardData.BizOrderNo=s.allinData.bizOrderNo,s.confirmCardData.TradeNo=s.allinData.tradeNo)}).catch(function(o){t.customload("生成银联订单失败")}):0==s.payType.type?f.post(h.Money.consumeuser.url,{Fee:100*s.shoulePay,Years:s.yearValue,productId:s.productId}).then(function(o){t.customload("支付成功"),l(function(){s.back()},1500)}).catch(function(o){var a=o.data.Message?o.data.Message:"付款失败";t.customload(a)}):4==s.payType.type&&(r.vipOrderToBePaid={Fee:100*s.shoulePay,Years:s.yearValue,productId:s.productId,vipName:s.vipName},y.go("myAccount"))},s.confirmCardData={BizOrderNo:"",TradeNo:"",Code:null},s.confirmCardPay=function(){s.closeAuthCodeModal();var o=JSON.parse(JSON.stringify(s.confirmCardData));s.confirmCardData.BizOrderNo="",s.confirmCardData.TradeNo="",s.confirmCardData.Code=null,f.post(h.Allin.mpay.url,o).then(function(o){"SUCCESS"==o.data.return_code?(t.customload("支付成功"),l(function(){s.back()},1500),l(function(){s.back()},1500)):t.customload(o.data.return_msg||"支付失败")}).catch(function(){t.customload("支付失败")})},s.updateNimVip=function(){var o={vip:""};"个人会员"==s.vipName?o.vip="白银":"团队首领"==s.vipName?o.vip="黄金":"商户老板"==s.vipName?o.vip="铂金":"企业主"==s.vipName&&(o.vip="钻石"),nim.updateMyInfo({custom:JSON.stringify(o),done:function(o,a){}})}}]).filter("cutStr",function(){return function(o){return o?o.slice(0,-3):""}});
"use strict";angular.module("App").config(["$stateProvider",function(p){p.state("tabs.payVip",{url:"/percenter/openvip/payvip/params/:productid/:price/:vipname",cache:!1,views:{mine:{templateUrl:"views/tabs/perCenter/openVip/payVip/payVip.html",controller:"payVipCtl"}},data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("orderVisitListCtl",["appUtils","$ionicLoading","$ionicHistory","$Factory","$http","$scope","$state","$rootScope","$ionicPopover","$timeout",function(t,r,o,a,i,n,e,s,d,u){n.back=function(){t.back()},i.post(a.NewHouseTrade.orderlist.url+"?recordStatus=0").then(function(t){n.wantlookList=t.data}),i.post(a.NewHouseTrade.orderlist.url+"?recordStatus=4").then(function(t){n.willtradeList=t.data}),i.post(a.NewHouseTrade.orderlist.url+"?recordStatus=6").then(function(t){n.tradedList=t.data}),n.showType=0,n.switchSlide=function(t){var o=33.33*(n.showType=t)+6.5+"%";$("#order_visit_list .flex-wrapper .under-line").animate({left:o},150)},n.cancelLook=function(t,o){t.stopPropagation();var e={method:"POST",url:a.NewHouseTrade.cancelorder.url,headers:{"Content-Type":"application/json"},data:o.NewHouseId};i(e).then(function(t){r.show({template:"操作成功",duration:1500}),i.post(a.NewHouseTrade.orderlist.url+"?recordStatus=0").then(function(t){n.wantlookList=t.data})})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("orderVisitList",{url:"/percenter/usercenter/uservisitlist",cache:!1,templateUrl:"views/tabs/perCenter/userCenter/orderVisitList/orderVisitList.html",controller:"orderVisitListCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("groupAvatarCutCtl",["NimUtils","appUtils","enterViewLoad","$rootScope","$scope","$stateParams","$ionicHistory","$http","$Factory","$ionicLoading","$timeout",function(t,a,n,o,i,c,e,u,r,l,m){i.back=function(){a.back()},i.imgurl=c.imgurl,i.targetId=c.id,i.init=function(){new AlloyCrop({image_src:i.imgurl,circle:!0,width:200,height:200,ok:function(t,a){i.$apply(function(){i.view=t,i.done()})},cancel:function(){i.back()},ok_text:"确定",cancel_text:"取消"})},i.init(),i.done=function(){i.save=function(){u.post(r.Account.upload.url,{path:"18/teamAvatar",file:i.view}).then(function(t){i.ShowImage=t.data.view,i.changeTeamAvatar()},function(t){n.customload("保存图片失败"),m(function(){i.back()},1500)})},i.changeTeamAvatar=function(){nim.updateTeam({teamId:i.targetId,avatar:i.ShowImage,done:function(t,a){t?n.customload("修改失败"):n.customload("修改成功"),m(function(){i.back()},1500)}})}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("groupAvatarCut",{url:"/percenter/group/groupavatar/groupavatarcut/params/:id/:imgurl",cache:!1,templateUrl:"views/tabs/chatList/groupDialogBox/groupAvatar/groupAvatarCut/groupAvatarCut.html",controller:"groupAvatarCutCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("addNewAddressCtl",["$addNewData","appUtils","$localStorage","$rootScope","$scope","$stateParams","$ionicLoading","$timeout","$ionicHistory",function(d,e,a,t,n,o,i,s,r){n.back=function(){e.back()},n.$on("$ionicView.beforeEnter",function(e,a){s(function(){n.address=d.data.Address||"",n.newaddress={location:n.address,longitude:d.data.Longitude,latitude:d.data.Latitude}})}),n.getAddr=function(){var a=new BMap.Map("add_new_address_map");a.centerAndZoom(new BMap.Point(118.181163,24.488326),11),(new BMap.Geocoder).getPoint(n.newaddress.location,function(e){e?(n.newaddress.longitude=e.lng,n.newaddress.latitude=e.lat,a.centerAndZoom(e,16),a.addOverlay(new BMap.Marker(e))):(n.newaddress.longitude="",n.newaddress.latitude="",i.show({template:"请输入详细地址",duration:1500}))},"厦门市")},n.save=function(){d.data.Address=n.newaddress.location,d.data.Longitude=n.newaddress.longitude,d.data.Latitude=n.newaddress.latitude,s(function(){t.$ionicGoBack()},50)}}]);
"use strict";angular.module("App").config(["$stateProvider",function(d){d.state("addNewAddress",{url:"/home/fbmanage/addnew/addnewaddress",cache:!1,templateUrl:"views/tabs/home/fbManage/addNew/addNewAddress/addNewAddress.html",controller:"addNewAddressCtl",resolve:{load:["$ocLazyLoad",function(d){return d.load(["views/tabs/home/fbManage/addNew/addNewAddress/addNewAddress.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addNewCommunityCtl",["appUtils","$addNewData","$localStorage","$ionicHistory","$ionicLoading","$http","$Factory","$rootScope","$scope","$stateParams","$ionicPopover","$timeout",function(e,t,a,o,i,c,n,r,u,m,s,d){u.name=m.name,u.cancel=function(){e.back()},u.searchName={key:""},u.choosexiaoqu=function(a,o){t.data.CommunityName=u.xiaoquarr[o].Name,t.data.CommunityId=u.xiaoquarr[o].Id,e.back()},u.search=function(a){c.get(n.NewHouseSource.communities.url,{params:{query:u.searchName.key,city:e.city||1}}).then(function(a){u.xiaoquarr=a.data},function(){i.show({template:"获取二手小区失败",duration:1e3})})},u.clear=function(){u.searchName.key="",u.xiaoquarr=[]}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("addNewCommunity",{url:"/home/fbmanage/addnew/addnewcommunity",templateUrl:"views/tabs/home/fbManage/addNew/addNewCommunity/addNewCommunity.html",controller:"addNewCommunityCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/fbManage/addNew/addNewCommunity/addNewCommunity.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addNewTDCtl",["$addNewData","appUtils","$localStorage","$rootScope","$scope","$stateParams","$ionicPopover","$timeout","$ionicHistory",function(e,t,n,a,o,c,i,d,l){o.back=function(){t.back()},o.name=c.name,o.$on("$ionicView.beforeEnter",function(t,n){d(function(){"楼盘名称"==c.name?(o.title=e.data.NewHouseName||"",o.newtd={content:o.title},o.save=function(){e.data.NewHouseName=o.newtd.content,o.back()}):(o.landagent=e.data.LandAgent||"",o.newtd={content:o.landagent},o.save=function(){e.data.LandAgent=o.newtd.content,o.back()})})})}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("addNewTD",{url:"/home/fbmanage/addnew/addnewtd/params/:name",cache:!1,templateUrl:"views/tabs/home/fbManage/addNew/addNewTD/addNewTD.html",controller:"addNewTDCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/fbManage/addNew/addNewTD/addNewTD.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addOtherCommunityCtl",["appUtils","$addOtherData","$localStorage","$ionicHistory","$ionicLoading","$http","$Factory","$rootScope","$scope","$stateParams","$ionicPopover","$timeout",function(e,o,a,t,r,i,c,n,u,s,d,m){u.name=s.name,u.cancel=function(){e.back()},u.searchName={key:""},u.choosexiaoqu=function(a,t){o.data.CommunityName=u.xiaoquarr[t].Name,o.data.CommunityId=u.xiaoquarr[t].Id,o.data.District=u.xiaoquarr[t].District,o.data.Street=u.xiaoquarr[t].Street,o.data.Address=u.xiaoquarr[t].Address,e.back()},u.search=function(a){i.get(c.NewHouseSource.communities.url,{params:{query:u.searchName.key,city:e.city.id}}).then(function(a){u.xiaoquarr=a.data},function(){r.show({template:"获取小区失败",duration:1e3})})},u.clear=function(){u.searchName.key="",u.xiaoquarr=[]}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("addOtherCommunity",{url:"/home/fbmanage/addother/addothercommunity",cache:!1,templateUrl:"views/tabs/home/fbManage/addOther/addOtherCommunity/addOtherCommunity.html",controller:"addOtherCommunityCtl",resolve:{load:["$ocLazyLoad",function(t){return t.load(["views/tabs/home/fbManage/addOther/addOtherCommunity/addOtherCommunity.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addOtherTDCtl",["$addOtherData","enterViewLoad","appUtils","$ionicLoading","$Factory","$http","$localStorage","$rootScope","$scope","$state","$stateParams","$timeout",function(o,t,e,a,n,c,l,p,s,u,i,r){s.back=function(){e.back()},s.name=i.name,s.$on("$ionicView.beforeEnter",function(e,t){r(function(){"标题"==s.name?(s.placeholder="请输入房源标题信息",s.ershoutd={content:o.data.Title||""},s.templeteType=1,s.save=function(){o.data.Title=s.ershoutd.content,s.back()}):"房源描述"==s.name?(2==o.data.HouseType?s.placeholder="请输入商圈描述信息":3==o.data.HouseType?s.placeholder="请输入厂房描述信息":4==o.data.HouseType?s.placeholder="请输入仓库描述信息":5==o.data.HouseType?s.placeholder="请输入车位描述信息":s.placeholder="请输入房源描述信息",s.ershoutd={content:o.data.Discription||""},s.templeteType=1,s.save=function(){o.data.Discription=s.ershoutd.content,s.back()}):s.save=function(){s.back()},s.getData=function(){c.get(n.TextTemplate.query.url,{params:{type:s.templeteType,isself:!0}}).then(function(e){s.selfArr=e.data}),c.get(n.TextTemplate.query.url,{params:{type:s.templeteType,isself:!1}}).then(function(e){s.pubArr=e.data})},s.getData()})}),s.showTemplete=!0,s.closeTemplete=function(){s.showTemplete=!1},s.chooseTemp=function(e){s.ershoutd.content=e,s.closeTemplete()},s.saveTemp=function(){s.ershoutd.content.length<1?t.customload("模板不能为空"):c.post(n.TextTemplate.save.url,{TextType:s.templeteType,Content:s.ershoutd.content}).then(function(e){s.getData(),t.customload("保存模板成功")}).catch(function(e){401==e.status&&(t.customload("尚未登录"),r(function(){u.go("login")},1500))})},s.delTemp=function(e){c.post(n.TextTemplate.delete.url+"?id="+e).then(function(e){s.getData()})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("addOtherTD",{url:"/home/fbmanage/addother/addothertd/:name",cache:!1,templateUrl:"views/tabs/home/fbManage/addOther/addOtherTD/addOtherTD.html",controller:"addOtherTDCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/fbManage/addOther/addOtherTD/addOtherTD.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addRentCommunityCtl",["appUtils","$addRentData","$localStorage","$ionicHistory","$ionicLoading","$http","$Factory","$rootScope","$scope","$stateParams","$ionicPopover","$timeout",function(t,e,a,o,i,n,c,r,u,m,s,d){u.name=m.name,u.cancel=function(){t.back()},u.searchName={key:""},u.choosexiaoqu=function(a,o){e.data.CommunityName=u.xiaoquarr[o].Name,e.data.CommunityId=u.xiaoquarr[o].Id,t.back()},u.search=function(a){n.get(c.NewHouseSource.communities.url,{params:{query:u.searchName.key,city:t.city.id}}).then(function(a){u.xiaoquarr=a.data},function(){i.show({template:"获取小区失败",duration:1e3})})},u.clear=function(){u.searchName.key="",u.xiaoquarr=[]}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("addRentCommunity",{url:"/home/fbmanage/addrent/addrentcommunity",cache:!1,templateUrl:"views/tabs/home/fbManage/addRent/addRentCommunity/addRentCommunity.html",controller:"addRentCommunityCtl",resolve:{load:["$ocLazyLoad",function(t){return t.load(["views/tabs/home/fbManage/addRent/addRentCommunity/addRentCommunity.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addRentTDCtl",["$addRentData","enterViewLoad","appUtils","$ionicLoading","$Factory","$http","$cordovaKeyboard","$localStorage","$rootScope","$scope","$state","$stateParams","$ionicPopover","$timeout","$ionicHistory",function(n,e,t,o,a,c,i,l,p,r,s,u,d,m,T){r.back=function(){t.back()},r.name=u.name,r.$on("$ionicView.beforeEnter",function(t,e){m(function(){"标题"==r.name?(r.placeholder="请输入房源标题信息",r.renttd={content:n.data.Title||""},r.templeteType=1,r.save=function(){n.data.Title=r.renttd.content,r.back()}):(r.placeholder="请输入房源描述信息",r.renttd={content:n.data.Discription||""},r.templeteType=1,r.save=function(){n.data.Discription=r.renttd.content,r.back()}),r.getData=function(){c.get(a.TextTemplate.query.url,{params:{type:r.templeteType,isself:!0}}).then(function(t){r.selfArr=t.data}),c.get(a.TextTemplate.query.url,{params:{type:r.templeteType,isself:!1}}).then(function(t){r.pubArr=t.data})},r.getData()})}),r.showTemplete=!0,r.closeTemplete=function(){r.showTemplete=!1},r.chooseTemp=function(t){r.renttd.content=t,r.closeTemplete()},r.saveTemp=function(){r.renttd.content.length<1?e.customload("模板不能为空"):c.post(a.TextTemplate.save.url,{TextType:r.templeteType,Content:r.renttd.content}).then(function(t){r.getData(),e.customload("保存模板成功")}).catch(function(t){401==t.status&&(e.customload("尚未登录"),m(function(){s.go("login")},1500))})},r.delTemp=function(t){c.post(a.TextTemplate.delete.url+"?id="+t).then(function(t){r.getData()})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("addRentTD",{url:"/home/fbmanage/addrent/addrenttd/:name",cache:!1,templateUrl:"views/tabs/home/fbManage/addRent/addRentTD/addRentTD.html",controller:"addRentTDCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/fbManage/addRent/addRentTD/addRentTD.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addSellAddressCtl",["$addSellData","enterViewLoad","appUtils","$ionicLoading","$Factory","$http","$cordovaKeyboard","$localStorage","$rootScope","$scope","$state","$stateParams","$ionicPopover","$timeout","$ionicHistory",function(o,t,a,e,c,d,n,r,s,i,l,$,u,p,b){i.back=function(){a.back()},i.placeholder="请输入房地坐落，请根据房产证上填写！！！",p(function(){i.ershoutd={content:o.data.Address||""}}),i.save=function(){o.data.Address=i.ershoutd.content,i.back()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(d){d.state("addSellAddress",{url:"/home/fbmanage/addsell/addselladdress",cache:!1,templateUrl:"views/tabs/home/fbManage/addSell/addSellAddress/addSellAddress.html",controller:"addSellAddressCtl",resolve:{load:["$ocLazyLoad",function(d){return d.load(["views/tabs/home/fbManage/addSell/addSellAddress/addSellAddress.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addSellCommunityCtl",["appUtils","$addSellData","$localStorage","$ionicHistory","$ionicLoading","$http","$Factory","$rootScope","$scope","$stateParams","$ionicPopover","$timeout",function(e,t,a,o,i,c,n,r,u,m,l,s){u.name=m.name,u.cancel=function(){e.back()},u.searchName={key:""},u.choosexiaoqu=function(a,o){t.data.CommunityName=u.xiaoquarr[o].Name,t.data.CommunityId=u.xiaoquarr[o].Id,e.back()},u.search=function(a){c.get(n.NewHouseSource.communities.url,{params:{query:u.searchName.key,city:e.city.id}}).then(function(a){u.xiaoquarr=a.data},function(){i.show({template:"获取二手小区失败",duration:1e3})})},u.clear=function(){u.searchName.key="",u.xiaoquarr=[]}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("addSellCommunity",{url:"/home/fbmanage/addsell/addsellcommunity",cache:!1,templateUrl:"views/tabs/home/fbManage/addSell/addSellCommunity/addSellCommunity.html",controller:"addSellCommunityCtl",resolve:{load:["$ocLazyLoad",function(l){return l.load(["views/tabs/home/fbManage/addSell/addSellCommunity/addSellCommunity.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addSellRoomCtl",["$addSellData","appUtils","$localStorage","$rootScope","$scope","$stateParams","$ionicPopover","$timeout","$ionicHistory",function(t,a,e,l,o,d,u,S,n){o.back=function(){a.back()},o.name=d.name,o.$on("$ionicView.beforeEnter",function(a,e){S(function(){o.addSellSubData=t.data,o.addSellShowData=t.data,o.dataOne="",o.dataTwo="",$.scrEvent4({data:[0,1,2,3,4,5,6,7,8,9],data2:[0,1,2,3,4,5,6,7,8,9],data3:[0,1,2,3,4,5,6,7,8,9],data4:["栋","弄","座","号","号楼","胡同"],evEle:".choose-unit",title:"选择楼号",defValue:1,defValue2:1,defValue3:1,defValue4:"栋",eleName:"",eleName2:"",eleName3:"",eleName4:"",afterAction:function(a,e,t,l){switch($(".choose-unit").val(a+e+t+l),o.dataOne=a+e+t+l,o.addSellSubData.ExProp.HouseNum1=a+e+t,l){case"栋":o.addSellSubData.ExProp.HouseUnit1=1;break;case"弄":o.addSellSubData.ExProp.HouseUnit1=2;break;case"座":o.addSellSubData.ExProp.HouseUnit1=3;break;case"号":o.addSellSubData.ExProp.HouseUnit1=4;break;case"号楼":o.addSellSubData.ExProp.HouseUnit1=5;break;case"胡同":o.addSellSubData.ExProp.HouseUnit1=6;break;default:o.addSellSubData.ExProp.HouseUnit1=null}}}),$.scrEvent4({data:[0,1,2,3,4,5,6,7,8,9],data2:[0,1,2,3,4,5,6,7,8,9],data3:[0,1,2,3,4,5,6,7,8,9],data4:["栋","幢","号","号楼","单元"],evEle:".choose-room",title:"选择单元",defValue:1,defValue2:1,defValue3:1,defValue4:"号楼",eleName:"",eleName2:"",eleName3:"",eleName4:"",afterAction:function(a,e,t,l){switch($(".choose-room").val(a+e+t+l),o.dataTwo=a+e+t+l,o.addSellSubData.ExProp.HouseNum2=a+e+t,l){case"栋":o.addSellSubData.ExProp.HouseUnit2=1;break;case"栋":o.addSellSubData.ExProp.HouseUnit2=2;break;case"栋":o.addSellSubData.ExProp.HouseUnit2=3;break;case"栋":o.addSellSubData.ExProp.HouseUnit2=4;break;case"栋":o.addSellSubData.ExProp.HouseUnit2=5;break;default:o.addSellSubData.ExProp.HouseUnit2=null}}}),o.save=function(){o.addSellSubData.ExProp.HouseNum3&&(o.dataThree=o.addSellSubData.ExProp.HouseNum3+"室"),o.addSellShowData.huShiHao=o.dataOne+o.dataTwo+o.dataThree,t.data=o.addSellSubData,t.showData=o.addSellShowData,o.back()}})})}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("addSellRoom",{url:"/home/fbmanage/addsell/addsellroom",cache:!1,templateUrl:"views/tabs/home/fbManage/addSell/addSellRoom/addSellRoom.html",controller:"addSellRoomCtl",resolve:{load:["$ocLazyLoad",function(l){return l.load(["views/tabs/home/fbManage/addSell/addSellRoom/addSellRoom.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addSellTDCtl",["$addSellData","enterViewLoad","appUtils","$ionicLoading","$Factory","$http","$cordovaKeyboard","$localStorage","$rootScope","$scope","$state","$stateParams","$ionicPopover","$timeout","$ionicHistory",function(o,t,e,n,a,c,i,l,r,p,s,u,d,m,h){p.back=function(){e.back()},p.name=u.name,p.$on("$ionicView.beforeEnter",function(e,t){m(function(){"标题"==p.name?(p.placeholder="简单明了的说出房源的特色。",p.ershoutd={content:o.data.Title||""},p.templeteType=1,p.save=function(){o.data.Title=p.ershoutd.content,r.$ionicGoBack()}):"房源详情"==p.name?(p.placeholder="请输入房产描述。",p.ershoutd={content:o.data.Discription||""},p.templeteType=1,p.save=function(){o.data.Discription=p.ershoutd.content,r.$ionicGoBack()}):"业主心态"==p.name?(p.placeholder="请输入业主心态，可从房东卖房原因、是否急售等方面进行描述。",p.ershoutd={content:o.data.OwnerPsy||""},p.templeteType=2,p.save=function(){o.data.OwnerPsy=p.ershoutd.content,r.$ionicGoBack()}):"小区配套"==p.name?(p.placeholder="请输入小区配套",p.ershoutd={content:o.data.Commuport||""},p.templeteType=3,p.save=function(){o.data.Commuport=p.ershoutd.content,r.$ionicGoBack()}):"服务介绍"==p.name&&(p.placeholder="请输入服务介绍，可从行业年限、专业经验、服务态度、可提供的服务种类（比如代办贷款）等方面进行描述。",p.ershoutd={content:o.data.ServiceIntro||""},p.templeteType=4,p.save=function(){o.data.ServiceIntro=p.ershoutd.content,r.$ionicGoBack()}),p.getData=function(){c.get(a.TextTemplate.query.url,{params:{type:p.templeteType,isself:!0}}).then(function(e){p.selfArr=e.data}),c.get(a.TextTemplate.query.url,{params:{type:p.templeteType,isself:!1}}).then(function(e){p.pubArr=e.data})},p.getData()})}),p.showTemplete=!0,p.closeTemplete=function(){p.showTemplete=!1},p.saveTemp=function(){p.ershoutd.content.length<1?t.customload("模板不能为空"):c.post(a.TextTemplate.save.url,{TextType:p.templeteType,Content:p.ershoutd.content}).then(function(e){p.getData(),t.customload("保存模板成功")}).catch(function(e){401==e.status&&(t.customload("尚未登录"),m(function(){s.go("login")},1500))})},p.chooseTemp=function(e){p.ershoutd.content=e,p.closeTemplete()},p.delTemp=function(e){var t={method:"POST",url:a.TextTemplate.delete.url+"?id="+e,headers:{"Content-Type":"application/json"}};c(t).then(function(e){p.getData()})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(l){l.state("addSellTD",{url:"/home/fbmanage/addsell/addselltd/:name",cache:!1,templateUrl:"views/tabs/home/fbManage/addSell/addSellTD/addSellTD.html",controller:"addSellTDCtl",resolve:{load:["$ocLazyLoad",function(l){return l.load(["views/tabs/home/fbManage/addSell/addSellTD/addSellTD.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addShopAddressCtl",["$addShopData","enterViewLoad","appUtils","$ionicLoading","$Factory","$http","$cordovaKeyboard","$localStorage","$rootScope","$scope","$state","$stateParams","$ionicPopover","$timeout","$ionicHistory",function(o,t,a,e,c,d,n,r,s,i,$,p,l,u,h){i.back=function(){a.back()},i.placeholder="请输入房地坐落，请根据房产证上填写！！！",u(function(){i.ershoutd={content:o.data.Address||""},i.save=function(){o.data.Address=i.ershoutd.content,i.back()}})}]);
"use strict";angular.module("App").config(["$stateProvider",function(d){d.state("addShopAddress",{url:"/home/fbmanage/addshop/addshopaddress",cache:!1,templateUrl:"views/tabs/home/fbManage/addShop/addShopAddress/addShopAddress.html",controller:"addShopAddressCtl",resolve:{load:["$ocLazyLoad",function(d){return d.load(["views/tabs/home/fbManage/addShop/addShopAddress/addShopAddress.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addShopCommunityCtl",["appUtils","$addShopData","$localStorage","$ionicHistory","$ionicLoading","$http","$Factory","$rootScope","$scope","$stateParams","$ionicPopover","$timeout",function(o,e,a,t,i,r,c,n,u,m,s,d){u.name=m.name,u.cancel=function(){o.back()},u.searchName={key:""},u.choosexiaoqu=function(a,t){e.data.CommunityName=u.xiaoquarr[t].Name,e.data.CommunityId=u.xiaoquarr[t].Id,e.data.District=u.xiaoquarr[t].District,e.data.Street=u.xiaoquarr[t].Street,o.back()},u.search=function(a){r.get(c.NewHouseSource.communities.url,{params:{query:u.searchName.key,city:o.city.id}}).then(function(a){u.xiaoquarr=a.data},function(){i.show({template:"获取小区失败",duration:1e3})})},u.clear=function(){u.searchName.key="",u.xiaoquarr=[]}}]);
"use strict";angular.module("App").config(["$stateProvider",function(o){o.state("addShopCommunity",{url:"/home/fbmanage/addShop/addShopcommunity",cache:!1,templateUrl:"views/tabs/home/fbManage/addShop/addShopCommunity/addShopCommunity.html",controller:"addShopCommunityCtl",resolve:{load:["$ocLazyLoad",function(o){return o.load(["views/tabs/home/fbManage/addShop/addShopCommunity/addShopCommunity.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("addShopTDCtl",["$addShopData","enterViewLoad","appUtils","$ionicLoading","$Factory","$http","$cordovaKeyboard","$localStorage","$rootScope","$scope","$state","$stateParams","$ionicPopover","$timeout","$ionicHistory",function(o,t,e,n,a,c,i,l,p,s,u,r,d,m,T){s.back=function(){e.back()},s.name=r.name,s.$on("$ionicView.beforeEnter",function(e,t){m(function(){"标题"==s.name?(s.placeholder="简单明了的说出房源的特色",s.ershoutd={content:o.data.Title||""},s.templeteType=1,s.save=function(){o.data.Title=s.ershoutd.content,p.$ionicGoBack()}):"商铺详情"==s.name?(s.placeholder="请输入商铺描述。",s.ershoutd={content:o.data.Discription||""},s.templeteType=1,s.save=function(){o.data.Discription=s.ershoutd.content,p.$ionicGoBack()}):s.save=function(){p.$ionicGoBack()},s.getData=function(){c.get(a.TextTemplate.query.url,{params:{type:s.templeteType,isself:!0}}).then(function(e){s.selfArr=e.data}),c.get(a.TextTemplate.query.url,{params:{type:s.templeteType,isself:!1}}).then(function(e){s.pubArr=e.data})},s.getData()})}),s.showTemplete=!0,s.closeTemplete=function(){s.showTemplete=!1},s.chooseTemp=function(e){s.ershoutd.content=e,s.closeTemplete()},s.saveTemp=function(){if(s.ershoutd.content.length<1)t.customload("模板不能为空");else{a.TextTemplate.save.url,s.templeteType,s.ershoutd.content;c.post(a.TextTemplate.save.url,{TextType:s.templeteType,Content:s.ershoutd.content}).then(function(e){s.getData(),t.customload("保存模板成功")}).catch(function(e){401==e.status&&(t.customload("尚未登录"),m(function(){u.go("login")},1500))})}},s.delTemp=function(e){c.post(a.TextTemplate.delete.url+"?id="+e).then(function(e){s.getData()})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("addShopTD",{url:"/home/fbmanage/addshop/addshoptd/:name",cache:!1,templateUrl:"views/tabs/home/fbManage/addShop/addShopTD/addShopTD.html",controller:"addShopTDCtl",resolve:{load:["$ocLazyLoad",function(a){return a.load(["views/tabs/home/fbManage/addShop/addShopTD/addShopTD.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("thirdGuessPriceCtl",["enterViewLoad","appUtils","$ionicPopup","$localStorage","$http","$Factory","$state","$stateParams","$scope","$timeout",function(l,e,t,o,r,s,a,n,u,i){u.back=function(){e.back()},u.houseId=n.houseid;echarts.init(document.getElementById("third_guess_price_echarts"),"light").setOption({title:{text:""},tooltip:{},legend:{data:["特点"]},radar:{center:["50%","50%"],name:{textStyle:{color:"#000",backgroundColor:"rgba(0,0,0,0)",borderRadius:3,fontSize:12,padding:[3,5]}},indicator:[{name:"",max:400},{name:"",max:400},{name:"",max:400},{name:"",max:400},{name:"",max:400},{name:"",max:400}],splitArea:{areaStyle:{color:["rgb(102,152,255)","rgb(148,183,255)","rgb(178,203,255)"]}},splitLine:{lineStyle:{color:"rgba(255, 255, 255, 0.9)"}},axisLine:{lineStyle:{color:"rgba(255, 255, 255, 0.9)"}},lineStyle:{shadowColor:"rgb(255, 0, 0)",shadowBlur:10}},series:[{name:"预算 vs 开销",type:"radar",data:[{value:[300,100,280,350,200,190],name:""}]}],color:["rgb(255,255,255)"]}),u.$on("$ionicView.enter",function(){u.loadCommList(),u.loadHouseInfo()}),u.myselfInfo=o.myselfInfo,u.loadCommList=function(){var e={method:"POST",url:s.Evalu.list.url+"?houseId="+u.houseId+"&type=1",headers:{"Content-Type":"application/json"}};r(e).then(function(e){u.commentList=e.data}).catch(function(){l.customload("获取估价列表失败")})},u.loadHouseInfo=function(){var e={method:"POST",url:s.NewHouseSource.postdetail.url+"/"+u.houseId,headers:{"Content-Type":"application/json"}};r(e).then(function(e){u.houseInfo=e.data})},u.deleteComment=function(o){t.confirm({title:"确定删除？",cancelText:"取消",okText:"删除"}).then(function(e){if(e){var t={method:"POST",url:s.Evalu.delete.url,headers:{"Content-Type":"application/json"},data:o};r(t).then(function(e){u.loadCommList()}).catch(function(){l.customload("删除失败")})}})},u.actionDo=function(e,t,o,a){var n=e;n.AgreeNum=n.AgreeNum+t,n.DisAgreeNum=n.DisAgreeNum+o,n.Tips=n.Tips+a;var i={method:"POST",url:s.Evalu.reply.url,headers:{"Content-Type":"application/json"},data:n};r(i).then(function(e){l.customload("操作成功"),u.loadEvaluationList()}).catch(function(e){400==e.status&&l.customload("你的估价！")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("thirdGuessPrice",{url:"/guessprice/thirdguessgrice/:houseid",templateUrl:"views/tabs/home/guessPrice/systemPrice/thirdGuessPrice/thirdGuessPrice.html",controller:"thirdGuessPriceCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/guessPrice/systemPrice/thirdGuessPrice/thirdGuessPrice.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("buyNeedBCCtl",["appUtils","$addBuyNeedData","$localStorage","$ionicHistory","$ionicLoading","$http","$Factory","$rootScope","$scope","$stateParams","$ionicPopover","$timeout",function(o,t,a,e,i,c,n,r,u,m,s,d){u.name=m.name,u.cancel=function(){o.back()},u.searchName={key:""},u.choosexiaoqu=function(a,e){t.data.CommunityId=u.xiaoquarr[e].Id,t.data.CommunityName=u.xiaoquarr[e].Name,o.back()},u.search=function(a){c.get(n.NewHouseSource.communities.url,{params:{query:u.searchName.key,city:o.city.id}}).then(function(a){u.xiaoquarr=a.data},function(){i.show({template:"获取二手小区失败",duration:1e3})})},u.clear=function(){u.searchName.key="",u.xiaoquarr=[]}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("buyNeedBC",{url:"/home/needmanage/addneedbuy/buyneedbc",cache:!1,templateUrl:"views/tabs/home/needManage/addBuyNeed/buyNeedBC/buyNeedBC.html",controller:"buyNeedBCCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/needManage/addBuyNeed/buyNeedBC/buyNeedBC.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("rentNeedBCCtl",["appUtils","$addRentNeedData","$localStorage","$ionicHistory","$ionicLoading","$http","$Factory","$rootScope","$scope","$stateParams","$ionicPopover","$timeout",function(o,t,a,e,i,c,n,r,u,m,s,d){u.name=m.name,u.cancel=function(){o.back()},u.searchName={key:""},u.choosexiaoqu=function(a,e){t.data.CommunityId=u.xiaoquarr[e].Id,t.data.CommunityName=u.xiaoquarr[e].Name,o.back()},u.search=function(a){c.get(n.NewHouseSource.communities.url,{params:{query:u.searchName.key,city:o.city.id}}).then(function(a){u.xiaoquarr=a.data},function(){i.show({template:"获取二手小区失败",duration:1e3})})},u.clear=function(){u.searchName.key="",u.xiaoquarr=[]}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("rentNeedBC",{url:"/home/needmanage/addneedrent/rentneedbc",cache:!1,templateUrl:"views/tabs/home/needManage/addRentNeed/rentNeedBC/rentNeedBC.html",controller:"rentNeedBCCtl",resolve:{load:["$ocLazyLoad",function(e){return e.load(["views/tabs/home/needManage/addRentNeed/rentNeedBC/rentNeedBC.js"])}]},data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("headimgCutCtl",["NimUtils","appUtils","enterViewLoad","$rootScope","$scope","$stateParams","$ionicHistory","$http","$Factory","$ionicLoading","$timeout",function(t,n,i,o,c,e,u,a,f,r,s){c.back=function(){n.back()},c.imgurl=e.imgurl,c.init=function(){new AlloyCrop({image_src:c.imgurl,circle:!1,width:300,height:300,output:1,ok:function(n,o){c.$apply(function(){c.view=n,c.done()})},cancel:function(){c.back()},ok_text:"确定",cancel_text:"取消"})},c.init(),c.$on("$ionicView.enter",function(){a.get(f.Account.getuserinfo.url).then(function(n){c.userinfo=n.data}).catch(function(){})}),c.done=function(){c.save=function(){a.post(f.Account.upload.url,{path:"18/userHeadImg",file:c.view}).then(function(n){c.userinfo.Image=n.data.url,c.userinfo.ShowImage=n.data.view,c.changeUserinfo(),c.changeJMinfo()},function(n){i.customload("保存图片失败"),s(function(){c.back()},1500)})},c.changeUserinfo=function(){a.post(f.Account.setuserinfo.url,c.userinfo).then(function(n){i.customload("修改成功"),s(function(){c.back()},1500)},function(n){i.customload("修改失败"),s(function(){c.back()},1500)})},c.changeJMinfo=function(){nim.updateMyInfo({avatar:c.userinfo.ShowImage,done:function(n,o){n?i.customload("聊天头像修改失败"):t.updateMyInfo()}})}}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("headimgCut",{url:"/percenter/infodetail/headimgpreview/headimgcut/:imgurl",cache:!1,templateUrl:"views/tabs/perCenter/infoDetail/headimgPreview/headimgCut/headimgCut.html",controller:"headimgCutCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("tradeDataCtl",["appUtils","$ionicHistory","$Factory","$http","$scope","$rootScope","$ionicPopover","$timeout",function(t,e,a,o,i,r,n,c){i.back=function(){t.back()};echarts.init(document.getElementById("trade_data_echarts")).setOption({title:{text:"交易统计"},tooltip:{},legend:{data:["销量","量"]},xAxis:{data:["04-15","04-16","04-17","04-18","04-19","04-20"]},yAxis:{},series:[{name:"销量",type:"bar",data:[5,20,36,10,10,20]},{name:"量",type:"line",data:[5,10,30,10,10,20]}],color:["rgb(27,197,187)","rgb(255,255,0)"]})}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("tradeData",{url:"/percenter/landagent/newhouses/tradedata/:id",templateUrl:"views/tabs/perCenter/landAgent/newHouses/tradeData/tradeData.html",controller:"tradeDataCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("visitDataCtl",["appUtils","$ionicHistory","$Factory","$http","$scope","$rootScope","$ionicPopover","$timeout",function(t,e,i,o,a,c,n,r){a.back=function(){t.back()};echarts.init(document.getElementById("visit_data_echarts")).setOption({title:{text:"带看统计"},tooltip:{},legend:{data:["成交量"]},xAxis:{data:["04-15","04-16","04-17","04-18","04-19","04-20"]},yAxis:{},series:[{name:"销量",type:"bar",data:[5,20,36,10,10,20]}],color:["rgb(27,197,187)"]})}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("visitData",{url:"/percenter/landagent/newhouses/visitdata/:id",templateUrl:"views/tabs/perCenter/landAgent/newHouses/visitData/visitData.html",controller:"visitDataCtl",data:{isPublic:!0}})}]);
"use strict";angular.module("App").controller("getBonusCtl",["enterViewLoad","appUtils","$rootScope","$timeout","$interval","$scope","$state","$stateParams","$http","$Factory",function(e,t,a,n,o,c,i,u,s,l){c.back=function(){t.back()},c.$on("$ionicView.enter",function(){c.initData()}),c.$on("$ionicView.leave",function(){c.intervalName&&o.cancel(c.intervalName)}),c.goOpenvip=function(){i.go("openVip")},c.initData=function(){s.post(l.WaitReceive.bonuslist.url+"?uid="+u.id).then(function(t){if(0<t.data.result.length){var a=t.data.result[0];a.Attach=JSON.parse(a.Attach),c.pageData=a,0!==c.pageData.DataStaus&&e.customload("该奖励记录已失效"),c.intervalName=o(function(){for(var t=0;t<c.pageData.Attach.length;t++)--c.pageData.Attach[t].EndedSec;--c.pageData.StartSec},1e3)}else e.customload("该奖励记录已失效"),c.pageData={}}).catch(function(){e.customload("请求数据失败")})},c.disGet=function(){e.customload("未到领取时间",2e3)},c.getBonus=function(t){s.post(l.WaitReceive.getbonus.url+"?id="+c.pageData.Id+"&role="+t.Role).then(function(t){e.customload("领取成功"),n(function(){c.back()},1500)}).catch(function(t){var a=t.data.Message||"领取失败";e.customload(a)})},c.getUser=function(t){s.post(l.WaitReceive.getuser.url+"?id="+c.pageData.Id+"&role=user").then(function(t){e.customload("累积成功"),n(function(){c.back()},1500)}).catch(function(t){var a=t.data.Message||"领取失败";e.customload(a)})},c.getVip=function(t){s.post(l.WaitReceive.getvip.url+"?id="+c.pageData.Id+"&role=null").then(function(t){e.customload("领取成功"),n(function(){c.back()},1500)}).catch(function(t){var a=t.data.Message||"领取失败";e.customload(a)})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(t){t.state("getBonus",{url:"/percenter/myaccount/bonuslist/getbonus/params/:id",templateUrl:"views/tabs/perCenter/myAccount/bonusList/getBonus/getBonus.html",controller:"getBonusCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("bindBankCardCtl",["enterViewLoad","appUtils","$interval","$ionicModal","$rootScope","$ionicHistory","$timeout","$scope","$stateParams","$http","$Factory","$ionicLoading",function(t,n,a,o,e,c,r,u,d,i,s,m){var l;u.back=function(){n.back()},u.$on("$ionicView.beforeLeave",function(){u.endCountDownNum()}),u.$on("$ionicView.enter",function(){u.stepNumber=1,u.checkUser=function(){i.post(s.Allin.checkuser.url).then(function(n){"SUCCESS"==n.data.return_code?(u.userInfo=n.data.return_msg.memberInfo,u.cardData.Name=n.data.return_msg.memberInfo.name,u.cardData.IdentityNo=n.data.return_msg.memberInfo.identityCardNo,u.userInfo.isPhoneChecked&&!u.userInfo.isIdentityChecked?u.stepNumber=2:u.userInfo.isPhoneChecked&&u.userInfo.isIdentityChecked&&(u.stepNumber=3)):t.customload("检测用户失败")}).catch(function(){t.customload("检测用户失败")})},u.checkUser(),u.bindphoneData={phone:"",code:""},u.bindPhone=function(){i.post(s.Allin.bindphone.url+"?Phone="+u.bindphoneData.phone+"&Code="+u.bindphoneData.code).then(function(n){"FAIL"==n.data.return_code?t.customload(n.data.return_msg):(u.endCountDownNum(),u.userInfo.isIdentityChecked?u.stepNumber=3:u.stepNumber=2)}).catch(function(){t.customload("绑定失败")})},u.setnameData={name:"",idNumber:""},u.setName=function(){i.post(s.Allin.setname.url+"?Name="+u.setnameData.name+"&IdNo="+u.setnameData.idNumber).then(function(n){"FAIL"==n.data.return_code?t.customload(n.data.return_msg):(u.checkUser(),u.stepNumber=3)}).catch(function(){t.customload("实名失败")})},u.cardData={CardNo:"",Phone:"",Name:"",IdentityNo:"",Validate:"",Cvv2:"",IsSafeCard:"",UnioBank:""},u.applyBindCard=function(){u.cardData.Name?u.cardData.CardNo?u.cardData.IdentityNo?u.cardData.Phone?i.post(s.Allin.applybindcard.url,u.cardData).then(function(n){"FAIL"==n.data.return_code?t.customload(n.data.return_msg):(u.startCountDown(),n.data.return_msg=JSON.parse(n.data.return_msg),u.confirmcardData.TranceNum=n.data.return_msg.tranceNum,u.confirmcardData.TransDate=n.data.return_msg.transDate||"",u.confirmcardData.Phone=u.cardData.Phone)}).catch(function(){t.customload("获取验证码失败"),u.endCountDownNum()}):t.customload("请输入电话",1e3):t.customload("请输入身份证号",1e3):t.customload("请输入卡号",1e3):t.customload("请输入姓名",1e3)},u.confirmcardData={TranceNum:"",TransDate:"",Phone:"",Code:"",ResetPwd:!1},u.confirmBindCard=function(){u.confirmcardData.ResetPwd=!!d.isreset,i.post(s.Allin.bindcard.url,u.confirmcardData).then(function(n){"FAIL"==n.data.return_code?t.customload(n.data.return_msg):(t.customload("操作成功"),u.endCountDownNum(),r(function(){u.back()},1500))}).catch(function(){t.customload("绑定失败"),u.endCountDownNum()})}}),u.sendMsg=function(n){i.post(s.Allin.sendmsg.url+"?Phone="+n).then(function(n){"SUCCESS"==n.data.return_code?u.startCountDown():t.customload(n.data.return_msg)}).catch(function(){t.customload("发送失败"),u.endCountDownNum()})},u.showCountDown=!1,u.countDownNum=60,u.startCountDown=function(){u.showCountDown=!0,u.clock=a(function(){u.countDownNum--,u.countDownNum<1&&u.endCountDownNum()},1e3)},u.endCountDownNum=function(){u.showCountDown=!1,u.clock&&(u.countDownNum=60,a.cancel(u.clock))},u.$watch("cardData.CardNo",function(n){n&&(l&&r.cancel(l),l=r(function(){9<n.length&&i.get(s.Allin.getcardbin.url+"?CardNo="+n).then(function(n){"SUCCESS"==n.data.return_code?(n.data.return_msg=JSON.parse(n.data.return_msg),u.cardInfo=n.data.return_msg.cardBinInfo):t.customload("获取银行卡失败")}).catch(function(){t.customload("获取银行卡失败")})},400))})}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("bindBankCard",{url:"/percenter/myaccount/mybankcard/bindbankcard/:isreset",cache:!1,templateUrl:"views/tabs/perCenter/myAccount/myBankCard/bindBankCard/bindBankCard.html",controller:"bindBankCardCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("manageBankCardCtl",["enterViewLoad","appUtils","$ionicPopup","$ionicActionSheet","$rootScope","$ionicHistory","$timeout","$scope","$state","$stateParams","$http","$Factory","$ionicLoading",function(c,t,a,e,n,o,i,r,u,d,s,l,f){r.back=function(){t.back()},r.$on("$ionicView.enter",function(){s.post(l.Allin.querycards.url+"?CardNo="+d.cardnumber).then(function(t){"SUCCESS"==t.data.return_code?r.cardList=t.data.return_msg.bindCardList:c.customload(t.data.return_msg)}).catch(function(){c.customload("获取卡信息失败")})}),r.showAction=function(n){var o=e.show({buttons:[{text:"解绑"}],cancelText:"取消",cancel:function(){},buttonClicked:function(t){if(o(),0==t)a.confirm({title:"确定解绑？",cancelText:"取消",okText:"解绑"}).then(function(t){t&&s.post(l.Allin.unbindcard.url+"?CardNo="+n.bankCardNo).then(function(t){"SUCCESS"==t.data.return_code?(c.customload("解绑成功"),i(function(){r.back()},1500)):c.customload(t.data.return_msg)}).catch(function(){c.customload("解绑失败")})});else if(1==t){a.confirm({title:"设为安全卡？",cancelText:"取消",okText:"确定"}).then(function(t){t&&s.post(l.Allin.setsafecard.url+"?CardNo="+n.bankCardNo).then(function(t){"SUCCESS"==t.data.return_code?(c.customload("设置成功"),i(function(){r.back()},1500)):c.customload(t.data.return_msg)}).catch(function(){c.customload("设置失败")})})}}})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(a){a.state("manageBankCard",{url:"/percenter/myaccount/mybankcard/managebankcard/:cardnumber",templateUrl:"views/tabs/perCenter/myAccount/myBankCard/manageBankCard/manageBankCard.html",controller:"manageBankCardCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("dealDetailCtl",["enterViewLoad","appUtils","$rootScope","$timeout","$scope","$stateParams","$http","$Factory",function(t,e,o,a,r,c,l,p){r.back=function(){e.back()},r.RecordType=c.order}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("dealDetail",{url:"/percenter/myaccount/transactionrecord/dealdetail/params/:order",templateUrl:"views/tabs/perCenter/myAccount/transactionRecord/dealDetail/dealDetail.html",controller:"dealDetailCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("uploadVideoCtl",["Upload","appUtils","enterViewLoad","$ionicActionSheet","$sce","$ionicLoading","$localStorage","$timeout","$rootScope","$scope","$state","$stateParams","$http","$Factory",function(a,e,i,o,t,n,l,u,d,c,s,r,p,v){c.back=function(){e.back()},c.videoChoose=function(){$("#upload_video_add_input").click()},c.subVideoData={video:"",image:""},c.onFileChange=function(e){c.videoFileObj=e[0];var o=new Blob([e[0]]),t=URL.createObjectURL(o);document.getElementById("preview_upload_video").src=t,document.getElementById("preview_upload_video").onload=function(e){URL.revokeObjectURL(this.src)},c.$apply(),$("#upload_video_add_input").val(""),a.upload({url:v.Account.uploadmedia.url,data:{file:c.videoFileObj,userid:l.myselfInfo?l.myselfInfo.Id:null}}).progress(function(e){var o=parseInt(100*e.loaded/e.total);u(function(){n.show({template:"正在上传："+Math.floor(o)+"%"}),99<o&&(n.hide(),i.load(!0))})}).success(function(e,o,t,a){n.hide(),0==e.error?(c.subVideoData.video=e.view,c.subVideoData.image=e.cover,i.customload("上传成功")):i.customload("上传失败")}).error(function(e,o,t,a){n.hide(),i.customload("上传失败")})},c.convertBase64UrlToBlob=function(e){for(var o=e.split(","),t=(o[0].match(/:(.*?);/)[1],atob(o[1])),a=t.length,i=new Uint8Array(a);a--;)i[a]=t.charCodeAt(a);return new Blob([i],{type:"image/png"})},c.onLoadedData=function(){},c.typeList=[{text:"生活",value:1},{text:"搞笑",value:2},{text:"娱乐",value:3},{text:"萌宠",value:4},{text:"体育",value:5},{text:"军事",value:6},{text:"科技",value:7},{text:"游戏",value:8},{text:"奇葩",value:9},{text:"饮食",value:10},{text:"动漫",value:11},{text:"二次元",value:12}],c.typeChoosed=1,c.changeType=function(e){c.typeChoosed=e},c.publishVideo=function(){p.post(v.Zone.save.url,{Content:JSON.stringify(c.subVideoData),Type:30,CType:c.typeChoosed}).then(function(e){c.subVideoData={video:"",image:""},c.videoFileObj="",i.customload("发布成功"),u(function(){c.back()},1500)}).catch(function(){i.customload("发布失败")})},c.cancelVideo=function(){c.subVideoData={video:"",image:""},c.videoFileObj=""}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("uploadVideo",{url:"/percenter/mybusiness/myphotosandvideos/uploadVideo",cache:!1,templateUrl:"views/tabs/perCenter/myBusiness/myPhotosAndVideos/uploadVideo/uploadVideo.html",controller:"uploadVideoCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("payDoneCtl",["$rootScope","$ionicHistory","$scope","$state",function(o,t,e,n){e.back=function(){n.go("tabs.perCenter")}}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("payDone",{url:"/percenter/openvip/payvip/paydone",templateUrl:"views/tabs/perCenter/openVip/payVip/payDone/payDone.html",controller:"payDoneCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("posPayCtl",["enterViewLoad","appUtils","$rootScope","$ionicHistory","$timeout","$scope","$state","$stateParams","$http","$Factory",function(o,e,t,r,a,c,d,n,s,u){c.back=function(){e.back()},c.orderData={ProductId:n.productid,Fee:n.fee,Years:n.year},s.post(u.Allin.pos.url,c.orderData).then(function(e){if("SUCCESS"==e.data.return_code){var t=JSON.parse(e.data.return_msg);c.orderNumber=t.orderNo;new QRCode(document.getElementById("pospay_qrcode"),{text:t.orderNo,width:200,height:200,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}else e.data.return_msg,o.customload("未绑定,请添加银行卡",2e3)}).catch(function(e){o.customload("生成订单失败")})}]);
"use strict";angular.module("App").config(["$stateProvider",function(e){e.state("posPay",{url:"/percenter/openvip/payvip/pospay/params/:productid/:fee/:year",cache:!1,templateUrl:"views/tabs/perCenter/openVip/payVip/posPay/posPay.html",controller:"posPayCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("vipProtocolCtl",["enterViewLoad","appUtils","$rootScope","$ionicHistory","$timeout","$scope","$state","$stateParams","$http","$Factory",function(t,o,a,c,e,i,r,n,p,s){i.back=function(){o.back()}}]);
"use strict";angular.module("App").config(["$stateProvider",function(o){o.state("vipProtocol",{url:"/percenter/openvip/payvip/vipprotocol",templateUrl:"views/tabs/perCenter/openVip/payVip/vipProtocol/vipProtocol.html",controller:"vipProtocolCtl",data:{isPublic:!1}})}]);
"use strict";angular.module("App").controller("publishGuessPriceCtl",["enterViewLoad","appUtils","$localStorage","$http","$Factory","$state","$stateParams","$scope","$timeout",function(a,t,e,o,s,u,n,c,l){c.back=function(){t.back()},c.houseId=n.houseid,c.userInfo=e.myselfInfo,c.subData={HouseId:c.houseId,Type:1,Title:"",Price:"",UserId:e.myselfInfo.Id},c.saveData=function(){var t={method:"POST",url:s.Evalu.save.url,headers:{"Content-Type":"application/json"},data:c.subData};o(t).then(function(t){a.customload("提交成功"),l(function(){c.back()},1500)}).catch(function(){a.customload("提交失败")})}}]);
"use strict";angular.module("App").config(["$stateProvider",function(s){s.state("tabs.publishGuessPrice",{url:"/guessprice/publishguessprice/:houseid",cache:!1,views:{home:{templateUrl:"views/tabs/home/guessPrice/systemPrice/thirdGuessPrice/publishGuessPrice/publishGuessPrice.html",controller:"publishGuessPriceCtl"}},resolve:{load:["$ocLazyLoad",function(s){return s.load(["views/tabs/home/guessPrice/systemPrice/thirdGuessPrice/publishGuessPrice/publishGuessPrice.js"])}]},data:{isPublic:!1}})}]);