"use strict";angular.module("App",["ionic","ionicLazyLoad","ngCordova","ngCookies","oc.lazyLoad","ionic-citypicker","angularMoment","monospaced.elastic","ngStorage","ionic-native-transitions","ng-img","starter.imgservices","ngFileUpload","ionicRipple"]).config(["$ionicConfigProvider","$stateProvider","$urlRouterProvider","$httpProvider","$ionicNativeTransitionsProvider",function(e,t,a,o,n){e.views.swipeBackEnabled(!1),e.views.transition("no"),n.setDefaultOptions({duration:200,slowdownfactor:4,iosdelay:-1,androiddelay:-1,winphonedelay:-1,fixedPixelsTop:0,fixedPixelsBottom:0,triggerTransitionEvent:"$ionicView.afterEnter",backInOppositeDirection:!1}),n.setDefaultTransition({type:"slide",direction:"left"}),n.setDefaultBackTransition({type:"slide",direction:"right"}),o.defaults.headers.post["Content-Type"]="application/json",o.interceptors.push("authInterceptor"),t.state("tabs",{url:"/tabs",abstract:!0,templateUrl:"views/tabs.html"}),a.otherwise("/tabs/realhome")}]).constant("views",{currentView:null}).factory("authInterceptor",["$timeout","$q","$rootScope","$localStorage",function(e,t,a,o){t.defer();return{request:function(e){return e.headers=e.headers||{},o.access_token&&(e.headers.Authorization="Bearer  "+o.access_token),e},responseError:function(e){return 401==e.status&&(o.$reset(),o.firstTimeOpen=!0),t.reject(e)}}}]).run(["JpushUtils","NimUtils","appUtils","views","$localStorage","$ionicTabsDelegate","$cordovaKeyboard","$ionicPopup","$cordovaAppVersion","$cordovaFileTransfer","$cordovaFile","$cordovaFileOpener2","$ionicPlatform","$rootScope","$q","$http","$Factory","$state","$ionicHistory","$cordovaToast","$location","$cordovaStatusbar","$ionicLoading","$cordovaNetwork","$window","$timeout",function(e,t,r,a,s,o,n,c,l,p,i,u,d,h,m,f,g,v,b,w,y,A,T,k,E,P){e.init(),s.myNimAccount&&t.init(s.myNimAccount),h.$on("$ionicView.beforeEnter",function(e,t){a.currentView=t.stateName,o.showBar(!1)}),h.$on("$ionicView.beforeLeave",function(e,t){}),h.$on("$stateChangeStart",function(e,t,a,o,n){h.fromStateName=o.name,h.currentStateName=t.name;var i=angular.isObject(t.data)&&!0===t.data.isPublic,r=s.access_token;i||i||r||(e.preventDefault(),v.go("login"))}),ionic.Platform.setPlatform("ios"),d.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar,document.addEventListener("deviceready",function(){if(navigator.splashscreen.hide(),Wechat.isInstalled(function(e){r.statusData.wechatInstalled=!!e},function(e){}),YCQQ.checkClientInstalled(function(){r.statusData.qqInstalled=!0},function(){r.statusData.qqInstalled=!1}),/iphone/i.test(navigator.userAgent)||/ipad/i.test(navigator.userAgent));else{var t=function(){},a=cordova.plugins.permissions,o=[a.READ_EXTERNAL_STORAGE,a.CAMERA,a.ACCESS_FINE_LOCATION,a.READ_CONTACTS];a.hasPermission(o,function(e){e.hasPermission||a.requestPermissions(o,function(e){e.hasPermission},t)},null)}f.post(g.AppJson.version.url).then(function(o){var i=o.data.android.version;l.getVersionNumber().then(function(e){var t,n,a;i<=e||(r.statusData.hasNewVersion=!0,t=o.data.android.versionDescription,n=o.data.android.updateUrl,a=i,c.confirm({title:"检查到新版本"+a,template:t,cancelText:"取消",okText:"升级"}).then(function(e){if(e){var a=function(){var e=n,t=(new Date).getTime(),a=cordova.file.externalRootDirectory+"fangtian"+t+".apk";p.download(e,a,{},!0).then(function(e){u.open(a,"application/vnd.android.package-archive").then(function(){},function(e){}),T.hide()},function(e){T.show({template:"未设置存储权限，下载失败",duration:2e3})},function(t){P(function(){var e=t.loaded/t.total*100;T.show({template:"已经下载："+Math.floor(e)+"%"}),99<e&&T.hide()})})},o=cordova.plugins.permissions;o.hasPermission(o.READ_EXTERNAL_STORAGE,function(e){if(e.hasPermission)a();else{var t=function(){};o.requestPermission(o.READ_EXTERNAL_STORAGE,function(e){e.hasPermission?a():t()},t)}},null)}}))})})},!1)}),d.registerBackButtonAction(function(e){if(P(function(){$(".sel-boxs").hide()},100),!$("#pasp_wrapper").is(".pswp--open"))return"/tabs/realhome"==y.path()||"/tabs/linkman"==y.path()||"/tabs/chatlist"==y.path()||"/tabs/percenter"==y.path()?"HOUSE"!=h.tabsType||"/tabs/chatlist"!=y.path()&&"/tabs/percenter"!=y.path()?cordova.plugins.backgroundMode.moveToBackground():v.go("tabs.Home"):b.backView()?n.isVisible()?n.close():"/percenter/myhouses/"==y.path()||"/percenter/myhouses/1"==y.path()||"/percenter/myhouses/2"==y.path()||"/percenter/myhouses/3"==y.path()||"/percenter/myhouses/4"==y.path()?!b.backView()||"tabs.Home"!=b.backView().stateName&&"guessPrice"!=b.backView().stateName?v.go("tabs.perCenter"):h.$ionicGoBack():"/percenter/openvip/payvip/paydone"==y.path()?v.go("tabs.perCenter"):"/home/noctrvideo/params"==y.path().substring(0,23)?v.go("tabs.realHome"):h.$ionicGoBack():"/mall/classify"==y.path()||"/mall/cart"==y.path()||"/mall/message"==y.path()||"/mall/mine"==y.path()?v.go("mallHome"):"/mall/home"==y.path()||"/tabs/home"==y.path()?v.go("tabs.realHome"):"/home/homeclassify"==y.path()&&v.go("tabs.Home"),e.preventDefault(),!1;$("#pasp_wrapper").attr("class","pswp")},101),E.wx&&f.post(g.WxJs.jsconfig.url,{url:y.$$absUrl.split("#")[0]}).then(function(e){var t=angular.extend({debug:!0,appId:"",timestamp:"",nonceStr:"",signature:"",jsApiList:["onMenuShareAppMessage","onMenuShareTimeline"]},e.data);E.wx.config(t),E.wx.error(function(e){})})}]);
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};angular.module("App").factory("appUtils",["upImgBase","$state","$rootScope","$timeout","$ionicViewSwitcher","$ionicNativeTransitions","$ionicHistory","$cordovaContacts","$ionicModal","$ionicLoading","$http","$Factory","$localStorage","$cordovaInAppBrowser","$cordovaToast","$cordovaKeyboard","$ionicScrollDelegate","$cordovaImagePicker",function(i,o,t,e,a,n,r,c,s,u,d,f,l,h,p,m,g,y){var v=function(){};return v.prototype={shareHost:"https://app.fang-tian.com/app",city:{name:"厦门",id:1},currentDistricts:null,getCurrentDistricts:function(e){if(this.currentDistricts)e(this.currentDistricts);else{var n=this;d.post(f.Community.cities.url+"?city="+n.city.id).then(function(t){n.currentDistricts=t.data[n.city.name],e(n.currentDistricts)}).catch(function(){e(n.currentDistricts)})}},bMapLocation:function(e,n){document.addEventListener("deviceready",function(){baidumap_location.getCurrentPosition(function(t){t.city=t.city.substr(0,t.city.length-1),e(t)},function(t){n(t)})},!1)},statusData:{wechatInstalled:!1,qqInstalled:!1,iosInReview:!1,hasNewVersion:!1},throttle:function(n,o,i){var a,r=new Date;return function(){var t=arguments,e=new Date;clearTimeout(a),i<=e-r?(n.apply(this,t),r=e):a=setTimeout(n,o)}},saveKeyboardHeight:function(){l.keyboardHeight||window.addEventListener("native.keyboardshow",function(t){l.keyboardHeight?l.keyboardHeight>t.keyboardHeight&&(l.keyboardHeight=t.keyboardHeight):l.keyboardHeight=t.keyboardHeight})},ftIdToNim:function(t){l.myselfInfo?l.myselfInfo.Id!=t?d.post(f.Neteast.user.url+"?id="+t).then(function(t){"SUCCESS"==t.data.return_code?o.go("dialogBox",{id:t.data.return_msg.accid}):u.show({template:t.data.return_msg,duration:1500})}).catch(function(){u.show({template:"用户未开通微聊",duration:1500})}):u.show({template:"你的发布!!!",duration:1500}):o.go("login")},cameraBase:function(t,e,n){document.addEventListener("deviceready",function(){navigator.camera.getPicture(function(t){e("data:image/jpeg;base64,"+t)},function(t){n(t)},{destinationType:0,quality:100,targetWidth:t.width||1e3,targetHeight:t.height||1e3,saveToPhotoAlbum:!0,encodingType:0,allowEdit:!1,cameraDirection:0,sourceType:1,mediaType:0})},!1)},photoLiberary:function(t,o,e){document.addEventListener("deviceready",function(){function n(t){i.changeBase(t.path,function(n){MediaPicker.extractThumbnail(t,function(t){var e=1;e=270==t.exifRotate?8:180==t.exifRotate?3:90==t.exifRotate?6:1,o(n,e)},function(t){})})}MediaPicker.getMedias(t,function(t){for(var e=0;e<t.length;e++)n(t[e])},function(t){e(t)})},!1)},scanCode:function(e,n){document.addEventListener("deviceready",function(){cordova.plugins.barcodeScanner.scan(function(t){e(t)},function(t){n(t)},{preferFrontCamera:!1,showFlipCameraButton:!1,showTorchButton:!1,torchOn:!1,saveHistory:!0,prompt:"请将二维码放入框内",resultDisplayDuration:500,formats:"QR_CODE,PDF_417",disableAnimations:!0,disableSuccessBeep:!1})},!1)},back:function(){r.backView()&&t.$ionicGoBack()},go:function(t,e,n){a.nextDirection("forward"),o.go(t,e),n&&"function"==typeof n&&n()},doGo:function(t){n.locationUrl(t,{type:"fade",duration:0})},trim:function(t){if("string"==typeof t)return t.replace(/^\s+|\s+$/g,"")},textCut:function(t,e){if("string"==typeof t&&"number"==typeof e&&t.length>=e){var n=t.slice(0,e),o=n.lastIndexOf(" ");return n=null,t.slice(0,o)+"..."}return t},resetLocalStorage:function(){l.$reset(),l.firstTimeOpen=!0},isJsonString:function(t){try{if("object"==_typeof(JSON.parse(t)))return!0}catch(t){}return!1},getUser:function(){return $cookies.get("user")},tips:function(t,e){switch(e){case 0:return window.cordova?p.showShortTop(t):void 0;case 1:return window.cordova?p.showShortCenter(t):void 0;case 2:return window.cordova?p.showShortBottom(t):void 0}},showModal:function(t,e,n,o){s.fromTemplateUrl(t,{scope:e,animation:n}).then(function(t){o&&angular.isFunction(o)&&o(t)})},hideModal:function(t){t.hide()},destroyModal:function(t,e){t.$on("$destroy",function(){Array.isArray(e)?e.forEach(function(t){t.remove()}):e&&e.remove()})},clearHistory:function(){r.clearHistory()},openPdf:function(t){if(!ionic.Platform.isIOS())return this.go("pdf",{pdf:t});var e={location:"yes",clearcache:"yes",toolbar:"yes"};document.addEventListener("deviceready",function(){h.open(t,"_system",e)},!1)},checkAndGoLogin:function(t,e){if(this.isLogin())return t();this.go("login",null,e)},arrayUnique:function(t){if(Array.isArray(t)){for(var e=[],n={},o=0;o<t.length;o++)n[t[o]]||(e.push(t[o]),n[t[o]]=1);return e}},getSearchTextStorage:function(t){var e=[],n=[];if(localStorage.searchList&&t)(e=JSON.parse(localStorage.searchList)).unshift(t),n=this.arrayUnique(e);else{if(localStorage.searchList||!t)return localStorage.searchList?JSON.parse(localStorage.searchList):[];n.unshift(t)}return localStorage.searchList=JSON.stringify(n),n},listenKeyBoard:function(t,e){ionic.Platform.isIOS()||(window.addEventListener("native.keyboardshow",function(){t&&"function"==typeof t&&t()}),window.addEventListener("native.keyboardhide",function(){e&&"function"==typeof e&&e()}))},hideKeyBoard:function(){m.isVisible()&&m.close()},tenFormat:function(t){return t/10<1?"0"+t:t},handleTime:function(t,e,n){return this.tenFormat(t)+":"+this.tenFormat(e)+":"+this.tenFormat(n)},getMediaDuration:function(t,e,n){if(e.duration){n.current=n.duration="00:00:00",n.durationOrigin=e.duration;var o=Math.floor(e.duration/3600),i=Math.floor(e.duration%3600/60),a=Math.floor(e.duration%60);n.duration=this.handleTime(o,i,a),t.$apply()}},checkToGetMediaDuration:function(t,e,n){!n.durationOrigin&&this.getMediaDuration(t,e,n)},handlePlayingTime:function(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),o=Math.floor(t%60);return this.handleTime(e,n,o)},fbModalShow:function(){$("#home_nav_modalview .close-wrapper .close").addClass("active"),$("#home_nav_modalview .ul-list .one").css({display:"block"}),e(function(){$("#home_nav_modalview .ul-list .two").css({display:"block"})},50),e(function(){$("#home_nav_modalview .ul-list .three").css({display:"block"})},100),e(function(){$("#home_nav_modalview .ul-list .four").css({display:"block"})},150)},fbModalHidden:function(){$("#home_nav_modalview .close-wrapper .close").removeClass("active"),$("#home_nav_modalview .ul-list .animated").css({display:"none"})},enterSettings:function(){navigator.splashscreen&&navigator.splashscreen.hide&&navigator.splashscreen.hide(),window.StatusBar&&window.StatusBar.show()},scrollToTop:function(t,e){$ionicScrollDelegate.$getByHandle(t).scrollTop(e)},customImagePicker:function(t,e,n){function o(){window.imagePicker.getPictures(function(t){e(t)},function(t){n()},t)}if(/iphone/i.test(navigator.userAgent)||/ipad/i.test(navigator.userAgent))o();else{var i=cordova.plugins.permissions;i.hasPermission(i.READ_EXTERNAL_STORAGE,function(t){if(t.hasPermission)o();else{var e=function(){};i.requestPermission(i.READ_EXTERNAL_STORAGE,function(t){t.hasPermission&&o()},e)}},null)}},saveImageToLocal:function(e){encodeURI(e);var n=function(t){u.show({template:"保存成功",duration:1500})},o=function(t){u.show({template:"保存失败",duration:1500})};if(/iphone/i.test(navigator.userAgent)||/ipad/i.test(navigator.userAgent))a(e,n,o);else{var i=cordova.plugins.permissions;i.hasPermission(i.READ_EXTERNAL_STORAGE,function(t){t.hasPermission?a(e,n,o):i.requestPermission(i.READ_EXTERNAL_STORAGE,function(t){t.hasPermission&&a(e,n,o)},void 0)},null)}function a(t,e,n){var o,i,a,r=new Image;r.onload=function(){(o=document.createElement("canvas")).width=r.width,o.height=r.height,o.getContext("2d").drawImage(r,0,0);try{i=o.toDataURL("image/jpeg",1),a=i.replace(/data:image\/jpeg;base64,/,""),cordova.exec(e,n,"Canvas2ImagePlugin","saveImageDataToLibrary",[a])}catch(t){n(t.message)}};try{r.src=t}catch(t){n(t.message)}}},contactManager:function(){var t={filter:"",multiple:!0};return c.find(t)},WxPay:function(t,e,n){return"undefined"==typeof Wechat?(u.show({template:"尚未安装微信",duration:1500}),!1):(Wechat.isInstalled(function(t){if(!t)return u.show({template:"尚未安装微信",duration:1500}),!1},function(t){}),Wechat.sendPaymentRequest(t,function(t){e(t)},function(t){n(t)}),!0)},AliPay:function(t,e,n){return document.addEventListener("deviceready",function(){cordova.plugins.alipay.payment(t,function(t){e(t)},function(t){n(t)})},!1),!0},wechatUnionId:function(a,r){if("undefined"==typeof Wechat)return u.show({template:"尚未安装微信",duration:1500}),!1;Wechat.isInstalled(function(t){if(!t)return u.show({template:"尚未安装微信",duration:1500}),!1},function(t){});var t="_"+ +new Date;Wechat.auth("snsapi_userinfo",t,function(t){var e="https://api.weixin.qq.com/sns/oauth2/access_token?appid=wx60f2e980ba9c9e19&secret=abef4b4a88212285b1483d0d25e31336&code="+t.code+"&grant_type=authorization_code";d.get(e).then(function(t){var e=t.data,n=e.access_token,o=e.openid,i="https://api.weixin.qq.com/sns/auth?access_token="+n+"&openid="+o;d.get(i).then(function(t){if("ok"==t.data.errmsg){var e="https://api.weixin.qq.com/sns/userinfo?access_token="+n+"&openid="+o;d.get(e).then(function(t){a(t.data)}).catch(function(t){r()})}else r()}).catch(function(t){r()})}).catch(function(t){r()})},function(t){r()})},qqLoginAndroid:function(e,n){YCQQ.checkClientInstalled(function(){YCQQ.ssoLogin(function(t){e(t)},function(t){n(t)},1)},function(){return u.show({template:"尚未安装QQ",duration:1500}),!1})},qqLogoutAndroid:function(t,e){YCQQ.checkClientInstalled(function(){YCQQ.logout(function(){t()},function(t){e(t)})},function(){return!1})},qqShareQQAndroid:function(t,e,n){YCQQ.checkClientInstalled(function(){YCQQ.shareToQQ(function(){u.show({template:"分享成功",duration:1500}),e()},function(t){"cancelled by user"==t?u.show({template:"取消分享",duration:1500}):u.show({template:"分享失败",duration:1500}),n(t)},t)},function(){return u.show({template:"尚未安装QQ",duration:1500}),!1})},qqShareQzoneAndroid:function(t,e,n){YCQQ.checkClientInstalled(function(){YCQQ.shareToQzone(function(){u.show({template:"分享成功",duration:1500}),e()},function(t){"cancelled by user"==t?u.show({template:"取消分享",duration:1500}):u.show({template:"分享失败",duration:1500}),n(t)},t)},function(){return u.show({template:"尚未安装QQ",duration:1500}),!1})},timeStampShow:function(t,e){if(1==t.length)return t[0].extras.showTime=!0,void e(t);if(0!=t.length){t[0].createTime;t[0].extras.showTime=!0;for(var n=1;n<t.length;n++)3e5<t[n].createTime-t[n-1].createTime&&"showTime"in t[n].extras&&(t[n].extras.showTime=!0,t[n].createTime);e(t)}else e(t)},getReceiptAddress:function(n,t){if(this.receiptAddress)return n(this.receiptAddress),!0;var o=this;d.post(f.UserAddress.query.url).then(function(t){if(0<t.data.length){var e=JSON.parse(JSON.stringify(t.data));t.data.filter(function(t){return t.IsDefault}),0<t.data.length?(n(t.data[0]),o.receiptAddress=t.data[0]):(n(e[0]),o.receiptAddress=e[0])}})},receiptAddress:null,shoppingCartList:l.shoppingCartList||[],shoppingCartCount:l.shoppingCartList?l.shoppingCartList.length:0},new v}]);
"use strict";angular.module("App").factory("$myBusinessData",[function(){var t=function(){};return t.prototype={tag:null,myPoster:""},new t}]);
"use strict";angular.module("App").factory("$Factory",function(){var e="https://app.fang-tian.com";return{host:e,AppJson:{version:{url:e+"/api/Account/Version",method:"GET"}},Account:{hjson:{url:e+"/app/data.json",method:"GET"},upload:{url:e+"/Upload/Save",method:"POST"},uploadmedia:{url:"http://ftm.fang-tian.com/Upload/SaveMedia",method:"POST"},msg:{url:e+"/api/Account/SendMsg",method:"POST"},sendinvit:{url:e+"/api/Account/SendInvit",method:"POST"},register:{url:e+"/api/Account/Register",method:"POST"},forgotpwd:{url:e+"/api/Account/ForgotPassword",method:"POST"},changepwd:{url:e+"/api/Account/ChangePassword",method:"POST"},login:{url:e+"/Token",method:"POST"},logout:{url:e+"/api/Account/LogOut",method:"POST"},qcode:{url:e+"/api/Account/QrCode",method:"GET"},getuserinfo:{url:e+"/api/Account/UserInfo",method:"GET"},setuserinfo:{url:e+"/api/Account/SetUserInfo",method:"POST"},showinfo:{url:e+"/api/Account/ShowInfo",method:"POST"},gethier:{url:e+"/api/Account/GetHier",method:"GET"},wxlogin:{url:e+"/api/Account/WeixinLogin",method:"POST"},exterlogin:{url:e+"/api/Account/ExterLogin",method:"POST"},addexterlogin:{url:e+"/api/Account/AddExternalLogin",method:"POST"},removelogin:{url:e+"/api/Account/RemoveLogin",method:"POST"},getexterlogins:{url:e+"/api/Account/GetExterLogins",method:"POST"}},Logo:{latest:{url:e+"/api/HouseSource/NewestQuery",method:"GET"}},News:{query:{url:e+"/api/News/Query",method:"POST"},get:{url:e+"/api/News/Get",method:"GET"},banner:{url:e+"/api/News/Banners",method:"POST"},approve:{url:e+"/api/News/Approve",method:"POST"}},Evalu:{search:{url:e+"/api/Evalue/ZonePrice",method:"POST"},list:{url:e+"/api/Evalue/Query",method:"POST"},get:{url:e+"/api/Evalue/Get",method:"GET"},save:{url:e+"/api/Evalue/Save",method:"POST"},delete:{url:e+"/api/Evalue/Delete",method:"POST"},reply:{url:e+"/api/Evalue/RepSave",method:"POST"},querylist:{url:e+"/api/Evalue/UserQuery",method:"POST"}},HouseProxy:{applicant:{url:e+"/api/HouseProxy/Applicant",method:"POST"},ownerget:{url:e+"/api/HouseProxy/Get",method:"GET"},verify:{url:e+"/api/HouseProxy/Verify",method:"POST"},applicantlist:{url:e+"/api/HouseProxy/ApplicantList",method:"POST"}},NewHouseSource:{communities:{url:e+"/api/HouseSource/Communities",method:"GET",isArray:!0},query:{url:e+"/api/HouseSource/Query",method:"GET"},publicquery:{url:e+"/api/HouseSource/CustQuery",method:"POST"},save:{url:e+"/api/HouseSource/Save",method:"POST"},auth:{url:e+"/api/HouseSource/Auth",method:"POST"},authget:{url:e+"/api/HouseSource/AuthGet",method:"GET"},getcomment:{url:e+"/api/HouseSource/Comment",method:"GET"},savecomment:{url:e+"/api/HouseSource/CommentSave",method:"PSOT"},counts:{url:e+"/api/HouseSource/Counts",method:"GET"},detail:{url:e+"/api/HouseSource",method:"GET"},postdetail:{url:e+"/api/HouseSource",method:"POST"},delete:{url:e+"/api/HouseSource/Delete",method:"POST"}},SimpleHouse:{selfquery:{url:e+"/api/House/Query",method:"POST"},publicquery:{url:e+"/api/House/CustQuery",method:"POST"},save:{url:e+"/api/House/save",method:"POST"},shopsave:{url:e+"/api/House/ShopSave",method:"POST"},delete:{url:e+"/api/House/Delete",method:"POST"},getdetail:{url:e+"/api/House/GET",method:"GET"},auth:{url:e+"/api/House/Auth",method:"POST"},authget:{url:e+"/api/House/AuthGet",method:"GET"}},MyHouse:{myhouse:{url:e+"/api/MyHouse/Query",method:"POST"}},NewHouse:{query:{url:e+"/api/NewHouse/Query",method:"POST"},publicquery:{url:e+"/api/NewHouse/CustQuery",method:"GET"},cities:{url:e+"/api/NewHouse/Cities",method:"GET"},getdetail:{url:e+"/api/NewHouse",method:"GET"},postdetail:{url:e+"/api/NewHouse/save",method:"POST"}},NewHouseProxy:{applicant:{url:e+"/api/newHouseProxy/Applicant",method:"POST"},applicantlist:{url:e+"/api/newHouseProxy/UserList",method:"POST"},mylist:{url:e+"/api/newHouseProxy/ApplicantList",method:"POST"},proxy:{url:e+"/api/Proxy",method:"POST"}},HouseNeed:{publicquery:{url:e+"/api/HouseNeed/CustQuery",method:"GET"},query:{url:e+"/api/HouseNeed/Query",method:"GET"},detail:{url:e+"/api/HouseNeed/Get",method:"GET"},save:{url:e+"/api/HouseNeed/Post",method:"POST"},change:{url:e+"/api/HouseNeed",method:"PUT"},delete:{url:e+"/api/HouseNeed/Delete",method:"DELETE"}},ReChange:{query:{url:e+"/api/Recharge/Query",method:"GET"},surplus:{url:e+"/api/Recharge/Surplus",method:"POST"}},Community:{add:{url:e+"/api/Community/Add",method:"POST"},query:{url:e+"/api/Community/Query",method:"POST"},cities:{url:e+"/api/Community/cities",method:"POST"}},TextTemplate:{save:{url:e+"/api/TextTemplate/Save",method:"POST"},query:{url:e+"/api/TextTemplate/Query",method:"GET"},delete:{url:e+"/api/TextTemplate/Delete",method:"POST"}},VerifyMsgs:{save:{url:e+"/api/Message/Save",method:"POST"},query:{url:e+"/api/Message/Query",method:"POST"},delete:{url:e+"/api/Message/Delete",method:"POST"},phonecontacts:{url:e+"/api/Message/UserMatch",method:"POST"},linkmandetail:{url:e+"/api/Message/SearchUser",method:"POST"},updateuserinfo:{url:e+"/api/Message/UpdateUserInfo",method:"POST"}},WxPay:{unifiedorder:{url:e+"/api/WxPay/Unifiedorder",method:"POST"},notify:{url:e+"/api/WxPay/Notify",method:"POST"},query:{url:e+"/api/WxPay/Query",method:"POST"},close:{url:e+"/api/WxPay/Close",method:"POST"},wxpay:{url:e+"/api/WxPay",method:"GET"},userid:{url:e+"/api/WxPay?userId={userId}&role={role}",method:"POST"}},WxJs:{jsconfig:{url:e+"/api/WxPay/JsConfig",method:"POST"}},AliPay:{unifiedorder:{url:e+"/api/Alipay/Unifiedorder",method:"POST"},notify:{url:e+"/api/Alipay/Notify",method:"POST"},query:{url:e+"/api/Alipay/Query",method:"POST"},close:{url:e+"/api/Alipay/Close",method:"POST"}},Allin:{checkuser:{url:e+"/api/Allin/CheckUser",method:"POST"},getinfo:{url:e+"/api/Allin/GetInfo",method:"GET"},setname:{url:e+"/api/Allin/SetName",method:"POST"},getcardbin:{url:e+"/api/Allin/GetCardBin",method:"GET"},applybindcard:{url:e+"/api/Allin/ApplyBindCard",method:"POST"},bindcard:{url:e+"/api/Allin/BindCard",method:"POST"},querycards:{url:e+"/api/Allin/QueryCards",method:"POST"},unbindcard:{url:e+"/api/Allin/UnbindCard",method:"POST"},setsafecard:{url:e+"/api/Allin/SetSafeCard",method:"POST"},sendmsg:{url:e+"/api/Allin/SendMsg",method:"POST"},bindphone:{url:e+"/api/Allin/BindPhone",method:"POST"},changephone:{url:e+"/api/Allin/ChangePhone",method:"POST"},applydeposit:{url:e+"/api/Allin/ApplyDeposit",method:"POST"},applyconsume:{url:e+"/api/Allin/ApplyConsume",method:"POST"},pos:{url:e+"/api/Allin/POS",method:"POST"},applydraw:{url:e+"/api/Allin/ApplyDraw",method:"POST"},pay:{url:e+"/api/Allin/Pay",method:"POST"},mpay:{url:e+"/api/Allin/MPay",method:"POST"},orderquery:{url:e+"/api/Allin/OrderQuery",method:"POST"},transfer:{url:e+"/api/Allin/Transfer",method:"POST"},querybalance:{url:e+"/api/Allin/QueryBalance",method:"POST"},refund:{url:e+"/api/Allin/ReFund",method:"POST"},contract:{url:e+"/api/Allin/Contract",method:"POST"},posquerybind:{url:e+"/api/Allin/POSQueryBind",method:"POST"},notify:{url:e+"/api/Allin/Notify",method:"GET"}},NewHouseTrade:{wantlook:{url:e+"/api/NewHouseTrade/Look",method:"POST"},visitreport:{url:e+"/api/NewHouseTrade/Report",method:"POST"},landagentlist:{url:e+"/api/NewHouseTrade/ManageList",method:"POST"},agentlist:{url:e+"/api/NewHouseTrade/ProxysList",method:"POST"},orderlist:{url:e+"/api/NewHouseTrade/UsersList",method:"POST"},cancelorder:{url:e+"/api/NewHouseTrade/Cancel",method:"POST"},looking:{url:e+"/api/NewHouseTrade/Looking",method:"POST"},looked:{url:e+"/api/NewHouseTrade/Looked",method:"POST"},traded:{url:e+"/api/NewHouseTrade/Traded",method:"POST"},verify:{url:e+"/api/NewHouseTrade/Verify",method:"POST"},getdetail:{url:e+"/api/NewHouseTrade/Get",method:"POST"},query:{url:e+"/api/NewHouseTrade",method:"POST"},close:{url:e+"/api/NewHouseTrade",method:"POST"}},Money:{money:{url:e+"/api/Money/Money",method:"POST"},record:{url:e+"/api/Money/Record",method:"POST"},transfer:{url:e+"/api/Money/Transfer",method:"POST"},income:{url:e+"/api/Money/Income",method:"POST"},setpassword:{url:e+"/api/Money/SetPassword",method:"POST"},ispassword:{url:e+"/api/Money/IsPassword",method:"POST"},consumeuser:{url:e+"/api/Money/ConsumeUser",method:"POST"},groupredpack:{url:e+"/api/Money/GroupRedPack",method:"POST"},opengrouppack:{url:e+"/api/Money/OpenGroupPack",method:"POST"}},WaitReceive:{bonuslist:{url:e+"/api/Receive/List",method:"POST"},getbonus:{url:e+"/api/Receive/Receive",method:"POST"},getuser:{url:e+"/api/Receive/ReceiveUser",method:"POST"},getvip:{url:e+"/api/Receive/ReceiveRole",method:"POST"},refound:{url:e+"//api/Receive/Refound",method:"POST"}},Neteast:{user:{url:e+"/api/Neteast/User",method:"POST"},sendmsg:{url:e+"/api/Neteast/SendMsg",method:"POST"},queryphone:{url:e+"/api/Neteast/Query",method:"POST"},getftid:{url:e+"/api/Neteast/GetFtUserId",method:"POST"},usermatch:{url:e+"/api/Neteast/UserMatch",method:"POST"}},BaiduAPI:{idcard:{url:e+"/api/BaiduApi/IdCard",method:"POST"},housecard:{url:e+"/api/BaiduApi/HouseCard",method:"POST"}},Shoper:{create:{url:e+"/api/Shoper/Create",method:"POST"},get:{url:e+"/api/Shoper/Get",method:"GET"},home:{url:e+"/api/Shoper/Home",method:"GET"}},Category:{query:{url:e+"/api/Category/Query",method:"GET"}},UserAddress:{query:{url:e+"/api/Address/Query",method:"POST"},get:{url:e+"/api/Address/Get",method:"GET"},save:{url:e+"/api/Address/Save",method:"POST"},delete:{url:e+"/api/Address/delete",method:"POST"}},ProductOrder:{carts:{url:e+"/api/ProductOrder/Carts",method:"GET"},create:{url:e+"/api/ProductOrder/Create",method:"POST"},orderquery:{url:e+"/api/ProductOrder/OrderQuery",method:"POST"},status:{url:e+"/api/ProductOrder/status",method:"POST"},tracequery:{url:e+"/api/ProductOrder/TraceQuery",method:"POST"},isnewer:{url:e+"/api/ProductOrder/IsNewer",method:"POST"},newerpacket:{url:e+"/api/ProductOrder/NewerPacket",method:"POST"}},Product:{query:{url:e+"/api/Product/Query",method:"POST"},get:{url:e+"/api/Product/Get",method:"GET"},commentadd:{url:e+"/api/Product/CommentAdd",method:"POST"},replycomment:{url:e+"/api/Product/ReplyComment",method:"POST"},comments:{url:e+"/api/Product/Comments",method:"POST"},agree:{url:e+"/api/Product/Agree",method:"POST"}},OderPay:{wxpay:{url:e+"/api/OrderPay/wxpay",method:"POST"},wxnotify:{url:e+"/api/OrderPay/wxNotify",method:"POST"},alipay:{url:e+"/api/OrderPay/alipay",method:"POST"},query:{url:e+"/api/OrderPay/Query",method:"POST"},allapplyconsume:{url:e+"/api/OrderPay/allApplyConsume",method:"POST"},allpay:{url:e+"/api/OrderPay/allPay",method:"POST"},consumeproduct:{url:e+"/api/OrderPay/ConsumeProduct",method:"POST"}},Zone:{home:{url:e+"/api/Zone/Home",method:"POST"},delete:{url:e+"/api/Zone/Delete",method:"POST"},save:{url:e+"/api/Zone/Save",method:"POST"},add:{url:e+"/api/Zone/Add",method:"POST"},get:{url:e+"/api/Zone/Get",method:"GET"},comments:{url:e+"/api/Zone/Comments",method:"POST"},agree:{url:e+"/api/Zone/Agree",method:"POST"},agreeuser:{url:e+"/api/Zone/AgreeUser",method:"POST"},drawimage:{url:e+"/api/Zone/DrawImage",method:"GET"},indexlist:{url:e+"/api/Zone/indexList",method:"POST"},follow:{url:e+"/api/Zone/Follow",method:"POST"},unfollow:{url:e+"/api/Zone/UnFollow",method:"POST"},followlist:{url:e+"/api/Zone/FollowList",method:"POST"}},Draw:{raffle:{url:e+"/api/Draw/Raffle",method:"POST"},lists:{url:e+"/api/Draw/Lists",method:"POST"},getprize:{url:e+"/api/Draw/GetPrize",method:"POST"},times:{url:e+"/api/Draw/Times",method:"POST"},myprize:{url:e+"/api/Draw/MyPrize",method:"POST"},redpack:{url:e+"/api/Draw/RedPack",method:"POST"},redtimes:{url:e+"/api/Draw/RedTimes",method:"POST"},myreds:{url:e+"/api/Draw/MyReds",method:"POST"}},Share:{save:{url:e+"/api/Share/Save",method:"POST"}}}}).factory("WechatService",["$ionicLoading",function(o){return{share:function(e){return"undefined"==typeof Wechat?(o.show({template:"尚未安装微信",duration:1500}),!1):(Wechat.isInstalled(function(e){if(!e)return o.show({template:"尚未安装微信",duration:1500}),!1},function(e){}),Wechat.share(e,function(e){},function(e){o.show({template:e,duration:1500})}),!0)}}}]).factory("wechatLinkBase",[function(){return{changeBase:function(e,o){var r=document.getElementById("wechat_link_canvas"),t=r.getContext("2d"),a=new Image;a.src=e,a.onload=function(){t.drawImage(a,0,0,r.width,r.height);var e=r.toDataURL("image/jpeg");o(e)}}}}]).factory("upImgBase",[function(){return{changeBase:function(e,o){var r=document.createElement("canvas"),t=new Image;t.src=e,t.onload=function(){1200<t.width?(r.width=1200,r.height=t.height/t.width*1200):1200<t.height?(r.height=1200,r.width=t.width/t.height*1200):(r.width=t.width,r.height=t.height),r.getContext("2d").drawImage(t,0,0,r.width,r.height);var e=r.toDataURL("image/jpeg");o(e)}}}}]).factory("enterViewLoad",["$ionicLoading","$timeout",function(r,o){return{load:function(e){r.show({animation:"fade-in",showBackdrop:!1,showDelay:0,template:'<p style="margin:0;" class="item-myicon"><ion-spinner icon="spiral" class="spinner-stable"></ion-spinner> </p>'}),e||o(function(){r.hide()},1e4)},customload:function(e,o){r.show({template:e,duration:o||1500,showBackdrop:!1})},loadcontacts:function(){r.show({animation:"fade-in",showBackdrop:!1,showDelay:0,template:'<div style="margin:0;" class="item-myicon"><ion-spinner icon="spiral" class="spinner-stable"></ion-spinner><div style="margin:0 0 0 5px;display:inline-block;height:34px;line-height:34px; vertical-align: top;">正在获取朋友信息</div></div>'}),o(function(){r.hide()},1e4)}}}]);
"use strict";angular.module("App").factory("JpushUtils",["enterViewLoad","$state","$rootScope","$timeout","$window","$localStorage",function(o,t,n,e,i,d){var a=function(){};return a.prototype={init:function(){document.addEventListener("deviceready",function(){window.JPush.init(),window.JPush.setDebugMode(!0)},!1),document.addEventListener("jpush.openNotification",function(o){if(window.JPush.isPlatformIOS())try{"p2p"==o.extras.scene?t.go("dialogBox",{id:o.extras.toId}):t.go("groupDialogBox",{id:o.extras.toId})}catch(o){}else try{"p2p"==o.extras.scene?t.go("dialogBox",{id:o.extras.toId}):t.go("groupDialogBox",{id:o.extras.toId})}catch(o){}},!1)},addLocalNotification:function(i){document.addEventListener("deviceready",function(){var o="p2p"===i.scene?i.fromNick||"房田用户":"群消息",t="p2p"===i.scene?i.text||i.tip||"收到一条消息":(i.fromNick||"房田用户")+":"+(i.text||i.tip||"收到一条消息"),e={scene:i.scene,toId:"p2p"===i.scene?i.from:i.to};window.JPush.isPlatformIOS()?window.JPush.addLocalNotificationForIOS(0,"p2p"===i.scene?(i.fromNick||"房田用户")+":"+t:(i.fromNick||"房田用户")+"(群消息):"+(i.text||i.tip||"收到一条消息"),n.notificationBadge||0,i.idServer,e):window.JPush.addLocalNotification(0,t,o,i.idServer,50,JSON.stringify(e))},!1)}},new a}]);
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};angular.module("App").factory("NimUtils",["JpushUtils","appUtils","enterViewLoad","$state","$rootScope","$timeout","$window","$localStorage",function(f,l,e,r,c,n,i,g){var o=function(){this.blacklist=[]};return o.prototype={init:function(e){var o={},s=this,t=window.nim=SDK.NIM.getInstance({debug:!1,appKey:"8aee74edb225d383078833387195792b",account:e.accid,token:e.token,db:!1,syncSessionUnread:!0,syncRobots:!0,autoMarkRead:!0,syncRoamingMsgs:!0,onconnect:function(){},onerror:function(e){},onwillreconnect:function(e){},ondisconnect:function(e){if(e)switch(e.code){case 302:break;case"kicked":r.go("tabs.perCenter"),l.resetLocalStorage(),s.clearData()}},onloginportschange:function(e){},onblacklist:function(e){s.blacklist=t.mergeRelations(s.blacklist,e),s.blacklist=t.cutRelations(s.blacklist,e.invalid)},onsyncmarkinblacklist:function(e){e.isAdd?(i=e,s.blacklist=t.mergeRelations(s.blacklist,i.record)):(n=e,s.blacklist=t.cutRelations(s.blacklist,n.record));var n;var i},onmutelist:function(e){o.mutelist=t.mergeRelations(o.mutelist,e),o.mutelist=t.cutRelations(o.mutelist,e.invalid)},onsyncmarkinmutelist:function(e){e.isAdd?(i=e,o.mutelist=t.mergeRelations(o.mutelist,i.record)):(n=e,o.mutelist=t.cutRelations(o.mutelist,n.record));var n;var i},onfriends:function(e){s.myFriends=t.mergeFriends(s.myFriends,e),s.myFriends=t.cutFriends(s.myFriends,e.invalid)},onsyncfriendaction:function(e){switch(e.type){case"addFriend":m(e.friend);break;case"applyFriend":break;case"passFriendApply":m(e.friend);break;case"rejectFriendApply":break;case"deleteFriend":i=e.account,s.myFriends=t.cutFriendsByAccounts(s.myFriends,i);break;case"updateFriend":n=e.friend,s.myFriends=t.mergeFriends(s.myFriends,n)}var n;var i},onmyinfo:function(e){if(!(s.myselfInfo=e).avatar||!e.nick){t.updateMyInfo({nick:g.myselfInfo.NickName,avatar:g.ShowImage||"http://imgs.wujiuyun.com//Images//logo.png",done:function(e,n){}})}},onupdatemyinfo:function(e){s.myselfInfo=NIM.util.merge(s.myselfInfo,e)},onusers:function(e){o.users=t.mergeUsers(o.users,e)},onupdateuser:function(e){o.users=t.mergeUsers(o.users,e)},onrobots:function(e){o.robots=e},onteams:function(e){s.myTeams=t.mergeTeams(s.myTeams,e),n=e.invalid,o.teams=t.cutTeams(o.teams,n),o.invalidTeams=t.mergeTeams(o.invalidTeams,n);var n},onsynccreateteam:function(e){s.myTeams=t.mergeTeams(s.myTeams,e),n({teamId:e.teamId,members:owner})},onUpdateTeam:function(e){},onteammembers:n,onupdateteammember:function(e){n({teamId:e.teamId,members:e})},onTeamMsgReceipt:function(e){},shouldCountNotifyUnread:function(e){},onsessions:function(e){s.sessionList=e,s.sessionList=t.mergeSessions(s.sessionList,e),s.setSessionUread(s.sessionList);for(var n=0;n<e.length;n++)"p2p"==e[n].scene&&s.sessionUsers.push(e[n].to);s.getSessionUsersInfo(s.sessionUsers,function(){})},onupdatesession:function(e){s.sessionList=t.mergeSessions(s.sessionList,e),s.setSessionUread(s.sessionList),"p2p"==e.scene&&s.sessionUsers.indexOf(e.to)<0&&s.sessionUsers.push(e.to);s.getSessionUsersInfo(s.sessionUsers,function(){c.$emit("updateSessions",s.sessionList)})},onroamingmsgs:function(e){i(e.msgs)},onofflinemsgs:function(e){i(e.msgs)},onmsg:function(e){"dialogBox"!=c.currentStateName&&"groupDialogBox"!=c.currentStateName&&f.addLocalNotification(e);c.$emit("RECEIVEMSG",e),"notification"!=e.type||"removeTeamMembers"!=e.attach.type&&"addTeamMembers"!=e.attach.type&&"updateTeam"!=e.attach.type||s.updateMyTeams();i(e)},onofflinesysmsgs:function(e){a(e)},onsysmsg:function(e){a(e);var n=function(){t.getFriends({done:function(e,n){e?err():s.myFriends=n}})};switch(e.type){case"applyFriend":break;case"passFriendApply":case"addFriend":case"deleteFriend":n();break;case"deleteMsg":c.$emit("DELETEMSG",e.msg)}},onupdatesysmsg:function(e){a(e)},onsysmsgunread:function(e){s.sysMsg.allSysMsgUnread=e.addFriend+e.applyFriend+e.passFriendApply+e.rejectFriendApply+e.teamInvite+e.rejectTeamInvite+e.deleteFriend},onupdatesysmsgunread:function(e){s.sysMsg.allSysMsgUnread=e.addFriend+e.applyFriend+e.passFriendApply+e.rejectFriendApply+e.teamInvite+e.rejectTeamInvite+e.deleteFriend},onofflinecustomsysmsgs:function(e){},oncustomsysmsg:function(e){},onbroadcastmsg:function(e){},onbroadcastmsgs:function(e){},onsyncdone:function(){}});function m(e){s.myFriends=t.mergeFriends(s.myFriends,e)}function n(e,n){}function i(e){Array.isArray(e)||(e=[e]);var n=e[0].sessionId;o.msgs=o.msgs||{},o.msgs[n]=t.mergeMsgs(o.msgs[n],e)}function a(e){s.sysMsg.allSysMsg=t.mergeSysMsgs(s.sysMsg.allSysMsg,e),c.$emit("SYSMSGUPDATE",s.sysMsg)}},isFriend:function(e){for(var n=this.myFriends,i=0;i<n.length;i++)if(n[i].account==e)return!0;return!1},isBlack:function(e){for(var n=this.blacklist,i=0;i<n.length;i++)if(n[i].account==e)return!0;return!1},sessionList:[],sessionUnread:0,setSessionUread:function(e){this.sessionUnread=0;for(var n=0;n<e.length;n++)this.sessionUnread=this.sessionUnread+e[n].unread;this.initBadge(this.sessionUnread)},myselfInfo:null,updateMyInfo:function(){var i=this;nim.getUser({account:this.myselfInfo.account,done:function(e,n){e||(i.myselfInfo=n)}})},myTeams:[],updateMyTeams:function(){nim.getTeams({done:function(e,n){e||(i.myTeams=n)}});var i=this},sessionUsers:[],sessionUsersInfo:{},getSessionUsersInfo:function(e,i){var o=this;o.getUsers({accounts:e,done:function(e,n){e||(n.map(function(e,n){try{"object"==_typeof(JSON.parse(e.custom))&&(e.custom=JSON.parse(e.custom))}catch(e){}o.sessionUsersInfo[e.account]=e}),i())}})},myFriends:[],myFriendsInfo:function(t,m){var i=this;nim.getFriends({done:function(e,n){e?m():o(n)}});var o=function(s){if(s.length<=0)t([]);else{for(var e=[],n=0;n<s.length;n++)e.push(s[n].account);i.getUsers({accounts:e,done:function(e,n){if(e)m();else{for(var i=0;i<s.length;i++)for(var o=0;o<n.length;o++)s[i].account==n[o].account&&(n[o].alias=s[i].alias||"");t(n)}}})}}},getUsers:function(o){var s=[],t=0;function e(e,i){nim.getUsers({accounts:e,done:function(e,n){e||(t++,s=s.concat(n),i<=t&&o.done(null,s))}})}for(var n=function(e){for(var n,i=[],o=0;o<e.length;o++)o%150==0&&(null!=n&&i.push(n),n=[]),n.push(e[o]);return i.push(n),i}(o.accounts),i=0;i<n.length;i++)e(n[i],n.length)},sysMsg:{allSysMsg:[],allSysMsgUnread:null},addFriend:function(e,i,o){nim.applyFriend({account:e,ps:this.myselfInfo.account+"加您为好友",done:function(e,n){e?o():i()}})},deleteFriend:function(e,i,o){nim.deleteFriend({account:e,done:function(e,n){e?o():i(n)}})},emojiList:function(){var e={"[大笑]":{file:"emoji_0.png"},"[可爱]":{file:"emoji_01.png"},"[色]":{file:"emoji_02.png"},"[嘘]":{file:"emoji_03.png"},"[亲]":{file:"emoji_04.png"},"[呆]":{file:"emoji_05.png"},"[口水]":{file:"emoji_06.png"},"[汗]":{file:"emoji_145.png"},"[呲牙]":{file:"emoji_07.png"},"[鬼脸]":{file:"emoji_08.png"},"[害羞]":{file:"emoji_09.png"},"[偷笑]":{file:"emoji_10.png"},"[调皮]":{file:"emoji_11.png"},"[可怜]":{file:"emoji_12.png"},"[敲]":{file:"emoji_13.png"},"[惊讶]":{file:"emoji_14.png"},"[流感]":{file:"emoji_15.png"},"[委屈]":{file:"emoji_16.png"},"[流泪]":{file:"emoji_17.png"},"[嚎哭]":{file:"emoji_18.png"},"[惊恐]":{file:"emoji_19.png"},"[怒]":{file:"emoji_20.png"},"[酷]":{file:"emoji_21.png"},"[不说]":{file:"emoji_22.png"},"[鄙视]":{file:"emoji_23.png"},"[阿弥陀佛]":{file:"emoji_24.png"},"[奸笑]":{file:"emoji_25.png"},"[睡着]":{file:"emoji_26.png"},"[口罩]":{file:"emoji_27.png"},"[努力]":{file:"emoji_28.png"},"[抠鼻孔]":{file:"emoji_29.png"},"[疑问]":{file:"emoji_30.png"},"[怒骂]":{file:"emoji_31.png"},"[晕]":{file:"emoji_32.png"},"[呕吐]":{file:"emoji_33.png"},"[拜一拜]":{file:"emoji_160.png"},"[惊喜]":{file:"emoji_161.png"},"[流汗]":{file:"emoji_162.png"},"[卖萌]":{file:"emoji_163.png"},"[默契眨眼]":{file:"emoji_164.png"},"[烧香拜佛]":{file:"emoji_165.png"},"[晚安]":{file:"emoji_166.png"},"[强]":{file:"emoji_34.png"},"[弱]":{file:"emoji_35.png"},"[OK]":{file:"emoji_36.png"},"[拳头]":{file:"emoji_37.png"},"[胜利]":{file:"emoji_38.png"},"[鼓掌]":{file:"emoji_39.png"},"[握手]":{file:"emoji_200.png"},"[发怒]":{file:"emoji_40.png"},"[骷髅]":{file:"emoji_41.png"},"[便便]":{file:"emoji_42.png"},"[火]":{file:"emoji_43.png"},"[溜]":{file:"emoji_44.png"},"[爱心]":{file:"emoji_45.png"},"[心碎]":{file:"emoji_46.png"},"[钟情]":{file:"emoji_47.png"},"[唇]":{file:"emoji_48.png"},"[戒指]":{file:"emoji_49.png"},"[钻石]":{file:"emoji_50.png"},"[太阳]":{file:"emoji_51.png"},"[有时晴]":{file:"emoji_52.png"},"[多云]":{file:"emoji_53.png"},"[雷]":{file:"emoji_54.png"},"[雨]":{file:"emoji_55.png"},"[雪花]":{file:"emoji_56.png"},"[爱人]":{file:"emoji_57.png"},"[帽子]":{file:"emoji_58.png"},"[皇冠]":{file:"emoji_59.png"},"[篮球]":{file:"emoji_60.png"},"[足球]":{file:"emoji_61.png"},"[垒球]":{file:"emoji_62.png"},"[网球]":{file:"emoji_63.png"},"[台球]":{file:"emoji_64.png"},"[咖啡]":{file:"emoji_65.png"},"[啤酒]":{file:"emoji_66.png"},"[干杯]":{file:"emoji_67.png"},"[柠檬汁]":{file:"emoji_68.png"},"[餐具]":{file:"emoji_69.png"},"[汉堡]":{file:"emoji_70.png"},"[鸡腿]":{file:"emoji_71.png"},"[面条]":{file:"emoji_72.png"},"[冰淇淋]":{file:"emoji_73.png"},"[沙冰]":{file:"emoji_74.png"},"[生日蛋糕]":{file:"emoji_75.png"},"[蛋糕]":{file:"emoji_76.png"},"[糖果]":{file:"emoji_77.png"},"[葡萄]":{file:"emoji_78.png"},"[西瓜]":{file:"emoji_79.png"},"[光碟]":{file:"emoji_80.png"},"[手机]":{file:"emoji_81.png"},"[电话]":{file:"emoji_82.png"},"[电视]":{file:"emoji_83.png"},"[声音开启]":{file:"emoji_84.png"},"[声音关闭]":{file:"emoji_85.png"},"[铃铛]":{file:"emoji_86.png"},"[锁头]":{file:"emoji_87.png"},"[放大镜]":{file:"emoji_88.png"},"[灯泡]":{file:"emoji_89.png"},"[锤头]":{file:"emoji_90.png"},"[烟]":{file:"emoji_91.png"},"[炸弹]":{file:"emoji_92.png"},"[枪]":{file:"emoji_93.png"},"[刀]":{file:"emoji_94.png"},"[药]":{file:"emoji_95.png"},"[打针]":{file:"emoji_96.png"},"[钱袋]":{file:"emoji_97.png"},"[钞票]":{file:"emoji_98.png"},"[银行卡]":{file:"emoji_99.png"},"[手柄]":{file:"emoji_100.png"},"[麻将]":{file:"emoji_101.png"},"[调色板]":{file:"emoji_102.png"},"[电影]":{file:"emoji_103.png"},"[麦克风]":{file:"emoji_104.png"},"[耳机]":{file:"emoji_105.png"},"[音乐]":{file:"emoji_106.png"},"[吉他]":{file:"emoji_107.png"},"[火箭]":{file:"emoji_108.png"},"[飞机]":{file:"emoji_109.png"},"[火车]":{file:"emoji_110.png"},"[公交]":{file:"emoji_111.png"},"[轿车]":{file:"emoji_112.png"},"[出租车]":{file:"emoji_113.png"},"[警车]":{file:"emoji_114.png"},"[自行车]":{file:"emoji_115.png"}};for(var n in e){var i=e[n];i.img="imgs/emoji/"+i.file}return e},clearData:function(){this.sessionList=[],this.sessionUnread=null,this.sysMsg.allSysMsg=[],this.sysMsg.allSysMsgUnread=null,this.clearBadge()},initBadge:function(e){document.addEventListener("deviceready",function(){cordova.plugins.notification.badge.set(e||0)},!1)},addBadge:function(){document.addEventListener("deviceready",function(){cordova.plugins.notification.badge.increase(1,function(e){})},!1)},reduceBadge:function(){document.addEventListener("deviceready",function(){cordova.plugins.notification.badge.decrease(1,function(e){})},!1)},clearBadge:function(){document.addEventListener("deviceready",function(){cordova.plugins.notification.badge.clear()},!1)}},new o}]);
"use strict";angular.module("App").directive("onFinishRenderFilters",["$timeout",function(i){return{restrict:"A",link:function(e,t,n){!0===e.$last&&i(function(){e.$emit("ngRepeatFinished")})}}}]).directive("repeatDone",function(){return function(e,t,n){e.$last&&e.$eval(n.repeatDone)}}).directive("carouselSlider",["$compile","$timeout","$rootScope",function(h,i,e){return{restrict:"A",scope:{volList:"=",charShow:"="},template:'<div class="slider-wrap"></div>',link:function(p){function e(){var f=angular.element,n=p.outWatcher.slideBox=document.querySelector(".slider-wrap"),g=p.outWatcher.sliderInner=document.createElement("ul");g.className="slider-wrap-inner",n.appendChild(g),p.magClick=function(e){},p.magClick=function(e){p.$emit("vipImgClickIndex",e)},p.$watch("volList",function(e){e&&e.length&&(g.innerHTML="",i(function(){!function(e,t){for(var n=0;n<e.length;n++){var i=document.createElement("li"),o=document.createElement("img"),r=document.createElement("div");r.className="img-wrap",n<6&&o.setAttribute("src",e[n].coverimg),r.appendChild(o),i.appendChild(r),i.setAttribute("on-tap",'magClick("'+e[n].index+'")'),f(g).append(f(i))}var l=h(f(g).html())(p);f(g).html(""),f(g).append(l);for(var c,a,u=g.querySelectorAll("li"),s=p.outWatcher.imgs=[],m=0;m<u.length;m++)if(m){var d=u[m].querySelector(".img-wrap");a=252/291,(c=d)&&(c.style.transform="scale("+a+")",c.style.webkitTransform="scale("+a+")"),s.push(d)}else s.push(u[0].querySelector(".img-wrap"));t&&angular.isFunction(t)&&t(s,e)}(e,function(e,t){(new MobileMove).setSwipe(n,g,e,t,function(e){p.$emit("scaleImgIndexChanged",e)})})}))})}p.outWatcher={},window.onresize=function(){(new MobileMove).setSwipe(p.outWatcher.slideBox,p.outWatcher.sliderInner,p.outWatcher.imgs,p.volList,function(e){p.$emit("scaleImgIndexChanged",e)})};var t=p.$watch("$viewContentLoaded",function(){e(),t()})}}}]).directive("resizeFootBar",["$ionicScrollDelegate","$timeout",function(r,l){return{replace:!1,link:function(e,o,t,n){e.$on("elastic:resize",function(e,i,t,n){i&&l(function(){var e=document.body.querySelector("#message-detail-content"),t=r.$getByHandle("dialog-message-scroll"),n=i[0].offsetHeight+10;n=44<n?n:44,o[0].style.height=n+"px",e.style.bottom=n+"px",t.scrollBottom()})})}}}]).directive("resizeGroupfootBar",["$ionicScrollDelegate","$timeout",function(r,l){return{replace:!1,link:function(e,o,t,n){e.$on("elastic:resize",function(e,i,t,n){i&&l(function(){var e=document.body.querySelector("#groupmessage-detail-content"),t=r.$getByHandle("groupdialog-message-scroll"),n=i[0].offsetHeight+10;n=44<n?n:44,o[0].style.height=n+"px",e.style.bottom=n+"px",t.scrollBottom()})})}}}]).directive("autolinker",["$timeout",function(n){return{restrict:"A",link:function(e,o,t){n(function(){var e=o.html();if(""===e)return!1;var t=Autolinker.link(e,{className:"autolinker",newWindow:!1});o.html(t);for(var n=o[0].getElementsByClassName("autolinker"),i=0;i<n.length;i++)angular.element(n[i]).bind("click",function(e){var t=e.target.href;return t&&window.open(t,"_blank"),e.preventDefault(),!1})},0)}}}]).directive("autofocus",["$timeout",function(n){return{restrict:"A",link:function(e,t){/iphone/i.test(navigator.userAgent)||/ipad/i.test(navigator.userAgent)||n(function(){t[0].focus()})}}}]);
"use strict";angular.module("App").filter("timeStamp",function(){return function(e){if(!e)return"";var t=new Date(e).getFullYear(),n=new Date(e).getMonth()+1,r=new Date(e).getDate(),i=new Date(e).getHours();if(new Date(e).getHours()<10)var u="0"+i;else u=i;var o=new Date(e).getMinutes();if(new Date(e).getMinutes()<10)var a="0"+o;else a=o;new Date(e).getSeconds();var f=(new Date).getFullYear(),l=(new Date).getMonth()+1,c=(new Date).getDate();(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds();return t==f&&n==l&&r==c?u+":"+a:t==f&&n==l&&r==c-1?"昨天"+u+":"+a:t==f&&n==l&&r==c-2?"前天"+u+":"+a:t==f?n+"-"+r:t+"-"+n+"-"+r}}).filter("dialogTimeStamp",function(){return function(e){if(!e)return"";var t=new Date(e).getFullYear(),n=new Date(e).getMonth()+1,r=new Date(e).getDate(),i=new Date(e).getHours();if(new Date(e).getHours()<10);else;var u=new Date(e).getMinutes();if(new Date(e).getMinutes()<10)var o="0"+u;else o=u;new Date(e).getSeconds();var a=(new Date).getFullYear(),f=(new Date).getMonth()+1,l=(new Date).getDate();(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds();return t==a&&n==f&&r==l?i+":"+o:t==a&&n==f&&r==l-1?"昨天"+i+":"+o:t==a&&n==f&&r==l-2?"前天"+i+":"+o:t==a?n+"-"+r+" "+i+":"+o:t+"-"+n+"-"+r+" "+i+":"+o}}).filter("positionFilter",function(){return function(e){return e?e.slice(0,e.indexOf("|")):""}}).filter("storeFilter",function(){return function(e){return e?e.slice(e.indexOf("|")+1,-1):""}}).filter("phoneStarFilter",function(){return function(e){return e?e.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"):""}}).filter("nl2br",["$filter",function(e){return function(e){return e?e.replace(/\n\r?/g,"<br />"):e}}]).filter("findphone",["$filter",function(e){return function(e){if(!e)return e;return function(e,t){var n=e.match(t);if(n&&0<n.length)for(var r=0;r<n.length;r++)e=e.replace(n[r],'<a href="tel:'+n[r]+'">'+n[r]+"</a>");return e}(e,/(1[3|4|5|7|8][\d]{9}|0[\d]{2,3}-[\d]{7,8}|400[-]?[\d]{3}[-]?[\d]{4})/g)}}]).filter("cardNoFilter",function(){return function(e){return e?e.slice(-4):""}}).filter("emojiFilter",["NimUtils",function(o){return function(e){var t=o.emojiList();for(var n in t){var r=t[n],i="\\["+n.slice(1,-1)+"\\]",u="<img src='"+r.img+"' alt=''>";e=e.replace(new RegExp(i,"g"),u)}return e}}]).filter("dialogTrustUrl",["$sce",function(t){return function(e){return t.trustAsResourceUrl(e)}}]).filter("dialogVideoTimeFilter",[function(){return function(e){if(6e4<=e){var t=parseInt(e/6e4);t<10&&(t="0"+t),(n=parseInt(e%6e4/1e3))<10&&(n="0"+n),e=t+":"+n}else{var n;(n=parseInt(e/1e3))<10&&(n="0"+n),e="00:"+n}return e}}]).filter("feeNumFilter",[function(){return function(e){return e?0<e?"+"+(e/100).toFixed(2):e<0?(e/100).toFixed(2):e.toFixed(2):(0).toFixed(2)}}]).filter("priceFilter",[function(){return function(e){return e?e.toFixed(2):(0).toFixed(2)}}]).filter("recordTimeFilter",[function(){return function(e){return e.replace(/T/,"/")}}]).filter("overTenThousandFilter",[function(){return function(e){return e<=1e4?e:parseInt(e/1e4)+"w+"}}]).filter("seconds_to_hhmmss",function(){function i(e){return 9<e?e:"0"+e}return function(e){if(e&&0<=e){var t=1<=(e=Number(e))/3600?Math.floor(e/3600):0,n=1<=(e-3600*t)/60?Math.floor((e-3600*t)/60):0,r=e-3600*t-60*n;return i(t)+":"+i(n)+":"+i(r)}return"00:00:00"}}).filter("highlight",["$sce","$log",function(i,u){return function(e,t){if(u.info("text: "+e),u.info("search: "+t),!t)return i.trustAsHtml(e);e=encodeURI(e),t=encodeURI(t);var n=new RegExp(t,"gi"),r=e.replace(n,'<span class="highlightedText">$&</span>');return r=decodeURI(r),u.info("result: "+r),i.trustAsHtml(r)}}]);